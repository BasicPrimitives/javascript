<!DOCTYPE html>
<html style="height: 95%">

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Basic Primitives Diagrams PDFKit Plugin Matrix Children Layout Demo</title>
  <script type="text/javascript" src="../../pdfkitsamples.js"></script>
  <script type="text/javascript" src="../../primitives.js"></script>
  <script type="text/javascript" src="../data/editordata.js"></script>

  <script type='text/javascript'>
    var control;
    var timer = null;
    var photos = pdfkitsamples.photos;
    var PDFDocument = pdfkitsamples.PDFDocument;
    var blobStream = pdfkitsamples.blobStream;

    function getUserData(data) {
      var index, len;
      for (index = 0, len = data.length; index < len; index += 1) {
        var item = data[index];
        var imageName = (item.image.match(/.*(.+?)\.png/m) || [])[1];
        item.image = photos[imageName];
      }
      return data
    }

    document.addEventListener('DOMContentLoaded', function () {
      var sample3 = primitives.OrgDiagramPdfkit({
        items: (getUserData(data)),
        annotations: [
        {
            annotationType: primitives.AnnotationType.Level,
            levels: [0],
            title: "CEO",
            titleColor: primitives.Colors.RoyalBlue,
            offset: new primitives.Thickness(0, 0, 0, -5),
            lineWidth: new primitives.Thickness(0, 0, 0, 0),
            opacity: 0,
            borderColor: primitives.Colors.Gray,
            fillColor: primitives.Colors.Gray,
            lineType: primitives.LineType.Dotted
          },
          {
            annotationType: primitives.AnnotationType.Level,
            levels: [1],
            title: "Management",
            titleColor: primitives.Colors.RoyalBlue,
            offset: new primitives.Thickness(0, 4, 0, -15),
            lineWidth: new primitives.Thickness(0, 0, 0, 0),
            opacity: 0.08,
            borderColor: primitives.Colors.Gray,
            fillColor: primitives.Colors.Gray,
            lineType: primitives.LineType.Dotted
          },
          {
            annotationType: primitives.AnnotationType.Level,
            levels: [2],
            title: "Grade 1",
            titleColor: primitives.Colors.RoyalBlue,
            offset: new primitives.Thickness(0, 14, 0, -1),
            lineWidth: new primitives.Thickness(0, 0, 0, 0),
            opacity: 0,
            borderColor: primitives.Colors.Gray,
            fillColor: primitives.Colors.Gray,
            lineType: primitives.LineType.Dotted
          },
          {
            annotationType: primitives.AnnotationType.Level,
            levels: [3],
            title: "Grade 2",
            titleColor: primitives.Colors.RoyalBlue,
            offset: new primitives.Thickness(0, 0, 0, -1),
            lineWidth: new primitives.Thickness(0, 0, 0, 0),
            opacity: 0.08,
            borderColor: primitives.Colors.Gray,
            fillColor: primitives.Colors.Gray,
            lineType: primitives.LineType.Dotted
          },
          {
            annotationType: primitives.AnnotationType.Level,
            levels: [4],
            title: "Grade 3",
            titleColor: primitives.Colors.RoyalBlue,
            offset: new primitives.Thickness(0, 0, 0, -1),
            lineWidth: new primitives.Thickness(0, 0, 0, 0),
            opacity: 0,
            borderColor: primitives.Colors.Gray,
            fillColor: primitives.Colors.Gray,
            lineType: primitives.LineType.Dotted
          },
          {
            annotationType: primitives.AnnotationType.Level,
            levels: [5],
            title: "Grade 4",
            titleColor: primitives.Colors.RoyalBlue,
            offset: new primitives.Thickness(0, 0, 0, -1),
            lineWidth: new primitives.Thickness(0, 0, 0, 0),
            opacity: 0.08,
            borderColor: primitives.Colors.Gray,
            fillColor: primitives.Colors.Gray,
            lineType: primitives.LineType.Dotted
          },
          {
            annotationType: primitives.AnnotationType.Level,
            levels: [6],
            title: "Regular Members",
            titleColor: primitives.Colors.RoyalBlue,
            offset: new primitives.Thickness(0, 0, 0, -1),
            lineWidth: new primitives.Thickness(0, 0, 0, 0),
            opacity: 0,
            borderColor: primitives.Colors.Gray,
            fillColor: primitives.Colors.Gray,
            lineType: primitives.LineType.Dotted
          }
        ],
        cursorItem: null,
        hasSelectorCheckbox: primitives.Enabled.False,
        /* Layout */
        pageFitMode: primitives.PageFitMode.FitToPage,
        orientationType: primitives.OrientationType.Top,
        verticalAlignment: primitives.VerticalAlignmentType.Middle,
        horizontalAlignment: primitives.HorizontalAlignmentType.Center,
        childrenPlacementType: primitives.ChildrenPlacementType.Horizontal,
        leavesPlacementType: primitives.ChildrenPlacementType.Matrix,
        maximumColumnsInMatrix: 6,
        minimalVisibility: primitives.Visibility.Dot,
        selectionPathMode: primitives.SelectionPathMode.FullStack,

        hasButtons: primitives.Enabled.Auto,
        hasSelectorCheckbox: primitives.Enabled.True,
        selectCheckBoxLabel: "Selected",
        itemTitleFirstFontColor: primitives.Colors.White,
        itemTitleSecondFontColor: primitives.Colors.White,
        buttonsPanelSize: 32,
        checkBoxPanelSize: 24,

        /* group title options */
        groupTitlePlacementType: primitives.AdviserPlacementType.Left,
        groupTitlePanelSize: 24,
        groupTitleOrientation: primitives.TextOrientationType.RotateRight,
        groupTitleVerticalAlignment: primitives.VerticalAlignmentType.Middle,
        groupTitleHorizontalAlignment: primitives.HorizontalAlignmentType.Center,
        groupTitleFontSize: "12px",
        groupTitleFontFamily: "Arial",
        groupTitleColor: primitives.Colors.RoyalBlue,
        groupTitleFontWeight: "normal",
        groupTitleFontStyle: "normal",

        /* level title options */
        levelTitlePlacementType: primitives.AdviserPlacementType.Left,
        levelTitlePanelSize: 24,
        levelTitlePlaceInside: false,
        levelTitleOrientation: primitives.TextOrientationType.Auto,
        levelTitleVerticalAlignment: primitives.VerticalAlignmentType.Middle,
        levelTitleHorizontalAlignment: primitives.HorizontalAlignmentType.Center,
        levelTitleFontSize: "12px",
        levelTitleFontFamily: "Arial",
        levelTitleFontColor: primitives.Colors.White,
        levelTitleColor: primitives.Colors.RoyalBlue,
        levelTitleFontWeight: "normal",
        levelTitleFontStyle: "normal",

        /* Intervals */
        normalLevelShift: 20,
        dotLevelShift: 16,
        lineLevelShift: 10,
        normalItemsInterval: 20,
        dotItemsInterval: 10,
        lineItemsInterval: 5,
        cousinsIntervalMultiplier: 5,

        /* Connectors */
        arrowsDirection: primitives.GroupByType.None,
        showExtraArrows: false,
        extraArrowsMinimumSpace: 30,
        connectorType: primitives.ConnectorType.Squared,
        elbowType: primitives.ElbowType.None,
        bevelSize: 4,
        elbowDotSize: 4,
        linesType: primitives.LineType.Solid,
        linesColor: primitives.Colors.Silver,
        linesWidth: 1,

        /* Labels */
        showLabels: primitives.Enabled.True,
        labelSize: new primitives.Size(10, 24),
        labelOrientation: primitives.TextOrientationType.Horizontal,
        labelPlacement: primitives.PlacementType.Top,
        labelOffset: 1,
        labelFontSize: "10px",
        labelFontFamily: "Arial",
        labelColor: primitives.Colors.Black,
        labelFontWeight: "normal",
        labelFontStyle: "normal",

        /* Callout */
        calloutMaximumVisibility: primitives.Visibility.Dot,
        showCallout: true,
        calloutPlacementOffset: 100,
        calloutfillColor: "#000000",
        calloutBorderColor: null,
        calloutOffset: 4,
        calloutCornerRadius: 4,
        calloutPointerWidth: "10%",
        calloutLineWidth: 1,
        calloutOpacity: 0.2,

        /* Interactivity */
        navigationMode: primitives.NavigationMode.Default,
        highlightGravityRadius: 40,
        enablePanning: true,
        scale: 1.0
      });

      var sample3size = sample3.getSize();

      var doc = new PDFDocument({ size: [sample3size.width + 100, sample3size.height + 150] });
      var stream = doc.pipe(blobStream());

      doc.save();

      // draw some text
      doc.fontSize(25)
        .text('Basic Primitives Diagrams PDFKit Plugin Matrix Children Layout Demo', 50, 50);

      sample3.draw(doc, 50, 100);

      doc.restore();

      doc.end();

      stream.on('finish', function () {
        var string = stream.toBlobURL('application/pdf');
        document.getElementById("previewpanel").setAttribute("src", string);
      });
    });

  </script>
</head>

<body style="height: 100%">
  <div id="basicdiagram" style="width: 100%; height: 100%; border-style: none; border-width: 0px;">
    <iframe id="previewpanel" type="application/pdf" width="100%" height="100%" frameborder="0"
      style="position:relative;z-index:999">
    </iframe>
  </div>
</body>

</html>