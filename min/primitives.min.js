/*
 Basic Primitives Diagrams v5.5.0
 Copyright (c) 2013 - 2019 Basic Primitives Inc

 Non-commercial - Free
 http://creativecommons.org/licenses/by-nc/3.0/

 Commercial and government licenses:
 http://www.basicprimitives.com/pdf/license.pdf

*/
(function(a,M){"function"===typeof define&&define.amd?define([],function(){return a.primitives=M()}):"object"===typeof module&&module.exports?module.exports=a.primitives=M():a.primitives=M()})(this,function(){var a={common:{version:"5.5.0"},orgdiagram:{},famdiagram:{},text:{},callout:{},connector:{},shape:{},pdf:{orgdiagram:{},famdiagram:{}}};a.common.getElementsByName=function(a,b,d,c){for(var b=b.getElementsByTagName("*"),f=0;f<b.length;f+=1){var e=b[f];e.name==d&&c.call(a,e)}};a.common.getFixOfPixelALignment=
function(g){var b=g.getBoundingClientRect(),g=b.top+document.body.scrollTop,b=b.left+document.body.scrollLeft;return new a.common.Size(-b+Math.floor(b),-g+Math.floor(g))};a.common.getElementOffset=function(a){var b=a.getBoundingClientRect(),a=a.ownerDocument.documentElement;return{top:b.top+window.pageYOffset-a.clientTop,left:b.left+window.pageXOffset-a.clientLeft}};a.common.hasClass=function(a,b){var d=a.className;if(null!=d&&"string"==typeof d)for(var d=d.split(" "),c=0;c<d.length;c+=1)if(d[c]==
b)return!0;return!1};a.common.stopPropagation=function(a){void 0!==a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble?a.cancelBubble=!0:void 0!==a.preventDefault&&a.preventDefault()};a.common.getInnerSize=function(g){g=window.getComputedStyle(g);return new a.common.Size(parseInt(g.width,10),parseInt(g.height,10))};a.common.isEven=function(a){return 0==a%2};a.common.isNullOrEmpty=function(a){var b=!0;void 0!==a&&null!==a&&(a=a.toString(),0<a.length&&(b=!1));return b};a.common.isArray=Array.isArray||
function(a){return a instanceof Array};a.common.loop=function(g,b,d){var c,f;if(null!=d)if(a.common.isArray(b)){c=0;for(f=b.length;c<f&&!d.call(g,c,b[c]);c+=1);}else for(c in b)if(b.hasOwnProperty(c)&&d.call(g,c,b[c]))break};a.common.splitCamelCaseName=function(a){for(var b=[],d="",c=0;c<a.length;c+=1){var f=a[c];"A"<=f&&"Z">=f?(""!==d&&b.push(d),d=f):d+=f}""!==d&&b.push(d);return b};a.common.isObject=function(a){return null!==a&&"object"==typeof a};a.common.isEmptyObject=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;
return!0};a.common.cloneObject=function(g,b){var d;if(null===g)d=null;else if(g instanceof Array)if(b)d=g.slice(0);else{d=[];for(var c=0,f=g.length;c<f;c+=1)d.push(a.common.cloneObject(g[c],b))}else switch(typeof g){case "object":d={};for(c in g)g.hasOwnProperty(c)&&(d[c]=b?g[c]:a.common.cloneObject(g[c],b));break;default:d=g}return d};a.common.mergeObjects=function(a,b){for(var d=1;d<arguments.length;d+=1){var c=arguments[d];if(null!=c)for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f])}return a};a.common.hashCode=
function(a){var b=0,d,c;if(0<a.length)for(c=0;c<a.length;c+=1)d=a.charCodeAt(c),b=(b<<5)-b+d,b&=b;return b};a.common.indexOf=function(a,b,d){var c,f;for(c=0;c<a.length;c+=1)if(f=a[c],null!=d?d(f,b):f==b)return c;return-1};a.common._supportsSVG=null;a.common.supportsSVG=function(){null===a.common._supportsSVG&&(a.common._supportsSVG=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape",
"1.0"));return a.common._supportsSVG};a.common._supportsCanvas=null;a.common.supportsCanvas=function(){null===a.common._supportsCanvas&&(a.common._supportsCanvas=!!window.HTMLCanvasElement);return a.common._supportsCanvas};a.common.createGraphics=function(g,b){var d=null,c,f;c=[g];for(f in a.common.GraphicsType)a.common.GraphicsType.hasOwnProperty(f)&&c.push(a.common.GraphicsType[f]);for(f=0;null===d&&f<c.length;f+=1)switch(c[f]){case 0:a.common.supportsSVG()&&(d=new a.common.SvgGraphics(b));break;
case 1:a.common.supportsCanvas()&&(d=new a.common.CanvasGraphics(b))}return d};a.common.isChrome=function(){return null!=navigator?/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor):!1};a.common.getColorHexValue=function(g){var b,d,c;if("#"===g.substr(0,1))return g;b=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(g);if(null!==b&&0<b.length)return g=parseInt(b[2],10),d=parseInt(b[3],10),c=parseInt(b[4],10),g=(g<<16|d<<8|c).toString(16),b[1]+"000000".substr(0,6-g.length)+g;if(void 0===
a.common.ColorHexs)for(d in a.common.ColorHexs={},a.common.Colors)a.common.Colors.hasOwnProperty(d)&&(a.common.ColorHexs[d.toUpperCase()]=a.common.Colors[d]);return a.common.ColorHexs[g.toUpperCase()]};a.common.getColorName=function(g){var b,g=a.common.getColorHexValue(g);if(void 0===a.common.ColorNames)for(b in a.common.ColorNames={},a.common.Colors)a.common.Colors.hasOwnProperty(b)&&(a.common.ColorNames[a.common.Colors[b]]=b);return a.common.ColorNames[g]};a.common.getRed=function(a){return"#"===
a.substr(0,1)&&7===a.length?parseInt(a.substr(1,2),16):null};a.common.getGreen=function(a){return"#"===a.substr(0,1)&&7===a.length?parseInt(a.substr(3,2),16):null};a.common.getBlue=function(a){return"#"===a.substr(0,1)&&7===a.length?parseInt(a.substr(5,2),16):null};a.common.beforeOpacity=function(g,b){var d=a.common,c,f,g=d.getColorHexValue(g);c=Math.ceil((d.getRed(g)-255*(1-b))/b);f=Math.ceil((d.getGreen(g)-255*(1-b))/b);d=Math.ceil((d.getBlue(g)-255*(1-b))/b);c=(c<<16|f<<8|d).toString(16);return"#"+
"000000".substr(0,6-c.length)+c};a.common.highestContrast=function(g,b,d){var c=b,f=a.common,e=g+","+b+","+d;void 0===f.highestContrasts&&(f.highestContrasts={});f.highestContrasts.hasOwnProperty(e)?c=f.highestContrasts[e]:(f.luminosity(b,g)<f.luminosity(d,g)&&(c=d),f.highestContrasts[e]=c);return c};a.common.luminosity=function(g,b){var d=a.common,c=d.getColorHexValue(g),f=d.getColorHexValue(b),c=0.2126*Math.pow(d.getRed(c)/255,2.2)+0.7152*Math.pow(d.getRed(c)/255,2.2)+0.0722*Math.pow(d.getRed(c)/
255,2.2),d=0.2126*Math.pow(d.getRed(f)/255,2.2)+0.7152*Math.pow(d.getRed(f)/255,2.2)+0.0722*Math.pow(d.getRed(f)/255,2.2);return c>d?(c+0.05)/(d+0.05):(d+0.05)/(c+0.05)};a.common.compareArrays=function(a,b,d){var c=!0,f,e,h,i;if(a.length!=b.length)c=!1;else{i={};f=0;for(e=a.length;f<e;f+=1)h=null!=d?d(a[f]):a[f],i[h]=i.hasOwnProperty(h)?i[h]+1:1;f=0;for(e=b.length;f<e;f+=1)if(h=null!=d?d(b[f]):b[f],i.hasOwnProperty(h)){if(i[h]-=1,0>i[h]){c=!1;break}}else{c=!1;break}}return c};a.common.JsonML={};if("undefined"!==
typeof document){var M=a.common.JsonML,K=document,Y=function(a){this.value=a},Z=function(a){return"function"===typeof a},R=function(a){switch(typeof a){case "object":return!a?0:W(a)?2:$(a)?5:a instanceof Date?4:3;case "function":return 1;case "undefined":return 0;default:return 4}},la={accesskey:"accessKey",bgcolor:"bgColor",cellpadding:"cellPadding",cellspacing:"cellSpacing",checked:"defaultChecked","class":"className",colspan:"colSpan",contenteditable:"contentEditable",defaultchecked:"defaultChecked",
"for":"htmlFor",formnovalidate:"formNoValidate",hidefocus:"hideFocus",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",readonly:"readOnly",rowspan:"rowSpan",spellcheck:"spellCheck",tabindex:"tabIndex",usemap:"useMap",willvalidate:"willValidate"},S={enctype:"encoding",onscroll:"DOMMouseScroll"},ma={autocapitalize:1,autocomplete:1,autocorrect:1},na={async:1,autofocus:1,checked:1,defaultchecked:1,defer:1,disabled:1,formnovalidate:1,hidden:1,indeterminate:1,ismap:1,multiple:1,novalidate:1,
readonly:1,required:1,spellcheck:1,willvalidate:1},oa=/^[\r\n]+/,pa=/[\r\n]+$/;Y.prototype.toString=function(){return this.value};M.raw=function(a){return new Y(a)};var $=M.isRaw=function(a){return a instanceof Y},W=Array.isArray||function(a){return a instanceof Array},O=function(a){if(a){if("!"===a.charAt(0))return K.createComment("!"===a?"":a.substr(1)+" ")}else{if(K.createDocumentFragment)return K.createDocumentFragment();a=""}return"style"===a.toLowerCase()&&K.createStyleSheet?K.createStyleSheet():
K.createElement(a)},ea=function(a,b,d){"on"===b.substr(0,2)&&(b=b.substr(2));switch(typeof d){case "function":if(a.addEventListener)a.addEventListener(b,d,!1);else if(a.attachEvent&&0!==R(a[b]))a.attachEvent("on"+b,d);else{var c=a["on"+b]||a[b];a["on"+b]=a[b]=!Z(c)?d:function(a){return!1!==c.call(this,a)&&!1!==d.call(this,a)}}break;case "string":a["on"+b]=new Function("event",d)}},qa=M.applyStyles=function(a,b){for(var d in b)b.hasOwnProperty(d)&&(a.style[d]=b[d]);return a},X=M.appendDOM=function(a,
b){if(b){var d=(a.tagName||"").toLowerCase();if(8===a.nodeType)3===b.nodeType&&(a.nodeValue+=b.nodeValue);else if("table"===d&&a.tBodies)if(b.tagName)if((d=b.tagName.toLowerCase())&&"tbody"!==d&&"thead"!==d){var c=0<a.tBodies.length?a.tBodies[a.tBodies.length-1]:null;c||(c=O("th"===d?"thead":"tbody"),a.appendChild(c));c.appendChild(b)}else!1!==a.canHaveChildren&&a.appendChild(b);else{if(11===b.nodeType)for(;b.firstChild;)X(a,b.removeChild(b.firstChild))}else if("style"===d&&K.createStyleSheet)a.cssText=
b;else if(!1!==a.canHaveChildren)a.appendChild(b);else if("object"===d&&b.tagName&&"param"===b.tagName.toLowerCase()){try{a.appendChild(b)}catch(f){}try{a.object&&(a.object[b.name]=b.value)}catch(e){}}}},fa=function(a){return!!a&&3===a.nodeType&&(!a.nodeValue||!/\S/.exec(a.nodeValue))},ga=function(a,b){a&&(3===a.nodeType&&b.exec(a.nodeValue))&&(a.nodeValue=a.nodeValue.replace(b,""))},aa=function(a){if(a){for(;fa(a.firstChild);)a.removeChild(a.firstChild);for(ga(a.firstChild,oa);fa(a.lastChild);)a.removeChild(a.lastChild);
ga(a.lastChild,pa)}},ha=function(a){var b=O("div");b.innerHTML=""+a;aa(b);if(1===b.childNodes.length)return b.firstChild;for(a=O("");b.firstChild;)a.appendChild(b.firstChild);return a},ra=function(a){return K.createTextNode("["+a+"]")};M.onerror=null;var ia=M.patch=function(a,b,d){for(var c=1;c<b.length;c+=1)if(W(b[c])||"string"===typeof b[c])X(a,ba(b[c],d));else if($(b[c]))X(a,ha(b[c].value));else if("object"===typeof b[c]&&null!==b[c]&&1===a.nodeType){var f=b[c];if(f.name&&K.attachEvent&&!a.parentNode)try{var e=
O("<"+a.tagName+' name="'+f.name+'">');a.tagName===e.tagName&&(a=e)}catch(h){}var i=void 0;for(i in f)if(f.hasOwnProperty(i)){var j=f[i],k=R(j);if(i)if(0===k&&(j="",k=4),i=la[i.toLowerCase()]||i,"$"===i)j(a);else if("className"==i)if(W(j))for(k=0;k<j.length;k+=1)a.className+=" "+j[k];else a.className+=" "+j;else"style"===i?0!==R(a.style.cssText)?"string"==typeof j?a.style.cssText=j:qa(a,j):a.style=j:"on"===i.substr(0,2)?(ea(a,i,j),(i=S[i])&&ea(a,i,j)):!ma[i.toLowerCase()]&&(4!==k||"$"===i.charAt(0)||
0!==R(a[i])||0!==R(a[S[i]]))?(a[i]=j,(i=S[i])&&(a[i]=j)):na[i.toLowerCase()]?j&&(a.setAttribute(i,i),(i=S[i])&&a.setAttribute(i,i)):(a.setAttribute(i,j),(i=S[i])&&a.setAttribute(i,j))}}return a},ba=M.toHTML=function(a,b){try{if(!a)return null;if("string"===typeof a)return K.createTextNode(a);if($(a))return ha(a.value);if(!W(a)||"string"!==typeof a[0])throw new SyntaxError("invalid JsonML");var d=a[0];if(!d){for(var c=O(""),d=1;d<a.length;d+=1)X(c,ba(a[d],b));aa(c);return 1===c.childNodes.length?c.firstChild:
c}if("style"===d.toLowerCase()&&K.createStyleSheet)return ia(K.createStyleSheet(),a,b),null;var f=ia(O(d),a,b);aa(f);return f&&Z(b)?b(f):f}catch(e){try{return(Z(M.onerror)?M.onerror:ra)(e,a,b)}catch(h){return K.createTextNode("["+h+"]")}}};M.toHTMLText=function(a,b){var d=ba(a,b);if(d.outerHTML)return d.outerHTML;var c=O("div");c.appendChild(d);var f=c.innerHTML;c.removeChild(d);return f}}a.common.AdviserPlacementType={Auto:0,Left:2,Right:3};a.orgdiagram.AdviserPlacementType=a.common.AdviserPlacementType;
a.common.AnnotationType={Connector:0,Shape:1,HighlightPath:2,Label:3,Background:4};a.common.ChildrenPlacementType={Auto:0,Vertical:1,Horizontal:2,Matrix:3};a.orgdiagram.ChildrenPlacementType=a.common.ChildrenPlacementType;a.common.Colors={AliceBlue:"#f0f8ff",AntiqueWhite:"#faebd7",Aqua:"#00ffff",Aquamarine:"#7fffd4",Azure:"#f0ffff",Beige:"#f5f5dc",Bisque:"#ffe4c4",Black:"#000000",BlanchedAlmond:"#ffebcd",Blue:"#0000ff",BlueViolet:"#8a2be2",Brown:"#a52a2a",BurlyWood:"#deb887",Bronze:"#cd7f32",CadetBlue:"#5f9ea0",
ChartReuse:"#7fff00",Chocolate:"#d2691e",Coral:"#ff7f50",CornflowerBlue:"#6495ed",Cornsilk:"#fff8dc",Crimson:"#dc143c",Cyan:"#00ffff",DarkBlue:"#00008b",DarkCyan:"#008b8b",DarkGoldenrod:"#b8860b",DarkGray:"#a9a9a9",DarkGreen:"#006400",DarkKhaki:"#bdb76b",DarkMagenta:"#8b008b",DarkOliveGreen:"#556b2f",Darkorange:"#ff8c00",DarkOrchid:"#9932cc",DarkRed:"#8b0000",DarkSalmon:"#e9967a",DarkSeaGreen:"#8fbc8f",DarkSlateBlue:"#483d8b",DarkSlateGray:"#2f4f4f",DarkTurquoise:"#00ced1",DarkViolet:"#9400d3",DeepPink:"#ff1493",
DeepSkyBlue:"#00bfff",DimGray:"#696969",DodgerBlue:"#1e90ff",FireBrick:"#b22222",FloralWhite:"#fffaf0",ForestGreen:"#228b22",Fuchsia:"#ff00ff",Gainsboro:"#dcdcdc",GhostWhite:"#f8f8ff",Gold:"#ffd700",Goldenrod:"#daa520",Gray:"#808080",Green:"#008000",GreenYellow:"#adff2f",Honeydew:"#f0fff0",Hotpink:"#ff69b4",IndianRed:"#cd5c5c",Indigo:"#4b0082",Ivory:"#fffff0",Khaki:"#f0e68c",Lavender:"#e6e6fa",LavenderBlush:"#fff0f5",Lawngreen:"#7cfc00",Lemonchiffon:"#fffacd",LightBlue:"#add8e6",LightCoral:"#f08080",
LightCyan:"#e0ffff",LightGoldenrodYellow:"#fafad2",LightGray:"#d3d3d3",LightGreen:"#90ee90",LightPink:"#ffb6c1",LightSalmon:"#ffa07a",LightSeaGreen:"#20b2aa",LightSkyBlue:"#87cefa",LightSlateGray:"#778899",LightSteelBlue:"#b0c4de",LightYellow:"#ffffe0",Lime:"#00ff00",Limegreen:"#32cd32",Linen:"#faf0e6",Magenta:"#ff00ff",Maroon:"#800000",MediumAquamarine:"#66cdaa",MediumBlue:"#0000cd",MediumOrchid:"#ba55d3",MediumPurple:"#9370d8",MediumSeaGreen:"#3cb371",MediumSlateBlue:"#7b68ee",MediumSpringGreen:"#00fa9a",
MediumTurquoise:"#48d1cc",MediumVioletRed:"#c71585",MidnightBlue:"#191970",MintCream:"#f5fffa",MistyRose:"#ffe4e1",Moccasin:"#ffe4b5",NavajoWhite:"#ffdead",Navy:"#000080",Oldlace:"#fdf5e6",Olive:"#808000",Olivedrab:"#6b8e23",Orange:"#ffa500",OrangeRed:"#ff4500",Orchid:"#da70d6",PaleGoldenRod:"#eee8aa",PaleGreen:"#98fb98",PaleTurquoise:"#afeeee",PaleVioletRed:"#d87093",Papayawhip:"#ffefd5",Peachpuff:"#ffdab9",Peru:"#cd853f",Pink:"#ffc0cb",Plum:"#dda0dd",PowderBlue:"#b0e0e6",Purple:"#800080",Red:"#ff0000",
RosyBrown:"#bc8f8f",RoyalBlue:"#4169e1",SaddleBrown:"#8b4513",Salmon:"#fa8072",SandyBrown:"#f4a460",SeaGreen:"#2e8b57",Seashell:"#fff5ee",Sienna:"#a0522d",Silver:"#c0c0c0",SkyBlue:"#87ceeb",SlateBlue:"#6a5acd",SlateGray:"#708090",Snow:"#fffafa",SpringGreen:"#00ff7f",SteelBlue:"#4682b4",Tan:"#d2b48c",Teal:"#008080",Thistle:"#d8bfd8",Tomato:"#ff6347",Turquoise:"#40e0d0",Violet:"#ee82ee",Wheat:"#f5deb3",White:"#ffffff",WhiteSmoke:"#f5f5f5",Yellow:"#ffff00",YellowGreen:"#9acd32"};a.common.ConnectorLabelPlacementType=
{From:0,Between:1,To:2};a.common.ConnectorPlacementType={Offbeat:0,Straight:1};a.common.ConnectorShapeType={OneWay:0,TwoWay:1,BothWay:2};a.common.ConnectorStyleType={Extra:0,Regular:1,Highlight:2};a.common.ConnectorType={Squared:0,Angular:1,Curved:2};a.orgdiagram.ConnectorType=a.common.ConnectorType;a.common.ElbowType={None:0,Dot:1,Bevel:2,Round:3};a.common.Enabled={Auto:0,True:1,False:2};a.common.GraphicsType={SVG:0,Canvas:1};a.common.GroupByType={None:0,Parents:1,Children:2};a.common.HorizontalAlignmentType=
{Center:0,Left:1,Right:2};a.orgdiagram.ItemType={Regular:0,Adviser:2,Assistant:1,SubAssistant:4,SubAdviser:5,GeneralPartner:6,LimitedPartner:7,AdviserPartner:8};a.common.LabelType={Regular:0,Dummy:1,Fixed:2,None:3};a.common.Layers={BackgroundAnnotation:2,BackgroundAnnotations:3,BackgroundConnectorAnnotation:4,BackgroundHighlightPathAnnotations:5,Connector:6,ForegroundHighlightPathAnnotations:7,Highlight:8,Marker:9,Label:10,Cursor:11,Item:12,ForegroundAnnotations:13,ForegroundConnectorAnnotation:14,
Annotation:15,Controls:16};a.common.LineType={Solid:0,Dotted:1,Dashed:2};a.common.NavigationMode={Default:0,CursorOnly:1,HighlightOnly:3,Inactive:2};a.common.NeighboursSelectionMode={ParentsAndChildren:0,ParentsChildrenSiblingsAndSpouses:1};a.common.OrientationType={Top:0,Bottom:1,Left:2,Right:3,None:4};a.orgdiagram.OrientationType=a.common.OrientationType;a.common.PageFitMode={None:0,PageWidth:1,PageHeight:2,FitToPage:3,AutoSize:5,SelectionOnly:6};a.orgdiagram.PageFitMode=a.common.PageFitMode;a.common.PlacementType=
{Auto:0,TopLeft:8,Top:1,TopRight:2,RightTop:11,Right:3,RightBottom:12,BottomRight:4,Bottom:5,BottomLeft:6,LeftBottom:10,Left:7,LeftTop:9};a.common.RenderingMode={Create:0,Update:1};a.common.SegmentType={Line:0,Move:1,QuadraticArc:2,CubicArc:3,Dot:4};a.common.SelectionPathMode={None:0,FullStack:1};a.orgdiagram.SelectionPathMode=a.common.SelectionPathMode;a.common.ShapeType={Rectangle:0,Oval:1,Triangle:2,CrossOut:3,Circle:4,Rhombus:5,Wedge:7,FramedOval:8,FramedTriangle:9,FramedWedge:10,FramedRhombus:11,
None:6};a.common.SideFlag={Top:1,Right:2,Bottom:4,Left:8};a.text.TextOrientationType={Horizontal:0,RotateLeft:1,RotateRight:2,Auto:3};a.common.UpdateMode={Recreate:0,Refresh:1,PositonHighlight:2};a.orgdiagram.UpdateMode=a.common.UpdateMode;a.common.VectorRelationType={None:0,Null:1,Collinear:2,Opposite:3};a.common.VerticalAlignmentType={Top:0,Middle:1,Bottom:2};a.common.Visibility={Auto:0,Normal:1,Dot:2,Line:3,Invisible:4};a.common.ZOrderType={Auto:0,Background:1,Foreground:2};a.common.RenderEventArgs=
function(){this.renderingMode=this.templateName=this.context=this.element=this.id=null;this.isSelected=this.isCursor=!1};a.common.BaseShape=function(){};a.common.BaseShape.prototype._getLabelPosition=function(g,b,d,c,f,e,h,i){var j=null;switch(i){case 1:j=new a.common.Rect(g+d/2-f/2,b-h-e,f,e);break;case 2:j=new a.common.Rect(g+d-f,b-h-e,f,e);break;case 8:j=new a.common.Rect(g,b-h-e,f,e);break;case 3:j=new a.common.Rect(g+d+h,b+c/2-e/2,f,e);break;case 11:j=new a.common.Rect(g+d+h,b,f,e);break;case 12:j=
new a.common.Rect(g+d+h,b+c-e,f,e);break;case 4:j=new a.common.Rect(g+d-f,b+c+h,f,e);break;case 6:j=new a.common.Rect(g,b+c+h,f,e);break;case 7:j=new a.common.Rect(g-f-h,b+c/2-e/2,f,e);break;case 9:j=new a.common.Rect(g-f-h,b,f,e);break;case 10:j=new a.common.Rect(g-f-h,b+c-e,f,e);break;default:j=new a.common.Rect(g+d/2-f/2,b+c+h,f,e)}return j};a.common.BaseShape.prototype._betweenPoint=function(g,b){return new a.common.Point((g.x+b.x)/2,(g.y+b.y)/2)};a.common.BaseShape.prototype._offsetPoint=function(g,
b,d){var c=null,c=g.distanceTo(b);return c=0===c||0===d?new a.common.Point(g):new a.common.Point(g.x+(b.x-g.x)/c*d,g.y+(b.y-g.y)/c*d)};a.common.Callout=function(a){this.m_graphics=a;this.pointerPlacement=0;this.cornerRadius="10%";this.offset=0;this.lineWidth=this.opacity=1;this.pointerWidth="10%";this.borderColor="#000000";this.lineType=0;this.fillColor="#d3d3d3";this.m_map=[[8,7,6],[1,null,5],[2,3,4]]};a.common.Callout.prototype=new a.common.BaseShape;a.common.Callout.prototype.draw=function(g,b){var b=
(new a.common.Rect(b)).offset(this.offset),d=new a.common.Point(b.x,b.y),c=new a.common.Point(b.right(),b.y),f=new a.common.Point(b.right(),b.bottom()),e=new a.common.Point(b.left(),b.bottom()),h=[null,null,null,null,null,null,null,null],e=[d,c,f,e],c=this.m_graphics.getPxSize(this.cornerRadius,Math.min(d.distanceTo(c),c.distanceTo(f))),i,j;i={};null!==this.fillColor&&(i.fillColor=this.fillColor,i.opacity=this.opacity);null!==this.lineColor&&(i.lineColor=this.borderColor);i.lineWidth=this.lineWidth;
i.lineType=this.lineType;j=new a.common.PaletteItem(i);i=new a.common.PolylinesBuffer;j=i.getPolyline(j);null!==g&&(d=0===this.pointerPlacement?this._getPlacement(g,d,f):this.pointerPlacement,null!==d&&(h[d]=g));for(f=0;f<e.length;f+=1)this._drawSegment(j,e[0],e[1],e[2],this.pointerWidth,c,h[1],h[2]),d=e.shift(),e.push(d),d=h.shift(),h.push(d),d=h.shift(),h.push(d);this.m_graphics.polylinesBuffer(i)};a.common.Callout.prototype._getPlacement=function(a,b,d){var c=null,f=null,c=a.x<b.x?0:a.x>d.x?2:
1,f=a.y<b.y?0:a.y>d.y?2:1;return this.m_map[c][f]};a.common.Callout.prototype._drawSegment=function(g,b,d,c,f,e,h,i){var j=this._offsetPoint(b,d,e),k=this._offsetPoint(d,b,e),c=this._offsetPoint(d,c,e),f=this.m_graphics.getPxSize(f,b.distanceTo(d)/2);0===g.length()&&g.addSegment(new a.common.MoveSegment(j));null!==h&&(j=this._betweenPoint(b,d),b=this._offsetPoint(j,b,f),f=this._offsetPoint(j,d,f),g.addSegment(new a.common.LineSegment(b)),g.addSegment(new a.common.LineSegment(h)),g.addSegment(new a.common.LineSegment(f)));
g.addSegment(new a.common.LineSegment(k));null!==i?(g.addSegment(new a.common.LineSegment(i)),g.addSegment(new a.common.LineSegment(c))):g.addSegment(new a.common.QuadraticArcSegment(d,c))};a.common.ConnectorOffbeat=function(){};a.common.ConnectorOffbeat.prototype=new a.common.BaseShape;a.common.ConnectorOffbeat.prototype.draw=function(g,b,d,c,f,e,h,i,j,k,m,n,l,p,q){var r,s,t,w,u,A,x,B,l=e=0,z=null,y,v;y=g.getPolyline(b);u=[];switch(j){case 1:u=[-f/2,f/2];v=!1;break;case 0:u=[0];v=!1;break;case 2:u=
[0],v=!0}r=Math.max(n?h.width:0,5*f);if(d.right()+r<c.left()||d.left()>c.right()+r)if(d.left()>c.right()?(t=new a.common.Point(d.left(),d.verticalCenter()),w=new a.common.Point(c.right(),c.verticalCenter())):(t=new a.common.Point(d.right(),d.verticalCenter()),w=new a.common.Point(c.left(),c.verticalCenter())),n&&(d.left()>c.right()?(e=7,l=3):(e=3,l=7)),s=new a.common.Rect(t,w),B=t.y<=w.y,x=t.x<w.x,s.height<s.width){s.height<2*f&&s.offset(0,B?2*f:0,0,B?0:2*f);i=0;for(r=u.length;i<r;i+=1)A=u[i],g.addInverted(function(c){c=
c.getPolyline(b);c.addSegment(new a.common.MoveSegment(t.x,t.y+A));c.addSegment(new a.common.QuadraticArcSegment(s.horizontalCenter(),(B?s.top():s.bottom())+A,w.x,w.y+A));v&&c.addArrow(b.lineWidth,function(a){a.mergeTo(g.getPolyline(a.paletteItem))})},i||0==j),y.addArrow(b.lineWidth,function(a){a.mergeTo(g.getPolyline(a.paletteItem))});n&&(j=h.width<2*(s.width/5)?a.common.QuadraticArcSegment.prototype.offsetPoint(t.x,t.y,s.horizontalCenter(),B?s.top():s.bottom(),w.x,w.y,0.5):new a.common.Point(t.x,
B?s.top():s.bottom()),z=new a.common.Rect(j.x+(x?f:-h.width-f),B?j.y-h.height-f:j.y+f,h.width,h.height))}else{i=0;for(r=u.length;i<r;i+=1)A=u[i],g.addInverted(function(c){c=c.getPolyline(b);c.addSegment(new a.common.MoveSegment(t.x,t.y+A));c.addSegment(new a.common.QuadraticArcSegment(s.horizontalCenter()+A*(B!=x?1:-1),(B?s.top():s.bottom())+A,s.horizontalCenter()+A*(B!=x?1:-1),s.verticalCenter()+A));c.addSegment(new a.common.QuadraticArcSegment(s.horizontalCenter()+A*(B!=x?1:-1),(B?s.bottom():s.top())+
A,w.x,w.y+A));v&&c.addArrow(b.lineWidth,function(a){a.mergeTo(g.getPolyline(a.paletteItem))})},i||0==j),y.addArrow(b.lineWidth,function(a){a.mergeTo(g.getPolyline(a.paletteItem))});n&&(z=new a.common.Rect(s.horizontalCenter()+(B!=x?f:-(f+h.width)),s.verticalCenter()-h.height/2,h.width,h.height))}else if(d.verticalCenter()<c.top()||d.verticalCenter()>c.bottom()){x=d.x<i.width/2;t=new a.common.Point(x?d.right():d.left(),d.verticalCenter());w=new a.common.Point(x?c.right():c.left(),c.verticalCenter());
s=new a.common.Rect(t,w);s.offset(10*f,0,10*f,0);B=t.y<=w.y;i=0;for(r=u.length;i<r;i+=1)A=u[i],g.addInverted(function(d){d=d.getPolyline(b);d.addSegment(new a.common.MoveSegment(t.x,t.y+A));d.addSegment(new a.common.QuadraticArcSegment(x?s.right()+A*(B?-1:1):s.left()-A*(B?-1:1),s.verticalCenter(),x?c.right():c.left(),c.verticalCenter()-A));v&&d.addArrow(b.lineWidth,function(a){a.mergeTo(g.getPolyline(a.paletteItem))})},i||0==j),y.addArrow(b.lineWidth,function(a){a.mergeTo(g.getPolyline(a.paletteItem))});
n&&(l=e=x?3:7,j=a.common.QuadraticArcSegment.prototype.offsetPoint(t.x,t.y,x?s.right():s.left(),s.verticalCenter(),w.x,w.y,0.5),z=new a.common.Rect(j.x+(x?f/2:-f/2-h.width),j.y-h.height/2,h.width,h.height))}else{t=new a.common.Point(d.horizontalCenter(),d.top());w=new a.common.Point(c.horizontalCenter(),c.top());s=new a.common.Rect(t,w);s.offset(0,7*f,0,0);x=t.x<w.x;i=0;for(r=u.length;i<r;i+=1)A=u[i],g.addInverted(function(d){d=d.getPolyline(b);d.addSegment(new a.common.MoveSegment(t.x+A,t.y));d.addSegment(new a.common.QuadraticArcSegment(s.horizontalCenter(),
s.top()-A*(x?-1:1),c.horizontalCenter()-A,c.top()));v&&d.addArrow(b.lineWidth,function(a){a.mergeTo(g.getPolyline(a.paletteItem))})},i||0==j),y.addArrow(b.lineWidth,function(a){a.mergeTo(g.getPolyline(a.paletteItem))});n&&(l=e=1,j=a.common.QuadraticArcSegment.prototype.offsetPoint(t.x,t.y,s.horizontalCenter(),s.top(),w.x,w.y,0.5),z=new a.common.Rect(j.x-h.width/2,j.y-(k+h.height),h.width,h.height))}if(n)switch(m){case 0:z=this._getLabelPosition(d.x,d.y,d.width,d.height,z.width,z.height,k,e);break;
case 2:z=this._getLabelPosition(c.x,c.y,c.width,c.height,z.width,z.height,k,l)}null!=p&&p(z,q)};a.common.ConnectorStraight=function(){};a.common.ConnectorStraight.prototype=new a.common.BaseShape;a.common.ConnectorStraight.prototype.draw=function(g,b,d,c,f,e,h,i,j,k,m,n,l,p,q){var r,s,t,w,u,A=f/2,x=null,B=0,z=0,y=this;w=new a.common.Vector(d.centerPoint(),c.centerPoint());d.loopEdges(function(a,b){r=a.getIntersectionPoint(w,!0,1);B=b;return null!=r});c.loopEdges(function(a,b){s=a.getIntersectionPoint(w,
!0,1);z=b;return null!=s});if(null!=r&&null!=s){var v=new a.common.Vector(r,s);l.getOffset(v,function(c,d,f){v.offset((c*e-(d-1)*e/2)*f);r=v.from;s=v.to;switch(j){case 1:u=new a.common.Vector(s.clone(),r.clone());u.offset(A);y._drawLine(g,b,u.from,u.to,!1);u=new a.common.Vector(r.clone(),s.clone());u.offset(A);y._drawLine(g,b,u.from,u.to,!1);break;case 0:y._drawLine(g,b,r,s,!1);break;case 2:y._drawLine(g,b,r,s,!0)}if(n){switch(m){case 0:x=y._getLabelPositionBySnapPoint(r.x,r.y,h.width,h.height,k,
B);break;case 1:t=y._betweenPoint(r,s);x=y._getLabelPositionBySnapPoint(t.x,t.y,h.width,h.height,k,3);break;case 2:x=y._getLabelPositionBySnapPoint(s.x,s.y,h.width,h.height,k,z)}null!=p&&p.call(this,x,q)}})}};a.common.ConnectorStraight.prototype._drawLine=function(g,b,d,c,f){var e;g.addInverted(function(f){e=f.getPolyline(b);e.addSegment(new a.common.MoveSegment(d));e.addSegment(new a.common.LineSegment(c));e.addArrow(b.lineWidth,function(a){a.mergeTo(g.getPolyline(a.paletteItem))})},!1);f&&(e=g.getPolyline(b),
e.addArrow(b.lineWidth,function(a){a.mergeTo(g.getPolyline(a.paletteItem))}))};a.common.ConnectorStraight.prototype._getLabelPositionBySnapPoint=function(g,b,d,c,f,e){var h=null;switch(e){case 0:case 1:h=new a.common.Rect(g-d/2,b-f-c,d,c);break;case 3:h=new a.common.Rect(g+f,b-c/2,d,c);break;case 5:h=new a.common.Rect(g-d/2,b+f,d,c);break;case 7:h=new a.common.Rect(g-d-f,b-c/2,d,c)}return h};a.common.Marker=function(){};a.common.Marker.Markers={};a.common.Marker.DrawCircle=function(g,b){var d=Math.min(b.width/
2,b.height/2),b=new a.common.Rect(b.horizontalCenter()-d,b.verticalCenter()-d,2*d,2*d);a.common.Marker.DrawOval(g,b)};a.common.Marker.DrawRectangle=function(g,b){g.addSegment(new a.common.MoveSegment(b.x,b.verticalCenter()));g.addSegment(new a.common.LineSegment(b.x,b.y));g.addSegment(new a.common.LineSegment(b.right(),b.y));g.addSegment(new a.common.LineSegment(b.right(),b.bottom()));g.addSegment(new a.common.LineSegment(b.x,b.bottom()));g.addSegment(new a.common.LineSegment(b.x,b.verticalCenter()))};
a.common.Marker.DrawOval=function(g,b){var d,c;d=0.5522848*(b.width/2);c=0.5522848*(b.height/2);g.addSegment(new a.common.MoveSegment(b.x,b.verticalCenter()));g.addSegment(new a.common.CubicArcSegment(b.x,b.verticalCenter()-c,b.horizontalCenter()-d,b.y,b.horizontalCenter(),b.y));g.addSegment(new a.common.CubicArcSegment(b.horizontalCenter()+d,b.y,b.right(),b.verticalCenter()-c,b.right(),b.verticalCenter()));g.addSegment(new a.common.CubicArcSegment(b.right(),b.verticalCenter()+c,b.horizontalCenter()+
d,b.bottom(),b.horizontalCenter(),b.bottom()));g.addSegment(new a.common.CubicArcSegment(b.horizontalCenter()-d,b.bottom(),b.x,b.verticalCenter()+c,b.x,b.verticalCenter()))};a.common.Marker.DrawTriangle=function(g,b){g.addSegment(new a.common.MoveSegment(b.left(),b.bottom()));g.addSegment(new a.common.LineSegment(b.horizontalCenter(),b.y));g.addSegment(new a.common.LineSegment(b.right(),b.bottom()));g.addSegment(new a.common.LineSegment(b.left(),b.bottom()))};a.common.Marker.DrawCrossOut=function(g,
b){g.addSegment(new a.common.MoveSegment(b.horizontalCenter(),b.verticalCenter()));g.addSegment(new a.common.LineSegment(b.x,b.y));g.addSegment(new a.common.MoveSegment(b.horizontalCenter(),b.verticalCenter()));g.addSegment(new a.common.LineSegment(b.right(),b.bottom()));g.addSegment(new a.common.MoveSegment(b.horizontalCenter(),b.verticalCenter()));g.addSegment(new a.common.LineSegment(b.right(),b.y));g.addSegment(new a.common.MoveSegment(b.horizontalCenter(),b.verticalCenter()));g.addSegment(new a.common.LineSegment(b.left(),
b.bottom()))};a.common.Marker.DrawRhombus=function(g,b){g.addSegment(new a.common.MoveSegment(b.horizontalCenter(),b.bottom()));g.addSegment(new a.common.LineSegment(b.left(),b.verticalCenter()));g.addSegment(new a.common.LineSegment(b.horizontalCenter(),b.y));g.addSegment(new a.common.LineSegment(b.right(),b.verticalCenter()));g.addSegment(new a.common.LineSegment(b.horizontalCenter(),b.bottom()))};a.common.Marker.DrawWedge=function(g,b){g.addSegment(new a.common.MoveSegment(b.horizontalCenter(),
b.y));g.addSegment(new a.common.LineSegment(b.right(),b.y));g.addSegment(new a.common.LineSegment(b.horizontalCenter(),b.bottom()));g.addSegment(new a.common.LineSegment(b.left(),b.y));g.addSegment(new a.common.LineSegment(b.horizontalCenter(),b.y))};a.common.Marker.DrawFramedOval=function(g,b){a.common.Marker.DrawRectangle(g,b);a.common.Marker.DrawOval(g,b)};a.common.Marker.DrawFramedTriangle=function(g,b){a.common.Marker.DrawRectangle(g,b);a.common.Marker.DrawTriangle(g,b)};a.common.Marker.DrawFramedWedge=
function(g,b){a.common.Marker.DrawRectangle(g,b);a.common.Marker.DrawWedge(g,b)};a.common.Marker.DrawFramedRhombus=function(g,b){a.common.Marker.DrawRectangle(g,b);a.common.Marker.DrawRhombus(g,b)};a.common.Marker.DrawNone=function(){};a.common.Marker.Markers[4]=a.common.Marker.DrawCircle;a.common.Marker.Markers[0]=a.common.Marker.DrawRectangle;a.common.Marker.Markers[1]=a.common.Marker.DrawOval;a.common.Marker.Markers[2]=a.common.Marker.DrawTriangle;a.common.Marker.Markers[3]=a.common.Marker.DrawCrossOut;
a.common.Marker.Markers[5]=a.common.Marker.DrawRhombus;a.common.Marker.Markers[7]=a.common.Marker.DrawWedge;a.common.Marker.Markers[8]=a.common.Marker.DrawFramedOval;a.common.Marker.Markers[9]=a.common.Marker.DrawFramedTriangle;a.common.Marker.Markers[10]=a.common.Marker.DrawFramedWedge;a.common.Marker.Markers[11]=a.common.Marker.DrawFramedRhombus;a.common.Marker.Markers[6]=a.common.Marker.DrawNone;a.common.Marker.prototype.draw=function(g,b,d,c){g=g.getPolyline(c);a.common.Marker.Markers[b](g,d)};
a.common.MergedRectangles=function(a){this.graphics=a;this.transform=null;this.opacity=this.lineWidth=1;this.fillColor=null;this.lineType=0;this.borderColor=null};a.common.MergedRectangles.prototype=new a.common.BaseShape;a.common.MergedRectangles.prototype.draw=function(g){var b=new a.common.PaletteItem({lineColor:this.borderColor,lineWidth:this.lineWidth,fillColor:this.fillColor,lineType:this.lineType,opacity:this.opacity}),d=new a.common.Polyline(b);a.common.getMergedRectangles(this,g,function(b){for(var g=
0,e=b.length;g<e;g+=1){var h=b[g];0==g?d.addSegment(new a.common.MoveSegment(h.x,h.y)):d.addSegment(new a.common.LineSegment(h.x,h.y))}});d.transform(this.transform,!0);this.graphics.polyline(d)};a.common.Shape=function(g){this.m_graphics=g;this.transform=null;this.orientationType=0;this.panelSize=null;this.shapeType=0;this.offset=new a.common.Thickness(0,0,0,0);this.lineWidth=1;this.labelOffset=4;this.cornerRadius="10%";this.opacity=1;this.fillColor=null;this.labelSize=new a.common.Size(60,30);this.lineType=
0;this.borderColor=null;this.hasLabel=!1;this.labelTemplate=null;this.labelPlacement=0};a.common.Shape.prototype=new a.common.BaseShape;a.common.Shape.prototype.draw=function(g,b){var d,c,f,e,g=(new a.common.Rect(g)).offset(this.offset);this.transform=new a.common.Transform;this.transform.size=this.panelSize;this.transform.setOrientation(this.orientationType);this.hasLabel&&(d=this._getLabelPosition(g.x,g.y,g.width,g.height,this.labelSize.width,this.labelSize.height,this.labelOffset,this.labelPlacement));
switch(this.shapeType){case 0:c=new a.common.Callout(this.m_graphics);c.cornerRadius=this.cornerRadius;c.opacity=this.opacity;c.lineWidth=this.lineWidth;c.lineType=this.lineType;c.borderColor=this.borderColor;c.fillColor=this.fillColor;c.draw(null,g);break;default:c=new a.common.PaletteItem({lineColor:this.borderColor,lineWidth:this.lineWidth,lineType:this.lineType,fillColor:this.fillColor,opacity:this.opacity}),this.transform.transformRect(g.x,g.y,g.width,g.height,!1,this,function(b,c,d,e){g=new a.common.Rect(b,
c,d,e)}),e=new a.common.Marker,f=new a.common.PolylinesBuffer,e.draw(f,this.shapeType,g,c),f.transform(this.transform,!0),this.m_graphics.polylinesBuffer(f)}this.hasLabel&&this.m_graphics.template(d.x,d.y,0,0,0,0,d.width,d.height,this.labelTemplate.template(),this.labelTemplate.getHashCode(),this.labelTemplate.render,b,null)};a.common.Point=function(a,b){this.context=this.y=this.x=null;switch(arguments.length){case 1:this.x=a.x;this.y=a.y;this.context=a.context;break;case 2:this.x=a,this.y=b}};a.common.Point.prototype.scale=
function(a){this.x*=a;this.y*=a;return this};a.common.Point.prototype.distanceTo=function(a,b){var d=0,c=0;switch(arguments.length){case 1:d=a.x;c=a.y;break;case 2:d=a,c=b}d=this.x-d;c=this.y-c;return Math.sqrt(d*d+c*c)};a.common.Point.prototype.equalTo=function(a){return this.x==a.x&&this.y==a.y};a.common.Point.prototype.swap=function(a){var b=a.x,d=a.y;a.x=this.x;a.y=this.y;this.x=b;this.y=d};a.common.Point.prototype.clone=function(){return new a.common.Point(this)};a.common.Point.prototype.toString=
function(a){var b,a=void 0!==a?a:"px";b=""+("left:"+this.x+a+";");return b+="top:"+this.y+a+";"};a.common.Point.prototype.getCSS=function(a){a=void 0!==a?a:"px";return{left:this.x+a,top:this.y+a}};a.common.Rect=function(a,b,d,c){this.context=this.height=this.width=this.y=this.x=null;switch(arguments.length){case 1:this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;break;case 2:this.x=Math.min(a.x,b.x);this.y=Math.min(a.y,b.y);this.width=Math.abs(b.x-a.x);this.height=Math.abs(b.y-a.y);break;
case 4:this.x=a,this.y=b,this.width=d,this.height=c}};a.common.Rect.prototype.left=function(){return this.x};a.common.Rect.prototype.top=function(){return this.y};a.common.Rect.prototype.right=function(){return this.x+this.width};a.common.Rect.prototype.bottom=function(){return this.y+this.height};a.common.Rect.prototype.verticalCenter=function(){return this.y+this.height/2};a.common.Rect.prototype.horizontalCenter=function(){return this.x+this.width/2};a.common.Rect.prototype.centerPoint=function(){return new a.common.Point(this.horizontalCenter(),
this.verticalCenter())};a.common.Rect.prototype.isEmpty=function(){return null===this.x||null===this.y||null===this.width||null===this.height||0>this.width||0>this.height};a.common.Rect.prototype.offset=function(a,b,d,c){switch(arguments.length){case 1:null!==a&&"object"==typeof a?(this.x-=a.left,this.y-=a.top,this.width=this.width+a.left+a.right,this.height=this.height+a.top+a.bottom):(this.x-=a,this.y-=a,this.width+=2*a,this.height+=2*a);break;case 4:this.x-=a,this.y-=b,this.width=this.width+a+
d,this.height=this.height+b+c}return this};a.common.Rect.prototype.scale=function(a){this.x*=a;this.y*=a;this.width*=a;this.height*=a;return this};a.common.Rect.prototype.translate=function(a,b){this.x+=a;this.y+=b;return this};a.common.Rect.prototype.invert=function(){var a=this.width,b=this.x;this.width=this.height;this.height=a;this.x=this.y;this.y=b;return this};a.common.Rect.prototype.loopEdges=function(g){var b=[new a.common.Point(this.left(),this.top()),new a.common.Point(this.right(),this.top()),
new a.common.Point(this.right(),this.bottom()),new a.common.Point(this.left(),this.bottom())],d=[1,3,5,7];b.push(b[0]);if(null!=g)for(var c=1,f=b.length;c<f&&!g(new a.common.Vector(b[c-1],b[c]),d[c-1]);c+=1);return this};a.common.Rect.prototype.contains=function(a,b){switch(arguments.length){case 1:return this.x<=a.x&&a.x<=this.x+this.width&&this.y<=a.y&&a.y<=this.y+this.height;case 2:return this.x<=a&&a<=this.x+this.width&&this.y<=b&&b<=this.y+this.height;default:return!1}};a.common.Rect.prototype.cropByRect=
function(a){this.x<a.x&&(this.width-=a.x-this.x,this.x=a.x);this.right()>a.right()&&(this.width-=this.right()-a.right());this.y<a.y&&(this.height-=a.y-this.y,this.y=a.y);this.bottom()>a.bottom()&&(this.height-=this.bottom()-a.bottom());this.isEmpty()&&(this.height=this.width=this.y=this.x=null);return this};a.common.Rect.prototype.overlaps=function(a){var b=!0;if(this.x+this.width<a.x||a.x+a.width<this.x||this.y+this.height<a.y||a.y+a.height<this.y)b=!1;return b};a.common.Rect.prototype.addRect=function(a,
b,d,c){var f,e;switch(arguments.length){case 1:a.isEmpty()||(this.isEmpty()?(this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height):(f=Math.max(this.right(),a.right()),e=Math.max(this.bottom(),a.bottom()),this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.width=f-this.x,this.height=e-this.y));break;case 2:this.isEmpty()?(this.x=a,this.y=b,this.height=this.width=0):(f=Math.max(this.right(),a),e=Math.max(this.bottom(),b),this.x=Math.min(this.x,a),this.y=Math.min(this.y,b),this.width=
f-this.x,this.height=e-this.y);break;case 4:this.isEmpty()?(this.x=a,this.y=b,this.width=d,this.height=c):(f=Math.max(this.right(),a+d),e=Math.max(this.bottom(),b+c),this.x=Math.min(this.x,a),this.y=Math.min(this.y,b),this.width=f-this.x,this.height=e-this.y)}return this};a.common.Rect.prototype.getCSS=function(a){a=void 0!==a?a:"px";return{left:this.x+a,top:this.y+a,width:this.width+a,height:this.height+a}};a.common.Rect.prototype.toString=function(a){var b,a=void 0!==a?a:"px";b=""+("left:"+this.x+
a+";");b+="top:"+this.y+a+";";b+="width:"+this.width+a+";";return b+="height:"+this.height+a+";"};a.common.Rect.prototype.validate=function(){if(isNaN(this.x)||isNaN(this.y)||isNaN(this.width)||isNaN(this.height))throw"Invalid rect position.";};a.common.Rect.prototype.equalTo=function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height};a.common.MoveSegment=function(){this.parent=a.common.Point.prototype;this.parent.constructor.apply(this,arguments);this.segmentType=1};
a.common.MoveSegment.prototype=new a.common.Point;a.common.MoveSegment.prototype.clone=function(){return new a.common.MoveSegment(this)};a.common.MoveSegment.prototype.loop=function(a,b){null!=b&&b.call(a,this.x,this.y,0)};a.common.MoveSegment.prototype.setPoint=function(a){this.x=a.x;this.y=a.y};a.common.MoveSegment.prototype.getEndPoint=function(){return this};a.common.MoveSegment.prototype.invert=function(a){this.x=a.x;this.y=a.y};a.common.MoveSegment.prototype.transform=function(a,b){var d=this;
a.transformPoint(d.x,d.y,b,d,function(a,b){d.x=a;d.y=b})};a.common.CubicArcSegment=function(g,b,d,c,f,e){this.parent=a.common.Point.prototype;this.cpY2=this.cpX2=this.cpY1=this.cpX1=this.y=this.x=null;switch(arguments.length){case 3:this.parent.constructor.apply(this,[d.x,d.y]);this.cpX1=g.x;this.cpY1=g.y;this.cpX2=b.x;this.cpY2=b.y;break;case 6:this.parent.constructor.apply(this,[f,e]),this.cpX1=g,this.cpY1=b,this.cpX2=d,this.cpY2=c}this.segmentType=3};a.common.CubicArcSegment.prototype=new a.common.Point;
a.common.CubicArcSegment.prototype.clone=function(){return new a.common.CubicArcSegment(this.cpX1,this.cpY1,this.cpX2,this.cpY2,this.x,this.y)};a.common.CubicArcSegment.prototype.loop=function(a,b){null!=b&&(b.call(a,this.cpX1,this.cpY1,0),b.call(a,this.cpX2,this.cpY2,1),b.call(a,this.x,this.y,2))};a.common.CubicArcSegment.prototype.setPoint=function(a,b){switch(b){case 0:this.cpX1=a.x;this.cpY1=a.y;break;case 1:this.cpX2=a.x;this.cpY2=a.y;break;case 2:this.x=a.x,this.y=a.y}};a.common.CubicArcSegment.prototype.getEndPoint=
function(){return this};a.common.CubicArcSegment.prototype.invert=function(a){var b=this.cpX1,d=this.cpY1;this.x=a.x;this.y=a.y;this.cpX1=this.cpX2;this.cpY1=this.cpY2;this.cpX2=b;this.cpY2=d};a.common.CubicArcSegment.prototype.transform=function(a,b){var d=this;a.transform3Points(d.x,d.y,d.cpX1,d.cpY1,d.cpX2,d.cpY2,b,d,function(a,b,g,h,i,j){d.x=a;d.y=b;d.cpX1=g;d.cpY1=h;d.cpX2=i;d.cpY2=j})};a.common.CubicArcSegment.prototype.trim=function(a,b){var d=0.5,c=this.offsetPoint(this.x,this.y,this.cpX2,
this.cpY2,this.cpX1,this.cpY1,a.x,a.y,d),f=this.offsetPoint(this.x,this.y,this.cpX2,this.cpY2,this.cpX1,this.cpY1,a.x,a.y,0.1),d=b*(d/c.distanceTo(this.x,this.y)+0.1/f.distanceTo(this.x,this.y))/2,c=this.offsetPoint(this.x,this.y,this.cpX2,this.cpY2,this.cpX1,this.cpY1,a.x,a.y,d);this.x=c.x;this.y=c.y;return this};a.common.CubicArcSegment.prototype.offsetPoint=function(g,b,d,c,f,e,h,i,j){return new a.common.Point((1-j)*(1-j)*(1-j)*g+3*(1-j)*(1-j)*j*d+3*(1-j)*j*j*f+j*j*j*h,(1-j)*(1-j)*(1-j)*b+3*(1-
j)*(1-j)*j*c+3*(1-j)*j*j*e+j*j*j*i)};a.common.DotSegment=function(a,b,d,c,f){this.segmentType=4;this.x=a;this.y=b;this.width=d;this.height=c;this.cornerRadius=f};a.common.Label=function(){this.position=this.text=null;this.weight=0;this.isActive=!0;this.horizontalAlignmentType=this.labelOrientation=this.labelType=0;this.verticalAlignmentType=2;this.parent=a.common.Rect.prototype;this.parent.constructor.apply(this,arguments)};a.common.Label.prototype=new a.common.Rect;a.common.LineSegment=function(){this.parent=
a.common.MoveSegment.prototype;this.parent.constructor.apply(this,arguments);this.segmentType=0};a.common.LineSegment.prototype=new a.common.MoveSegment;a.common.LineSegment.prototype.clone=function(){return new a.common.LineSegment(this)};a.common.LineSegment.prototype.trim=function(a,b){var d=this.offsetPoint(this,a,b);this.x=d.x;this.y=d.y;return this};a.common.LineSegment.prototype.offsetPoint=function(g,b,d){var c=null,c=g.distanceTo(b);return c=0===c||0===d?new a.common.Point(g):new a.common.Point(g.x+
(b.x-g.x)/c*d,g.y+(b.y-g.y)/c*d)};a.common.Matrix=function(a,b,d,c){this.b2=this.a2=this.b1=this.a1=null;switch(arguments.length){case 1:this.a1=a.a1;this.b1=a.b1;this.a2=a.a2;this.b2=a.b2;break;case 4:this.a1=a,this.b1=b,this.a2=d,this.b2=c}};a.common.Matrix.prototype.determinant=function(){return this.a1*this.b2-this.b1*this.a2};a.common.PaletteItem=function(g){this.lineColor="#c0c0c0";this.lineWidth=1;this.lineType=0;this.opacity=this.fillColor=null;this._key="";var b,d,c,f;d=["lineColor","lineWidth",
"lineType","fillColor","opacity"];c=0;for(f=d.length;c<f;c+=1)b=d[c],null!=g&&g.hasOwnProperty(b)&&(this[b]=g[b]),this._key+=(!a.common.isNullOrEmpty(this._key)?", ":"")+b+":"+this[b]};a.common.PaletteItem.prototype.toAttr=function(){var a={lineWidth:this.lineWidth,lineType:this.lineType};null!==this.fillColor&&(a.fillColor=this.fillColor);null!==this.opacity&&(a.opacity=this.opacity);null!==this.lineColor&&(a.borderColor=this.lineColor);return a};a.common.PaletteItem.prototype.toString=function(){return this._key};
a.common.PaletteManager=function(g,b){this.palette=[];this.cursor=0;var d,c;if(0===b.length)this.palette=[new a.common.PaletteItem({lineColor:g.linesColor,lineWidth:g.linesWidth,lineType:g.linesType})],this.paletteLength=this.palette.length,this.regularIndex=0;else{d=0;for(c=b.length;d<c;d+=1)this.palette.push(new a.common.PaletteItem(b[d]));this.paletteLength=this.palette.length;this.palette.push(new a.common.PaletteItem({lineColor:g.linesColor,lineWidth:g.linesWidth,lineType:g.linesType}));this.regularIndex=
this.palette.length-1}this.palette.push(new a.common.PaletteItem({lineColor:g.highlightLinesColor,lineWidth:g.highlightLinesWidth,lineType:g.highlightLinesType}));this.highlightIndex=this.palette.length-1};a.common.PaletteManager.prototype.selectPalette=function(a){this.cursor=a%this.paletteLength};a.common.PaletteManager.prototype.getPalette=function(a){var b=null;switch(a){case 1:b=this.regularIndex;break;case 2:b=this.highlightIndex;break;case 0:b=this.cursor}return this.palette[b]};a.common.Polyline=
function(g){function b(a,b){var g,c,d;if(null!=b){g=0;for(c=j.length;g<c&&(!(d=j[g])||!b.call(a,d,g));g+=1);}}function d(){return a.common.isNullOrEmpty(i.fillColor)}function c(b,g,c,d,e,f){for(var h=new a.common.Polyline(m),i,j,e=[new a.common.Point(e,-f/2),new a.common.Point(0,0),new a.common.Point(e,f/2),new a.common.Point(3*(e/4),0)],k=Math.atan2(g-d,b-c),b=0,g=e.length;b<g;b+=1)f=e[b],i=f.x*Math.cos(k)-f.y*Math.sin(k),j=f.x*Math.sin(k)+f.y*Math.cos(k),f.x=i+c,f.y=j+d;h.addSegment(new a.common.MoveSegment(e[0].x,
e[0].y));h.addSegment(new a.common.LineSegment(e[1].x,e[1].y));h.addSegment(new a.common.LineSegment(e[2].x,e[2].y));h.addSegment(new a.common.QuadraticArcSegment(e[3].x,e[3].y,e[0].x,e[0].y));return h}function f(a,b){this.segment=a;this.pointIndex=b}function e(b,g,c,d,e){var h=b.relateTo(g),i=e?0:c;2==h?g.offset(i):3==h&&0===g.from.context.pointIndex?(h=new a.common.LineSegment(g.from),d.addSegment(h),g.offset(i),d=g.from.clone(),d.context=new f(h,0),i=new a.common.Vector(b.to.clone(),d),e||(g.from=
d.clone()),i.offset(c),i.intersect(b),i.from.context.pushToSegment(i.from),g.intersect(i),e&&i.to.context.pushToSegment(i.to)):(g.offset(i),g.intersect(b));g.from.context.pushToSegment(g.from)}function h(a,b,g,c){var d,f=a[0],h=f.to.context.segment.getEndPoint().toString();b.hasOwnProperty(h)&&(d=b[h],e(f,d,g,c,!0),delete b[h]);f.to.context.pushToSegment(f.to);a.length=0}var i=new a.common.PaletteItem,j=[],k,m;switch(arguments.length){case 1:i=g}m=new a.common.PaletteItem({lineColor:i.lineColor,lineWidth:0,
fillColor:i.lineColor,opacity:i.opacity||1});f.prototype.pushToSegment=function(a){this.segment.setPoint(a,this.pointIndex)};return k={paletteItem:i,arrowPaletteItem:m,addSegment:function(a){j.push(a)},addSegments:function(a){var b,g;b=0;for(g=a.length;b<g;b+=1)j.push(a[b])},mergeTo:function(a){a.addSegments(j)},length:function(){return j.length},loop:b,loopReversed:function(a,b){var g,c;if(null!=b)for(g=j.length-1;0<=g&&(!(c=j[g])||!b.call(a,c,g));g-=1);},transform:function(a,g){b(this,function(b){null!=
b.transform&&b.transform(a,g)})},isInvertable:d,addInverted:function(b){var g=!1,c=[];d()?b.loopReversed(this,function(b){4!=b.segmentType&&(g||(j.push(new a.common.MoveSegment(b.getEndPoint())),g=!0),c.unshift(b),1<c.length&&(c[1].invert(c[0].getEndPoint()),j.push(c[1]),c.length=1))}):b.mergeTo(k)},addArrow:function(b,g){var d,e,f,h;e=j.length;h=3*b;var i=2*b;switch(b){case 1:h=8;i=6;break;case 2:h=12;i=8;break;case 3:h=16,i=10}null!=g&&1<e&&(d=j[e-2].getEndPoint(),f=j[e-1],null!=f.trim&&(e=new a.common.Point(f.getEndPoint()),
d=f.trim(d,i),h=c(d.x,d.y,e.x,e.y,h,i),g(h,d)))},addOffsetArrow:function(b,g,d,e,f){var h,i,m;h=j.length;m=3*g;var k=2*g,A;switch(g){case 1:m=8;k=6;break;case 2:m=12;k=8;break;case 3:m=16,k=10}null!=f&&1<h&&(g=j[h-2].getEndPoint(),i=j[h-1],null!=i.offsetPoint&&(h=new a.common.Point(i.getEndPoint()),A=g.distanceTo(h),A>e&&(d*=A,b?(b=i.offsetPoint(g,h,d),m=c(g.x,g.y,b.x,b.y,m,k)):(b=i.offsetPoint(h,g,d),m=c(h.x,h.y,b.x,b.y,m,k)),f(m))))},optimizeMoveSegments:function(){var a,b,g,c,d;g={};var e=[],f=
[];a=0;for(b=j.length;a<b-1;a+=1)switch(c=j[a],d=j[a+1],c.segmentType){case 0:case 2:case 3:switch(d.segmentType){case 1:case 4:c=c.x+"&"+c.y,g.hasOwnProperty(c)||(g[c]=a)}break;case 1:c=c.x+"&"+c.y,g.hasOwnProperty(c)&&!e[g[c]]&&(e[g[c]]=a+1,f[a]=!0)}d=[];for(a=0;a<b;a+=1)if(!f[a]&&(c=j[a],d.push(c),f[a]=!0,0<e[a]))for(g=e[a];g<b&&!f[g];)c=j[g],d.push(c),f[g]=!0,g=0<e[g]?e[g]:g+1;j=d},getOffsetPolyine:function(g){var c=new a.common.Polyline(i),d={},m=[],j=[];b(this,function(b){var i=b.clone();switch(i.segmentType){case 4:case 1:0<
j.length&&h(j,d,g,c);m.length=0;1==i.segmentType&&(b=new a.common.Point(i),b.context=new f(i,0),m.push(b));break;default:i.loop(this,function(b,h,k){b=new a.common.Point(b,h);b.context=new f(i,k);m.unshift(b);1<m.length&&(j.unshift(new a.common.Vector(m[1].clone(),m[0].clone())),m.length=1);switch(j.length){case 1:k=j[0];b=k.from.toString();d[b]=k;k.offset(g);k.from.context.pushToSegment(k.from);break;case 2:b=j[1],k=j[0],e(b,k,g,c,!1),j.length=1}})}c.addSegment(i)});0<j.length&&h(j,d,g,c);return c},
toString:function(){return i.toString()},getStartPoint:function(){var a=null;0<j.length&&(a=j[0].getEndPoint());return a},getEndPoint:function(){var a=null;0<j.length&&(a=j[j.length-1].getEndPoint());return a},clone:function(){var b,g,c=new a.common.Polyline(i),d=[],e;b=0;for(g=j.length;b<g;b+=1)e=j[b],d.push(e.clone());c.addSegments(d);return c}}};a.common.PolylinesBuffer=function(){function g(b,g){b[g.toString()]||(b[g.toString()]=new a.common.Polyline(g));return b[g.toString()]}function b(a,b){var g,
h;if(null!=b)for(g in d)if(d.hasOwnProperty(g)&&(h=d[g]))if(h.optimizeMoveSegments(),b.call(a,h))break}var d={};return{getPolyline:function(a){return g(d,a)},loop:b,addInverted:function(a,f){var e,h;e=d;d={};null!=a&&a(this);b(this,function(a){h=g(e,a.paletteItem);f?a.mergeTo(h):h.addInverted(a)});d=e},transform:function(a,g){b(this,function(b){b.transform(a,g)})}}};a.common.QuadraticArcSegment=function(a,b,d,c){this.cpY=this.cpX=this.y=this.x=null;switch(arguments.length){case 2:this.x=b.x;this.y=
b.y;this.cpX=a.x;this.cpY=a.y;break;case 4:this.cpX=a,this.cpY=b,this.x=d,this.y=c}this.segmentType=2};a.common.QuadraticArcSegment.prototype.clone=function(){return new a.common.QuadraticArcSegment(this.cpX,this.cpY,this.x,this.y)};a.common.QuadraticArcSegment.prototype.loop=function(a,b){null!=b&&(b.call(a,this.cpX,this.cpY,0),b.call(a,this.x,this.y,1))};a.common.QuadraticArcSegment.prototype.setPoint=function(a,b){switch(b){case 0:this.cpX=a.x;this.cpY=a.y;break;case 1:this.x=a.x,this.y=a.y}};
a.common.QuadraticArcSegment.prototype.getEndPoint=function(){return this};a.common.QuadraticArcSegment.prototype.invert=function(a){this.x=a.x;this.y=a.y};a.common.QuadraticArcSegment.prototype.transform=function(a,b){var d=this;a.transformPoints(d.x,d.y,d.cpX,d.cpY,b,d,function(a,b,g,h){d.x=a;d.y=b;d.cpX=g;d.cpY=h})};a.common.QuadraticArcSegment.prototype.trim=function(a,b){var d=0.5,c=this.offsetPoint(this.x,this.y,this.cpX,this.cpY,a.x,a.y,d),f=this.offsetPoint(this.x,this.y,this.cpX,this.cpY,
a.x,a.y,0.1),d=b*(d/c.distanceTo(this.x,this.y)+0.1/f.distanceTo(this.x,this.y))/2,c=this.offsetPoint(this.x,this.y,this.cpX,this.cpY,a.x,a.y,d);this.x=c.x;this.y=c.y;return this};a.common.QuadraticArcSegment.prototype.offsetPoint=function(g,b,d,c,f,e,h){return new a.common.Point((1-h)*(1-h)*g+2*(1-h)*h*d+h*h*f,(1-h)*(1-h)*b+2*(1-h)*h*c+h*h*e)};a.common.Size=function(a,b){this.height=this.width=0;switch(arguments.length){case 1:this.width=a.width;this.height=a.height;break;case 2:this.width=a,this.height=
b}};a.common.Size.prototype.invert=function(){var a=this.width;this.width=this.height;this.height=a;return this};a.common.Size.prototype.scale=function(a){this.width*=a;this.height*=a;return this};a.common.Size.prototype.getCSS=function(a){a=void 0!==a?a:"px";return{left:this.x+a,top:this.y+a,width:this.width+a,height:this.height+a}};a.common.Size.prototype.cropBySize=function(a){this.width=Math.min(this.width,a.width);this.height=Math.min(this.height,a.height);return this};a.common.Size.prototype.addSize=
function(a){this.width=Math.max(this.width,a.width);this.height=Math.max(this.height,a.height);return this};a.common.Size.prototype.validate=function(){if(isNaN(this.width)||isNaN(this.height))throw"Invalid size.";};a.common.Thickness=function(a,b,d,c){this.left=a;this.top=b;this.right=d;this.bottom=c};a.common.Thickness.prototype.isEmpty=function(){return 0===this.left&&0===this.top&&0===this.right&&0===this.bottom};a.common.Thickness.prototype.toString=function(a){a=void 0!==a?a:"px";return this.left+
a+", "+this.top+a+", "+this.right+a+", "+this.bottom+a};a.common.Vector=function(a,b){this.context=this.to=this.from=null;switch(arguments.length){case 1:this.from=a.from;this.to=a.to;break;case 2:this.from=a,this.to=b}};a.common.Vector.prototype.isNull=function(){return this.from.x==this.to&&this.from.y==this.to.y};a.common.Vector.prototype.length=function(){return this.from.distanceTo(this.to)};a.common.Vector.prototype.equalTo=function(a){return this.from.equalTo(a.from)&&this.to.equalTo(a.to)};
a.common.Vector.prototype.getMiddlePoint=function(){return new a.common.Point((this.from.x+this.to.x)/2,(this.from.y+this.to.y)/2)};a.common.Vector.prototype.relateTo=function(a){var b=0,d=this.to.x-this.from.x,c=this.to.y-this.from.y,f=a.to.x-a.from.x,a=a.to.y-a.from.y;switch((d?8:0)+(c?4:0)+(f?2:0)+(a?1:0)){case 0:case 1:case 2:case 3:case 4:case 8:case 12:b=1;break;case 5:b=0<c*a?2:3;break;case 10:b=0<d*f?2:3;break;case 15:d/f==c/a&&(b=0<d/f?2:3)}return b};a.common.Vector.prototype.offset=function(a){var b=
this.length(),d=(this.to.y-this.from.y)*a/b,a=-(this.to.x-this.from.x)*a/b;this.from.x+=d;this.from.y+=a;this.to.x+=d;this.to.y+=a};a.common.Vector.prototype.getLine=function(){var a=this.from.x,b=this.from.y,d=this.to.x,c=this.to.y;return[c-b,a-d,a*(b-c)+b*(d-a)]};a.common.Vector.prototype.getLineKey=function(){var a=this.getLine(),b=a[0],d=a[1],a=a[2],a=0!==d?[Math.floor(1E4*(b/d)),1,Math.floor(1E4*(a/d))]:[1,0,Math.floor(1E4*(a/b))];return a.toString()};a.common.Vector.prototype.intersect=function(g){var b=
this.getLine(),d=g.getLine(),c=(new a.common.Matrix(b[0],b[1],d[0],d[1])).determinant(),f;f=!1;0!==c&&(f=new a.common.Matrix(-b[2],b[1],-d[2],d[1]),f=f.determinant(),b=new a.common.Matrix(b[0],-b[2],d[0],-d[2]),b=b.determinant(),d=f/c,c=b/c,g.to.x=d,g.to.y=c,this.from.x=d,this.from.y=c,f=!0);return f};a.common.Vector.prototype.getIntersectionPoint=function(g,b,d){var c=this.getLine(),f=g.getLine(),e=(new a.common.Matrix(c[0],c[1],f[0],f[1])).determinant(),h,i=null;0!==e&&(h=new a.common.Matrix(-c[2],
c[1],-f[2],f[1]),h=h.determinant(),c=new a.common.Matrix(c[0],-c[2],f[0],-f[2]),c=c.determinant(),h/=e,e=c/e,b?g._contains(h,e,d)&&this._contains(h,e,d)&&(i=new a.common.Point(h,e)):i=new a.common.Point(h,e));return i};a.common.Vector.prototype._contains=function(a,b,d){var c=Math.min(this.from.x,this.to.x),f=Math.min(this.from.y,this.to.y),e=Math.max(this.from.x,this.to.x),h=Math.max(this.from.y,this.to.y);return c-d<=a&&a<=e+d&&f-d<=b&&b<=h+d};a.common.Graphics=function(g){this.m_element=g;this.m_placeholders=
{};this.m_activePlaceholder=null;this.m_cache=new a.common.Cache;this.graphicsType=null;this.debug=this.hasGraphics=!1;this.layerNames={};a.common.loop(this,a.common.Layers,function(a,g){this.layerNames[g]=a})};a.common.Graphics.prototype.clean=function(){var a,b,d,c;this.m_cache.clear();this.m_element=this.m_cache=null;for(a in this.m_placeholders)if(this.m_placeholders.hasOwnProperty(a)){b=this.m_placeholders[a];for(d in b.layers)b.layers.hasOwnProperty(d)&&(c=b.layers[d],c.canvas.parentNode.removeChild(c.canvas),
c.canvas=null);b.layers.length=0;b.activeLayer=null;b.size=null;b.rect=null;b.div=null}this.m_placeholders.length=0;this.m_activePlaceholder=null};a.common.Graphics.prototype.resize=function(a,b,d){a=this.m_placeholders[a];null!=a&&this.resizePlaceholder(a,0,0,b,d)};a.common.Graphics.prototype.position=function(a,b,d,c,f){a=this.m_placeholders[a];null!=a&&this.resizePlaceholder(a,b,d,c,f)};a.common.Graphics.prototype.show=function(g){g=this.m_placeholders[g];null!=g&&a.common.JsonML.applyStyles(g.div,
{display:"inherit",visibility:"inherit"})};a.common.Graphics.prototype.hide=function(g){g=this.m_placeholders[g];null!=g&&a.common.JsonML.applyStyles(g.div,{display:"none",visibility:"hidden"})};a.common.Graphics.prototype.resizePlaceholder=function(g,b,d,c,f){var e;g.size=new a.common.Size(c,f);g.rect=new a.common.Rect(b,d,c,f);a.common.JsonML.applyStyles(g.div,g.rect.getCSS());for(e in g.layers)g.layers.hasOwnProperty(e)&&(b=g.layers[e],-1!==b.name&&a.common.JsonML.applyStyles(b.canvas,{position:"absolute",
width:"0px",height:"0px"}))};a.common.Graphics.prototype.begin=function(){this.m_cache.begin()};a.common.Graphics.prototype.end=function(){this.m_cache.end()};a.common.Graphics.prototype.reset=function(a,b){var d="none",c=-1;switch(arguments.length){case 1:"string"===typeof a?d=a:c=a;break;case 2:d=a,c=b}this.m_cache.reset(d,c)};a.common.Graphics.prototype.activate=function(a,b){switch(arguments.length){case 1:"string"===typeof a?(this._activatePlaceholder(a),this._activateLayer(-1)):(this._activatePlaceholder("none"),
this._activateLayer(a));break;case 2:this._activatePlaceholder(a),this._activateLayer(b)}return this.m_activePlaceholder};a.common.Graphics.prototype._activatePlaceholder=function(g){var b=this.m_placeholders[g],d;void 0===b&&("none"===g?d=this.m_element:(b=this.m_element.getElementsByClassName(g),d=0<b.length?b[0]:this.m_element),b=new a.common.Placeholder(g),b.div=d,b.size=a.common.getInnerSize(d),b.rect=new a.common.Rect(0,0,b.size.width,b.size.height),this.m_placeholders[g]=b);this.m_activePlaceholder=
b};a.common.Graphics.prototype._activateLayer=function(g){var b=this.m_activePlaceholder.layers[g],d,c,f,e;if(void 0===b){d=this.m_activePlaceholder;if(-1===g)b=new a.common.Layer(g),b.canvas=d.div;else{c=a.common.JsonML.toHTML(["div",{style:{position:"absolute",width:"0px",height:"0px"},"class":["Layer"+g,"Layer"+this.layerNames[g]]}]);f=null;for(e in d.layers)d.layers.hasOwnProperty(e)&&(b=d.layers[e],b.name<g&&(f=null!==f?Math.max(f,b.name):b.name));b=new a.common.Layer(g);b.canvas=c;null===f?
this.prepend(d.div,b.canvas):this.insertAfter(d.layers[f].canvas,b.canvas)}d.layers[g]=b}this.m_activePlaceholder.activeLayer=b};a.common.Graphics.prototype.prepend=function(a,b){null==a.firstChild?a.appendChild(b):a.insertBefore(b,a.firstChild)};a.common.Graphics.prototype.insertAfter=function(a,b){var d=a.parentNode;d.lastChild==a?d.appendChild(b):d.insertBefore(b,a.nextSibling)};a.common.Graphics.prototype.text=function(g,b,d,c,f,e,h,i,j){var k=this.m_activePlaceholder,h={position:"absolute",padding:0,
margin:0,textAlign:this._getTextAlign(h),fontSize:j.fontSize,fontFamily:j.fontFamily,fontWeight:j.fontWeight,fontStyle:j.fontStyle,color:j.fontColor,lineHeight:1},j="";switch(e){case 0:case 3:h.left=g+"px";h.top=b+"px";h.width=d+"px";h.height=c+"px";break;case 1:h.left=g+Math.round(d/2-c/2)+"px";h.top=b+Math.round(c/2-d/2)+"px";h.width=c+"px";h.height=d+"px";j="rotate(-90deg)";break;case 2:h.left=g+Math.round(d/2-c/2)+"px",h.top=b+Math.round(c/2-d/2)+"px",h.width=c+"px",h.height=d+"px",j="rotate(90deg)"}h["-webkit-transform-origin"]=
"center center";h["-moz-transform-origin"]="center center";h["-o-transform-origin"]="center center";h["-ms-transform-origin"]="center center";h["-webkit-transform"]=j;h["-moz-transform"]=j;h["-o-transform"]=j;h["-ms-transform"]=j;h.transform=j;h.maxWidth=h.width;h.maxHeight=h.height;f=f.replace(RegExp("\n","g"),"<br/>");switch(i){case 0:this.debug&&(h.border="solid 1px black");b=this.m_cache.get(k.name,k.activeLayer.name,"text");null===b?(b=a.common.JsonML.toHTML(["div",{style:h,$:function(a){a.innerHTML=
f}}]),k.activeLayer.canvas.appendChild(b),this.m_cache.put(k.name,k.activeLayer.name,"text",b)):(a.common.JsonML.applyStyles(b,h),b.innerHTML=f);break;default:h.borderCollapse="collapse",g={verticalAlign:this._getVerticalAlignment(i),padding:0},this.debug&&(g.border="solid 1px black"),b=this.m_cache.get(k.name,k.activeLayer.name,"textintable"),null===b?(b=a.common.JsonML.toHTML(["table",{style:h},["tbody",["tr",["td",{style:g,$:function(a){a.innerHTML=f}}]]]]),k.activeLayer.canvas.appendChild(b),
this.m_cache.put(k.name,k.activeLayer.name,"textintable",b)):(a.common.JsonML.applyStyles(b,h),k=b.getElementsByTagName("td")[0],a.common.JsonML.applyStyles(k,g),k.innerHTML=f)}};a.common.Graphics.prototype._getTextAlign=function(a){var b=null;switch(a){case 0:b="center";break;case 1:b="left";break;case 2:b="right"}return b};a.common.Graphics.prototype._getVerticalAlignment=function(a){var b=null;switch(a){case 1:b="middle";break;case 0:b="top";break;case 2:b="bottom"}return b};a.common.Graphics.prototype.polylinesBuffer=
function(a){a.loop(this,function(a){0<a.length()&&this.polyline(a)})};a.common.Graphics.prototype.polyline=function(a){var b=null,d=null,c=a.paletteItem.toAttr();a.loop(this,function(a){switch(a.segmentType){case 1:b=Math.round(a.x)+0.5;d=Math.round(a.y)+0.5;break;case 0:this.rightAngleLine(b,d,Math.round(a.x)+0.5,Math.round(a.y)+0.5,c);b=Math.round(a.x)+0.5;d=Math.round(a.y)+0.5;break;case 4:this.dot(a.x,a.y,a.width,a.height,a.cornerRadius,c)}})};a.common.Graphics.prototype.dot=function(g,b,d,c,
f,e){var h=this.m_activePlaceholder,i=this.m_cache.get(h.name,h.activeLayer.name,"dot"),j=void 0!==e.lineWidth&&void 0!==e.borderColor,g={position:"absolute",width:d-(j?1:0),top:Math.round(b),left:Math.round(g),padding:0,margin:0,lineHeight:"0px",overflow:"hidden",height:c-(j?1:0),background:e.fillColor,MozBorderRadius:f,WebkitBorderRadius:f,"-khtml-border-radius":f,borderRadius:f,fontSize:"0px",borderStyle:j?"Solid":"None",borderWidth:j?"1px":"0px",borderColor:j?e.borderColor:""};null===i?(i=a.common.JsonML.toHTML(["div",
{style:g}]),h.activeLayer.canvas.appendChild(i),this.m_cache.put(h.name,h.activeLayer.name,"dot",i)):a.common.JsonML.applyStyles(i,g)};a.common.Graphics.prototype.rightAngleLine=function(g,b,d,c,f){var e=this.m_activePlaceholder,h=Math.abs(c-b)>Math.abs(d-g),i=f.lineWidth,f={position:"absolute",top:Math.round(Math.min(b,c)-(h?0:i/2)),left:Math.round(Math.min(g,d)-(h?i/2:0)),padding:0,margin:0,opacity:0.5,lineHeight:"0px",overflow:"hidden",background:f.borderColor,fontSize:"0px"};h?(f.width=i,f.height=
Math.abs(Math.round(c-b))):(f.width=Math.abs(Math.round(d-g)),f.height=i);g=this.m_cache.get(e.name,e.activeLayer.name,"rect");null===g?(g=a.common.JsonML.toHTML(["div",{style:f}]),e.activeLayer.canvas.appendChild(g),this.m_cache.put(e.name,e.activeLayer.name,"rect",g)):a.common.JsonML.applyStyles(g,f)};a.common.Graphics.prototype.template=function(g,b,d,c,f,e,h,i,j,k,m,n,l){var d=this.m_activePlaceholder,c="template"+(null!==k?k:a.common.hashCode(j)),p=0,q,k=this.m_cache.get(d.name,d.activeLayer.name,
c);null!==l&&void 0!==l.borderWidth&&(p=this.getPxSize(l.borderWidth));q={width:h-p+"px",height:i-p+"px",top:b+e+"px",left:g+f+"px"};a.common.mergeObjects(q,l);null==n&&(n=new a.common.RenderEventArgs);n.x=g+f;n.y=b+e;n.width=h-p;n.height=i-p;null==k?(k=this.getElementByTemplate(j),q=a.common.mergeObjects(q,{position:"absolute",padding:"0px",margin:"0px"},l),a.common.JsonML.applyStyles(k,q),n.element=k,n.renderingMode=0,null!==m&&m(null,n),d.activeLayer.canvas.appendChild(k),this.m_cache.put(d.name,
d.activeLayer.name,c,k)):(n.element=k,n.renderingMode=1,a.common.JsonML.applyStyles(k,q),null!==m&&m(null,n));return k};a.common.Graphics.prototype.getElementByTemplate=function(g){var b=null;a.common.isArray(g)?b=a.common.JsonML.toHTML(g):(b=document.createElement("div"),b.innerHTML=g,b=b.firstChild);return b};a.common.Graphics.prototype.getPxSize=function(a,b){var d=a;"string"===typeof a&&(d=0<a.indexOf("pt")?96*parseInt(a,10)/72:0<a.indexOf("%")?parseFloat(a)/100*b:parseInt(a,10));return d};a.common.Cache=
function(){this.threshold=20;this.m_visible={};this.m_invisible={}};a.common.Cache.prototype.begin=function(){var a,b,d,c;for(a in this.m_visible)if(this.m_visible.hasOwnProperty(a))for(b in this.m_visible[a])if(this.m_visible[a].hasOwnProperty(b)){for(d=this.m_visible[a][b].length-1;0<=d;d-=1)c=this.m_visible[a][b][d],c.style.visibility="hidden",this.m_invisible[a][b].push(c);this.m_visible[a][b].length=0}};a.common.Cache.prototype.end=function(){var a,b,d;for(a in this.m_visible)if(this.m_visible.hasOwnProperty(a))for(b in this.m_visible[a])if(this.m_visible[a].hasOwnProperty(b)&&
this.m_invisible[a][b].length>this.threshold)for(;void 0!==(d=this.m_invisible[a][b].pop());)d.parentNode.removeChild(d)};a.common.Cache.prototype.reset=function(a,b){var a=a+"-"+b,d=null,c,f;for(c in this.m_visible[a])if(this.m_visible[a].hasOwnProperty(c)){for(f=this.m_visible[a][c].length-1;0<=f;f-=1)d=this.m_visible[a][c][f],this.m_invisible[a][c].push(d),d.style.visibility="hidden";this.m_visible[a][c].length=0}};a.common.Cache.prototype.clear=function(){var a,b,d;for(a in this.m_visible)if(this.m_visible.hasOwnProperty(a))for(b in this.m_visible[a])if(this.m_visible[a].hasOwnProperty(b)){for(;void 0!==
(d=this.m_visible[a][b].pop());)d.parentNode.removeChild(d);for(;void 0!==(d=this.m_invisible[a][b].pop());)d.parentNode.removeChild(d)}};a.common.Cache.prototype.get=function(a,b,d){a=a+"-"+b;b=null;void 0===this.m_visible[a]&&(this.m_visible[a]={},this.m_invisible[a]={});void 0===this.m_visible[a][d]&&(this.m_visible[a][d]=[],this.m_invisible[a][d]=[]);b=this.m_invisible[a][d].pop()||null;null!==b&&(this.m_visible[a][d].push(b),b.style.visibility="inherit");return b};a.common.Cache.prototype.put=
function(a,b,d,c){this.m_visible[a+"-"+b][d].push(c)};a.common.CanvasGraphics=function(g){this.parent=a.common.Graphics.prototype;this.parent.constructor.apply(this,arguments);this.graphicsType=1;this.m_maximum=8E3};a.common.CanvasGraphics.prototype=new a.common.Graphics;a.common.CanvasGraphics.prototype.clean=function(){var a,b,d,c;for(a in this.m_placeholders)if(this.m_placeholders.hasOwnProperty(a))for(d in b=this.m_placeholders[a],b.layers)b.layers.hasOwnProperty(d)&&(c=b.layers[d],null!==c.canvascanvas&&
(c.canvascanvas.parentNode.removeChild(c.canvascanvas),c.canvascanvas=null));this.parent.clean.apply(this,arguments)};a.common.CanvasGraphics.prototype._activatePlaceholder=function(a){var b,d,c;this.parent._activatePlaceholder.apply(this,arguments);b=this.m_activePlaceholder;d=b.size.width;c=b.size.height;b.hasGraphics=d>this.m_maximum||c>this.m_maximum?!1:!0};a.common.CanvasGraphics.prototype.resizePlaceholder=function(a,b,d,c,f){var e,h;this.parent.resizePlaceholder.apply(this,arguments);for(e in a.layers)a.layers.hasOwnProperty(e)&&
(h=a.layers[e],null!==h.canvascanvas&&(h.canvascanvas.width=c,h.canvascanvas.height=f))};a.common.CanvasGraphics.prototype.begin=function(){var a,b,d,c,f,e;this.parent.begin.apply(this);for(a in this.m_placeholders)if(this.m_placeholders.hasOwnProperty(a))for(d in b=this.m_placeholders[a],f=b.size.width,e=b.size.height,b.layers)b.layers.hasOwnProperty(d)&&(c=b.layers[d],null!==c.canvascanvas&&c.canvascontext.clearRect(0,0,f,e))};a.common.Graphics.prototype._getContext=function(a,b){var d=a.size.width,
c=a.size.height;null===b.canvascanvas&&(b.canvascanvas=document.createElement("canvas"),b.canvascanvas.width=d,b.canvascanvas.height=c,this.prepend(a.activeLayer.canvas,b.canvascanvas),b.canvascontext=b.canvascanvas.getContext("2d"));return b.canvascontext};a.common.CanvasGraphics.prototype.reset=function(a,b){var d="none",c=-1,f,e;switch(arguments.length){case 1:"string"===typeof a?d=a:c=a;break;case 2:d=a,c=b}this.parent.reset.apply(this,arguments);f=this.m_placeholders[d];void 0!==f&&(d=f.size.width,
e=f.size.height,c=f.layers[c],void 0!==c&&null!==c.canvascanvas&&c.canvascontext.clearRect(0,0,d,e))};a.common.CanvasGraphics.prototype.polyline=function(a){var b=this.m_activePlaceholder,d,c,f=a.paletteItem.toAttr(),e,h;if(b.hasGraphics){d=b.activeLayer;c=this._getContext(b,d);c.save();void 0!==f.lineWidth&&void 0!==f.borderColor?(c.strokeStyle=f.borderColor,c.lineWidth=f.lineWidth):(c.lineWidth=0,c.strokeStyle="Transparent");if(null!=f.lineType){b=Math.round(f.lineWidth)||1;switch(f.lineType){case 0:e=
[];break;case 1:e=[b,b];break;case 2:e=[5*b,3*b]}void 0!==c.setLineDash?c.setLineDash(e):void 0!==c.webkitLineDash?c.webkitLineDash=e:void 0!==c.mozDash&&(c.mozDash=e)}c.beginPath();a.loop(this,function(a){switch(a.segmentType){case 1:c.moveTo(Math.round(a.x)+0.5,Math.round(a.y)+0.5);break;case 0:c.lineTo(Math.round(a.x)+0.5,Math.round(a.y)+0.5);break;case 4:a.width==a.height&&a.width/2<=a.cornerRadius?(c.moveTo(Math.round(a.x)+a.width+0.5,Math.round(a.y)+a.height/2+0.5),c.arc(Math.round(a.x)+a.width/
2+0.5,Math.round(a.y)+a.height/2+0.5,Math.round(a.width/2),0,2*Math.PI,!1)):0===a.cornerRadius?(c.moveTo(Math.round(a.x)+0.5,Math.round(a.y)+0.5),c.lineTo(Math.round(a.x+a.width)+0.5,Math.round(a.y)+0.5),c.lineTo(Math.round(a.x+a.width)+0.5,Math.round(a.y+a.height)+0.5),c.lineTo(Math.round(a.x)+0.5,Math.round(a.y+a.height)+0.5),c.lineTo(Math.round(a.x)+0.5,Math.round(a.y)+0.5)):(h=Math.min(a.cornerRadius,Math.min(a.width/2,a.height/2)),c.moveTo(Math.round(a.x)+0.5,Math.round(a.y+h)+0.5),c.arc(Math.round(a.x+
h)+0.5,Math.round(a.y+h)+0.5,Math.round(h),Math.PI,-Math.PI/2,!1),c.lineTo(Math.round(a.x+a.width-h)+0.5,Math.round(a.y)+0.5),c.arc(Math.round(a.x+a.width-h)+0.5,Math.round(a.y+h)+0.5,Math.round(h),-Math.PI/2,0,!1),c.lineTo(Math.round(a.x+a.width)+0.5,Math.round(a.y+a.height-h)+0.5),c.arc(Math.round(a.x+a.width-h)+0.5,Math.round(a.y+a.height-h)+0.5,Math.round(h),0,Math.PI/2,!1),c.lineTo(Math.round(a.x+h)+0.5,Math.round(a.y+a.height)+0.5),c.arc(Math.round(a.x+h)+0.5,Math.round(a.y+a.height-h)+0.5,
Math.round(h),Math.PI/2,Math.PI,!1),c.lineTo(Math.round(a.x)+0.5,Math.round(a.y+h)+0.5));break;case 2:c.quadraticCurveTo(Math.round(a.cpX)+0.5,Math.round(a.cpY)+0.5,Math.round(a.x)+0.5,Math.round(a.y)+0.5);break;case 3:c.bezierCurveTo(Math.round(a.cpX1)+0.5,Math.round(a.cpY1)+0.5,Math.round(a.cpX2)+0.5,Math.round(a.cpY2)+0.5,Math.round(a.x)+0.5,Math.round(a.y)+0.5)}});null!=f.opacity&&(c.globalAlpha=f.opacity);void 0!==f.lineWidth&&c.stroke();void 0!==f.fillColor&&(c.fillStyle=f.fillColor,c.fill());
c.restore()}else this.parent.polyline.apply(this,arguments)};a.common.Element=function(a,b){this.name=this.ns=null;this.attr={};this.style={};this.children=[];switch(arguments.length){case 1:this.name=a;break;case 2:this.ns=a,this.name=b}};a.common.Element.prototype.setAttribute=function(a,b){this.attr[a]=b};a.common.Element.prototype.appendChild=function(a){this.children[this.children.length]=a};a.common.Element.prototype.create=function(a){var b=null,d,c,b=null!==this.ns?document.createElementNS(this.ns,
this.name):document.createElement(this.name);for(d in this.attr)this.attr.hasOwnProperty(d)&&(void 0!==a?b[d]=this.attr[d]:b.setAttribute(d,this.attr[d]));for(d in this.style)this.style.hasOwnProperty(d)&&(b.style[d]=this.style[d]);for(c=0;c<this.children.length;c+=1)d=this.children[c],"string"===typeof d?b.appendChild(document.createTextNode(d)):b.appendChild(d.create(a));return b};a.common.Element.prototype.update=function(a,b){var d,c,f;for(d in this.style)this.style.hasOwnProperty(d)&&(c=this.style[d],
a.style[d]!==c&&(a.style[d]=c));for(d in this.attr)this.attr.hasOwnProperty(d)&&(c=this.attr[d],void 0!==b?a[d]!==c&&(a[d]=c):a.getAttribute(d)!==c&&a.setAttribute(d,c));d=this.children.length;for(c=0;c<d;c+=1)f=this.children[c],"string"===typeof f?a.innerHtml!==f&&(a.innerHtml=f):this.children[c].update(a.children[c],b)};a.common.Layer=function(a){this.name=a;this.svgcanvas=this.canvascanvas=this.canvas=null};a.common.Placeholder=function(a){this.name=a;this.layers={};this.div=this.rect=this.size=
this.activeLayer=null;this.hasGraphics=!0};a.common.SvgGraphics=function(g){this.parent=a.common.Graphics.prototype;this.parent.constructor.apply(this,arguments);this._svgxmlns="http://www.w3.org/2000/svg";this.graphicsType=0;this.hasGraphics=!0};a.common.SvgGraphics.prototype=new a.common.Graphics;a.common.SvgGraphics.prototype.clean=function(){var a,b,d,c;for(a in this.m_placeholders)if(this.m_placeholders.hasOwnProperty(a))for(d in b=this.m_placeholders[a],b.layers)b.layers.hasOwnProperty(d)&&
(c=b.layers[d],null!==c.svgcanvas&&(c.svgcanvas.parentNode.removeChild(c.svgcanvas),c.svgcanvas=null));this.parent.clean.apply(this,arguments)};a.common.SvgGraphics.prototype.resizePlaceholder=function(g,b,d,c,f){var e,h;this.parent.resizePlaceholder.apply(this,arguments);for(e in g.layers)g.layers.hasOwnProperty(e)&&(h=g.layers[e],null!==h.svgcanvas&&(a.common.JsonML.applyStyles(h.svgcanvas,{position:"absolute",width:c+"px",height:f+"px"}),h.svgcanvas.viewBox="0 0 "+c+" "+f))};a.common.SvgGraphics.prototype._getCanvas=
function(){var g=this.m_activePlaceholder,b=g.activeLayer,d=g.rect;null===b.svgcanvas&&(b.svgcanvas=document.createElementNS(this._svgxmlns,"svg"),b.svgcanvas.viewBox=d.x+" "+d.y+" "+d.width+" "+d.height,a.common.JsonML.applyStyles(b.svgcanvas,{width:d.width+"px",height:d.height+"px"}),this.prepend(g.activeLayer.canvas,b.svgcanvas));return b.svgcanvas};a.common.SvgGraphics.prototype.polyline=function(g){var b=this.m_activePlaceholder,d,c,f=g.paletteItem.toAttr(),e,h,i;d=new a.common.Element(this._svgxmlns,
"path");void 0!==f.fillColor?(d.setAttribute("fill",f.fillColor),d.setAttribute("fill-opacity",f.opacity)):d.setAttribute("fill-opacity",0);void 0!==f.lineWidth&&void 0!==f.borderColor?(d.setAttribute("stroke",f.borderColor),d.setAttribute("stroke-width",f.lineWidth),void 0!==f.opacity?d.setAttribute("stroke-opacity",f.opacity):d.setAttribute("stroke-opacity",1)):(d.setAttribute("stroke","transparent"),d.setAttribute("stroke-width",0));if(null!=f.lineType)switch(e=Math.round(f.lineWidth)||1,f.lineType){case 0:d.setAttribute("stroke-dasharray",
"");break;case 1:d.setAttribute("stroke-dasharray",e+","+e);break;case 2:d.setAttribute("stroke-dasharray",5*e+","+3*e)}c="";g.loop(this,function(a){switch(a.segmentType){case 1:c+="M"+(Math.round(a.x)+0.5)+" "+(Math.round(a.y)+0.5);break;case 0:c+="L"+(Math.round(a.x)+0.5)+" "+(Math.round(a.y)+0.5);break;case 2:c+="Q"+(Math.round(a.cpX)+0.5)+" "+(Math.round(a.cpY)+0.5)+" "+(Math.round(a.x)+0.5)+" "+(Math.round(a.y)+0.5);break;case 4:a.width==a.height&&a.width/2<=a.cornerRadius?(h=a.width/2,c+="M"+
(Math.round(a.x)+0.5)+" "+(Math.round(a.y)+a.height/2+0.5),c+="A"+h+" "+h+" 0 0 0 "+(Math.round(a.x+a.width)+0.5)+" "+(Math.round(a.y)+a.height/2+0.5),c+="A"+h+" "+h+" 0 0 0 "+(Math.round(a.x)+0.5)+" "+(Math.round(a.y)+a.height/2+0.5)):0===a.cornerRadius?(c+="M"+(Math.round(a.x)+0.5)+" "+(Math.round(a.y)+0.5),c+="L"+(Math.round(a.x+a.width)+0.5)+" "+(Math.round(a.y)+0.5),c+="L"+(Math.round(a.x+a.width)+0.5)+" "+(Math.round(a.y+a.height)+0.5),c+="L"+(Math.round(a.x)+0.5)+" "+(Math.round(a.y+a.height)+
0.5),c+="L"+(Math.round(a.x)+0.5)+" "+(Math.round(a.y)+0.5)):(i=Math.min(a.cornerRadius,Math.min(a.width/2,a.height/2)),c+="M"+(Math.round(a.x)+0.5)+" "+(Math.round(a.y+i)+0.5),c+="A"+Math.round(i)+" "+Math.round(i)+" 0 0 1 "+(Math.round(a.x+i)+0.5)+" "+(Math.round(a.y)+0.5),c+="L"+(Math.round(a.x+a.width-i)+0.5)+" "+(Math.round(a.y)+0.5),c+="A"+Math.round(i)+" "+Math.round(i)+" 0 0 1 "+(Math.round(a.x+a.width)+0.5)+" "+(Math.round(a.y+i)+0.5),c+="L"+(Math.round(a.x+a.width)+0.5)+" "+(Math.round(a.y+
a.height-i)+0.5),c+="A"+Math.round(i)+" "+Math.round(i)+" 0 0 1 "+(Math.round(a.x+a.width-i)+0.5)+" "+(Math.round(a.y+a.height)+0.5),c+="L"+(Math.round(a.x+i)+0.5)+" "+(Math.round(a.y+a.height)+0.5),c+="A"+Math.round(i)+" "+Math.round(i)+" 0 0 1 "+(Math.round(a.x)+0.5)+" "+(Math.round(a.y+a.height-i)+0.5),c+="L"+(Math.round(a.x)+0.5)+" "+(Math.round(a.y+i)+0.5));break;case 3:c+="C"+(Math.round(a.cpX1)+0.5)+" "+(Math.round(a.cpY1)+0.5)+" "+(Math.round(a.cpX2)+0.5)+" "+(Math.round(a.cpY2)+0.5)+" "+
(Math.round(a.x)+0.5)+" "+(Math.round(a.y)+0.5)}});d.setAttribute("d",c);g=this.m_cache.get(b.name,b.activeLayer.name,"path");null===g?(g=d.create(),d=this._getCanvas(),d.appendChild(g),this.m_cache.put(b.name,b.activeLayer.name,"path",g)):d.update(g)};a.common.Transform=function(){this.invertVertically=this.invertHorizontally=this.invertArea=!1;this.size=null};a.common.Transform.prototype.setOrientation=function(a){switch(a){case 0:this.invertVertically=this.invertHorizontally=this.invertArea=!1;
break;case 1:this.invertHorizontally=this.invertArea=!1;this.invertVertically=!0;break;case 2:this.invertArea=!0;this.invertVertically=this.invertHorizontally=!1;break;case 3:this.invertHorizontally=this.invertArea=!0,this.invertVertically=!1}};a.common.Transform.prototype.getOrientation=function(a){var b=a;if(this.invertHorizontally)switch(a){case 2:b=3;break;case 3:b=2}if(this.invertVertically)switch(a){case 0:b=1;break;case 1:b=0}if(this.invertArea)switch(b){case 0:b=2;break;case 1:b=3;break;case 2:b=
0;break;case 3:b=1}return b};a.common.Transform.prototype.transformPoint=function(a,b,d,c,f){var e;d&&this.invertArea&&(e=a,a=b,b=e);this.invertHorizontally&&(a=this.size.width-a);this.invertVertically&&(b=this.size.height-b);!d&&this.invertArea&&(e=a,a=b,b=e);f.call(c,a,b)};a.common.Transform.prototype.transformPoints=function(a,b,d,c,f,e,h){var i;f&&this.invertArea&&(i=a,a=b,b=i,i=d,d=c,c=i);this.invertHorizontally&&(a=this.size.width-a,d=this.size.width-d);this.invertVertically&&(b=this.size.height-
b,c=this.size.height-c);!f&&this.invertArea&&(i=a,a=b,b=i,i=d,d=c,c=i);h.call(e,a,b,d,c)};a.common.Transform.prototype.transform3Points=function(a,b,d,c,f,e,h,i,j){var k;h&&this.invertArea&&(k=a,a=b,b=k,k=d,d=c,c=k,k=f,f=e,e=k);this.invertHorizontally&&(a=this.size.width-a,d=this.size.width-d,f=this.size.width-f);this.invertVertically&&(b=this.size.height-b,c=this.size.height-c,e=this.size.height-e);!h&&this.invertArea&&(k=a,a=b,b=k,k=d,d=c,c=k,k=f,f=e,e=k);j.call(i,a,b,d,c,f,e)};a.common.Transform.prototype.transformRect=
function(a,b,d,c,f,e,h){var i;f&&this.invertArea&&(i=a,a=b,b=i,i=d,d=c,c=i);this.invertHorizontally&&(a=this.size.width-a-d);this.invertVertically&&(b=this.size.height-b-c);!f&&this.invertArea&&(i=a,a=b,b=i,i=d,d=c,c=i);h.call(e,a,b,d,c)};a.common.ArrayReader=function(g,b,d,c,f){this.itemTemplate=g;this.containsUniqueItems=b;this.uniquePropertyKey=d;this.containsPrimitiveValues=a.common.isNullOrEmpty(d);this.createSourceHash=c;this.isOrdered=f};a.common.ArrayReader.prototype.read=function(g,b,d,c){var f=
[],e={},h,i,j={},k={},m,n,l,p,q,r=d+"-seq";if(!b||!a.common.isArray(b))b=[];h=c.hash.hasOwnProperty(d)?c.hash[d]:{};i=c.hash.hasOwnProperty(r)?c.hash[r]:{};l=0;for(p=b.length;l<p;l+=1)m=b[l],n=this.containsUniqueItems?this.containsPrimitiveValues?m:m[this.uniquePropertyKey]:l,e.hasOwnProperty(n)||(q=this.itemTemplate.read(h.hasOwnProperty(n)?h[n]:{},m,d+"-"+l,c),f.push(q),e[n]=q,j[l]=n,this.createSourceHash&&(k[n]=m),this.isOrdered&&i[l]!=j[l]&&(c.isChanged=!0));c.hash[d]=e;c.hash[r]=j;this.createSourceHash&&
(c.sourceHash[d]=k);if(null==g||g.length!=f.length)c.isChanged=!0;return f};a.common.EnumerationReader=function(a,b,d){this.enumeration=a;this.isNullable=b;this.defaultValue=d;this.hash={};for(var c in a)this.hash[a[c]]=c};a.common.EnumerationReader.prototype.read=function(a,b,d,c){if(null===b||"undefined"==typeof b||!this.hash.hasOwnProperty(b))b=this.isNullable?null:this.defaultValue;a!==b&&(c.isChanged=!0);return b};a.common.FunctionReader=function(){};a.common.FunctionReader.prototype.read=function(a,
b){return"function"==typeof b?b:null};a.common.ObjectReader=function(a,b,d){this.dataTemplate=a;this.isNullable=b;this.defaultValue=d};a.common.ObjectReader.prototype.read=function(g,b,d,c){var f=null,e,h;b||(b=this.isNullable?null:this.defaultValue);if(a.common.isObject(b))for(e in f={},this.dataTemplate)this.dataTemplate.hasOwnProperty(e)&&(h=this.dataTemplate[e],f[e]=h.read(a.common.isObject(g)?g[e]:null,b[e],d+"-"+e,c));else f=b,g!==b&&(c.isChanged=!0);return f};a.common.ValueReader=function(a,
b,d){this.acceptedTypes=a;this.isNullable=b;this.defaultValue=d;this.hash={};for(b=0;b<a.length;b+=1)this.hash[a[b]]=!0};a.common.ValueReader.prototype.stringify=function(a){var b=[];return JSON.stringify(a,function(a,c){return"_"===a[0]?null:null!==c&&"object"==typeof c?-1==b.indexOf(c)?(b.push(c),c):null:c})};a.common.ValueReader.prototype.read=function(a,b,d,c){d=null;if(null===b||"undefined"==typeof b||!this.hash.hasOwnProperty(typeof b))b=this.isNullable?null:this.defaultValue;d=b;this.stringify(a)!==
this.stringify(b)&&(c.isChanged=!0);return d};a.famdiagram.EventArgs=function(){this.context=this.oldContext=null;this.parentItems=[];this.childrenItems=[];this.name=this.position=null;this.cancel=!1};a.famdiagram.TemplateConfig=function(){this.name=null;this.isActive=!0;this.itemSize=new a.common.Size(120,100);this.itemBorderWidth=1;this.minimizedItemShapeType=this.itemTemplate=null;this.minimizedItemSize=new a.common.Size(4,4);this.minimizedItemCornerRadius=null;this.minimizedItemLineWidth=1;this.minimizedItemBorderColor=
null;this.minimizedItemLineType=0;this.minimizedItemFillColor=null;this.minimizedItemOpacity=1;this.highlightPadding=new a.common.Thickness(2,2,2,2);this.highlightBorderWidth=1;this.highlightTemplate=null;this.cursorPadding=new a.common.Thickness(3,3,3,3);this.cursorBorderWidth=2;this.onButtonsRender=this.buttons=this.cursorTemplate=null};a.famdiagram.BackgroundAnnotationConfig=function(g){var b;this.annotationType=4;this.items=[];this.zOrderType=0;this.offset=new a.common.Thickness(18,18,18,18);
this.lineWidth=2;this.opacity=1;this.fillColor=this.borderColor=null;this.lineType=0;this.selectItems=!1;switch(arguments.length){case 1:if(null!==g)if(g instanceof Array)this.items=g;else if("object"==typeof g)for(b in g)g.hasOwnProperty(b)&&(this[b]=g[b])}};a.famdiagram.ButtonConfig=function(g,b,d){this.name=g;this.icon=b;this.text=!1;this.label=null;this.tooltip=d;this.size=new a.common.Size(16,16)};a.famdiagram.Config=function(g){this.name=void 0!==g?g:"FamDiagram";this.classPrefix="famdiagram";
this.graphicsType=this.navigationMode=0;this.pageFitMode=3;this.minimalVisibility=2;this.orientationType=0;this.verticalAlignment=1;this.arrowsDirection=0;this.showExtraArrows=!0;this.extraArrowsMinimumSpace=30;this.groupByType=2;this.alignBylevels=!0;this.enableMatrixLayout=!1;this.minimumMatrixSize=4;this.maximumColumnsInMatrix=6;this.hideGrandParentsConnectors=!1;this.elbowType=3;this.elbowDotSize=this.bevelSize=4;this.emptyDiagramMessage="Diagram is empty.";this.items=[];this.annotations=[];this.highlightItem=
this.cursorItem=null;this.highlightGravityRadius=40;this.selectedItems=[];this.hasSelectorCheckbox=0;this.selectCheckBoxLabel="Selected";this.neighboursSelectionMode=this.selectionPathMode=0;this.templates=[];this.defaultLabelAnnotationTemplate=this.defaultTemplateName=null;this.hasButtons=0;this.buttons=[];this.onCursorRender=this.onHighlightRender=this.onItemRender=this.onMouseDblClick=this.onMouseClick=this.onButtonClick=this.onSelectionChanged=this.onSelectionChanging=this.onCursorChanged=this.onCursorChanging=
this.onHighlightChanged=this.onHighlightChanging=this.onButtonsRender=null;this.dotLevelShift=this.normalLevelShift=20;this.normalItemsInterval=this.lineLevelShift=10;this.dotItemsInterval=1;this.lineItemsInterval=2;this.cousinsIntervalMultiplier=5;this.itemTitleFirstFontColor="#ffffff";this.itemTitleSecondFontColor="#000080";this.minimizedItemShapeType=6;this.linesColor="#c0c0c0";this.linesWidth=1;this.linesType=0;this.showNeigboursConnectorsHighlighted=!1;this.highlightLinesColor="#ff0000";this.highlightLinesWidth=
1;this.highlightLinesType=0;this.linesPalette=[];this.showCallout=!0;this.calloutMaximumVisibility=2;this.calloutPlacementOffset=100;this.defaultCalloutTemplateName=null;this.calloutfillColor="#000000";this.calloutBorderColor=null;this.calloutCornerRadius=this.calloutOffset=4;this.calloutPointerWidth="10%";this.calloutLineWidth=1;this.calloutOpacity=0.2;this.buttonsPanelSize=28;this.checkBoxPanelSize=this.groupTitlePanelSize=24;this.groupTitleOrientation=this.groupTitlePlacementType=2;this.groupTitleVerticalAlignment=
1;this.groupTitleHorizontalAlignment=0;this.groupTitleFontSize="12px";this.groupTitleFontFamily="Arial";this.groupTitleColor="#4169e1";this.groupTitleFontStyle=this.groupTitleFontWeight="normal";this.distance=3;this.scale=1;this.minimumScale=0.5;this.maximumScale=1;this.showLabels=0;this.labelSize=new a.common.Size(80,24);this.labelOffset=1;this.labelOrientation=0;this.labelPlacement=1;this.labelFontSize="10px";this.labelFontFamily="Arial";this.labelColor="#000000";this.labelFontStyle=this.labelFontWeight=
"normal";this.enablePanning=!0;this.autoSizeMinimum=new a.common.Size(800,600);this.autoSizeMaximum=new a.common.Size(1024,768)};a.famdiagram.ConnectorAnnotationConfig=function(g,b){var d;this.annotationType=0;this.zOrderType=2;this.toItem=this.fromItem=null;this.connectorPlacementType=this.connectorShapeType=0;this.labelPlacementType=1;this.offset=new a.common.Thickness(0,0,0,0);this.lineWidth=2;this.color="#000000";this.lineType=0;this.selectItems=!0;this.label=null;this.labelSize=new a.common.Size(60,
30);switch(arguments.length){case 1:for(d in g)g.hasOwnProperty(d)&&(this[d]=g[d]);break;case 2:this.fromItem=g,this.toItem=b}};a.famdiagram.HighlightPathAnnotationConfig=function(a){var b;this.zOrderType=this.annotationType=2;this.items=[];this.lineWidth=2;this.color="#ff0000";this.lineType=0;this.opacity=1;this.showArrows=!0;this.selectItems=!1;switch(arguments.length){case 1:if(null!==a)if(a instanceof Array)this.items=a;else if("object"==typeof a)for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}};
a.famdiagram.ItemConfig=function(a,b,d,c,f){var e;this.id=null;this.parents=[];this.spouses=[];this.relativeItem=null;this.placementType=3;this.context=this.image=this.description=this.title=this.position=null;this.itemTitleColor="#4169e1";this.groupTitle=this.minimizedItemShapeType=null;this.groupTitleColor="#4169e1";this.isActive=!0;this.hasButtons=this.hasSelectorCheckbox=0;this.templateName=null;this.showCallout=0;this.label=this.calloutTemplateName=null;this.showLabel=0;this.labelSize=null;this.labelOrientation=
3;this.labelPlacement=0;switch(arguments.length){case 1:for(e in a)a.hasOwnProperty(e)&&(this[e]=a[e]);break;case 5:this.id=a,this.parents=b,this.title=d,this.description=c,this.image=f}};a.famdiagram.LabelAnnotationConfig=function(a,b){var d;this.annotationType=3;this.fromItem=null;this.toItems=[];this.title=null;this.itemTitleColor="#4169e1";this.templateName=null;switch(arguments.length){case 1:for(d in a)a.hasOwnProperty(d)&&(this[d]=a[d]);break;case 2:this.fromItem=a,this.toItem=b}};a.famdiagram.PaletteItemConfig=
function(a,b,d){var c;this.lineColor="#c0c0c0";this.lineWidth=1;this.lineType=0;switch(arguments.length){case 1:for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);break;case 3:this.lineColor=a,this.lineWidth=b,this.lineType=d}};a.famdiagram.ShapeAnnotationConfig=function(g){var b;this.annotationType=1;this.zOrderType=0;this.items=[];this.shapeType=0;this.offset=new a.common.Thickness(0,0,0,0);this.lineWidth=2;this.cornerRadius="10%";this.opacity=1;this.fillColor=this.borderColor=null;this.lineType=0;
this.selectItems=!1;this.label=null;this.labelSize=new a.common.Size(60,30);this.labelPlacement=0;this.labelOffset=4;switch(arguments.length){case 1:if(null!==g)if(g instanceof Array)this.items=g;else if("object"==typeof g)for(b in g)g.hasOwnProperty(b)&&(this[b]=g[b])}};a.famdiagram.EdgeItem=function(a,b,d,c){this.values=[b,c];this[a]=0;this[d]=1};a.famdiagram.EdgeItem.prototype.getNear=function(a){return this.values[this[a]]};a.famdiagram.EdgeItem.prototype.getFar=function(a){return this.values[Math.abs(this[a]-
1)]};a.famdiagram.EdgeItem.prototype.setNear=function(a,b){this.values[this[a]]=b};a.famdiagram.EdgeItem.prototype.setFar=function(a,b){this.values[Math.abs(this[a]-1)]=b};a.famdiagram.EdgeItem.prototype.toString=function(){return this.parent+","+this.child};a.famdiagram.FamilyItem=function(a){var b;this.itemConfig=this.familyId=this.id=null;this.isActive=this.isVisible=!0;this.isLevelNeutral=!1;this.level=null;this.levelGravity=0;this.hideChildrenConnection=this.hideParentConnection=!1;switch(arguments.length){case 1:for(b in a)a.hasOwnProperty(b)&&
(this[b]=a[b])}};a.famdiagram.Slot=function(a){this.itemId=a;this.position=null;this.balance=0;this.left={};this.right={};this.crossings={}};a.famdiagram.Slot.prototype.clone=function(g){var b=new a.famdiagram.Slot(g),d;for(d in this.left)this.left.hasOwnProperty(d)&&(b.left[d]=this.left[d]);for(d in this.right)this.right.hasOwnProperty(d)&&(b.right[d]=this.right[d]);for(d in this.crossings)this.crossings.hasOwnProperty(d)&&(b.crossings[d]=this.crossings[d]);b.itemid=g;return b};a.famdiagram.LabelAnnotationOptionTask=
function(g,b,d){var c=[],f={},e=null,h={},i=new a.common.ArrayReader(new a.common.ObjectReader({zOrderType:new a.common.EnumerationReader(a.common.ZOrderType,!1,d.zOrderType),fromItem:new a.common.ValueReader(["string","number"],!0),toItems:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0),title:new a.common.ValueReader(["string"],!0),itemTitleColor:new a.common.ValueReader(["string"],!1,d.itemTitleColor),templateName:new a.common.ValueReader(["string"],!0)},!1),!1,null,
!0);return{process:function(){var a={isChanged:!1,hash:h,sourceHash:{}},d=b.getMaximumId(),m,n,l;c=i.read(c,g.getAnnotations(3),"annotations",a);f={};var p=a.sourceHash.annotations;m=0;for(n=c.length;m<n;m+=1)l=c[m],d+=1,l.id=d,f[l.id]=p[m];e=d;return a.isChanged},getAnnotations:function(){return c},getMaximumId:function(){return e},getConfig:function(a){return f[a]}}};a.famdiagram.LabelAnnotationPlacementOptionTask=function(g){var b=[],d={},c=new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["number"],
!0),fromItem:new a.common.ValueReader(["string","number"],!0),toItems:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0)}),!0,"id");return{process:function(){var a={isChanged:!1,hash:d};b=c.read(b,g.getAnnotations(),"annotations",a);return a.isChanged},getAnnotations:function(){return b},getMaximumId:function(){return g.getMaximumId()}}};a.famdiagram.LabelAnnotationTemplateOptionTask=function(g,b){var d=[],c={},f=new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["number"],
!0),title:new a.common.ValueReader(["string"],!0),itemTitleColor:new a.common.ValueReader(["string"],!1,b.itemTitleColor),templateName:new a.common.ValueReader(["string"],!0)}),!0,"id");return{process:function(){var a={isChanged:!1,hash:c};d=f.read(d,g.getAnnotations(),"annotations",a);return a.isChanged},getAnnotations:function(){return d}}};a.famdiagram.NeighboursSelectionModeOptionTask=function(g,b){var d={},c=new a.common.ObjectReader({neighboursSelectionMode:new a.common.EnumerationReader(a.common.NeighboursSelectionMode,
!1,b.neighboursSelectionMode)});return{process:function(){var a={isChanged:!1};d=c.read(d,g.getOptions(),"options",a);return a.isChanged},getNeighboursSelectionMode:function(){return d.neighboursSelectionMode}}};a.famdiagram.HideGrandParentsConnectorsOptionTask=function(g,b){var d={},c={},f=new a.common.ObjectReader({hideGrandParentsConnectors:new a.common.ValueReader(["boolean"],!1,b.hideGrandParentsConnectors)});return{process:function(){var a={isChanged:!1,hash:c};d=f.read(d,g.getOptions(),"options",
a);return a.isChanged},getOptions:function(){return d}}};a.famdiagram.ItemsOptionTask=function(g,b){var d={},c={},f={},e=new a.common.ObjectReader({items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),parents:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0),isActive:new a.common.ValueReader(["boolean"],!1,b.isActive)}),!0,"id",!0)});return{process:function(){var a={isChanged:!1,hash:c,sourceHash:f};d=e.read(d,g.getOptions(),
"options",a);return a.isChanged},getItems:function(){return d.items},getConfig:function(a){return f["options-items"][a]}}};a.famdiagram.LinePaletteOptionTask=function(g,b){var d={},c={},f=new a.common.ObjectReader({linesPalette:new a.common.ArrayReader(new a.common.ObjectReader({lineColor:new a.common.ValueReader(["string"],!1,b.lineColor),lineWidth:new a.common.ValueReader(["number"],!1,b.lineWidth),lineType:new a.common.EnumerationReader(a.common.LineType,!1,b.lineType)}),!1)});return{process:function(){var a=
{isChanged:!1,hash:c};d=f.read(d,g.getOptions(),"options",a);return a.isChanged},getOptions:function(){return d}}};a.famdiagram.NormalizeOptionTask=function(g,b){var d={},c={},f=new a.common.ObjectReader({groupByType:new a.common.EnumerationReader(a.common.GroupByType,!1,b.groupByType),alignBylevels:new a.common.ValueReader(["boolean"],!1,b.alignBylevels)});return{process:function(){var a={isChanged:!1,hash:c};d=f.read(d,g.getOptions(),"options",a);return a.isChanged},getOptions:function(){return d}}};
a.famdiagram.OptionsTask=function(a){return{process:function(){return!0},getOptions:a,description:"Raw options."}};a.famdiagram.OrderFamilyNodesOptionTask=function(g,b,d){var c={},f={},e=new a.common.ObjectReader({enableMatrixLayout:new a.common.ValueReader(["boolean"],!1,b.enableMatrixLayout),minimumMatrixSize:new a.common.ValueReader(["number"],!1,b.minimumMatrixSize),maximumColumnsInMatrix:new a.common.ValueReader(["number"],!1,b.maximumColumnsInMatrix),items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string",
"number"],!0),position:new a.common.ValueReader(["number"],!0),relativeItem:new a.common.ValueReader(["string","number"],!0),placementType:new a.common.EnumerationReader(a.common.AdviserPlacementType,!1,d.placementType)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:f};c=e.read(c,g.getOptions(),"options",a);return a.isChanged},getOptions:function(){return c}}};a.famdiagram.SpousesOptionTask=function(g){var b={},d={},c=new a.common.ObjectReader({items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string",
"number"],!0),spouses:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:d};b=c.read(b,g.getOptions(),"options",a);return a.isChanged},getItems:function(){return b.items}}};a.famdiagram.VisualTreeOptionTask=function(){var a={leavesPlacementType:2,childrenPlacementType:2,maximumColumnsInMatrix:6,horizontalAlignment:0};return{process:function(){return!1},getOptions:function(){return a}}};a.famdiagram.CombinedTemplateParamsTask=
function(a,b){return{process:function(){return!0},getTemplateParams:function(d){return a.getTemplateParams(d)||b.getTemplateParams(d)}}};a.famdiagram.LabelAnnotationTemplateParamsTask=function(g,b,d){var c={};return{process:function(){var f=g.getOptions(),e=b.getAnnotations(),h,i;c={};h=0;for(i=e.length;h<i;h+=1){var j=e[h],k=new a.orgdiagram.TemplateParams,m=d.getTemplate(j.templateName,f.defaultLabelAnnotationTemplate,d.DefaultWidgetLabelAnnotationTemplateName);k.template=m;c[j.id]=k}return!0},
getTemplateParams:function(a){return c[a]}}};a.famdiagram.BaseTransformer=function(a){this.debug=a};a.famdiagram.BaseTransformer.prototype.validate=function(a,b){if(!a.validate())throw"Family structure failed to pass validation!";a.loop(this,function(d,c){a.loopChildren(this,d,function(d,e){if(null===e.level||null===c.level||(b?e.level!=c.level+1:e.level<=c.level))throw"Family tree is broken. Children/Parents or levels mismatch!";return a.SKIP})})};a.famdiagram.FamilyBalance=function(){this.properties=
"title description image itemTitleColor groupTitle groupTitleColor isActive hasSelectorCheckbox hasButtons templateName showCallout calloutTemplateName label showLabel labelSize labelOrientation labelPlacement minimizedItemShapeType".split(" ")};a.famdiagram.FamilyBalance.prototype.balance=function(g){var b={maximumId:null,treeLevels:a.common.TreeLevels(),bundles:[],connectorStacks:[]},d={orgTree:a.common.tree(),maximumId:g.maximumId,orgPartners:{},itemByChildrenKey:{},minimumLevel:null,maximumLevel:null};
this.createOrgTree(g,d);d.orgTree.loopLevels(this,function(a,d,g){b.treeLevels.addItem(g,a,d)});this.recalcLevelsDepth(b.bundles,b.connectorStacks,b.treeLevels,d.orgTree,d.orgPartners);b.maximumId=d.maximumId;return b};a.famdiagram.FamilyBalance.prototype.Family=function(a){this.id=null;this.familyPriority=1;this.childFamilies=[];this.items=[];this.links=[];this.backLinks=[];1==arguments.length&&(this.id=a)};a.famdiagram.FamilyBalance.prototype.FamLink=function(a,b){this.fromItem=a;this.toItem=b};
a.famdiagram.FamilyBalance.prototype.createOrgTree=function(g,b){var d,c,f,e,h,i,j,k,m=[],n,l,p,q,r,s,t,w,u,A,x=[],B;if(0<g.logicalFamily.hasNodes()){A={};l=0;B=[];g.logicalFamily.loopRoots(this,function(a){p=new this.Family(l);this.extractOrgChart(a,g.logicalFamily,g.defaultItemConfig,b.orgTree,b.orgPartners,b.itemByChildrenKey,A,p);x.push(p);B.push(p);l+=1});B.sort(function(a,b){var c=a.items[0].level,d=b.items[0].level;return c!=d?c-d:b.items.length-a.items.length});m=[];n={};if(0<x.length){h=
a.common.graph();d=0;for(c=x.length;d<c;d+=1){p=x[d];f=0;for(e=p.links.length;f<e;f+=1)i=p.links[f],j=g.logicalFamily.node(i.fromItem).familyId,k=g.logicalFamily.node(i.toItem).familyId,j!=k&&(h.addEdge(j,k,{weight:0}),h.edge(j,k).weight+=1),x[k].backLinks.push(new this.FamLink(i.toItem,i.fromItem))}for(;m.length<x.length;){d=0;for(c=B.length;d<c;d+=1)p=B[d],n.hasOwnProperty(p.id)||(w=h.getSpanningTree(p.id,function(a){return-a.weight}),null!=w.node(p.id)?(w.loopPostOrder(this,function(a,b,c){var b=
x[a],d=x[c],g=[];null!=c&&(d.familyPriority+=b.familyPriority);g=[];w.loopChildren(this,a,function(a){g.push(a)});g.sort(function(a,b){return x[a].familyPriority-x[b].familyPriority});w.arrangeChildren(a,g)}),w.loopPreOrder(this,function(a){m.push(a);n[a]=!0})):(m.push(p.id),n[p.id]=!0))}}b.maximumId+=1;u=this.createOrgItem(b.orgTree,g.defaultItemConfig,b.maximumId,null,null,b.minimumLevel-1,null);u.hideParentConnection=!0;u.hideChildrenConnection=!0;u.title="internal root";u.isVisible=!1;u.isActive=
!1;u.childIndex=0;h={};d=0;for(c=m.length;d<c;d+=1){p=x[m[d]];k={};s=u;t=0;e=p.links.concat(p.backLinks);for(f=0;f<e.length;f+=1)i=e[f],j=b.orgTree.node(i.toItem),b.orgTree.node(i.fromItem),!0===h[j.familyId]&&(q=p.items[0],r=j,r.level>=q.level&&b.orgTree.loopParents(this,r.id,function(a,b){r=b;if(b.level<q.level)return!0}),k[r.id]=k.hasOwnProperty(r.id)?k[r.id]+1:1,t<k[r.id]&&(s=r,t=k[r.id]));this.attachFamilyToOrgChart(b,g.defaultItemConfig,s,p);h[p.id]=!0}d=this.getExtraGravity(b);c=this.getGrandChildren(b);
this.balanceOrgTree(b.orgTree,d,c,g.itemsPositions,g.itemsGroups)}};a.famdiagram.FamilyBalance.prototype.getGrandChildren=function(a){var b={};a.orgTree.loopPostOrder(this,function(d,c,f){a.minimumLevel=null!=a.minimumLevel?Math.min(a.minimumLevel,c.level):c.level;a.maximumLevel=null!=a.maximumLevel?Math.max(a.maximumLevel,c.level):c.level;if(null!=f&&(b[f]||(b[f]={}),c=c.level-1,b[f][c]=b[f][c]?b[f][c]+1:1,null!=b[d]))for(c in b[d])b[d].hasOwnProperty(c)&&(b[f][c]=b[f][c]?b[f][c]+b[d][c]:b[d][c])});
return b};a.famdiagram.FamilyBalance.prototype.balanceOrgTree=function(g,b,d,c,f){var e,h,i,j,k,m,n,l,p,q,r;g.loopLevels(this,function(s,t){var w=a.common.graph(),u={},A=null,x;n=[];g.loopChildren(this,t.id,function(a,c,d){var f;null==A&&(A=c);u[c.id]={};if(b.hasOwnProperty(c.id))for(f in m=b[c.id],m)if(m.hasOwnProperty(f)){q=m[f];u[c.id][f]={};e=0;for(h=q.length;e<h;e+=1)k=q[e],x=k.commonParent==t.id?k.toParent:g.node(k.fromParent).childIndex<g.node(k.toParent).childIndex?"__right__":"__left__",
c.id!=x&&(w.addEdge(c.id,x,{weight:0}),w.edge(c.id,x).weight+=1,null==u[c.id][f][x]&&(u[c.id][f][x]=0),u[c.id][f][x]+=1)}0<d&&w.addEdge(c.id,A.id,{weight:0})});if(null!=A){r=[];w.getTotalWeightGrowthSequence(this,function(a){return a.weight},function(a){r.push(a)});0===r.length&&(r=[A.id]);l=this.balanceItems(r,"__left__","__right__",u,d,c,f);i=0;for(j=l.length;i<j;i+=1)p=g.node(l[i]),p.childIndex=i,n.push(p.id)}g.arrangeChildren(t.id,n)})};a.famdiagram.FamilyBalance.prototype.balanceItems=function(g,
b,d,c,f,e,h){var i=[],j,k=a.common.LinkedHashItems(),m=0,n={},l,p,q,r={},s,t,w,u,A,x,B,z,y,v,F,E,G,D,C,J,H,L;p=[b,null,d];for(j=0;j<p.length;j+=1)s=p[j],l=m++,q=new a.famdiagram.Slot(s),q.position=j,k.add(l,q),null!==s&&(r[s]=l);for(j=0;j<g.length;j+=1)if(s=g[j],s!=b&&s!=d)for(D in p=l=B=x=A=u=w=t=null,h.hasOwnProperty(s)&&(q=h[s],n.hasOwnProperty(q)&&(p=e[s],q=n[q],l=q.previousContext(p),p=q.nextContext(p))),k.iterate(function(a,b){var d,g,e,h;if(null==a.itemId){E=f[s];F=v=y=z=0;for(d in a.crossings)a.crossings.hasOwnProperty(d)&&
(E&&null!=E[d]&&(z+=a.crossings[d]*E[d]),F+=a.crossings[d]);for(d in c[s])if(c[s].hasOwnProperty(d))for(g in e=c[s][d],e)e.hasOwnProperty(g)&&r.hasOwnProperty(g)&&(h=k.item(r[g]),null!=h&&(h.position<a.position?(z+=(a.left[d]||0)-(h.left[d]||0),v+=Math.abs(h.balance+1)):(z+=(a.right[d]||0)-(h.right[d]||0),v+=Math.abs(h.balance-1)),y+=Math.abs(h.position-a.position)));if(null==u||u>z||u==z&&(A>y||A==y&&(x>v||x==v&&B>F)))t=b,u=z,w=a,A=y,x=v,B=F}},l,p),k.insertBefore(t,m++,w.clone(null)),G=r[s]=m,l=
w.clone(s),e.hasOwnProperty(s)&&(q=h[s],n.hasOwnProperty(q)||(n[q]=a.common.SortedList()),q=n[q],q.add(e[s],m)),k.insertBefore(t,m++,l),H=l.position=0,k.iterate(function(a,b){var c,d;if(b!=G){d=f[s];for(c in d)d.hasOwnProperty(c)&&(a.left[c]=a.left[c]?a.left[c]+d[c]:d[c]);H+=1;a.position=H}},G),H=0,k.iterateBack(function(a,b){var c,d;if(b!=G){d=f[s];for(c in f[s])f[s].hasOwnProperty(c)&&(a.right[c]=a.right[c]?a.right[c]+d[c]:d[c]);H-=1;a.position=H}},G),c[s])if(c[s].hasOwnProperty(D))for(J in C=c[s][D],
C)C.hasOwnProperty(J)&&r.hasOwnProperty(J)&&(L=r[J],q=k.item(L),null!=q&&(0>q.position?(q.balance+=1,l.balance-=1,k.iterateBack(function(a,b){b!=G&&b!=L&&(a.crossings[D]=a.crossings[D]?a.crossings[D]+C[J]:C[J])},G,L)):(q.balance-=1,l.balance+=1,k.iterate(function(a,b){b!=G&&b!=L&&(a.crossings[D]=a.crossings[D]?a.crossings[D]+C[J]:C[J])},G,L))));k.iterate(function(a){a=a.itemId;null!=a&&(a!=b&&a!=d)&&i.push(a)});return i};a.famdiagram.FamilyBalance.prototype.ExtraGravity=function(a){this.toParent=
this.fromParent=this.commonParent=null;this.level=a};a.famdiagram.FamilyBalance.prototype.getExtraGravity=function(a){var b,d,c={},f,e,h,i;for(b in a.orgPartners)if(a.orgPartners.hasOwnProperty(b)){d=a.orgTree.node(b);h=a.orgPartners[b];f=0;for(e=h.length;f<e;f+=1)i=a.orgTree.node(h[f]),this.addExtraGravitiesForConnection(a.orgTree,c,i,d)}return c};a.famdiagram.FamilyBalance.prototype.addExtraGravitiesForConnection=function(a,b,d,c){var f=new this.ExtraGravity(d.level),e=new this.ExtraGravity(c.level);
a.zipUp(this,d.id,c.id,function(a,c,d,g){this.addExtraGravityForItem(b,a,f);this.addExtraGravityForItem(b,d,e);if(c==g)return f.commonParent=c,f.fromParent=a,f.toParent=d,e.commonParent=c,e.fromParent=d,e.toParent=a,!0})};a.famdiagram.FamilyBalance.prototype.addExtraGravityForItem=function(a,b,d){a.hasOwnProperty(b)||(a[b]={});null==a[b][d.level]&&(a[b][d.level]=[]);a[b][d.level].push(d)};a.famdiagram.FamilyBalance.prototype.attachFamilyToOrgChart=function(a,b,d,c){for(var f=c.items[0],e=null,e=d,
d=d.level+1;d<f.level;d+=1)a.maximumId+=1,e=this.createOrgItem(a.orgTree,b,a.maximumId,e.id,null,d,null),e.title="shift",e.isVisible=!1,e.isActive=!1,e.hideParentConnection=!0,e.hideChildrenConnection=!0,c.items.push(e);f.hideParentConnection=!0;a.orgTree.adopt(e.id,f.id,f)};a.famdiagram.FamilyBalance.prototype.extractOrgChart=function(a,b,d,c,f,e,h,i){var j,k=[],m,n,a=b.node(a),k=this.createOrgItem(c,d,a.id,null,i.id,a.level,a.itemConfig);k.hideParentConnection=!0;k.isVisible=a.isVisible;k.isActive=
a.isActive;k.hideParentConnection=a.hideParentConnection;k.hideChildrenConnection=a.hideChildrenConnection;i.items.push(k);h[a.id]=!0;a.familyId=i.id;for(k=this.extractChildren(a,b,d,c,f,e,h,i);0<k.length;){m=[];a=0;for(j=k.length;a<j;a+=1)n=k[a],m=m.concat(this.extractChildren(n,b,d,c,f,e,h,i));k=m}};a.famdiagram.FamilyBalance.prototype.extractChildren=function(a,b,d,c,f,e,h,i){var j=[],k=null,m=null,n;1==b.countChildren(a.id)&&(k=b.firstChild(a.id));null!=e[k]?(m=e[k],null==f[m.id]&&(f[m.id]=[]),
f[m.id].push(a.id),i.links.push(new this.FamLink(a.id,k))):(null!=k&&(e[k]=a),b.loopChildren(this,a.id,function(e,f){if(h[f.id])throw"Many to many relations should not exist at this stage";j.push(f);n=this.createOrgItem(c,d,f.id,a.id,i.id,f.level,f.itemConfig);n.hideParentConnection=f.hideParentConnection;n.hideChildrenConnection=f.hideChildrenConnection;n.isVisible=f.isVisible;n.isActive=f.isActive;i.items.push(n);h[f.id]=!0;f.familyId=i.id;return b.SKIP}));return j};a.famdiagram.FamilyBalance.prototype.createOrgItem=
function(g,b,d,c,f,e,h){var i=new a.orgdiagram.OrgItem({});i.id=d;i.familyId=f;i.level=e;d=0;for(f=this.properties.length;d<f;d+=1)e=this.properties[d],i[e]=null!=h&&void 0!==h[e]?h[e]:b[e];g.add(c,i.id,i);return i};a.famdiagram.FamilyBalance.prototype.recalcLevelsDepth=function(g,b,d,c,f){var e,h,i,j,k,m,n,l,p,q={},r,s,t;d.loopLevels(this,function(w){var u=new a.orgdiagram.TreeLevelConnectorStackSize;b[w]=u;p=[];d.loopLevelItems(this,w,function(b,d){var i=[],m=[],n;if(!q.hasOwnProperty(b)){q[b]=
!0;d.hideChildrenConnection||i.push(b);n=f[b];if(null!=n){e=0;for(h=n.length;e<h;e+=1){var j=n[e];q[j]=!0;i.push(j)}}c.loopChildren(this,b,function(a,b){b.hideParentConnection||m.push(a)});if(1<i.length||0<m.length)l=new a.common.VerticalConnectorBundle(i,m),g.push(l),1<i.length&&p.push(l)}});if(0<p.length){t=a.common.pile();i=0;for(j=p.length;i<j;i+=1){l=p[i];s=r=null;k=0;for(m=l.fromItems.length;k<m;k+=1)n=d.getItemPosition(l.fromItems[k]),r=null!=r?Math.min(r,n):n,s=null!=s?Math.max(s,n):n;t.add(r,
s,l)}u.parentsStackSize=t.resolve(this,function(a,b,c,d,e){c.fromOffset=d+1;c.fromStackSize=e})}})};a.famdiagram.FamilyMatrixesExtractor=function(g){this.parent=a.famdiagram.BaseTransformer.prototype;this.parent.constructor.apply(this,arguments)};a.famdiagram.FamilyMatrixesExtractor.prototype=new a.famdiagram.BaseTransformer;a.famdiagram.FamilyMatrixesExtractor.prototype.extract=function(g,b,d,c,f,e){0<b.hasNodes()&&g.enableMatrixLayout&&b.groupBy(this,Math.max(2,g.minimumMatrixSize),function(h,i,
j,k){var m=e+=1,n=e+=1,l=b.node(j[0]),l=new a.famdiagram.FamilyItem({id:m,level:l.level,isVisible:!1,isActive:!1,itemConfig:{title:"dummy #"+m,description:"This is item used as aggregator of matrixed nodes."},levelGravity:1,hideParentConnection:!0,hideChildrenConnection:!0});c[m]=n;for(var p=0,q=j.length;p<q;p+=1)b.removeNode(j[p]);null!=h?(b.add([h],m,l),l.hideParentConnection=!1,f.push(new a.common.MatrixConnectorBundle(!0,j,m,m,this.getMatrixWidth(g.maximumColumnsInMatrix,j.length)))):b.add(null,
m,l);null!=i&&(b.adopt([m],i),l.hideChildrenConnection=!1,f.push(new a.common.MatrixConnectorBundle(!1,j,m,n,this.getMatrixWidth(g.maximumColumnsInMatrix,j.length))));d[m]=k});return e};a.famdiagram.FamilyMatrixesExtractor.prototype.getMatrixWidth=function(a,b){return Math.min(a,Math.ceil(Math.sqrt(b)))};a.famdiagram.FamilyNormalizer=function(g){this.parent=a.famdiagram.BaseTransformer.prototype;this.parent.constructor.apply(this,arguments)};a.famdiagram.FamilyNormalizer.prototype=new a.famdiagram.BaseTransformer;
a.famdiagram.FamilyNormalizer.prototype.normalize=function(g,b,d){if(0<b.hasNodes()){b.loopLevels(this,1==g.groupByType,function(a,b,d){b.level=d});b.optimizeReferences(function(){d+=1;return new a.famdiagram.FamilyItem({id:d,isVisible:!1,isActive:!1,itemConfig:{title:"bundle #"+d,description:" This item was created by references optimizer."},levelGravity:2})});if(this.debug&&!b.validate())throw"References are broken in family structure!";if(this.debug&&b.hasLoops())throw"Structure has loops!";b.eliminateManyToMany(function(){d+=
1;return new a.famdiagram.FamilyItem({id:d,isVisible:!1,isActive:!1,itemConfig:{title:"dummy #"+d,description:"This is item used to eliminate M:M relations."},levelGravity:2,hideParentConnection:!1,hideChildrenConnection:!1})});if(this.debug&&!b.validate())throw"References are broken in family structure!";g.alignBylevels?this.resortItemsBylevels(b):b.loopLevels(this,1==g.groupByType,function(a,b,d){b.level=d});this.debug&&this.validate(b,!1);this.fillInItems(b,function(){d+=1;return new a.famdiagram.FamilyItem({id:d,
levelGravity:2,isVisible:!1,isActive:!1,itemConfig:{title:"extension #"+d,description:"This is item used to fill gaps in levels."}})});this.debug&&this.validate(b,!0)}return d};a.famdiagram.FamilyNormalizer.prototype.resortItemsBylevels=function(a){var b=[],d=null,c=null,f,e;a.loop(this,function(a,e){e.originalLevel=e.level;e.level=null;null!=e.originalLevel&&(b[e.originalLevel]||(b[e.originalLevel]={}),b[e.originalLevel][a]=e,d=null!=d?Math.min(e.originalLevel,d):e.originalLevel,c=null!=c?Math.max(e.originalLevel,
c):e.originalLevel)});for(f=d;f<=c;f+=1)e=b[f],this.setLevelsForItems(e,a);a.loopTopo(this,function(b,c){var d;1==c.levelGravity&&(d=null,a.loopParents(this,b,function(b,c){d=null==d?c.level+1:Math.max(c.level+1,d);return a.SKIP}),c.level=!d?c.level:d)})};a.famdiagram.FamilyNormalizer.prototype.setLevelsForItems=function(g,b){var d=0,c,f,e;for(c in g)g.hasOwnProperty(c)&&b.loopParents(this,c,function(a,c){d=Math.max(c.level+1,d);return b.SKIP});for(c in g)g.hasOwnProperty(c)&&(f=g[c],f.level=d);for(;!a.common.isEmptyObject(g);){e=
{};for(c in g)g.hasOwnProperty(c)&&(f=g[c],b.loopChildren(this,c,function(a,c){if(null==c.originalLevel||c.isLevelNeutral)c.level=null==c.level?f.level+1:Math.max(c.level,f.level+1),e[a]=c;return b.SKIP}));g=e}};a.famdiagram.FamilyNormalizer.prototype.fillInItems=function(a,b){var d;a.loop(this,function(c,f){for(var e=!0,h;e;)e=!1,h=[],a.loopParents(this,c,function(b,c){f.level-1>c.level&&h.push(b);return a.SKIP}),1<h.length&&(d=b(f),d.level=f.level-1,d.hideParentConnection=!1,d.hideChildrenConnection=
!1,a.bundleParents(c,h,d.id,d),e=!0,c=d.id,f=d)});a.loop(this,function(c,f){for(var e=!0,h,i=!0;e;)e=!1,h=[],a.loopChildren(this,c,function(b,c){f.level+1<c.level?h.push(b):i=!1;return a.SKIP}),1<h.length&&(d=b(f),d.level=f.level+1,i&&(d.hideParentConnection=!1,d.hideChildrenConnection=!1),a.bundleChildren(c,h,d.id,d),e=!0,c=d.id,f=d)});a.loop(this,function(c,f){for(var e=!0,h;e;)e=!1,h=[],a.loopParents(this,c,function(b,c){f.level-1>c.level&&h.push(b);return a.SKIP}),0<h.length&&(d=b(f),d.level=
f.level-1,d.hideParentConnection=!1,d.hideChildrenConnection=!1,a.bundleParents(c,h,d.id,d),e=!0,c=d.id,f=d)})};a.famdiagram.UserDefinedNodesOrder=function(){};a.famdiagram.UserDefinedNodesOrder.prototype.getUserDefinedPositions=function(g){function b(a,b){this.position=a;this.items=b}var d,c,f,e=a.common.tree(),h={};c=0;for(f=g.length;c<f;c+=1)d=g[c],null!=d.relativeItem&&(h[d.relativeItem]=!0),null!=d.id&&(h[d.id]=!0);c=0;for(f=g.length;c<f;c+=1)d=g[c],h.hasOwnProperty(d.id)&&e.add(d.relativeItem||
null,d.id,d);var i={},j={},k={};e.loopPostOrder(this,function(a,c,d){var e=[],g=j[a],f=k[a],h;if(null!=g){g.sort(function(a,b){return b.position-a.position});for(h=0;h<g.length;h+=1)e=e.concat(g[h].items)}e.push(a);if(null!=f){f.sort(function(a,b){return a.position-b.position});for(h=0;h<f.length;h+=1)e=e.concat(f[h].items)}null!=d?2==c.placementType?(j.hasOwnProperty(d)||(j[d]=[]),j[d].push(new b(c.position,e))):(k.hasOwnProperty(d)||(k[d]=[]),k[d].push(new b(c.position,e))):i[a]=e});d={};f={};for(var m in i)if(i.hasOwnProperty(m)){g=
i[m];for(c=0;c<g.length;c+=1)e=g[c],d[e]=c,f[e]=m}return{position:d,group:f}};a.common.BaseLayout=function(a,b){this._children={};if(null!=this.params)for(var d in this.params)this.params.hasOwnProperty(d)&&a.hasOwnProperty(d)&&(this.params[d]=a[d]);if(null!=this.options){for(d in this.options)this.options.hasOwnProperty(d)&&b.hasOwnProperty(d)&&(this.options[d]=b[d]);this.options.shifts=this.getShifts(this.options);this.options.intervals=this.getIntervals(this.options)}};a.common.BaseLayout.prototype.add=
function(a,b){this._children[a]=b};a.common.BaseLayout.prototype.getLayout=function(a){return this._children[a]||null};a.common.BaseLayout.prototype.getShifts=function(a){var b=[];b[1]=a.normalLevelShift;b[2]=a.dotLevelShift;b[3]=a.lineLevelShift;b[4]=a.lineLevelShift;return b};a.common.BaseLayout.prototype.getIntervals=function(a){var b=[];b[1]=a.normalItemsInterval;b[2]=a.dotItemsInterval;b[3]=a.lineItemsInterval;b[4]=a.lineItemsInterval;return b};a.common.BaseLayout.prototype.getItemSize=function(g,
b,d,c){var f,e;switch(g){case 1:g=d.template.templateConfig;f=new a.common.Size(g.itemSize);e=new a.common.Rect(0,0,f.width,f.height);b&&(f.height+=g.cursorPadding.top+g.cursorPadding.bottom,f.width+=g.cursorPadding.left+g.cursorPadding.right,e.x=g.cursorPadding.left,e.y=g.cursorPadding.top);d.hasSelectorCheckbox&&(f.height+=c.checkBoxPanelSize);if(d.hasButtons)switch(f.width+=c.buttonsPanelSize,c.groupTitlePlacementType){case 3:e.x+=c.buttonsPanelSize}if(d.hasGroupTitle)switch(f.width+=c.groupTitlePanelSize,
c.groupTitlePlacementType){case 3:break;default:e.x+=c.groupTitlePanelSize}break;case 2:g=d.template.templateConfig;f=new a.common.Size(g.minimizedItemSize);break;case 3:case 4:f=new a.common.Size}switch(c.orientationType){case 2:case 3:f.invert()}return{actualSize:f,contentPosition:e}};a.famdiagram.FamilyLayout=function(g,b){this.params={logicalFamily:null,treeLevels:null,getConnectorsStacksSizes:null,isItemSelected:null,cursorItemId:null,getTemplateParams:null};this.options={verticalAlignment:1,
pageFitMode:0,minimalVisibility:2,orientationType:0,arrowsDirection:0,linesWidth:1,checkBoxPanelSize:24,buttonsPanelSize:28,groupTitlePanelSize:24,groupTitlePlacementType:2,normalLevelShift:20,dotLevelShift:20,lineLevelShift:20,normalItemsInterval:10,dotItemsInterval:1,lineItemsInterval:2};this.data={treeItemsPositions:{},treeLevelsPositions:[]};this.parent=a.common.BaseLayout.prototype;this.parent.constructor.apply(this,arguments)};a.famdiagram.FamilyLayout.prototype=new a.common.BaseLayout;a.famdiagram.FamilyLayout.prototype.measure=
function(g){var b=new a.common.Rect(0,0,0,0),d,c,f={treeItemsPositions:{},treeLevelsPositions:[]};switch(this.options.orientationType){case 2:case 3:g.invert()}if(!this.params.treeLevels.isEmpty())switch(this.options.pageFitMode){case 0:case a.common.PageFitMode.PrintPreview:case 5:d=[new a.orgdiagram.LevelVisibility(0,1)];b=this.setTreeLevelsVisibilityAndPositionTreeItems(f,this.params,this.options,d,0);break;default:d=this.getLevelVisibilities(this.params.treeLevels,this.options.minimalVisibility),
c=this.setTreeLevelsVisibilityAndPositionTreeItems(f,this.params,this.options,d,d.length-1),this.checkDiagramSize(c,g,this.options.pageFitMode)?(c.addRect(g),c.offset(0,0,5,5),this.findOptimalSize(this,d.length-1,function(a){b=this.setTreeLevelsVisibilityAndPositionTreeItems(f,this.params,this.options,d,a);return this.checkDiagramSize(b,c,this.options.pageFitMode)})):b=c}this.data=f;return b};a.famdiagram.FamilyLayout.prototype.getLevelVisibilities=function(g,b){var d=[new a.orgdiagram.LevelVisibility(0,
1)],c=[];switch(b){case 2:c.push(2);break;case 0:case 3:case 4:c.push(2),c.push(3)}g.loopLevelsReversed(this,function(b){for(var e=0;e<c.length;e+=1)d.push(new a.orgdiagram.LevelVisibility(b,c[e]))});return d};a.famdiagram.FamilyLayout.prototype.findOptimalSize=function(a,b,d){var c=0,f;if(!d.call(a,c)){for(f=b;1<b-c;)f=Math.floor((b+c)/2),d.call(a,f)?b=f:c=f;b!==f&&d.call(a,b)}};a.famdiagram.FamilyLayout.prototype.setTreeLevelsVisibilityAndPositionTreeItems=function(g,b,d,c,f){var e,h;g.treeLevelsPositions=
[];b.treeLevels.loopLevels(this,function(){var b=new a.orgdiagram.TreeLevelPosition;b.currentvisibility=1;g.treeLevelsPositions.push(b)});for(e=0;e<=f;e+=1)h=c[e],g.treeLevelsPositions[h.level].currentvisibility=h.currentvisibility;g.treeItemsPositions={};this.recalcItemsSize(b.treeLevels,g.treeItemsPositions,g.treeLevelsPositions,b.isItemSelected,b.cursorItemId,b.getTemplateParams,d);this.setOffsets(b.treeLevels,g.treeItemsPositions,g.treeLevelsPositions,b.logicalFamily,d.intervals);this.recalcLevelsDepth(b.treeLevels,
g.treeItemsPositions,g.treeLevelsPositions,d.verticalAlignment);this.shiftLevels(g.treeLevelsPositions,d.shifts[3],d.shifts,d.arrowsDirection,d.linesWidth,b.getConnectorsStacksSizes);return this.getLayoutSize(b.treeLevels,g.treeItemsPositions,g.treeLevelsPositions)};a.famdiagram.FamilyLayout.prototype.checkDiagramSize=function(a,b,d){var c=!1;switch(d){case 1:b.width>=a.width&&(c=!0);break;case 2:b.height>=a.height&&(c=!0);break;case 3:b.height>=a.height&&b.width>=a.width&&(c=!0)}return c};a.famdiagram.FamilyLayout.prototype.getLayoutSize=
function(g,b,d){return new a.common.Rect(0,0,Math.round(this.getLayoutWidth(g,b)),Math.round(this.getLayoutHeight(d)))};a.famdiagram.FamilyLayout.prototype.getLayoutWidth=function(a,b){var d=0;a.loopLevels(this,function(c){var f=a.getLevelLength(c);0<f&&(c=a.getItemAtPosition(c,f-1),c=b[c],d=Math.max(d,c.offset+c.actualSize.width+c.rightPadding))});return d};a.famdiagram.FamilyLayout.prototype.getLayoutHeight=function(a){a=a[a.length-1];return a.shift+a.nextLevelShift};a.famdiagram.FamilyLayout.prototype.recalcItemsSize=
function(g,b,d,c,f,e,h){g.loopLevels(this,function(i){var j=d[i];g.loopLevelItems(this,i,function(d,g){var i=new a.orgdiagram.TreeItemPosition,l=this.getLayout(d);if(null==l){var p=c(d)?1:!g.isVisible?4:0,l=e(d),p=0===p?j.currentvisibility:p,l=this.getItemSize(p,f==d,l,h);i.actualVisibility=p;i.actualSize=l.actualSize;i.contentPosition=l.contentPosition}else l=l.measure(j.currentvisibility),i.actualVisibility=4,i.actualSize=l;b[d]=i})})};a.famdiagram.FamilyLayout.prototype.recalcLevelsDepth=function(a,
b,d,c){var f,e;a.loopLevels(this,function(h){var i=d[h];i.shift=0;i.depth=0;i.actualVisibility=4;e=f=null;a.loopLevelItems(this,h,function(a){a=b[a];i.depth=Math.max(i.depth,a.actualSize.height);switch(a.actualVisibility){case 2:case 3:case 4:e=!e?a.actualSize.height:Math.min(e,a.actualSize.height);break;default:f=!f?a.actualSize.height:Math.min(f,a.actualSize.height)}i.actualVisibility=Math.min(i.actualVisibility,a.actualVisibility)});null==f&&(f=i.depth);null!=e&&e>f&&(f=e);switch(c){case 0:i.horizontalConnectorsDepth=
f/2;break;case 1:i.horizontalConnectorsDepth=i.depth/2;break;case 2:i.horizontalConnectorsDepth=i.depth-f/2}})};a.famdiagram.FamilyLayout.prototype.shiftLevels=function(a,b,d,c,f,e){var h,i,j=0,k=0,f=8*f;switch(c){case 1:j=f;k=0;break;case 2:j=0,k=f}c=0;for(f=a.length;c<f;c+=1)h=a[c],i=e(c),b+=h.setShift(b,d[h.actualVisibility],k,j,i.parentsStackSize)};a.famdiagram.FamilyLayout.prototype.setOffsets=function(g,b,d,c,f){var e,h;e=0;for(h=d.length;e<h;e+=1)d[e].currentOffset=0;var d=c.getPlanarFamily(g),
i=new a.common.FamilyAlignment(this,d,g,function(a){var a=b[a],c=f[a.actualVisibility]/2;a.leftPadding=c;a.rightPadding=c;return a.leftPadding+a.actualSize.width+a.rightPadding}),j=null;g.loopLevels(this,function(a){a=g.getItemAtPosition(a,0);if(null!=a){var c=b[a],a=i.getOffset(a)-c.leftPadding-c.actualSize.width/2;j=null==j?a:Math.min(j,a)}});g.loopLevels(this,function(a){g.loopLevelItems(this,a,function(a){var c=b[a],a=i.getOffset(a);c.offset=a-c.actualSize.width/2;c.offset-=j})})};a.famdiagram.FamilyLayout.prototype.arrange=
function(a,b){var d=null;null!=b&&this.params.treeLevels.loopLevels(this,function(c){var f=this.data.treeLevelsPositions[c];this.params.treeLevels.loopLevelItems(this,c,function(c){var h=this.data.treeItemsPositions[c],i=this.getItemPosition(h.actualVisibility,h.offset,h.actualSize,d,f,this.options.verticalAlignment);h.actualPosition=i.position;h.horizontalConnectorsShift=i.horizontalConnectorsShift;h.topConnectorShift=i.topConnectorShift;h.topConnectorInterval=i.topConnectorInterval;h.bottomConnectorShift=
i.bottomConnectorShift;h.bottomConnectorInterval=i.bottomConnectorInterval;b.call(a,c,h);c=this.getLayout(c);null!=c&&c.arrange(a,i.position,b)});d=f})};a.famdiagram.FamilyLayout.prototype.getItemPosition=function(g,b,d,c,f,e){var h=0;switch(g){case 1:switch(e){case 0:h=0;break;case 1:h=(f.depth-d.height)/2;break;case 2:h=f.depth-d.height}break;case 2:case 3:case 4:h=f.horizontalConnectorsDepth-d.height/2}return{position:new a.common.Rect(b,f.shift+h,d.width,d.height),horizontalConnectorsShift:f.shift+
f.horizontalConnectorsDepth,topConnectorShift:null!=c?c.shift+c.connectorShift:null,topConnectorInterval:null!=c?c.levelSpace/2:null,bottomConnectorShift:f.shift+f.connectorShift,bottomConnectorInterval:f.levelSpace/2}};a.famdiagram.MatrixLayout=function(g,b){this.params={items:[],isItemSelected:null,cursorItemId:null,getTemplateParams:null,hideParentConnection:!1,hideChildrenConnection:!1};this.options={verticalAlignment:1,orientationType:0,arrowsDirection:0,linesWidth:1,checkBoxPanelSize:24,buttonsPanelSize:28,
groupTitlePanelSize:24,groupTitlePlacementType:2,normalLevelShift:20,dotLevelShift:20,lineLevelShift:20,normalItemsInterval:10,dotItemsInterval:1,lineItemsInterval:2,maximumColumnsInMatrix:6};this.data={treeItemsPositions:{},columns:[],rows:[]};this.parent=a.common.BaseLayout.prototype;this.parent.constructor.apply(this,arguments)};a.famdiagram.MatrixLayout.prototype=new a.common.BaseLayout;a.famdiagram.MatrixLayout.prototype.Column=function(){this.rightPadding=this.leftPadding=this.offset=this.depth=
0};a.famdiagram.MatrixLayout.prototype.Row=function(){this.horizontalConnectorsDepth=this.offset=this.depth=0;this.dotsDepth=this.minimalDepth=null};a.famdiagram.MatrixLayout.prototype.getMatrixWidth=function(a,b){return Math.min(a,Math.ceil(Math.sqrt(b)))};a.famdiagram.MatrixLayout.prototype.measure=function(a){var b={treeItemsPositions:{},columns:[],rows:[]};this.measureItems(b,this.params,this.options,a);this.measureColumns(b,this.params,this.options);this.measureRows(b,this.params,this.options);
this.data=b;return this.getLayoutSize(b)};a.famdiagram.MatrixLayout.prototype.measureItems=function(g,b,d,c){for(var f=0,e=b.items.length;f<e;f+=1){var h=b.items[f],i=h.id,j=new a.orgdiagram.TreeItemPosition,k=b.isItemSelected(i)?1:!h.isVisible?4:0,h=b.getTemplateParams(i),k=0===k?c:k,h=this.getItemSize(k,b.cursorItemId==i,h,d);j.actualVisibility=k;j.actualSize=h.actualSize;j.contentPosition=h.contentPosition;g.treeItemsPositions[i]=j}};a.famdiagram.MatrixLayout.prototype.measureColumns=function(a,
b,d){var c,f,e,h=this.getMatrixWidth(d.maximumColumnsInMatrix,b.items.length);f=0;for(e=b.items.length;f<e;f+=1){var i=a.treeItemsPositions[b.items[f].id];c=d.intervals[i.actualVisibility]/2;i.leftPadding=c;i.rightPadding=c;var j=f%h;c=a.columns[j];null==c&&(c=new this.Column,a.columns[j]=c);c.depth=Math.max(c.depth,i.leftPadding+i.actualSize.width+i.rightPadding)}h=8*d.linesWidth;f=i=0;for(e=a.columns.length;f<e;f+=1){c=a.columns[f];if(0==f%2)switch(d.arrowsDirection){case 1:c.leftPadding=b.hideChildrenConnection?
0:h;c.rightPadding=0;break;case 2:c.leftPadding=0,c.rightPadding=b.hideParentConnection?0:h}else switch(d.arrowsDirection){case 1:c.leftPadding=0;c.rightPadding=b.hideChildrenConnection?0:h;break;case 2:c.leftPadding=b.hideParentConnection?0:h,c.rightPadding=0}c.offset=i+c.leftPadding+c.depth/2;i=c.offset+c.depth/2+c.rightPadding}};a.famdiagram.MatrixLayout.prototype.measureRows=function(a,b,d){var c,f,e,h=this.getMatrixWidth(d.maximumColumnsInMatrix,b.items.length);c=0;for(f=b.items.length;c<f;c+=
1){var i=a.treeItemsPositions[b.items[c].id],j=Math.floor(c/h),k=d.shifts[i.actualVisibility]/2;e=a.rows[j];null==e&&(e=new this.Row,a.rows[j]=e);e.depth=Math.max(e.depth,k+i.actualSize.height+k);switch(i.actualVisibility){case 2:case 3:case 4:e.dotsDepth=!e.dotsDepth?i.actualSize.height:Math.min(e.dotsDepth,i.actualSize.height);break;default:e.minimalDepth=!e.minimalDepth?i.actualSize.height:Math.min(e.minimalDepth,i.actualSize.height)}}c=b=0;for(f=a.rows.length;c<f;c+=1)switch(e=a.rows[c],e.offset=
b+e.depth/2,b=e.offset+e.depth/2,null==e.minimalDepth&&(e.minimalDepth=e.depth),null!=e.dotsDepth&&e.dotsDepth>e.minimalDepth&&(e.minimalDepth=e.dotsDepth),d.verticalAlignment){case 0:e.horizontalConnectorsDepth=e.minimalDepth/2;break;case 1:e.horizontalConnectorsDepth=e.depth/2;break;case 2:e.horizontalConnectorsDepth=e.depth-e.minimalDepth/2}};a.famdiagram.MatrixLayout.prototype.getLayoutSize=function(g){return new a.common.Rect(0,0,Math.round(this.getLayoutWidth(g)),Math.round(this.getLayoutHeight(g)))};
a.famdiagram.MatrixLayout.prototype.getLayoutWidth=function(a){var b=0,d=a.columns.length;0<d&&(a=a.columns[d-1],b=a.offset+a.depth/2+a.rightPadding);return b};a.famdiagram.MatrixLayout.prototype.getLayoutHeight=function(a){var b=0,d=a.rows.length;0<d&&(a=a.rows[d-1],b=a.offset+a.depth/2);return b};a.famdiagram.MatrixLayout.prototype.arrange=function(a,b,d){if(null!=d)for(var c=this.getMatrixWidth(this.options.maximumColumnsInMatrix,this.params.items.length),f=0,e=this.params.items.length;f<e;f+=
1){var h=this.params.items[f].id,i=this.data.columns[f%c],j=this.data.rows[Math.floor(f/c)],k=this.data.treeItemsPositions[h],m=this.getItemPosition(k.actualVisibility,i,j,k.actualSize,this.options);m.translate(b.x,b.y);k.actualPosition=m;k.horizontalConnectorsShift=b.y+j.offset-j.depth/2+j.horizontalConnectorsDepth;k.leftMedianOffset=i.depth/2+i.leftPadding;k.rightMedianOffset=i.depth/2+i.rightPadding;k.topConnectorShift=j.depth/2;k.bottomConnectorShift=j.depth/2;d.call(a,h,k)}};a.famdiagram.MatrixLayout.prototype.getItemPosition=
function(g,b,d,c,f){var e=0;switch(g){case 1:switch(f.verticalAlignment){case 0:e=0;break;case 1:e=(d.depth-c.height)/2;break;case 2:e=d.depth-c.height}break;case 2:case 3:case 4:e=d.horizontalConnectorsDepth-c.height/2}return new a.common.Rect(b.offset-c.width/2,d.offset-d.depth/2+e,c.width,c.height)};a.famdiagram.CursorNeighboursTask=function(g,b,d,c){function f(a,b,c,d){var e=[],g={};if(null!==a)switch(b){case 0:c.loopParents(this,a,function(a){g.hasOwnProperty(a)||(g[a]=!0,e.push(a));if(d.hasOwnProperty(a))return c.SKIP});
c.loopChildren(this,a,function(a){g.hasOwnProperty(a)||(g[a]=!0,e.push(a));if(d.hasOwnProperty(a))return c.SKIP});break;case 1:c.loopNeighbours(this,a,function(a){g.hasOwnProperty(a)||(g[a]=!0,e.push(a));if(d.hasOwnProperty(a))return!0})}return e}var e=[],h={},i=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,hash:h},k=g.getCursorTreeItem(),m=d.getNavigationFamily(),n=b.getNeighboursSelectionMode(),l=c.getActiveItems();e=
i.read(e,f(k,n,m,l),"items",a);return a.isChanged},getItems:function(){return e}}};a.famdiagram.AddLabelAnnotationsTask=function(g,b){function d(b,c){var d=a.common.graph(),g={},f,m,n,l;if(0<c.length){l=0;for(f=c.length;l<f;l+=1)m=c[l],g.hasOwnProperty(m.fromItem)?g[m.fromItem].push(m):(g[m.fromItem]=[m],b.loopChildren(this,m.fromItem,function(c){d.addEdge(m.fromItem,c,new a.famdiagram.EdgeItem(m.fromItem,m.fromItem,c,c));return b.SKIP}),b.loopParents(this,m.fromItem,function(c){d.addEdge(c,m.fromItem,
new a.famdiagram.EdgeItem(c,c,m.fromItem,m.fromItem));return b.SKIP}));for(n in g)if(g.hasOwnProperty(n)){f=g[n];f.sort(function(a,b){return b.toItems.length-a.toItems.length});for(l=0;l<f.length;l+=1){m=f[l];for(var p=b,q=d,r=m.fromItem,s=m.toItems,t=void 0,w=!0,u=null,A=void 0,x=void 0,B=void 0,z=void 0,y=[],x=0,B=s.length;x<B;x+=1)if(A=s[x],t=q.edge(r,A),null!=t){if(null==u)u=t.getFar(A);else if(u!=t.getFar(A)){w=!1;break}y.push(t.getNear(A))}else{w=!1;break}if(w&&(z=new a.famdiagram.FamilyItem({id:m.id,
isVisible:!0,isLevelNeutral:!0,isActive:!1,itemConfig:m}),p.bundleParents(u,y,z.id,z)?(z.levelGravity=2,w=!0):p.bundleChildren(u,y,z.id,z)?(z.levelGravity=1,w=!0):p.bundleParents(u,s,z.id,z)?(z.levelGravity=2,w=!0):p.bundleParents(u,s,z.id,z)&&(z.levelGravity=1,w=!0),w)){x=0;for(B=s.length;x<B;x+=1)A=s[x],t=q.edge(r,A),t.setFar(A,z.id)}}}}}var c=null,f=null;return{process:function(a){var h=b.getLogicalFamily(),i=g.getAnnotations(),h=h.clone();d(h,i);c=h;f=g.getMaximumId();if(a&&!h.validate())throw"References are broken in family structure!";
return!0},getNavigationFamily:function(){return c},getMaximumId:function(){return f}}};a.famdiagram.AddSpousesTask=function(g,b){var d=null,c=null;return{process:function(f){var e=b.getLogicalFamily(),h=b.getMaximumId(),i=g.getItems(),j=e=e.clone(),k,m,n,l,p,q,r,s;n=0;for(l=i.length;n<l;n+=1){p=i[n];s=p.spouses.slice(0);q=0;for(r=s.length;q<r;q+=1)k=[p.id,s[q]],j.hasCommonChild(k)||(h+=1,m=new a.famdiagram.FamilyItem({id:h,isVisible:!1,isActive:!1,isLevelNeutral:!0,hideParentConnection:!0,hideChildrenConnection:!0,
itemConfig:{title:"fake child #"+h,description:"This is fake child keeps spouses together."},levelGravity:1}),j.add(k,m.id,m))}d=e;c=h;if(f&&!e.validate())throw"References are broken in family structure!";return!0},getLogicalFamily:function(){return d},getMaximumId:function(){return c}}};a.famdiagram.HideGrandParentsConnectorsTask=function(a,b){var d=null,c=null;return{process:function(){var f=b.getLogicalFamily(),e=b.getMaximumId();c=f=!0==a.getOptions().hideGrandParentsConnectors?f.getFamilyWithoutGrandParentsRelations():
f.clone();d=e;return!0},getLogicalFamily:function(){return c},getMaximumId:function(){return d}}};a.famdiagram.ItemsPositionsTask=function(g,b,d,c,f,e,h,i,j,k){var m={},n=null;return{process:function(){var l=c.getOptions(),p=f.getOptions(),q=e.getOptions(),r={logicalFamily:h.getLogicalFamily(),treeLevels:h.getTreeLevels(),getConnectorsStacksSizes:h.getConnectorsStacksSizes,isItemSelected:k.isItemSelected,cursorItemId:j.getCursorTreeItem(),getTemplateParams:i.getTemplateParams},l={verticalAlignment:l.verticalAlignment,
pageFitMode:l.pageFitMode,minimalVisibility:l.minimalVisibility,normalLevelShift:l.normalLevelShift,dotLevelShift:l.dotLevelShift,lineLevelShift:l.lineLevelShift,normalItemsInterval:l.normalItemsInterval,dotItemsInterval:l.dotItemsInterval,lineItemsInterval:l.lineItemsInterval,orientationType:d.getOptions().orientationType,arrowsDirection:p.arrowsDirection,linesWidth:p.linesWidth,checkBoxPanelSize:l.checkBoxPanelSize,buttonsPanelSize:l.buttonsPanelSize,groupTitlePanelSize:l.groupTitlePanelSize,groupTitlePlacementType:l.groupTitlePlacementType,
maximumColumnsInMatrix:q.maximumColumnsInMatrix},p=g.getOptimalPanelSize(),q=b.getOptions().scale;p.scale(1/q);var p=new a.common.Rect(0,0,p.width,p.height),q=new a.famdiagram.FamilyLayout(r,l),s=h.getMatrixes(),t;for(t in s)if(s.hasOwnProperty(t)){var w=r.logicalFamily.node(t);q.add(t,new a.famdiagram.MatrixLayout({items:s[t],isItemSelected:r.isItemSelected,cursorItemId:r.cursorItemId,getTemplateParams:r.getTemplateParams,hideParentConnection:w.hideParentConnection,hideChildrenConnection:w.hideChildrenConnection},
l))}n=q.measure(p);m={};q.arrange(this,function(a,b){m[a]=b});return!0},getItemsPositions:function(){return m},getItemPosition:function(a){return m[a]},getContentSize:function(){return n}}};a.famdiagram.LogicalFamilyTask=function(g){var b=null,d=null;return{process:function(c){var f,e,h,i,j=g.getItems(),k=a.common.family(),m=0;if(0<j.length){f=0;for(e=j.length;f<e;f+=1)h=j[f],null!=h&&(i=new a.famdiagram.FamilyItem({id:h.id,itemConfig:h,isActive:h.isActive}),k.add(h.parents,i.id,i),h=parseInt(h.id,
10),m=Math.max(isNaN(h)?0:h,m))}b=k;d=m;if(c&&!k.validate())throw"References are broken in family structure!";return!0},getLogicalFamily:function(){return b},getMaximumId:function(){return d}}};a.famdiagram.NormalizeLogicalFamilyTask=function(g,b){var d=null,c=null,f=new a.famdiagram.FamilyNormalizer(!1);return{process:function(){var a=b.getLogicalFamily(),h=b.getMaximumId(),i=g.getOptions(),i={groupByType:i.groupByType,alignBylevels:i.alignBylevels},a=a.clone(),h=f.normalize(i,a,h);c=a;d=h;return!0},
getLogicalFamily:function(){return c},getMaximumId:function(){return d}}};a.famdiagram.OrderFamilyNodesTask=function(g,b,d,c){var f=null,e=null,h={},i={},j=null,k=null,m=null,n=new a.famdiagram.FamilyBalance,l=new a.famdiagram.FamilyMatrixesExtractor(!1),p=new a.orgdiagram.TreeLevelConnectorStackSize;return{process:function(){var a=d.getLogicalFamily(),p=d.getMaximumId(),s={},t={},w=[],u=g.getOptions(),u={enableMatrixLayout:u.enableMatrixLayout,minimumMatrixSize:u.minimumMatrixSize,maximumColumnsInMatrix:u.maximumColumnsInMatrix},
a=a.clone(),p=l.extract(u,a,s,t,w,p);e=a;h=s;i=t;k=w;a={logicalFamily:a,maximumId:p,defaultItemConfig:c,itemsPositions:b.getPositions(),itemsGroups:b.getGroups()};a=n.balance(a);f=a.maximumId;j=a.treeLevels;k=k.concat(a.bundles);m=a.connectorStacks;return!0},getLogicalFamily:function(){return e},getMatrixes:function(){return h},getNestedLayoutBottomConnectorIds:function(){return i},getMaximumId:function(){return f},getTreeLevels:function(){return j},getBundles:function(){return k},getConnectorsStacksSizes:function(a){return m[a]||
p}}};a.famdiagram.RemoveLoopsTask=function(g,b){function d(b,c,d){var g,f,m,n,l,p,q,r,s;g=c.clone();c.loopTopo(this,function(a){g.removeNode(a)});if(g.hasNodes()){n=0;for(l=b.length;n<l;n+=1)if(f=b[n],null!=g.node(f.id)){s=[];g.loopParents(this,f.id,function(a){s.push(a);return g.SKIP});p=0;for(q=s.length;p<q;p+=1)g.removeRelation(s[p],f.id),c.removeRelation(s[p],f.id);d+=1;m=new a.famdiagram.FamilyItem({id:d,isVisible:!1,isActive:!0,isLevelNeutral:!0,hideParentConnection:!0,hideChildrenConnection:!0,
itemConfig:{title:"fake parent #"+d,description:"This is fake parent item was created by loops reversal."}});c.add([],m.id,m);c.adopt([m.id],f.id);p=0;for(q=s.length;p<q;p+=1)d+=1,f=new a.famdiagram.FamilyItem({id:d,isVisible:!1,isActive:!0,isLevelNeutral:!0,hideParentConnection:!0,hideChildrenConnection:!0,itemConfig:{title:"fake child #"+d,description:"This is fake child item was created by loops reversal."}}),c.add([m.id,s[p]],f.id,f);r=[];g.loopTopo(this,function(a){r.push(a)});p=0;for(q=r.length;p<
q;p+=1)g.removeNode(r[p])}}return d}var c=null,f=null;return{process:function(a){var h=b.getNavigationFamily(),i=b.getMaximumId(),j=g.getItems(),h=h.clone(),i=d(j,h,i,a);c=h;f=i;if(a&&!h.validate())throw"References are broken in family structure!";return!0},getLogicalFamily:function(){return c},getMaximumId:function(){return f}}};a.famdiagram.UserDefinedNodesOrderTask=function(g){var b=null,d=null,c=new a.famdiagram.UserDefinedNodesOrder;return{process:function(){var a=g.getOptions(),a=c.getUserDefinedPositions(a.items);
b=a.position;d=a.group;return!0},getPositions:function(){return b},getGroups:function(){return d}}};a.famdiagram.Control=function(g,b){return a.orgdiagram.BaseControl(g,b,a.famdiagram.TaskManagerFactory,a.famdiagram.EventArgsFactory,{AnnotationLabelTemplate:a.common.AnnotationLabelTemplate,ButtonsTemplate:a.common.ButtonsTemplate,CheckBoxTemplate:a.common.CheckBoxTemplate,CursorTemplate:a.common.CursorTemplate,DotHighlightTemplate:a.common.DotHighlightTemplate,GroupTitleTemplate:a.common.GroupTitleTemplate,
HighlightTemplate:a.common.HighlightTemplate,ItemTemplate:a.common.ItemTemplate,UserTemplate:a.common.UserTemplate,LabelAnnotationTemplate:a.common.LabelAnnotationTemplate})};a.famdiagram.EventArgsFactory=function(g,b,d,c){var f=new a.famdiagram.EventArgs,e=g.tasks.getTask("CombinedContextsTask"),h=g.tasks.getTask("AlignDiagramTask"),i=g.tasks.getTask("LogicalFamilyTask"),b=e.getConfig(b),j=e.getConfig(d),k=i.getLogicalFamily();b&&null!=b.id&&(f.oldContext=b);j&&null!=j.id&&(f.context=j,k.loopParents(this,
j.id,function(a,b,c){if(0<c)return k.BREAK;f.parentItems.push(e.getConfig(a))}),k.loopChildren(this,j.id,function(a,b,c){if(0<c)return k.BREAK;f.childrenItems.push(e.getConfig(a))}),i=a.common.getElementOffset(g.layout.mousePanel),g=a.common.getElementOffset(g.layout.element),d=h.getItemPosition(d),f.position=(new a.common.Rect(d.actualPosition)).translate(i.left,i.top).translate(-g.left,-g.top));null!=c&&(f.name=c);return f};a.famdiagram.getProcessDiagramConfig=function(){var g=function(){};return a.famdiagram.TaskManagerFactory(g,
g,g).getProcessDiagramConfig()};a.famdiagram.TaskManagerFactory=function(g,b,d,c,f){var e=new a.common.TaskManager;e.addDependency("options",g);e.addDependency("graphics",b);e.addDependency("getLayout",d);e.addDependency("setLayout",c);e.addDependency("templates",f);e.addDependency("defaultConfig",new a.famdiagram.Config);e.addDependency("defaultItemConfig",new a.famdiagram.ItemConfig);e.addDependency("defaultTemplateConfig",new a.famdiagram.TemplateConfig);e.addDependency("defaultButtonConfig",new a.famdiagram.ButtonConfig);
e.addDependency("defaultPaletteItemConfig",new a.famdiagram.PaletteItemConfig);e.addDependency("defaultBackgroundAnnotationConfig",new a.famdiagram.BackgroundAnnotationConfig);e.addDependency("defaultConnectorAnnotationConfig",new a.famdiagram.ConnectorAnnotationConfig);e.addDependency("defaultHighlightPathAnnotationConfig",new a.famdiagram.HighlightPathAnnotationConfig);e.addDependency("defaultShapeAnnotationConfig",new a.famdiagram.ShapeAnnotationConfig);e.addDependency("defaultLabelAnnotationConfig",
new a.famdiagram.LabelAnnotationConfig);e.addDependency("isFamilyChartMode",!0);e.addDependency("showElbowDots",!0);e.addDependency("null",null);e.addDependency("foreground",2);e.addDependency("background",1);e.addTask("OptionsTask",["options"],a.famdiagram.OptionsTask,"#000000");e.addTask("LayoutOptionsTask",["getLayout","OptionsTask"],a.orgdiagram.LayoutOptionsTask,"#000000");e.addTask("CurrentControlSizeTask",["LayoutOptionsTask","ItemsSizesOptionTask"],a.orgdiagram.CurrentControlSizeTask,"#000000");
e.addTask("CurrentScrollPositionTask",["LayoutOptionsTask"],a.orgdiagram.CurrentScrollPositionTask,"#000000");e.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.CalloutOptionTask,"#000080");e.addTask("ConnectorsOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ConnectorsOptionTask,"#000080");e.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],a.famdiagram.ItemsOptionTask,"#000080");e.addTask("ItemsContentOptionTask",["OptionsTask","defaultItemConfig"],
a.orgdiagram.ItemsContentOptionTask,"#000080");e.addTask("SpousesOptionTask",["OptionsTask","defaultItemConfig"],a.famdiagram.SpousesOptionTask,"#000080");e.addTask("ItemsSizesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig","defaultButtonConfig"],a.orgdiagram.ItemsSizesOptionTask,"#000080");e.addTask("LabelsOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.LabelsOptionTask,"#000080");e.addTask("TemplatesOptionTask",["OptionsTask","defaultConfig","defaultButtonConfig",
"defaultTemplateConfig"],a.orgdiagram.TemplatesOptionTask,"#000080");e.addTask("OrientationOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.OrientationOptionTask,"#000080");e.addTask("VisualTreeOptionTask",["OptionsTask"],a.famdiagram.VisualTreeOptionTask,"#000080");e.addTask("MinimizedItemsOptionTask",["OptionsTask"],a.orgdiagram.MinimizedItemsOptionTask,"#000080");e.addTask("HideGrandParentsConnectorsOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.HideGrandParentsConnectorsOptionTask,
"#000080");e.addTask("NormalizeOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.NormalizeOptionTask,"#000080");e.addTask("OrderFamilyNodesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.famdiagram.OrderFamilyNodesOptionTask,"#000080");e.addTask("LinePaletteOptionTask",["OptionsTask","defaultPaletteItemConfig"],a.famdiagram.LinePaletteOptionTask,"#000080");e.addTask("CursorItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorItemOptionTask,"#000080");e.addTask("HighlightItemOptionTask",
["OptionsTask","defaultConfig"],a.orgdiagram.HighlightItemOptionTask,"#000080");e.addTask("SelectedItemsOptionTask",["OptionsTask"],a.orgdiagram.SelectedItemsOptionTask,"#000080");e.addTask("CursorSelectionPathModeOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorSelectionPathModeOptionTask,"#000080");e.addTask("NeighboursSelectionModeOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.NeighboursSelectionModeOptionTask,"#000080");e.addTask("SplitAnnotationsOptionTask",["OptionsTask"],
a.orgdiagram.SplitAnnotationsOptionTask,"#00ffff");e.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");e.addTask("BackgroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","background"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");e.addTask("ForegroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig",
"foreground"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");e.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","background"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");e.addTask("ForegroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");e.addTask("BackgroundConnectorAnnotationOptionTask",
["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");e.addTask("BackgroundAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultBackgroundAnnotationConfig"],a.orgdiagram.BackgroundAnnotationOptionTask,"#000080");e.addTask("ScaleOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ScaleOptionTask,"#000080");e.addTask("UserDefinedNodesOrderTask",["OrderFamilyNodesOptionTask","defaultItemConfig"],a.famdiagram.UserDefinedNodesOrderTask,
"#ff0000");e.addTask("LogicalFamilyTask",["ItemsOptionTask"],a.famdiagram.LogicalFamilyTask,"#00ffff");e.addTask("LabelAnnotationOptionTask",["SplitAnnotationsOptionTask","LogicalFamilyTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationOptionTask,"#000080");e.addTask("LabelAnnotationTemplateOptionTask",["LabelAnnotationOptionTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationTemplateOptionTask,"#000080");e.addTask("LabelAnnotationPlacementOptionTask",["LabelAnnotationOptionTask",
"defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationPlacementOptionTask,"#000080");e.addTask("CombinedContextsTask",["ItemsContentOptionTask","LabelAnnotationOptionTask"],a.orgdiagram.CombinedContextsTask,"#00ffff");e.addTask("AddLabelAnnotationsTask",["LabelAnnotationPlacementOptionTask","LogicalFamilyTask"],a.famdiagram.AddLabelAnnotationsTask,"#ff0000");e.addTask("RemoveLoopsTask",["ItemsOptionTask","AddLabelAnnotationsTask"],a.famdiagram.RemoveLoopsTask,"#ff0000");e.addTask("AddSpousesTask",
["SpousesOptionTask","RemoveLoopsTask"],a.famdiagram.AddSpousesTask,"#ff0000");e.addTask("HideGrandParentsConnectorsTask",["HideGrandParentsConnectorsOptionTask","AddSpousesTask"],a.famdiagram.HideGrandParentsConnectorsTask,"#ff0000");e.addTask("NormalizeLogicalFamilyTask",["NormalizeOptionTask","HideGrandParentsConnectorsTask"],a.famdiagram.NormalizeLogicalFamilyTask,"#ff0000");e.addTask("OrderFamilyNodesTask",["OrderFamilyNodesOptionTask","UserDefinedNodesOrderTask","NormalizeLogicalFamilyTask",
"defaultItemConfig"],a.famdiagram.OrderFamilyNodesTask,"#ff0000");e.addTask("ReadTemplatesTask",["TemplatesOptionTask","templates"],a.orgdiagram.ReadTemplatesTask,"#00ffff");e.addTask("ActiveItemsTask",["ItemsSizesOptionTask","ReadTemplatesTask"],a.orgdiagram.ActiveItemsTask,"#00ffff");e.addTask("ItemTemplateParamsTask",["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],a.orgdiagram.ItemTemplateParamsTask,"#00ffff");e.addTask("LabelAnnotationTemplateParamsTask",["ItemsSizesOptionTask",
"LabelAnnotationTemplateOptionTask","ReadTemplatesTask"],a.famdiagram.LabelAnnotationTemplateParamsTask,"#00ffff");e.addTask("CombinedTemplateParamsTask",["ItemTemplateParamsTask","LabelAnnotationTemplateParamsTask"],a.famdiagram.CombinedTemplateParamsTask,"#00ffff");e.addTask("GroupTitleTemplateTask",["TemplatesOptionTask","templates"],a.orgdiagram.GroupTitleTemplateTask,"#00ffff");e.addTask("CheckBoxTemplateTask",["ItemsSizesOptionTask","templates"],a.orgdiagram.CheckBoxTemplateTask,"#00ffff");
e.addTask("ButtonsTemplateTask",["ItemsSizesOptionTask","templates"],a.orgdiagram.ButtonsTemplateTask,"#00ffff");e.addTask("AnnotationLabelTemplateTask",["ItemsOptionTask","templates"],a.orgdiagram.AnnotationLabelTemplateTask,"#00ffff");e.addTask("ConnectionsGraphTask",["graphics","CreateTransformTask","ConnectorsOptionTask","OrderFamilyNodesTask","AlignDiagramTask"],a.orgdiagram.ConnectionsGraphTask,"#00ffff");e.addTask("HighlightItemTask",["HighlightItemOptionTask","ActiveItemsTask"],a.orgdiagram.HighlightItemTask,
"#00ffff");e.addTask("CursorItemTask",["CursorItemOptionTask","ActiveItemsTask"],a.orgdiagram.CursorItemTask,"#00ffff");e.addTask("CursorNeighboursTask",["CursorItemTask","NeighboursSelectionModeOptionTask","AddLabelAnnotationsTask","ActiveItemsTask"],a.famdiagram.CursorNeighboursTask,"#00ffff");e.addTask("SelectedItemsTask",["SelectedItemsOptionTask"],a.orgdiagram.SelectedItemsTask,"#00ffff");e.addTask("SelectionPathItemsTask",["AddLabelAnnotationsTask","CursorItemTask","SelectedItemsTask","CursorSelectionPathModeOptionTask"],
a.orgdiagram.SelectionPathItemsTask,"#00ffff");e.addTask("NormalVisibilityItemsByForegroundShapeAnnotationTask",["ForegroundShapeAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");e.addTask("NormalVisibilityItemsByBackgroundShapeAnnotationTask",["BackgroundShapeAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");e.addTask("NormalVisibilityItemsByBackgroundAnnotationTask",["BackgroundAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,
"#00ffff");e.addTask("NormalVisibilityItemsByForegroundHighlightPathAnnotationTask",["ForegroundHighlightPathAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");e.addTask("NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask",["BackgroundHighlightPathAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");e.addTask("NormalVisibilityItemsByForegroundConnectorAnnotationTask",["ForegroundConnectorAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,
"#00ffff");e.addTask("NormalVisibilityItemsByBackgroundConnectorAnnotationTask",["BackgroundConnectorAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,"#00ffff");e.addTask("CombinedNormalVisibilityItemsTask","ItemsSizesOptionTask CursorItemTask CursorNeighboursTask SelectedItemsTask SelectionPathItemsTask NormalVisibilityItemsByForegroundShapeAnnotationTask NormalVisibilityItemsByBackgroundShapeAnnotationTask NormalVisibilityItemsByBackgroundAnnotationTask NormalVisibilityItemsByForegroundHighlightPathAnnotationTask NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask NormalVisibilityItemsByForegroundConnectorAnnotationTask NormalVisibilityItemsByBackgroundConnectorAnnotationTask".split(" "),
a.orgdiagram.CombinedNormalVisibilityItemsTask,"#00ffff");e.addTask("ItemsPositionsTask","CurrentControlSizeTask ScaleOptionTask OrientationOptionTask ItemsSizesOptionTask ConnectorsOptionTask OrderFamilyNodesOptionTask OrderFamilyNodesTask CombinedTemplateParamsTask CursorItemTask CombinedNormalVisibilityItemsTask".split(" "),a.famdiagram.ItemsPositionsTask,"#ff0000");e.addTask("AlignDiagramTask","OrientationOptionTask ItemsSizesOptionTask VisualTreeOptionTask ScaleOptionTask CurrentControlSizeTask ActiveItemsTask ItemsPositionsTask isFamilyChartMode".split(" "),
a.orgdiagram.AlignDiagramTask,"#ff0000");e.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],a.orgdiagram.CreateTransformTask,"#00ffff");e.addTask("CenterOnCursorTask","LayoutOptionsTask CurrentControlSizeTask CurrentScrollPositionTask CursorItemTask AlignDiagramTask CreateTransformTask ScaleOptionTask".split(" "),a.orgdiagram.CenterOnCursorTask,"#00ffff");e.addTask("PaletteManagerTask",["ConnectorsOptionTask","LinePaletteOptionTask"],a.orgdiagram.PaletteManagerTask,"#00ffff");
e.addTask("ApplyLayoutChangesTask","graphics setLayout ItemsSizesOptionTask CurrentControlSizeTask ScaleOptionTask AlignDiagramTask".split(" "),a.orgdiagram.ApplyLayoutChangesTask,"#00ffff");e.addTask("DrawBackgroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","ForegroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","foreground"],a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");e.addTask("DrawForegroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask",
"BackgroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","background"],a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");e.addTask("DrawBackgroundAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask BackgroundAnnotationOptionTask AddLabelAnnotationsTask AlignDiagramTask".split(" "),a.orgdiagram.DrawBackgroundAnnotationTask,"#008000");e.addTask("DrawForegroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground".split(" "),
a.orgdiagram.DrawConnectorAnnotationTask,"#008000");e.addTask("DrawBackgroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background".split(" "),a.orgdiagram.DrawConnectorAnnotationTask,"#008000");e.addTask("DrawForegroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground".split(" "),
a.orgdiagram.DrawShapeAnnotationTask,"#008000");e.addTask("DrawBackgroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background".split(" "),a.orgdiagram.DrawShapeAnnotationTask,"#008000");e.addTask("DrawCursorTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask CombinedTemplateParamsTask CursorItemTask SelectedItemsTask".split(" "),
a.orgdiagram.DrawCursorTask,"#008000");e.addTask("DrawHighlightTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask CombinedTemplateParamsTask HighlightItemTask CursorItemTask SelectedItemsTask".split(" "),a.orgdiagram.DrawHighlightTask,"#008000");e.addTask("DrawHighlightAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask ScaleOptionTask CombinedContextsTask CalloutOptionTask ReadTemplatesTask AlignDiagramTask CenterOnCursorTask HighlightItemTask CursorItemTask SelectedItemsTask".split(" "),
a.orgdiagram.DrawHighlightAnnotationTask,"#008000");e.addTask("DrawTreeItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask ScaleOptionTask ItemsSizesOptionTask CombinedContextsTask AlignDiagramTask CenterOnCursorTask CombinedTemplateParamsTask CursorItemTask SelectedItemsTask GroupTitleTemplateTask CheckBoxTemplateTask ButtonsTemplateTask".split(" "),a.orgdiagram.DrawTreeItemsTask,"#008000");e.addTask("DrawMinimizedItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask MinimizedItemsOptionTask CombinedTemplateParamsTask AlignDiagramTask".split(" "),
a.orgdiagram.DrawMinimizedItemsTask,"#008000");e.addTask("DrawConnectorsTask",["graphics","ConnectionsGraphTask","ConnectorsOptionTask","showElbowDots","PaletteManagerTask"],a.orgdiagram.DrawConnectorsTask,"#008000");e.addTask("DrawItemLabelsTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","LabelsOptionTask","AlignDiagramTask"],a.orgdiagram.DrawItemLabelsTask,"#008000");return e};a.orgdiagram.TemplateConfig=function(){this.name=null;this.isActive=!0;this.itemSize=new a.common.Size(120,
100);this.itemBorderWidth=1;this.minimizedItemShapeType=this.itemTemplate=null;this.minimizedItemSize=new a.common.Size(4,4);this.minimizedItemCornerRadius=null;this.minimizedItemLineWidth=1;this.minimizedItemBorderColor=null;this.minimizedItemLineType=0;this.minimizedItemFillColor=null;this.minimizedItemOpacity=1;this.highlightPadding=new a.common.Thickness(2,2,2,2);this.highlightBorderWidth=1;this.highlightTemplate=null;this.cursorPadding=new a.common.Thickness(3,3,3,3);this.cursorBorderWidth=2;
this.onButtonsRender=this.buttons=this.cursorTemplate=null};a.orgdiagram.BackgroundAnnotationConfig=function(g){var b;this.annotationType=4;this.items=[];this.includeChildren=!1;this.zOrderType=0;this.offset=new a.common.Thickness(18,18,18,18);this.lineWidth=2;this.opacity=1;this.fillColor=this.borderColor=null;this.lineType=0;this.selectItems=!1;switch(arguments.length){case 1:if(null!==g)if(g instanceof Array)this.items=g;else if("object"==typeof g)for(b in g)g.hasOwnProperty(b)&&(this[b]=g[b])}};
a.orgdiagram.ButtonConfig=function(g,b,d){this.name=g;this.icon=b;this.text=!1;this.label=null;this.tooltip=d;this.size=new a.common.Size(16,16)};a.orgdiagram.Config=function(g){this.name=void 0!==g?g:"OrgDiagram";this.classPrefix="orgdiagram";this.graphicsType=this.navigationMode=0;this.pageFitMode=3;this.minimalVisibility=2;this.horizontalAlignment=this.orientationType=0;this.verticalAlignment=1;this.arrowsDirection=0;this.showExtraArrows=!1;this.extraArrowsMinimumSpace=30;this.connectorType=0;
this.bevelSize=4;this.elbowType=0;this.elbowDotSize=4;this.emptyDiagramMessage="Diagram is empty.";this.items=[];this.annotations=[];this.highlightItem=this.cursorItem=null;this.highlightGravityRadius=40;this.selectedItems=[];this.hasSelectorCheckbox=0;this.selectCheckBoxLabel="Selected";this.selectionPathMode=1;this.templates=[];this.defaultTemplateName=null;this.hasButtons=0;this.buttons=[];this.onCursorRender=this.onHighlightRender=this.onItemRender=this.onMouseDblClick=this.onMouseClick=this.onButtonClick=
this.onSelectionChanged=this.onSelectionChanging=this.onCursorChanged=this.onCursorChanging=this.onHighlightChanged=this.onHighlightChanging=this.onButtonsRender=null;this.dotLevelShift=this.normalLevelShift=20;this.normalItemsInterval=this.lineLevelShift=10;this.dotItemsInterval=1;this.lineItemsInterval=2;this.cousinsIntervalMultiplier=5;this.itemTitleFirstFontColor="#ffffff";this.itemTitleSecondFontColor="#000080";this.minimizedItemShapeType=6;this.linesColor="#c0c0c0";this.linesWidth=1;this.linesType=
0;this.highlightLinesColor="#ff0000";this.highlightLinesWidth=1;this.highlightLinesType=0;this.showCallout=!0;this.calloutMaximumVisibility=2;this.calloutPlacementOffset=100;this.defaultCalloutTemplateName=null;this.calloutfillColor="#000000";this.calloutBorderColor=null;this.calloutCornerRadius=this.calloutOffset=4;this.calloutPointerWidth="10%";this.calloutLineWidth=1;this.calloutOpacity=0.2;this.leavesPlacementType=this.childrenPlacementType=2;this.maximumColumnsInMatrix=6;this.buttonsPanelSize=
28;this.checkBoxPanelSize=this.groupTitlePanelSize=24;this.groupTitleOrientation=this.groupTitlePlacementType=2;this.groupTitleVerticalAlignment=1;this.groupTitleHorizontalAlignment=0;this.groupTitleFontSize="12px";this.groupTitleFontFamily="Arial";this.groupTitleColor="#4169e1";this.groupTitleFontStyle=this.groupTitleFontWeight="normal";this.distance=3;this.scale=1;this.minimumScale=0.5;this.maximumScale=2;this.showLabels=0;this.labelSize=new a.common.Size(80,24);this.labelOffset=1;this.labelOrientation=
0;this.labelPlacement=1;this.labelFontSize="10px";this.labelFontFamily="Arial";this.labelColor="#000000";this.labelFontStyle=this.labelFontWeight="normal";this.enablePanning=!0;this.autoSizeMinimum=new a.common.Size(800,600);this.autoSizeMaximum=new a.common.Size(1024,768)};a.orgdiagram.ConnectorAnnotationConfig=function(g,b){var d;this.annotationType=0;this.zOrderType=2;this.toItem=this.fromItem=null;this.connectorPlacementType=this.connectorShapeType=0;this.labelPlacementType=1;this.offset=new a.common.Thickness(0,
0,0,0);this.lineWidth=2;this.color="#000000";this.lineType=0;this.selectItems=!0;this.label=null;this.labelSize=new a.common.Size(60,30);switch(arguments.length){case 1:for(d in g)g.hasOwnProperty(d)&&(this[d]=g[d]);break;case 2:this.fromItem=g,this.toItem=b}};a.orgdiagram.HighlightPathAnnotationConfig=function(a){var b;this.zOrderType=this.annotationType=2;this.items=[];this.lineWidth=2;this.color="#ff0000";this.lineType=0;this.opacity=1;this.showArrows=!0;this.selectItems=!1;switch(arguments.length){case 1:if(null!==
a)if(a instanceof Array)this.items=a;else if("object"==typeof a)for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}};a.orgdiagram.ItemConfig=function(a,b,d,c,f){var e;this.context=this.image=this.description=this.title=this.parent=this.id=null;this.itemTitleColor="#4169e1";this.groupTitle=this.minimizedItemShapeType=null;this.groupTitleColor="#4169e1";this.isActive=this.isVisible=!0;this.childrenPlacementType=this.adviserPlacementType=this.itemType=this.hasButtons=this.hasSelectorCheckbox=0;this.templateName=
null;this.showCallout=0;this.label=this.calloutTemplateName=null;this.showLabel=0;this.labelSize=null;this.labelOrientation=3;this.labelPlacement=0;switch(arguments.length){case 1:for(e in a)a.hasOwnProperty(e)&&(this[e]=a[e]);break;case 5:this.id=a,this.parent=b,this.title=d,this.description=c,this.image=f}};a.orgdiagram.ShapeAnnotationConfig=function(g){var b;this.annotationType=1;this.zOrderType=0;this.items=[];this.shapeType=0;this.offset=new a.common.Thickness(0,0,0,0);this.lineWidth=2;this.cornerRadius=
"10%";this.opacity=1;this.fillColor=this.borderColor=null;this.lineType=0;this.selectItems=!1;this.label=null;this.labelSize=new a.common.Size(60,30);this.labelPlacement=0;this.labelOffset=4;switch(arguments.length){case 1:if(null!==g)if(g instanceof Array)this.items=g;else if("object"==typeof g)for(b in g)g.hasOwnProperty(b)&&(this[b]=g[b])}};a.orgdiagram.EventArgs=function(){this.name=this.position=this.parentItem=this.context=this.oldContext=null;this.cancel=!1};a.common.BaseConnectorBundle=function(){this.NORMAL_ITEM_WEIGHT=
10010;this.LINE_ITEM_WEIGHT=1E4};a.common.BaseConnectorBundle.prototype.trace=function(){};a.common.BaseConnectorBundle.prototype.getId=function(a){var b="_"+a.nodeid;a.nodeid+=1;return b};a.common.BaseConnectorBundle.prototype.ConnectorEdge=function(a,b,d,c,f,e,h,i,j,k){this.polyline=d;this.from=a;this.to=b;this.weight=h||0;this.fromOffset=i||0;this.parentsArrowId=c;this.childrenArrowId=f;this.dotId=e;this.hasMiddle=j;this.middleParent=k};a.common.BaseConnectorBundle.prototype.ConnectorDestination=
function(a){this.bundleid=this.y=this.x=this.id=null;this.hasElbow=!1;this.visibility=this.elbowPoint2=this.elbowPoint1=null;this.isSquared=!0;for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])};a.common.BaseConnectorBundle.prototype.traceFork=function(g,b,d,c,f,e,h,i,j){var k,m,n,l=[],p,q,r;if(e){l=[];e=0;for(m=f.length;e<m;e+=1)if(n=f[e],n.x<c.x&&!n.isSquared)l.push(n);else break;m=l.length;0<m&&(n=l[m-1],n=n.x==c.x?c:new this.ConnectorDestination({id:n.bundleid,x:n.x,y:c.y}),this.traceAngularSegments(g,
b,d,n,l,!1));l=[];for(k=f.length-1;k>=e;k-=1)if(n=f[k],n.x>c.x&&!n.isSquared)l.push(n);else break;m=l.length;0<m&&(n=l[m-1],n=n.x==c.x?c:new this.ConnectorDestination({id:n.bundleid,x:n.x,y:c.y}),this.traceAngularSegments(g,b,d,n,l,!1));for(l=e;l<=k;l+=1){n=f[l];m=d.bevelSize;2>m&&(m=0);if(b.hasGraphics)switch(d.elbowType){case 2:case 3:0<m&&(Math.abs(c.x-n.x)>m&&Math.abs(c.y-n.y)>m)&&(n.hasElbow=!0,n.elbowPoint1=new a.common.Point(n.x,c.y+(c.y>n.y?-m:m)),n.elbowPoint2=new a.common.Point(n.x+(c.x>
n.x?m:-m),c.y))}p=new a.common.Polyline;n.hasElbow?(b.transform.transform3Points(n.elbowPoint2.x,n.elbowPoint2.y,n.elbowPoint1.x,n.elbowPoint2.y,n.elbowPoint1.x,n.elbowPoint1.y,!0,this,function(b,c,e,g,f,h){switch(d.elbowType){case 2:p.addSegment(new a.common.MoveSegment(b,c));p.addSegment(new a.common.LineSegment(f,h));break;case 3:p.addSegment(new a.common.MoveSegment(b,c)),p.addSegment(new a.common.CubicArcSegment(b,c,e,g,f,h))}}),b.transform.transformPoints(n.elbowPoint1.x,n.elbowPoint1.y,n.x,
n.y,!0,this,function(b,c,d,e){p.addSegment(new a.common.LineSegment(d,e))})):b.transform.transformPoints(n.x,c.y,n.x,n.y,!0,this,function(b,c,d,e){p.addSegment(new a.common.MoveSegment(b,c));p.addSegment(new a.common.LineSegment(d,e))});m=n.x==c.x?c.id:n.bundleid;q=4!==n.visibility;g.graph.addEdge(m,n.id,new this.ConnectorEdge(m,n.id,p,h&&q?n.id:null,!h&&q?n.id:null,null,q?this.NORMAL_ITEM_WEIGHT:this.LINE_ITEM_WEIGHT,i))}e=Math.max(e-1,0);k=Math.min(k+1,f.length-1);n=c;m=c.id;for(l=e;l<=k;l+=1)q=
f[l],r=q.bundleid,q.x>n.x&&(p=new a.common.Polyline,b.transform.transformPoints(n.x,c.y,null!=q.elbowPoint2?q.elbowPoint2.x:q.x,c.y,!0,this,function(b,c,d,e){p.addSegment(new a.common.MoveSegment(b,c));p.addSegment(new a.common.LineSegment(d,e))}),g.graph.addEdge(m,r,new this.ConnectorEdge(m,r,p,null,null,m,Math.abs(q.x-n.x)/1E4,i,j,h?r:m)),n=q.elbowPoint2||q,m=r);n=c;m=c.id;for(l=k;l>=e;l-=1)q=f[l],r=q.bundleid,q.x<n.x&&(p=new a.common.Polyline,b.transform.transformPoints(n.x,c.y,null!=q.elbowPoint2?
q.elbowPoint2.x:q.x,c.y,!0,this,function(b,c,d,e){p.addSegment(new a.common.MoveSegment(b,c));p.addSegment(new a.common.LineSegment(d,e))}),g.graph.addEdge(m,r,new this.ConnectorEdge(m,r,p,null,null,m,Math.abs(q.x-n.x)/1E4,i,j,h?r:m)),n=q.elbowPoint2||q,m=r)}else this.traceAngularSegments(g,b,d,c,f,!0)};a.common.BaseConnectorBundle.prototype.traceAngularSegments=function(g,b,d,c,f,e){var h,i,j,k,m;h=0;for(i=f.length;h<i;h+=1){k=f[h];m=new a.common.Polyline;b.transform.transformPoint(c.x,c.y,!0,this,
function(b,c){m.addSegment(new a.common.MoveSegment(b,c))});switch(d.connectorType){case 1:b.transform.transformPoint(k.x,k.y,!0,this,function(b,c){m.addSegment(new a.common.LineSegment(b,c))});break;case 2:j=new a.common.Rect(c,k),e?c.x>j.x?b.transform.transform3Points(j.right(),j.verticalCenter(),j.x,j.verticalCenter(),j.x,j.bottom(),!0,this,function(b,c,d,e,g,f){m.addSegment(new a.common.CubicArcSegment(b,c,d,e,g,f))}):b.transform.transform3Points(j.x,j.verticalCenter(),j.right(),j.verticalCenter(),
j.right(),j.bottom(),!0,this,function(b,c,d,e,g,f){m.addSegment(new a.common.CubicArcSegment(b,c,d,e,g,f))}):c.x>j.x?b.transform.transformPoints(j.x,j.y,j.x,j.bottom(),!0,this,function(b,c,d,e){m.addSegment(new a.common.QuadraticArcSegment(b,c,d,e))}):b.transform.transformPoints(j.right(),j.y,j.right(),j.bottom(),!0,this,function(b,c,d,e){m.addSegment(new a.common.QuadraticArcSegment(b,c,d,e))})}j=4!==k.visibility;g.graph.addEdge(c.id,k.id,new this.ConnectorEdge(c.id,k.id,m,null,j?k.id:null,j?this.NORMAL_ITEM_WEIGHT:
this.LINE_ITEM_WEIGHT))}};a.common.HorizontalConnectorBundle=function(a,b){this.fromItem=a;this.toItem=b};a.common.HorizontalConnectorBundle.prototype=new a.common.BaseConnectorBundle;a.common.HorizontalConnectorBundle.prototype.trace=function(g,b){var d=this.fromItem,c=this.toItem,f=b.treeItemsPositions[d],e=b.treeItemsPositions[c],h=new a.common.Polyline;f.actualPosition.x<e.actualPosition.x?b.transform.transformPoints(f.actualPosition.right(),f.horizontalConnectorsShift,e.actualPosition.x,e.horizontalConnectorsShift,
!0,this,function(b,c,d,e){h.addSegment(new a.common.MoveSegment(b,c));h.addSegment(new a.common.LineSegment(d,e))}):b.transform.transformPoints(f.actualPosition.x,f.horizontalConnectorsShift,e.actualPosition.right(),f.horizontalConnectorsShift,!0,this,function(b,c,d,e){h.addSegment(new a.common.MoveSegment(b,c));h.addSegment(new a.common.LineSegment(d,e))});e=4!==e.actualVisibility;f=4!==f.actualVisibility;g.graph.addEdge(d,c,new this.ConnectorEdge(d,c,h,e?c:null,f?d:null,e||f?this.NORMAL_ITEM_WEIGHT:
this.LINE_ITEM_WEIGHT))};a.common.MatrixConnectorBundle=function(a,b,d,c,f){this.isChildren=a;this.items=b;this.len=b.length;this.matrixNodeId=d;this.connectionId=c;this.matrixWidth=f;this.blocksCount=Math.ceil(this.matrixWidth/2);this.rowsCount=Math.ceil(this.len/this.matrixWidth)};a.common.MatrixConnectorBundle.prototype=new a.common.BaseConnectorBundle;a.common.MatrixConnectorBundle.prototype.trace=function(a,b,d){this.isChildren?this.traceChildrenLayout(a,b,d):this.traceParentsLayout(a,b,d)};
a.common.MatrixConnectorBundle.prototype.traceChildrenLayout=function(g,b,d){for(var c,f=[],e=0;e<this.blocksCount;e+=1){for(var h=null,i=this.rowsCount-1;0<=i;i-=1){var j=this.getNodeIndex(e,i,!0,!0),k=null;c=null;j<this.len&&(k=this.items[j],c=b.treeItemsPositions[k]);var m=this.getNodeIndex(e,i,!1,!0),n=null,j=null;m<this.len&&(n=this.items[m],j=b.treeItemsPositions[n]);var l=null;null==l&&null!=c&&(l=new this.ConnectorDestination({id:this.getId(g),x:c.actualPosition.horizontalCenter()+c.rightMedianOffset,
y:c.horizontalConnectorsShift}));null==l&&null!=j&&(l=new this.ConnectorDestination({id:this.getId(g),x:j.actualPosition.horizontalCenter()-j.leftMedianOffset,y:j.horizontalConnectorsShift}));null!=c&&(c=c.actualPosition,b.transform.transformPoints(c.right(),c.verticalCenter(),l.x,l.y,!0,this,function(b,c,d,e){var f=new a.common.Polyline;f.addSegment(new a.common.MoveSegment(b,c));f.addSegment(new a.common.LineSegment(d,e));g.graph.addEdge(k,l.id,new this.ConnectorEdge(k,l.id,f,null,k,null,10))}));
null!=j&&(c=j.actualPosition,b.transform.transformPoints(c.left(),c.verticalCenter(),l.x,l.y,!0,this,function(b,c,d,e){var f=new a.common.Polyline;f.addSegment(new a.common.MoveSegment(b,c));f.addSegment(new a.common.LineSegment(d,e));g.graph.addEdge(n,l.id,new this.ConnectorEdge(n,l.id,f,null,n,null,10))}));null!=h&&null!=l&&b.transform.transformPoints(h.x,h.y,l.x,l.y,!0,this,function(b,c,d,e){var f=new a.common.Polyline;f.addSegment(new a.common.MoveSegment(b,c));f.addSegment(new a.common.LineSegment(d,
e));g.graph.addEdge(h.id,l.id,new this.ConnectorEdge(h.id,l.id,f,null,null,null,0))});null!=l&&(h=l)}null!=h&&f.push(new this.ConnectorDestination({id:h.id,bundleid:this.getId(g),x:h.x,y:h.y,isSquared:!0,visibility:4}))}c=b.treeItemsPositions[this.matrixNodeId].actualPosition;e=new this.ConnectorDestination({id:this.matrixNodeId,x:c.horizontalCenter(),y:c.top()});this.traceFork(g,b,d,e,f,!0,!1,0,d.showExtraArrows)};a.common.MatrixConnectorBundle.prototype.traceParentsLayout=function(g,b,d){for(var c,
f=[],e=0;e<=this.blocksCount;e+=1){for(var h=null,i=0;i<this.rowsCount;i+=1){var j=this.getNodeIndex(e,i,!0,!1),k=null;c=null;j<this.len&&(k=this.items[j],c=b.treeItemsPositions[k]);var m=this.getNodeIndex(e,i,!1,!1),n=null,j=null;m<this.len&&(n=this.items[m],j=b.treeItemsPositions[n]);var l=null;null==l&&null!=c&&(l=new this.ConnectorDestination({id:this.getId(g),x:c.actualPosition.horizontalCenter()+c.rightMedianOffset,y:c.horizontalConnectorsShift}));null==l&&null!=j&&(l=new this.ConnectorDestination({id:this.getId(g),
x:j.actualPosition.horizontalCenter()-j.leftMedianOffset,y:j.horizontalConnectorsShift}));null!=c&&(c=c.actualPosition,b.transform.transformPoints(c.right(),c.verticalCenter(),l.x,l.y,!0,this,function(b,c,d,e){var f=new a.common.Polyline;f.addSegment(new a.common.MoveSegment(b,c));f.addSegment(new a.common.LineSegment(d,e));g.graph.addEdge(k,l.id,new this.ConnectorEdge(k,l.id,f,k,null,null,10))}));null!=j&&(c=j.actualPosition,b.transform.transformPoints(c.left(),c.verticalCenter(),l.x,l.y,!0,this,
function(b,c,d,e){var f=new a.common.Polyline;f.addSegment(new a.common.MoveSegment(b,c));f.addSegment(new a.common.LineSegment(d,e));g.graph.addEdge(n,l.id,new this.ConnectorEdge(n,l.id,f,n,null,null,10))}));null!=h&&null!=l&&b.transform.transformPoints(h.x,h.y,l.x,l.y,!0,this,function(b,c,d,e){var f=new a.common.Polyline;f.addSegment(new a.common.MoveSegment(b,c));f.addSegment(new a.common.LineSegment(d,e));g.graph.addEdge(h.id,l.id,new this.ConnectorEdge(h.id,l.id,f,null,null,null,0))});null!=
l&&(h=l)}null!=h&&f.push(new this.ConnectorDestination({id:h.id,bundleid:this.getId(g),x:h.x,y:h.y,isSquared:!0,visibility:4}))}c=b.treeItemsPositions[this.matrixNodeId].actualPosition;e=new this.ConnectorDestination({id:this.connectionId,x:c.horizontalCenter(),y:c.bottom()});this.traceFork(g,b,d,e,f,!0,!0,0,d.showExtraArrows)};a.common.MatrixConnectorBundle.prototype.getNodeIndex=function(a,b,d,c){var f=null;c?(a=2*a+(d?0:1),this.matrixWidth>a&&(f=b*this.matrixWidth+a)):(a=2*a+(d?-1:0),0<=a&&a<this.matrixWidth&&
(f=b*this.matrixWidth+a));return f};a.common.VerticalConnectorBundle=function(a,b){this.fromItems=a;this.toItems=b;this.childConnectorId={};this.fromStackSize=this.fromOffset=0};a.common.VerticalConnectorBundle.prototype=new a.common.BaseConnectorBundle;a.common.VerticalConnectorBundle.prototype.trace=function(g,b,d){var c,f,e,h,i,j,k,m,n,l=0===d.connectorType;c=[];if(0<this.fromItems.length){e=this.fromItems;j=0;for(f=e.length;j<f;j+=1)h=e[j],i=b.treeItemsPositions[h],h=new this.ConnectorDestination({id:b.nestedLayoutBottomConnectorIds.hasOwnProperty(h)?
b.nestedLayoutBottomConnectorIds[h]:h,bundleid:this.getId(g),x:i.actualPosition.horizontalCenter(),y:i.actualPosition.bottom(),isSquared:!0,visibility:i.actualVisibility}),c.push(h);c.sort(function(a,b){return a.x-b.x});n=i.bottomConnectorShift-i.bottomConnectorInterval*(this.fromStackSize-this.fromOffset+1)}f=[];if(0<this.toItems.length){m=!1;e=this.toItems;for(j=0;j<e.length;j+=1){h=e[j];i=b.treeItemsPositions[h];k=!0;if(b.hasGraphics)switch(i.actualVisibility){case 2:case 3:k=l}h=new this.ConnectorDestination({id:h,
bundleid:this.getId(g),x:i.actualPosition.horizontalCenter()+0,y:i.actualPosition.top(),isSquared:k,visibility:i.actualVisibility});f.push(h);m=m||h.isSquared}f.sort(function(a,b){return a.x-b.x});k=i.topConnectorShift}e=1==f.length?f[0].x:1==c.length?c[0].x:0<f.length&&0<c.length?(c[0].x+c[c.length-1].x+f[0].x+f[f.length-1].x)/4:0<f.length?(f[0].x+f[f.length-1].x)/2:(c[0].x+c[c.length-1].x)/2;var p=null;0<c.length&&(p=new this.ConnectorDestination({id:this.getId(g),x:e,y:n}),this.traceFork(g,b,d,
p,c,!0,!0,this.fromOffset,d.showExtraArrows&&0<f.length));var q=null;0<f.length&&(q=new this.ConnectorDestination({id:this.getId(g),x:e,y:k}),null!=p&&q.y==p.y&&(q=p),this.traceFork(g,b,d,q,f,m,!1,0,d.showExtraArrows&&0<c.length));null!=p&&(null!=q&&p.id!=q.id)&&b.transform.transformPoints(p.x,p.y,q.x,q.y,!0,this,function(b,c,d,e){var f=new a.common.Polyline;f.addSegment(new a.common.MoveSegment(b,c));f.addSegment(new a.common.LineSegment(d,e));g.graph.addEdge(p.id,q.id,new this.ConnectorEdge(p.id,
q.id,f,null,null,null,0))})};a.orgdiagram.LevelVisibility=function(a,b){this.level=a;this.currentvisibility=b};a.orgdiagram.OrgItem=function(a){var b,d,c;this.id=null;this.isActive=this.isVisible=!0;this.hasVisibleChildren=!1;this.childrenPlacementType=this.adviserPlacementType=this.itemType=0;this.level=null;this.hideChildrenConnection=this.hideParentConnection=!1;this.childIndex=null;var f="id parent isVisible isActive itemType adviserPlacementType childrenPlacementType".split(" ");b=0;for(d=f.length;b<
d;b+=1)c=f[b],a.hasOwnProperty(c)&&(this[c]=a[c])};a.orgdiagram.Template=function(a,b,d,c,f){this.templateConfig=a;this.itemTemplate=b;this.highlightTemplate=d;this.dotHighlightTemplate=c;this.cursorTemplate=f};a.orgdiagram.TemplateParams=function(){this.template=null;this.hasGroupTitle=this.hasButtons=this.hasSelectorCheckbox=this.isActive=!1;this.buttons=[];this.onButtonsRender=null};a.orgdiagram.TreeItem=function(){this.visualAggregatorId=this.id=null;this.visualDepth=1;this.partners=[];this.visibility=
1;this.actualItemType=null;this.relationDegree=this.gravity=this.connectorPlacement=0};a.orgdiagram.TreeItemPosition=function(g){this.partnerConnectorOffset=0;this.levelPosition=this.level=null;this.rightPadding=this.leftPadding=this.offset=0;this.actualVisibility=1;this.topConnectorShift=this.horizontalConnectorsShift=this.contentPosition=this.actualPosition=this.actualSize=null;this.topConnectorInterval=0;this.bottomConnectorShift=null;this.bottomConnectorInterval=0;this.rightMedianOffset=this.leftMedianOffset=
null;if(null!=g)for(var b in g)if(g.hasOwnProperty(b))switch(b){case "actualPosition":this.actualPosition=new a.common.Rect(g.actualPosition);break;default:this[b]=g[b]}};a.orgdiagram.TreeLevelConnectorStackSize=function(){this.parentsStackSize=0};a.orgdiagram.TreeLevelPosition=function(a){this.actualVisibility=this.currentvisibility=1;this.currentOffset=this.levelSpace=this.connectorShift=this.topConnectorShift=this.horizontalConnectorsDepth=this.nextLevelShift=this.depth=this.shift=0;this.labels=
[];this.labelsRect=null;this.showLabels=!0;this.hasFixedLabels=!1;if(null!=a)for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])};a.orgdiagram.TreeLevelPosition.prototype.setShift=function(a,b,d,c,f){this.shift=a;this.levelSpace=b;this.topConnectorShift=-b/2-d;this.connectorShift=this.depth+c+(f+1)*(b/2);return this.nextLevelShift=d+this.depth+c+b+f*b/2};a.orgdiagram.TreeLevelPosition.prototype.shiftDown=function(a){this.shift+=a};a.orgdiagram.TreeLevelPosition.prototype.toString=function(){return this.currentvisibility};
a.orgdiagram.AlignDiagramTask=function(g,b,d,c,f,e,h,i){function j(){var a=[],b={},c;for(c in k.treeItemsPositions)if(k.treeItemsPositions.hasOwnProperty(c)){var d=k.treeItemsPositions[c];switch(d.actualVisibility){case 1:case 2:case 3:d=d.actualPosition,d=Math.max(d.width,d.height),b.hasOwnProperty(d)||(b[d]=!0,a.push(d))}}return a}var k={treeItemsPositions:{},panelSize:null},m,n,l,p,q,r,s,t;return{process:function(){var j=new a.common.Size(h.getContentSize()),u=new a.common.Size(f.getOptimalPanelSize());
t=s=null;m=null!=e?e.getActiveItems():{};n=h.getItemsPositions();l=b.getOptions();p=g.getOptions();q=d.getOptions();r=c.getOptions();switch(p.orientationType){case 2:case 3:u.invert()}u.scale(1/r.scale);k.panelSize=u;k.treeItemsPositions=n;switch(l.pageFitMode){case 5:k.panelSize=new a.common.Size(j);break;default:k.panelSize=new a.common.Size(j);if(j.width<u.width){k.treeItemsPositions={};var A=j.width,x=u.width,B;if(i)B=(x-A)/2;else switch(q.horizontalAlignment){case 1:B=0;break;case 2:B=x-A;break;
case 0:B=(x-A)/2}var A=k.treeItemsPositions,z;for(z in n)n.hasOwnProperty(z)&&(x=new a.orgdiagram.TreeItemPosition(n[z]),x.actualPosition.translate(B,0),A[z]=x);k.panelSize.width=u.width}j.height<u.height&&(k.panelSize.height=u.height)}switch(p.orientationType){case 2:case 3:k.panelSize.invert()}return!0},getItemPosition:function(a){return k.treeItemsPositions[a]},getItemsPositions:function(){return k.treeItemsPositions},getContentSize:function(){return k.panelSize},getTreeItemForMousePosition:function(b,
c,d){var e=null,f=null,g=r.scale,h;if(null==s)for(h in s=a.common.SpatialIndex(j()),k.treeItemsPositions)if(k.treeItemsPositions.hasOwnProperty(h)){var i=k.treeItemsPositions[h];if(m.hasOwnProperty(h))switch(i.actualVisibility){case 1:case 2:case 3:i=new a.common.Rect(i.actualPosition),i.context=h,s.addRect(i)}}h=s;var n,b=b/g,c=c/g,g=new a.common.Rect(b,c,0,0);n=new a.common.Point(b,c);g.offset(d,d,d,d);h.loopArea(this,g,function(a){var d=a.context;if(a.contains(b,c))return e=d,!0;switch(k.treeItemsPositions[d].actualVisibility){case 2:case 3:if(a=
n.distanceTo(a.horizontalCenter(),a.verticalCenter()),null==f||a<f)f=a,e=d}});return e},getNextItem:function(b,c){var d;if(null==t)for(d in t=a.common.KeyboardNavigationManager(),k.treeItemsPositions)if(k.treeItemsPositions.hasOwnProperty(d)){var e=k.treeItemsPositions[d];if(m.hasOwnProperty(d))switch(e.actualVisibility){case 1:e=new a.common.Rect(e.actualPosition),t.addRect(e,d)}}d=t;var f;switch(c){case 0:f=d.getItemAbove(b);break;case 1:f=d.getItemBelow(b);break;case 2:f=d.getItemOnLeft(b);break;
case 3:f=d.getItemOnRight(b)}return f}}};a.orgdiagram.ApplyLayoutChangesTask=function(g,b,d,c,f,e){var h=null;return{process:function(){var a=g(),j=f.getOptions(),k=d.getOptions(),m=e.getContentSize(),n=c.getScrollPanelSize();a.resize("placeholder",m.width,m.height);h=b({scale:j.scale,contentSize:m,scrollPanelSize:n,autoSize:5==k.pageFitMode,autoSizeMaximum:k.autoSizeMaximum,autoSizeMinimum:k.autoSizeMinimum});return!0},getOptimalPanelSize:function(){return new a.common.Size(h.width-25,h.height-25)}}};
a.orgdiagram.CenterOnCursorTask=function(g,b,d,c,f,e,h){function i(b){var c=!1;k.transformRect(b.x,b.y,b.width,b.height,!0,this,function(b,d,e,f){c=new a.common.Rect(b,d,e,f)});return c}var j=null,k;return{process:function(){var m;m=g.getOptions();var n=c.getCursorTreeItem(),l=f.getItemPosition(n),n=new a.common.Size(f.getContentSize()),p;p=h.getOptions().scale;j=d.getPlaceholderOffset();m.forceCenterOnCursor&&(k=e.getTransform(),null!=l&&(m=i(l.actualPosition),m.scale(p),n.scale(p),p=b.getScrollPanelSize(),
j=new a.common.Point(Math.max(Math.min(m.horizontalCenter()-p.width/2,n.width-p.width),0),Math.max(Math.min(m.verticalCenter()-p.height/2,n.height-p.height),0))));return!0},getPlaceholderOffset:function(){return j}}};a.orgdiagram.CreateTransformTask=function(g,b){var d=null;return{process:function(){var c=g.getOptions(),f=new a.common.Size(b.getContentSize());d=new a.common.Transform;d.setOrientation(c.orientationType);d.size=new a.common.Size(f);return!0},getTransform:function(){return d},getTreeItemForMousePosition:function(a,
f,e){var g=null;d.transformPoint(a,f,!1,this,function(a,c){g=b.getTreeItemForMousePosition(a,c,e)});return g},description:"Create oordiante system tranfromation object."}};a.orgdiagram.CurrentControlSizeTask=function(g,b){var d={scrollPanelSize:null},c={},f=new a.common.ObjectReader({scrollPanelSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!0),height:new a.common.ValueReader(["number"],!0)},!0)});return{process:function(){var a={isChanged:!1,hash:c},h=g.getOptions(),i=
!1,j=b.getOptions();d=f.read(d,h,"layout",a);switch(j.pageFitMode){case 1:case 2:case 3:case 0:i=a.isChanged}return i},getScrollPanelSize:function(){return d.scrollPanelSize},getOptimalPanelSize:function(){return new a.common.Size(d.scrollPanelSize.width-25,d.scrollPanelSize.height-25)}}};a.orgdiagram.CurrentScrollPositionTask=function(g){var b={placeholderOffset:null},d={},c=new a.common.ObjectReader({placeholderOffset:new a.common.ObjectReader({x:new a.common.ValueReader(["number"],!0),y:new a.common.ValueReader(["number"],
!0)},!0)});return{process:function(){var a={isChanged:!1,hash:d},e=g.getOptions();b=c.read(b,e,"layout",a);return a.isChanged},getPlaceholderOffset:function(){return b.placeholderOffset}}};a.orgdiagram.BackgroundAnnotationOptionTask=function(g,b){var d=[],c={},f=new a.common.ArrayReader(new a.common.ObjectReader({items:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0),includeChildren:new a.common.ValueReader(["boolean"],!1,b.includeChildren),zOrderType:new a.common.EnumerationReader(a.common.ZOrderType,
!1,b.zOrderType),offset:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],!1,b.offset.left),top:new a.common.ValueReader(["number"],!1,b.offset.top),right:new a.common.ValueReader(["number"],!1,b.offset.right),bottom:new a.common.ValueReader(["number"],!1,b.offset.bottom)},!1,b.offset),lineWidth:new a.common.ValueReader(["number"],!1,b.lineWidth),opacity:new a.common.ValueReader(["number"],!1,b.opacity),borderColor:new a.common.ValueReader(["string"],!1,b.borderColor),fillColor:new a.common.ValueReader(["string"],
!1,b.fillColor),lineType:new a.common.EnumerationReader(a.common.LineType,!1,b.lineType),selectItems:new a.common.ValueReader(["boolean"],!1,b.selectItems)}),!1);return{process:function(){var a={isChanged:!1,hash:c};d=f.read(d,g.getAnnotations(4,null),"annotations",a);return a.isChanged},getAnnotations:function(){return d}}};a.orgdiagram.ConnectorAnnotationOptionTask=function(g,b,d){var c=[],f={},e=new a.common.ArrayReader(new a.common.ObjectReader({zOrderType:new a.common.EnumerationReader(a.common.ZOrderType,
!1,b.zOrderType),fromItem:new a.common.ValueReader(["string","number"],!0),toItem:new a.common.ValueReader(["string","number"],!0),connectorShapeType:new a.common.EnumerationReader(a.common.ShapeType,!1,b.connectorShapeType),connectorPlacementType:new a.common.EnumerationReader(a.common.ConnectorPlacementType,!1,b.connectorPlacementType),labelPlacementType:new a.common.EnumerationReader(a.common.ConnectorLabelPlacementType,!1,b.labelPlacementType),offset:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],
!1,b.offset.left),top:new a.common.ValueReader(["number"],!1,b.offset.top),right:new a.common.ValueReader(["number"],!1,b.offset.right),bottom:new a.common.ValueReader(["number"],!1,b.offset.bottom)},!1,b.offset),lineWidth:new a.common.ValueReader(["number"],!1,b.lineWidth),color:new a.common.ValueReader(["string"],!1,b.color),lineType:new a.common.EnumerationReader(a.common.LineType,!1,b.lineType),selectItems:new a.common.ValueReader(["boolean"],!1,b.selectItems),label:new a.common.ValueReader(["string",
"object"],!1,b.label),labelSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,b.labelSize.width),height:new a.common.ValueReader(["number"],!1,b.labelSize.height)},!1,b.labelSize)}),!1);return{process:function(){var a={isChanged:!1,hash:f};c=e.read(c,g.getAnnotations(0,d),"annotations",a);return a.isChanged},getAnnotations:function(){return c}}};a.orgdiagram.HighlightPathAnnotationOptionTask=function(g,b,d){var c=[],f={},e=new a.common.ArrayReader(new a.common.ObjectReader({zOrderType:new a.common.EnumerationReader(a.common.ZOrderType,
!1,b.zOrderType),lineWidth:new a.common.ValueReader(["number"],!1,b.lineWidth),opacity:new a.common.ValueReader(["number"],!1,b.opacity),color:new a.common.ValueReader(["string"],!1,b.color),lineType:new a.common.EnumerationReader(a.common.LineType,!1,b.lineType),items:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!1),selectItems:new a.common.ValueReader(["boolean"],!1,b.selectItems),showArrows:new a.common.ValueReader(["boolean"],!1,b.showArrows)},!1));return{process:function(){var a=
{isChanged:!1,hash:f};c=e.read(c,g.getAnnotations(2,d),"annotations",a);return a.isChanged},getAnnotations:function(){return c}}};a.orgdiagram.ShapeAnnotationOptionTask=function(g,b,d){var c=[],f={},e=new a.common.ArrayReader(new a.common.ObjectReader({zOrderType:new a.common.EnumerationReader(a.common.ZOrderType,!1,b.zOrderType),items:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0),shapeType:new a.common.EnumerationReader(a.common.ShapeType,!1,b.shapeType),offset:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],
!1,b.offset.left),top:new a.common.ValueReader(["number"],!1,b.offset.top),right:new a.common.ValueReader(["number"],!1,b.offset.right),bottom:new a.common.ValueReader(["number"],!1,b.offset.bottom)},!1,b.offset),lineWidth:new a.common.ValueReader(["number"],!1,b.lineWidth),cornerRadius:new a.common.ValueReader(["string"],!1,b.cornerRadius),opacity:new a.common.ValueReader(["number"],!1,b.opacity),borderColor:new a.common.ValueReader(["string"],!1,b.borderColor),fillColor:new a.common.ValueReader(["string"],
!1,b.fillColor),lineType:new a.common.EnumerationReader(a.common.LineType,!1,b.lineType),selectItems:new a.common.ValueReader(["boolean"],!1,b.selectItems),label:new a.common.ValueReader(["string","object"],!1,b.label),labelSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,b.labelSize.width),height:new a.common.ValueReader(["number"],!1,b.labelSize.height)},!1,b.labelSize),labelPlacement:new a.common.EnumerationReader(a.common.PlacementType,!1,b.labelPlacement),labelOffset:new a.common.ValueReader(["number"],
!1,b.labelOffset)},!1));return{process:function(){var a={isChanged:!1,hash:f};c=e.read(c,g.getAnnotations(1,d),"annotations",a);return a.isChanged},getAnnotations:function(){return c}}};a.orgdiagram.SplitAnnotationsOptionTask=function(g){var b={};return{process:function(){var d=g.getOptions().annotations,c,f,e,h,i,j={};if(a.common.isArray(d)){c=0;for(f=d.length;c<f;c+=1){e=d[c];h=e.annotationType;switch(h){case 1:case 0:case 2:switch(e.zOrderType){case 1:i=1;break;default:i=2}break;default:i=null}null!=
h&&(h=1E3*h+(i||0),j.hasOwnProperty(h)||(j[h]=[]),j[h].push(e))}}b=j;return!0},getAnnotations:function(a,c){return b[1E3*a+(c||0)]}}};a.orgdiagram.CursorItemOptionTask=function(g,b){var d={},c=new a.common.ObjectReader({cursorItem:new a.common.ValueReader(["string","number"],!0),navigationMode:new a.common.EnumerationReader(a.common.NavigationMode,!1,b.navigationMode)});return{process:function(){var a={isChanged:!1};d=c.read(d,g.getOptions(),"options",a);return a.isChanged},getCursorItem:function(){return d.cursorItem},
hasCursorEnabled:function(){switch(d.navigationMode){case 0:case 1:return!0}return!1},description:"Checks currenct cursor item option."}};a.orgdiagram.CursorSelectionPathModeOptionTask=function(g,b){var d={},c=new a.common.ObjectReader({selectionPathMode:new a.common.EnumerationReader(a.common.SelectionPathMode,!1,b.selectionPathMode)});return{process:function(){var a={isChanged:!1};d=c.read(d,g.getOptions(),"options",a);return a.isChanged},getSelectionPathMode:function(){return d.selectionPathMode},
description:"Checks cursor selection path option."}};a.orgdiagram.HighlightItemOptionTask=function(g,b){var d={},c=new a.common.ObjectReader({highlightItem:new a.common.ValueReader(["string","number"],!0),navigationMode:new a.common.EnumerationReader(a.common.NavigationMode,!1,b.navigationMode),highlightGravityRadius:new a.common.ValueReader(["number"],!1,b.highlightGravityRadius)});return{process:function(){var a={isChanged:!1};d=c.read(d,g.getOptions(),"options",a);return a.isChanged},getHighlightItem:function(){return d.highlightItem},
hasHighlightEnabled:function(){switch(d.navigationMode){case 0:case 3:return!0}return!1},getGravityRadius:function(){return d.highlightGravityRadius},description:"Checks highlight item option."}};a.orgdiagram.SelectedItemsOptionTask=function(g){var b={},d={},c=new a.common.ObjectReader({selectedItems:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0)});return{process:function(){var a={isChanged:!1,hash:d},e=g.getOptions();b=c.read(b,e,"options",a);return a.isChanged},getSelectedItems:function(){return b.selectedItems},
description:"Checks user selected items option."}};a.orgdiagram.CalloutOptionTask=function(g,b){var d={},c={},f=new a.common.ObjectReader({calloutMaximumVisibility:new a.common.EnumerationReader(a.common.Visibility,!1,b.calloutMaximumVisibility),showCallout:new a.common.ValueReader(["boolean"],!1,b.showCallout),calloutPlacementOffset:new a.common.ValueReader(["number"],!1,b.calloutPlacementOffset),orientationType:new a.common.EnumerationReader(a.common.OrientationType,!1,b.orientationType),defaultTemplateName:new a.common.ValueReader(["string"],
!0),defaultCalloutTemplateName:new a.common.ValueReader(["string"],!0),calloutfillColor:new a.common.ValueReader(["string"],!1,b.calloutfillColor),calloutBorderColor:new a.common.ValueReader(["string"],!0),calloutOffset:new a.common.ValueReader(["number"],!1,b.calloutOffset),calloutCornerRadius:new a.common.ValueReader(["string"],!1,b.calloutCornerRadius),calloutPointerWidth:new a.common.ValueReader(["string"],!1,b.calloutPointerWidth),calloutLineWidth:new a.common.ValueReader(["number"],!1,b.calloutLineWidth),
calloutOpacity:new a.common.ValueReader(["number"],!1,b.calloutOpacity),items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),showCallout:new a.common.EnumerationReader(a.common.Enabled,!1,b.showCallout),calloutTemplateName:new a.common.ValueReader(["string"],!0),templateName:new a.common.ValueReader(["string"],!0)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:c};d=f.read(d,g.getOptions(),"options",a);return a.isChanged},getOptions:function(){return d},
getItemOptions:function(a){return c["options-items"][a]},description:"Checks item callout options."}};a.orgdiagram.ConnectorsOptionTask=function(g,b){var d={},c={},f=new a.common.ObjectReader({arrowsDirection:new a.common.EnumerationReader(a.common.GroupByType,!1,b.arrowsDirection),showExtraArrows:new a.common.ValueReader(["boolean"],!1,b.showExtraArrows),extraArrowsMinimumSpace:new a.common.ValueReader(["number"],!1,b.extraArrowsMinimumSpace),connectorType:new a.common.EnumerationReader(a.common.ConnectorType,
!1,b.hasOwnProperty("connectorType")?b.connectorType:0),showNeigboursConnectorsHighlighted:new a.common.EnumerationReader(a.common.ConnectorType,!1,b.hasOwnProperty("showNeigboursConnectorsHighlighted")?b.showNeigboursConnectorsHighlighted:!1),elbowType:new a.common.EnumerationReader(a.common.ElbowType,!1,b.elbowType),bevelSize:new a.common.ValueReader(["number"],!1,b.bevelSize),elbowDotSize:new a.common.ValueReader(["number"],!1,b.elbowDotSize),linesColor:new a.common.ValueReader(["string"],!1,b.linesColor),
linesWidth:new a.common.ValueReader(["number"],!1,b.linesWidth),linesType:new a.common.EnumerationReader(a.common.LineType,!1,b.linesType),highlightLinesColor:new a.common.ValueReader(["string"],!1,b.highlightLinesColor),highlightLinesWidth:new a.common.ValueReader(["number"],!1,b.highlightLinesWidth),highlightLinesType:new a.common.EnumerationReader(a.common.LineType,!1,b.highlightLinesType)});return{process:function(){var a={isChanged:!1,hash:c};d=f.read(d,g.getOptions(),"options",a);return a.isChanged},
getOptions:function(){return d},description:"Checks connector lines drawing options."}};a.orgdiagram.ItemsContentOptionTask=function(g,b){var d={},c={},f={},e=new a.common.ObjectReader({items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),title:new a.common.ValueReader(["string"],!0),description:new a.common.ValueReader(["string"],!0),image:new a.common.ValueReader(["string"],!0),context:new a.common.ValueReader(["string","number","object"],
!0),itemTitleColor:new a.common.ValueReader(["string"],!1,b.itemTitleColor),groupTitle:new a.common.ValueReader(["string"],!1,b.groupTitle),groupTitleColor:new a.common.ValueReader(["string"],!1,b.groupTitleColor)}),!0,"id",!0,!0)});return{process:function(){var a={isChanged:!1,hash:c,sourceHash:f};d=e.read(d,g.getOptions(),"options",a);return a.isChanged},getItems:function(){return d.items},getConfig:function(a){return f["options-items"][a]},description:"Checks items configuration options effecting their placement in layout."}};
a.orgdiagram.ItemsOptionTask=function(g,b){var d={},c={},f={},e=new a.common.ObjectReader({items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),parent:new a.common.ValueReader(["string","number"],!0),itemType:new a.common.EnumerationReader(a.orgdiagram.ItemType,!1,b.itemType),adviserPlacementType:new a.common.EnumerationReader(a.common.AdviserPlacementType,!1,b.adviserPlacementType),childrenPlacementType:new a.common.EnumerationReader(a.common.ChildrenPlacementType,
!1,b.childrenPlacementType),isVisible:new a.common.ValueReader(["boolean"],!1,b.isVisible),isActive:new a.common.ValueReader(["boolean"],!1,b.isActive)}),!0,"id",!0,!0)});return{process:function(){var a={isChanged:!1,hash:c,sourceHash:f};d=e.read(d,g.getOptions(),"options",a);return a.isChanged},getItems:function(){return d.items},getConfig:function(a){return f["options-items"][a]},description:"Checks items configuration options effecting their placement in layout."}};a.orgdiagram.ItemsSizesOptionTask=
function(g,b,d,c){var f={},e={},h=new a.common.ObjectReader({defaultTemplateName:new a.common.ValueReader(["string"],!0),defaultLabelAnnotationTemplate:new a.common.ValueReader(["string"],!0),hasSelectorCheckbox:new a.common.EnumerationReader(a.common.Enabled,!1,b.hasSelectorCheckbox),hasButtons:new a.common.EnumerationReader(a.common.Enabled,!1,b.hasButtons),buttonsPanelSize:new a.common.ValueReader(["number"],!1,b.buttonsPanelSize),groupTitlePanelSize:new a.common.ValueReader(["number"],!1,b.groupTitlePanelSize),
groupTitlePlacementType:new a.common.EnumerationReader(a.common.AdviserPlacementType,!1,b.groupTitlePlacementType),checkBoxPanelSize:new a.common.ValueReader(["number"],!1,b.checkBoxPanelSize),selectCheckBoxLabel:new a.common.ValueReader(["string"],!1,b.selectCheckBoxLabel),buttons:new a.common.ArrayReader(new a.common.ObjectReader({name:new a.common.ValueReader(["string"],!0),icon:new a.common.ValueReader(["string"],!0),text:new a.common.ValueReader(["boolean"],!1,!1),tooltip:new a.common.ValueReader(["string"],
!0),size:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,c.size.width),height:new a.common.ValueReader(["number"],!1,c.size.height)},!1,c.size)}),!0,"name"),onButtonsRender:new a.common.FunctionReader,pageFitMode:new a.common.EnumerationReader(a.common.PageFitMode,!1,b.pageFitMode),minimalVisibility:new a.common.EnumerationReader(a.common.Visibility,!1,b.minimalVisibility),selectionPathMode:new a.common.EnumerationReader(a.common.SelectionPathMode,!1,b.selectionPathMode),autoSizeMinimum:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],
!1,b.autoSizeMinimum.width),height:new a.common.ValueReader(["number"],!1,b.autoSizeMinimum.height)},!1,b.autoSizeMinimum),autoSizeMaximum:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,b.autoSizeMaximum.width),height:new a.common.ValueReader(["number"],!1,b.autoSizeMaximum.height)},!1,b.autoSizeMaximum),scale:new a.common.ValueReader(["number"],!1,b.scale),maximumScale:new a.common.ValueReader(["number"],!1,b.maximumScale),minimumScale:new a.common.ValueReader(["number"],
!1,b.minimumScale),normalLevelShift:new a.common.ValueReader(["number"],!1,b.normalLevelShift),dotLevelShift:new a.common.ValueReader(["number"],!1,b.dotLevelShift),lineLevelShift:new a.common.ValueReader(["number"],!1,b.lineLevelShift),normalItemsInterval:new a.common.ValueReader(["number"],!1,b.normalItemsInterval),dotItemsInterval:new a.common.ValueReader(["number"],!1,b.dotItemsInterval),lineItemsInterval:new a.common.ValueReader(["number"],!1,b.lineItemsInterval),cousinsIntervalMultiplier:new a.common.ValueReader(["number"],
!1,b.cousinsIntervalMultiplier),verticalAlignment:new a.common.EnumerationReader(a.common.VerticalAlignmentType,!1,b.verticalAlignment),items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),groupTitle:new a.common.ValueReader(["string","number"],!0),isVisible:new a.common.ValueReader(["boolean","number"],!1,d.isVisible),isActive:new a.common.ValueReader(["boolean","number"],!1,d.isActive),hasSelectorCheckbox:new a.common.EnumerationReader(a.common.Enabled,
!1,d.hasSelectorCheckbox),hasButtons:new a.common.EnumerationReader(a.common.Enabled,!1,d.hasButtons),templateName:new a.common.ValueReader(["string"],!0)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:e};f=h.read(f,g.getOptions(),"options",a);return a.isChanged},getItemOptions:function(a){return e["options-items"][a]},getOptions:function(){return f},description:"Checks items size options."}};a.orgdiagram.LabelsOptionTask=function(g,b,d){var c={},f={},e=new a.common.ObjectReader({showLabels:new a.common.EnumerationReader(a.common.Enabled,
!1,b.showLabels),labelOffset:new a.common.ValueReader(["number"],!1,b.labelOffset),labelFontSize:new a.common.ValueReader(["string"],!1,b.labelFontSize),labelFontFamily:new a.common.ValueReader(["string"],!1,b.labelFontFamily),labelFontStyle:new a.common.ValueReader(["string"],!1,b.labelFontStyle),labelFontWeight:new a.common.ValueReader(["string"],!1,b.labelFontWeight),labelColor:new a.common.ValueReader(["string"],!1,b.labelColor),labelSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],
!1,b.labelSize.width),height:new a.common.ValueReader(["number"],!1,b.labelSize.height)},!1,b.labelSize),labelOrientation:new a.common.EnumerationReader(a.text.TextOrientationType,!1,b.labelOrientation),labelPlacement:new a.common.EnumerationReader(a.common.PlacementType,!1,b.labelPlacement),arrowsDirection:new a.common.EnumerationReader(a.common.GroupByType,!1,b.arrowsDirection),items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),label:new a.common.ValueReader(["string",
"number"],!0),showLabel:new a.common.EnumerationReader(a.common.Enabled,!1,d.showLabel),labelSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,0),height:new a.common.ValueReader(["number"],!1,0)},!0),labelOrientation:new a.common.EnumerationReader(a.text.TextOrientationType,!1,d.labelOrientation),labelPlacement:new a.common.EnumerationReader(a.common.PlacementType,!1,d.labelPlacement)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:f};c=e.read(c,g.getOptions(),
"options",a);return a.isChanged},getItemOptions:function(a){return f["options-items"][a]},getItemsOptions:function(){return f["options-items"]},getOptions:function(){return c},description:"Checks items labels options."}};a.orgdiagram.LayoutOptionsTask=function(a){var b={};return{process:function(){b=a();return!0},getOptions:function(){return b},description:"Raw layout options."}};a.orgdiagram.MinimizedItemsOptionTask=function(g){var b={},d={},c=new a.common.ObjectReader({minimizedItemShapeType:new a.common.EnumerationReader(a.common.ShapeType,
!0),items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),minimizedItemShapeType:new a.common.EnumerationReader(a.common.ShapeType,!0),itemTitleColor:new a.common.ValueReader(["string"],!0)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:d};b=c.read(b,g.getOptions(),"options",a);return a.isChanged},getItemOptions:function(a){return d["options-items"][a]},getOptions:function(){return b},description:"Checks minimized items drawing options."}};
a.orgdiagram.OptionsTask=function(a){return{process:function(){return!0},getOptions:a,description:"Raw options."}};a.orgdiagram.OrientationOptionTask=function(g,b){var d={},c={},f=new a.common.ObjectReader({orientationType:new a.common.EnumerationReader(a.common.OrientationType,!1,b.orientationType)});return{process:function(){var a={isChanged:!1,hash:c};d=f.read(d,g.getOptions(),"options",a);return a.isChanged},getOptions:function(){return d},description:"Checks diagram orientation options."}};a.orgdiagram.ScaleOptionTask=
function(g,b){var d={},c={},f=new a.common.ObjectReader({scale:new a.common.ValueReader(["number"],!1,b.scale),minimumScale:new a.common.ValueReader(["number"],!1,b.minimumScale),maximumScale:new a.common.ValueReader(["number"],!1,b.maximumScale)});return{process:function(){var a={isChanged:!1,hash:c};d=f.read(d,g.getOptions(),"options",a);return a.isChanged},getOptions:function(){return d},description:"Checks control scale options."}};a.orgdiagram.TemplatesOptionTask=function(g,b,d,c){var f={},e=
{},h=new a.common.ObjectReader({groupTitleVerticalAlignment:new a.common.EnumerationReader(a.common.VerticalAlignmentType,!1,b.groupTitleVerticalAlignment),groupTitleHorizontalAlignment:new a.common.EnumerationReader(a.common.HorizontalAlignmentType,!1,b.groupTitleHorizontalAlignment),groupTitleOrientation:new a.common.EnumerationReader(a.text.TextOrientationType,!1,b.groupTitleOrientation),groupTitleFontSize:new a.common.ValueReader(["string"],!1,b.groupTitleFontSize),groupTitleFontFamily:new a.common.ValueReader(["string"],
!1,b.groupTitleFontFamily),groupTitleColor:new a.common.ValueReader(["string"],!1,b.groupTitleColor),groupTitleFontWeight:new a.common.ValueReader(["string"],!1,b.groupTitleFontWeight),groupTitleFontStyle:new a.common.ValueReader(["string"],!1,b.groupTitleFontStyle),itemTitleFirstFontColor:new a.common.ValueReader(["string"],!1,b.itemTitleFirstFontColor),itemTitleSecondFontColor:new a.common.ValueReader(["string"],!1,b.itemTitleSecondFontColor),selectCheckBoxLabel:new a.common.ValueReader(["string"],
!1,b.selectCheckBoxLabel),onItemRender:new a.common.FunctionReader,onCursorRender:new a.common.FunctionReader,onHighlightRender:new a.common.FunctionReader,templates:new a.common.ArrayReader(new a.common.ObjectReader({name:new a.common.ValueReader(["string"],!0),isActive:new a.common.ValueReader(["boolean"],!1,c.isActive),itemSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,c.itemSize.width),height:new a.common.ValueReader(["number"],!1,c.itemSize.height)},!1,c.itemSize),
itemBorderWidth:new a.common.ValueReader(["number"],!1,c.itemBorderWidth),itemTemplate:new a.common.ValueReader(["string","object"],!0),minimizedItemShapeType:new a.common.EnumerationReader(a.common.ShapeType,!0),minimizedItemSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,c.minimizedItemSize.width),height:new a.common.ValueReader(["number"],!1,c.minimizedItemSize.height)},!1,c.minimizedItemSize),minimizedItemCornerRadius:new a.common.ValueReader(["number"],!0),minimizedItemLineWidth:new a.common.ValueReader(["number"],
!1,c.minimizedItemLineWidth),minimizedItemBorderColor:new a.common.ValueReader(["string"],!0),minimizedItemLineType:new a.common.EnumerationReader(a.common.LineType,!1,c.minimizedItemLineType),minimizedItemFillColor:new a.common.ValueReader(["string"],!0),minimizedItemOpacity:new a.common.ValueReader(["number"],!1,c.minimizedItemOpacity),highlightPadding:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],!1,c.highlightPadding.left),top:new a.common.ValueReader(["number"],!1,c.highlightPadding.top),
right:new a.common.ValueReader(["number"],!1,c.highlightPadding.right),bottom:new a.common.ValueReader(["number"],!1,c.highlightPadding.bottom)},!1,c.highlightPadding),highlightBorderWidth:new a.common.ValueReader(["number"],!1,c.highlightBorderWidth),highlightTemplate:new a.common.ValueReader(["string","object"],!0),cursorPadding:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],!1,c.cursorPadding.left),top:new a.common.ValueReader(["number"],!1,c.cursorPadding.top),right:new a.common.ValueReader(["number"],
!1,c.cursorPadding.right),bottom:new a.common.ValueReader(["number"],!1,c.cursorPadding.bottom)},!1,c.cursorPadding),cursorBorderWidth:new a.common.ValueReader(["number"],!1,c.cursorBorderWidth),cursorTemplate:new a.common.ValueReader(["string","object"],!0),buttons:new a.common.ArrayReader(new a.common.ObjectReader({name:new a.common.ValueReader(["string"],!0),icon:new a.common.ValueReader(["string"],!0),text:new a.common.ValueReader(["boolean"],!1,!1),tooltip:new a.common.ValueReader(["string"],
!0),size:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,d.size.width),height:new a.common.ValueReader(["number"],!1,d.size.height)},!1,d.size)}),!0,"name"),onButtonsRender:new a.common.FunctionReader}),!0,"name")});return{process:function(){var a={isChanged:!1,hash:e};f=h.read(f,g.getOptions(),"options",a);return a.isChanged},getOptions:function(){return f},description:"Checks items template options."}};a.orgdiagram.VisualTreeOptionTask=function(g,b){var d={},c={},f=new a.common.ObjectReader({leavesPlacementType:new a.common.EnumerationReader(a.common.ChildrenPlacementType,
!1,b.leavesPlacementType),childrenPlacementType:new a.common.EnumerationReader(a.common.ChildrenPlacementType,!1,b.childrenPlacementType),maximumColumnsInMatrix:new a.common.ValueReader(["number"],!1,b.maximumColumnsInMatrix),horizontalAlignment:new a.common.EnumerationReader(a.common.HorizontalAlignmentType,!1,b.horizontalAlignment)});return{process:function(){var a={isChanged:!1,hash:c};d=f.read(d,g.getOptions(),"options",a);return a.isChanged},getOptions:function(){return d},description:"Checks items layout options."}};
a.orgdiagram.CollinearVectorBundle=function(){var g=new a.common.Rect,b=[],d=[];return{addVector:function(a,f){b.push(a);d.push(f);g.addRect(a.from.x,a.from.y);g.addRect(a.to.x,a.to.y)},resolve:function(){if(1==b.length)d[0](0,1,1);else{var c=a.common.pile(),f,e,h;if(g.width>g.height){f=0;for(e=b.length;f<e;f+=1)h=b[f],c.add(h.from.x,h.to.x,d[f])}else{f=0;for(e=b.length;f<e;f+=1)h=b[f],c.add(h.from.y,h.to.y,d[f])}c.resolve(this,function(a,b,c,d,e,f){c(d,e,f)})}}}};a.orgdiagram.ConnectorAnnotationOffsetResolver=
function(){var g={};return{getOffset:function(b,d){var c=b.getLineKey();g.hasOwnProperty(c)||(g[c]=new a.orgdiagram.CollinearVectorBundle);g[c].addVector(b,d)},resolve:function(){for(var a in g)g.hasOwnProperty(a)&&g[a].resolve()}}};a.orgdiagram.DrawBackgroundAnnotationTask=function(g,b,d,c,f,e){function h(b,c,d){var f,g,h,j,t,w,u,A,x,B,z,y,c=0;for(f=b.length;c<f;c+=1)if(z=b[c],null!=z.items&&0<z.items.length){j=new a.common.MergedRectangles(i);j.transform=k;t=new a.orgdiagram.BackgroundAnnotationConfig;
x=["opacity","lineWidth","borderColor","fillColor","lineType"];g=0;for(h=x.length;g<h;g+=1)B=x[g],j[B]=z.hasOwnProperty(B)?z[B]:t[B];i.activate("placeholder",2);w=[];A={};g=0;for(h=z.items.length;g<h;g+=1)t=z.items[g],y=e.getItemPosition(t),null!=y&&(A[t]=!0,u=new a.common.Rect(y.actualPosition),u.offset(z.offset),w.push(u),z.includeChildren&&d.loopChildren(this,t,function(b){A[b]||(A[b]=!0,y=e.getItemPosition(b),u=new a.common.Rect(y.actualPosition),u.offset(z.offset),w.push(u))}));j.draw(w)}}var i,
j,k;return{process:function(){var a=c.getAnnotations(),d;i=g();i.reset("placeholder",2);0<a.length&&(j=e.getItemsPositions(),k=b.getTransform(),d=f.getNavigationFamily(),h(a,j,d));return!1}}};a.orgdiagram.DrawConnectorAnnotationTask=function(g,b,d,c,f,e,h,i){function j(b,c){var d,e,f,g,h,j,x,B,z,y=new a.common.PolylinesBuffer,v=a.orgdiagram.ConnectorAnnotationOffsetResolver(),F=0;switch(i){case 1:k.activate("placeholder",4);break;case 2:k.activate("placeholder",14)}d=0;for(e=b.length;d<e;d+=1)B=b[d],
F=Math.max(F,B.lineWidth);d=0;for(e=b.length;d<e;d+=1)if(B=b[d],null!=B.fromItem&&null!=B.toItem&&(f=c(B.fromItem),h=c(B.toItem),null!=f&&null!=h)){g=f.actualPosition;j=h.actualPosition;switch(B.connectorPlacementType){case 0:x=new a.common.ConnectorOffbeat;break;case 1:x=new a.common.ConnectorStraight}var E;m.transformRect(0,0,B.labelSize.width,B.labelSize.height,!1,this,function(b,c,d,e){E=new a.common.Size(d,e)});var G=null;m.transformRect(0,0,l.width,l.height,!1,this,function(b,c,d,e){G=new a.common.Size(d,
e)});h=new a.common.PaletteItem({lineColor:B.color,lineWidth:B.lineWidth,lineType:B.lineType});f=!a.common.isNullOrEmpty(B.label);g=(new a.common.Rect(g)).offset(B.offset);j=(new a.common.Rect(j)).offset(B.offset);x.draw(y,h,g,j,3*B.lineWidth,6*F,E,G,B.connectorShapeType,4,B.labelPlacementType,f,v,function(b,c){!a.common.isNullOrEmpty(c.label)&&null!=b&&(m.transformRect(b.x,b.y,b.width,b.height,!0,this,function(c,d,e,f){b=new a.common.Rect(c,d,e,f)}),z=new a.common.RenderEventArgs,z.context=c,k.template(b.x,
b.y,0,0,0,0,b.width,b.height,n.template(),n.getHashCode(),n.render,z,null))},B)}v.resolve();y.transform(m,!0);k.polylinesBuffer(y)}var k,m,n,l;return{process:function(){k=g();m=b.getTransform();c.getOptions();n=h.getTemplate();l=new a.common.Size(e.getContentSize());switch(i){case 1:k.reset("placeholder",4);break;case 2:k.reset("placeholder",14)}j(f.getAnnotations(),e.getItemPosition);return!1}}};a.orgdiagram.DrawConnectorsTask=function(g,b,d,c,f){return{process:function(){var e=g(),h=b.getGraph(),
i=d.getOptions(),j=f.getPaletteManager();e.reset("placeholder",6);e.activate("placeholder",6);var k=new a.common.PolylinesBuffer,m=Math.round(i.elbowDotSize/2),n={},l={};h.loopNodes(this,null,function(b){h.loopNodeEdges(this,b,function(d,e){if(!n.hasOwnProperty(d)){var f=null;1>=e.fromOffset?f=j.getPalette(1):(j.selectPalette(e.fromOffset),f=j.getPalette(0));var g=k.getPolyline(f);if(c&&null!=e.dotId&&0!=i.elbowType&&!l.hasOwnProperty(e.dotId)){var f=k.getPolyline(g.arrowPaletteItem),h=e.dotId==e.from?
e.polyline.getStartPoint():e.polyline.getEndPoint();f.addSegment(new a.common.DotSegment(h.x-m,h.y-m,2*m,2*m,m));l[e.dotId]=!0}f=null;null!=e.parentsArrowId&&1==i.arrowsDirection?f=e.parentsArrowId:null!=e.childrenArrowId&&2==i.arrowsDirection&&(f=e.childrenArrowId);null==f?(f=e.polyline.clone(),e.hasMiddle&&0!=i.arrowsDirection&&(h=!0,h=e.from==e.middleParent?2==i.arrowsDirection:1==i.arrowsDirection,f.addOffsetArrow(h,i.linesWidth,0.4,i.extraArrowsMinimumSpace,function(a){a.mergeTo(k.getPolyline(g.arrowPaletteItem))})),
e.from==b?f.mergeTo(g):g.addInverted(f)):(f==e.to?e.polyline.clone().mergeTo(g):g.addInverted(e.polyline.clone()),g.addArrow(i.linesWidth,function(a){a.mergeTo(k.getPolyline(a.paletteItem))}))}});n[b]=!0});e.polylinesBuffer(k);return!1}}};a.orgdiagram.DrawCursorTask=function(g,b,d,c,f,e,h,i){function j(b){var d;k.activate("placeholder",11);var g=f.getItemPosition(b);if(null!=g){var h=g.actualPosition,j=new a.common.Rect(g.contentPosition),s=e.getTemplateParams(b).template,t=s.templateConfig,g=t.cursorPadding;
j.offset(g.left,g.top,g.right,g.bottom);d=new a.common.RenderEventArgs;d.context=c.getConfig(b);d.isCursor=!0;d.isSelected=i.isSelected(b);d.templateName=t.name;m.transformRect(h.x,h.y,h.width,h.height,!0,this,function(a,b,c,e){k.template(a,b,c,e,j.x,j.y,j.width,j.height,s.cursorTemplate.template(),s.cursorTemplate.getHashCode(),s.cursorTemplate.render,d,{borderWidth:t.cursorBorderWidth})})}}var k,m;return{process:function(){var a=h.getCursorTreeItem();k=g();k.reset("placeholder",11);null!=a&&(m=
b.getTransform(),j(a));return!1}}};a.orgdiagram.DrawHighlightAnnotationTask=function(g,b,d,c,f,e,h,i,j,k,m,n){function l(b){var g,k,l,x,B,z,y=!0,v=i.getItemPosition(b),F=v.actualPosition;switch(v.actualVisibility){case 2:case 3:case 1:g=e.getItemOptions(b);switch(g.showCallout){case 2:y=!1;break;case 1:y=!1;break;default:y=s.showCallout}y?(p.activate("placeholder",12),q.transformRect(F.x,F.y,F.width,F.height,!0,this,function(e,q,y,C){var q=new a.common.Rect(e,q,y,C),e=new a.common.Point(q.horizontalCenter(),
q.verticalCenter()),y=c.getOptions().scale,C=new a.common.Point(j.getPlaceholderOffset()),J=new a.common.Rect(i.getContentSize()),H=new a.common.Size(d.getOptimalPanelSize());C.scale(1/y);H.scale(1/y);y=new a.common.Rect(C.x,C.y,Math.min(H.width,J.width),Math.min(H.height,J.height));if(v.actualVisibility>=s.calloutMaximumVisibility&&4!=v.actualVisibility||!y.overlaps(q)){B=!a.common.isNullOrEmpty(g.calloutTemplateName)?g.calloutTemplateName:!a.common.isNullOrEmpty(g.templateName)?g.templateName:!a.common.isNullOrEmpty(s.defaultCalloutTemplateName)?
s.defaultCalloutTemplateName:s.defaultTemplateName;z=h.getTemplate(B,h.DefaultWidgetTemplateName);q=z.templateConfig.itemSize;C=new a.common.Rect(e.x,e.y,q.width,q.height);switch(s.orientationType){case 0:case 1:C.y-=q.height/4;C.x=e.x<y.horizontalCenter()?C.x+s.calloutPlacementOffset:C.x-(s.calloutPlacementOffset+q.width);break;default:C.x-=q.width/4,C.y=e.y<y.verticalCenter()?C.y+s.calloutPlacementOffset:C.y-(s.calloutPlacementOffset+q.height)}C.x<y.x?C.x=y.x+5:C.right()>y.right()&&(C.x-=C.right()-
y.right()+5);C.y<y.y?C.y=y.y+5:C.bottom()>y.bottom()&&(C.y-=C.bottom()-y.bottom()+5);l=C;k=new a.common.Rect(l);k.addRect(e.x,e.y);k.offset(50);e.x-=k.x;e.y-=k.y;l.x-=k.x;l.y-=k.y;x=new a.common.RenderEventArgs;x.context=f.getConfig(b);x.isCursor=m.getCursorTreeItem()==b;x.isSelected=n.isSelected(b);x.templateName=z.templateConfig.name;p.position("calloutplaceholder",k.x,k.y,k.width,k.height);p.show("calloutplaceholder");p.activate("calloutplaceholder",15);p.template(l.x,l.y,l.width,l.height,0,0,
l.width,l.height,z.itemTemplate.template(),z.itemTemplate.getHashCode(),z.itemTemplate.render,x,null);r.pointerPlacement=0;r.cornerRadius=s.calloutCornerRadius;r.offset=s.calloutOffset;r.opacity=s.calloutOpacity;r.lineWidth=s.calloutLineWidth;r.pointerWidth=s.calloutPointerWidth;r.borderColor=s.calloutBorderColor;r.fillColor=s.calloutfillColor;r.draw(e,l)}else p.hide("calloutplaceholder")})):p.hide("calloutplaceholder");break;case 4:p.hide("calloutplaceholder")}}var p,q,r=new a.common.Callout(g()),
s;return{process:function(){var a=k.getHighlightTreeItem();p=g();p.reset("calloutplaceholder",15);null!==a&&(q=b.getTransform(),s=e.getOptions(),l(a));return!1}}};a.orgdiagram.DrawHighlightPathAnnotationTask=function(g,b,d,c,f){function e(b,c,d,e){var g,n,l,p,q,r,s,t,w,u,A,x,B;if(0<d.length){A=new a.common.PolylinesBuffer;switch(f){case 1:b.activate("placeholder",5);break;case 2:b.activate("placeholder",7)}var z={};g=0;for(n=d.length;g<n;g+=1)if(u=d[g],null!=u.items&&0<u.items.length&&(t=u.items.slice(0),
q=t[0],e.hasNode(q))){l=1;for(p=t.length;l<p;l+=1)r=t[l],e.hasNode(r)&&(z.hasOwnProperty(q)?z[q].push(r):z[q]=[r],q=r)}var y={};for(x in z)y[x]={},z.hasOwnProperty(x)&&e.getShortestPath(this,x,z[x],function(a){return a.weight},function(a,b){y[x][b]=a});g=0;for(n=d.length;g<n;g+=1)if(u=d[g],l=new a.common.PaletteItem({lineColor:null!=u.color?u.color:c.highlightLinesColor,lineWidth:null!=u.lineWidth?u.lineWidth:c.highlightLinesWidth,lineType:null!=u.lineType?u.lineType:c.highlightLinesType,fillColor:null,
opacity:u.opacity}),z=A.getPolyline(l),null!=u.items&&0<u.items.length&&(t=u.items.slice(0),q=t[0],e.hasNode(q))){l=1;for(p=t.length;l<p;l+=1)if(r=t[l],e.hasNode(r)){s=y[q][r]||[];for(q=s.length-2;0<=q;q-=1)x=s[q+1],B=s[q],w=e.edge(x,B),w.from==x?w.polyline.clone().mergeTo(z):z.addInverted(w.polyline.clone()),u.showArrows&&(B==w.parentsArrowId||B==w.childrenArrowId)&&z.addArrow(u.lineWidth,function(a){a.mergeTo(A.getPolyline(a.paletteItem))});q=r}}b.polylinesBuffer(A)}}return{process:function(){var a=
c.getGraph(),i=b.getOptions(),j=d.getAnnotations(),k=g();switch(f){case 1:k.reset("placeholder",5);break;case 2:k.reset("placeholder",7)}e(k,i,j,a);return!1}}};a.orgdiagram.DrawHighlightTask=function(g,b,d,c,f,e,h,i,j){function k(b){var d;m.activate("placeholder",8);var g=f.getItemPosition(b),h=g.actualPosition,k=e.getTemplateParams(b).template,t=k.templateConfig,w=t.highlightPadding;d=new a.common.RenderEventArgs;d.context=c.getConfig(b);d.isCursor=i.getCursorTreeItem()==b;d.isSelected=j.isSelected(b);
d.templateName=t.name;n.transformRect(h.x,h.y,h.width,h.height,!0,this,function(b,c,e,f){var h=new a.common.Rect(0,0,Math.round(e),Math.round(f));h.offset(w.left,w.top,w.right,w.bottom);1==g.actualVisibility?m.template(b,c,e,f,h.x,h.y,h.width,h.height,k.highlightTemplate.template(),k.highlightTemplate.getHashCode(),k.highlightTemplate.render,d,{borderWidth:t.highlightBorderWidth}):m.template(Math.round(b),Math.round(c),Math.round(e),Math.round(f),Math.round(h.x),Math.round(h.y),Math.round(h.width),
Math.round(h.height),k.dotHighlightTemplate.template(),k.dotHighlightTemplate.getHashCode(),k.dotHighlightTemplate.render,d,{borderWidth:t.highlightBorderWidth})})}var m,n;return{process:function(){var a=h.getHighlightTreeItem();m=g();m.reset("placeholder",8);null!=a&&(n=b.getTransform(),k(a));return!1}}};a.orgdiagram.DrawItemLabelsTask=function(g,b,d,c,f){function e(b,c){var d=[];if(0==c.showLabels||1==c.showLabels)for(var e in b.treeItemsPositions)if(b.treeItemsPositions.hasOwnProperty(e)){var f=
c.itemsOptions[e],g=b.treeItemsPositions[e],l=g.actualPosition;null!=f&&b.transform.transformRect(l.x,l.y,l.width,l.height,!0,this,function(b,e,h,k){var l;switch(g.actualVisibility){case 1:0==c.showLabels&&(p=new a.common.Label(b,e,h,k),p.weight=1E4,p.labelType=1,d.push(p));break;case 2:case 3:var p;p=f;var q=g,B=null,z,y,v,F;if(!a.common.isNullOrEmpty(p.label)){var E;E=3;switch(p.showLabel){case 0:switch(c.showLabels){case 0:switch(q.actualVisibility){case 3:case 2:E=0}break;case 1:E=2}break;case 1:E=
2}switch(E){case 0:F=q.leftPadding+q.rightPadding;break;case 2:F=1E4;break;case 3:F=0}if(3!=E){v=null!=p.labelSize?p.labelSize:c.labelSize;q=3!=p.labelOrientation?p.labelOrientation:3!=c.labelOrientation?c.labelOrientation:0;B=0!=p.labelPlacement?p.labelPlacement:0!=c.labelPlacement?c.labelPlacement:1;switch(q){case 0:z=v.width;y=v.height;break;case 1:case 2:y=v.width,z=v.height}v=c.labelOffset;var G,D;switch(B){case 0:case 1:G=new a.common.Rect(b+h/2-z/2,e-v-y,z,y);switch(q){case 0:D=0;l=2;break;
case 1:l=D=1;break;case 2:D=2,l=1}break;case 2:case 11:G=new a.common.Rect(b+h+v,e-v-y,z,y);switch(q){case 0:D=1;l=2;break;case 1:D=1;l=0;break;case 2:l=D=2}break;case 3:G=new a.common.Rect(b+h+v,e+k/2-y/2,z,y);switch(q){case 0:l=D=1;break;case 1:l=D=0;break;case 2:D=0,l=2}break;case 4:case 12:G=new a.common.Rect(b+h+v,e+k+v,z,y);switch(q){case 0:D=1;l=0;break;case 1:D=2;l=0;break;case 2:D=1,l=2}break;case 5:G=new a.common.Rect(b+h/2-z/2,e+k+v,z,y);switch(q){case 0:l=D=0;break;case 1:D=2;l=1;break;
case 2:l=D=1}break;case 6:case 10:G=new a.common.Rect(b-z-v,e+k+v,z,y);switch(q){case 0:D=2;l=0;break;case 1:l=D=2;break;case 2:D=1,l=0}break;case 7:G=new a.common.Rect(b-z-v,e+k/2-y/2,z,y);switch(q){case 0:D=2;l=1;break;case 1:D=0;l=2;break;case 2:l=D=0}break;case 8:case 9:switch(G=new a.common.Rect(b-z-v,e-v-y,z,y),q){case 0:l=D=2;break;case 1:D=1;l=2;break;case 2:D=2,l=0}}b=D;B=new a.common.Label(G);B.labelType=E;B.weight=F;B.text=p.label;B.labelOrientation=q;B.horizontalAlignmentType=b;B.verticalAlignmentType=
l}}p=B;null!=p&&d.push(p)}})}0==c.showLabels&&a.common.getCrossingRectangles(this,d,function(a,b){if(a.isActive&&b.isActive)switch(a.labelType){case 1:switch(b.labelType){case 0:b.isActive=!1;break;case 2:b.isActive=!1}break;case 2:switch(b.labelType){case 1:a.isActive=!1;break;case 0:b.isActive=!1}break;case 0:switch(b.labelType){case 1:a.isActive=!1;break;case 0:a.weight<=b.weight?a.isActive=!1:b.isActive=!1;break;case 2:a.isActive=!1}}});b.graphics.activate("placeholder",10);e={fontSize:c.labelFontSize,
fontFamily:c.labelFontFamily,fontStyle:c.labelFontStyle,fontWeight:c.labelFontWeight,fontColor:c.labelColor};for(var l=0,p=d.length;l<p;l+=1){var q=d[l];if(q.isActive)switch(q.labelType){case 0:case 2:b.graphics.text(q.x,q.y,q.width,q.height,q.text,q.labelOrientation,q.horizontalAlignmentType,q.verticalAlignmentType,e)}}}return{process:function(){var a=c.getOptions(),d={graphics:g(),transform:b.getTransform(),treeItemsPositions:f.getItemsPositions()},a={showLabels:a.showLabels,labelFontSize:a.labelFontSize,
labelFontFamily:a.labelFontFamily,labelFontStyle:a.labelFontStyle,labelFontWeight:a.labelFontWeight,labelColor:a.labelColor,itemsOptions:c.getItemsOptions(),labelSize:a.labelSize,labelOrientation:a.labelOrientation,labelPlacement:a.labelPlacement,labelOffset:a.labelOffset};d.graphics.reset("placeholder",10);e(d,a);return!1}}};a.orgdiagram.DrawMinimizedItemsTask=function(g,b,d,c,f,e){function h(){var b=new a.common.PolylinesBuffer,d={},e,g=new a.common.Marker,h,t,w,u,A,x,B,z,y,v;for(v in n)n.hasOwnProperty(v)&&
(A=n[v],x=A.actualPosition,B=c.getItemOptions(v),j.transformRect(x.x,x.y,x.width,x.height,!0,this,function(c,i,n,j){switch(A.actualVisibility){case 2:z=f.getTemplateParams(v);y=z.template.templateConfig;w=t=h=null;u=0;null!=B&&(t=h=B.itemTitleColor,w=B.minimizedItemShapeType);h=h||y.minimizedItemBorderColor||"#000080";t=t||y.minimizedItemFillColor||"#000080";null==w&&(w=null!==y.minimizedItemShapeType?y.minimizedItemShapeType:m.minimizedItemShapeType);u=null===y.minimizedItemCornerRadius?y.minimizedItemSize.width:
y.minimizedItemCornerRadius;null==w||6==w?(e=b.getPolyline(new a.common.PaletteItem({lineColor:h,lineWidth:y.minimizedItemLineWidth,lineType:y.minimizedItemLineType,fillColor:t,opacity:y.minimizedItemOpacity})),e.addSegment(new a.common.DotSegment(c,i,n,j,u))):g.draw(b,w,new a.common.Rect(c,i,n,j),new a.common.PaletteItem({lineColor:h,lineWidth:y.minimizedItemLineWidth,lineType:y.minimizedItemLineType,fillColor:t,opacity:y.minimizedItemOpacity}));break;default:k&&(h="#ff0000",d.hasOwnProperty(h)||
(d[h]=new a.common.PaletteItem({lineColor:h,lineWidth:1,lineType:0,fillColor:h,opacity:1})),e=b.getPolyline(d[h]),e.addSegment(new a.common.DotSegment(c-1,i-1,2,2,1)))}}));i.activate("placeholder",9);i.polylinesBuffer(b)}var i,j,k=!1,m,n;return{process:function(){i=g();j=b.getTransform();m=c.getOptions();n=e.getItemsPositions();i.reset("placeholder",9);h();return!1}}};a.orgdiagram.DrawShapeAnnotationTask=function(g,b,d,c,f,e,h,i){function j(b,c){var d,e,f,g,h,j,x,B,z,y,v,F;switch(i){case 1:d=k.activate("placeholder",
3);break;case 2:d=k.activate("placeholder",13)}e=0;for(f=b.length;e<f;e+=1)if(v=b[e],null!=v.items&&0<v.items.length){B=new a.common.Rect;g=0;for(h=v.items.length;g<h;g+=1)x=c(v.items[g]),null!=x&&B.addRect(x.actualPosition);if(!B.isEmpty()){j=new a.common.Shape(k);x=new a.orgdiagram.ShapeAnnotationConfig;z="opacity cornerRadius shapeType offset lineWidth borderColor fillColor lineType labelSize labelOffset labelPlacement zOrderType".split(" ");g=0;for(h=z.length;g<h;g+=1)y=z[g],j[y]=v.hasOwnProperty(y)?
v[y]:x[y];j.position=B;j.orientationType=n.orientationType;j.panelSize=d.size;j.labelTemplate=l;j.hasLabel=null!=v.templateName||null!=v.label;F=new a.common.RenderEventArgs;F.context=v;F.templateName=j.labelTemplate;m.transformRect(B.x,B.y,B.width,B.height,!0,this,function(b,c,d,e){b=new a.common.Rect(b,c,d,e);j.draw(b,F)})}}}var k,m,n,l;return{process:function(){k=g();m=b.getTransform();n=c.getOptions();l=h.getTemplate();switch(i){case 1:k.reset("placeholder",3);break;case 2:k.reset("placeholder",
13)}j(f.getAnnotations(),e.getItemPosition);return!1}}};a.orgdiagram.DrawTreeItemsTask=function(g,b,d,c,f,e,h,i,j,k,m,n,l,p){function q(){var b,f=k.getCursorTreeItem(),g,n,l;n=null;if(null!=i){n=c.getOptions().scale;var p=new a.common.Point(i.getPlaceholderOffset()),q=new a.common.Rect(h.getContentSize()),D=new a.common.Size(d.getOptimalPanelSize());p.scale(1/n);D.scale(1/n);n=new a.common.Rect(p.x,p.y,Math.min(D.width,q.width),Math.min(D.height,q.height))}l=n;for(var C in r)r.hasOwnProperty(C)&&
(g=r[C],n=g.actualPosition,1==g.actualVisibility&&t.transformRect(n.x,n.y,n.width,n.height,!0,this,function(c,d,h,i){var n=new a.common.Rect(c,d,h,i);if(null==l||l.overlaps(n)){var k=j.getTemplateParams(C),n=k.template;b=new a.common.RenderEventArgs;b.id=C;b.context=e.getConfig(C);b.isCursor=C==f;b.isSelected=m.isSelected(C);b.templateName=n.templateConfig.name;b.template=k.template;b.isActive=k.isActive;b.hasSelectorCheckbox=k.hasSelectorCheckbox;b.hasButtons=k.hasButtons;b.hasGroupTitle=k.hasGroupTitle;
b.buttons=k.buttons;b.onButtonsRender=k.onButtonsRender;s.activate("placeholder",12);s.template(c,d,h,i,g.contentPosition.x,g.contentPosition.y,g.contentPosition.width,g.contentPosition.height,n.itemTemplate.template(),n.itemTemplate.getHashCode(),n.itemTemplate.render,b,{borderWidth:n.templateConfig.itemBorderWidth});if(k.hasGroupTitle){var p=0;switch(w.groupTitlePlacementType){case 2:case 0:p=2;break;case 3:p=h-(w.groupTitlePanelSize-4)}s.template(c,d,h,i,p,g.contentPosition.y,w.groupTitlePanelSize-
4,g.contentPosition.height+2,x.template(),x.getHashCode(),x.render,b,null)}k.hasSelectorCheckbox&&(s.activate("placeholder",16),s.template(c,d,h,i,g.contentPosition.x,i-(w.checkBoxPanelSize-4),g.contentPosition.width,w.checkBoxPanelSize-4,A.template(),A.getHashCode(),A.render,b,null));if(k.hasButtons){s.activate("placeholder",16);k=0;switch(w.groupTitlePlacementType){case 2:case 0:k=h-(w.buttonsPanelSize-4);break;case 3:k=2}s.template(c,d,h,i,k,g.contentPosition.y,w.buttonsPanelSize-4,Math.max(g.contentPosition.height,
i-g.contentPosition.y),u.template(),n.templateConfig.name+u.getHashCode(),u.render,b,null)}}}))}var r,s,t,w,u,A,x;return{process:function(){s=g();w=f.getOptions();r=h.getItemsPositions();t=b.getTransform();u=p.getTemplate();A=l.getTemplate();x=n.getTemplate();s.reset("placeholder",12);s.reset("placeholder",16);q();return!1}}};a.orgdiagram.ActiveItemsTask=function(g,b){function d(a,c){var d=[],e,g;e=0;for(g=c.length;e<g;e+=1){var f=c[e],l=b.getTemplate(f.templateName,a.defaultTemplateName,b.DefaultWidgetTemplateName).templateConfig;
f.isActive&&l.isActive&&d.push(f.id)}return d}var c=[],f={},e=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,hash:f},b=g.getOptions();c=e.read(c,d(b,b.items),"items",a);return a.isChanged},getActiveItems:function(){return f.items}}};a.orgdiagram.AnnotationLabelTemplateTask=function(a,b){var d=null;return{process:function(){return!1},getTemplate:function(){null==d&&(d=new b.AnnotationLabelTemplate);return d}}};a.orgdiagram.ButtonsTemplateTask=
function(a,b){var d=null;return{process:function(){return!1},getTemplate:function(){null==d&&(d=new b.ButtonsTemplate);return d}}};a.orgdiagram.CheckBoxTemplateTask=function(a,b){var d=null;return{process:function(){d=null;return!0},getTemplate:function(){var c;null==d&&(c=a.getOptions(),d=new b.CheckBoxTemplate(c.selectCheckBoxLabel));return d}}};a.orgdiagram.GroupTitleTemplateTask=function(a,b){var d=null;return{process:function(){d=null;return!0},getTemplate:function(){var c;null==d&&(c=a.getOptions(),
d=new b.GroupTitleTemplate(c));return d}}};a.orgdiagram.ItemTemplateParamsTask=function(g,b,d){function c(a,b,c){var d=!1;switch(b){case 0:switch(c){case 0:d=a;break;case 1:d=!0;break;case 2:d=!1}break;case 1:d=!0;break;case 2:d=!1}return d}var f={};return{process:function(){var e=g.getOptions(),h=0<e.buttons.length||null!=e.onButtonsRender,i=b.getCursorItem(),j=e.items,k,m;f={};k=0;for(m=j.length;k<m;k+=1){var n=j[k],l=new a.orgdiagram.TemplateParams,p=i==n.id,q=d.getTemplate(n.templateName,e.defaultTemplateName,
d.DefaultWidgetTemplateName),r=q.templateConfig,s=null!=r.buttons&&0<r.buttons.length,s=s||null!=r.onButtonsRender;l.template=q;l.isActive=n.isActive&&r.isActive;l.isActive&&(l.hasSelectorCheckbox=c(p,n.hasSelectorCheckbox,e.hasSelectorCheckbox),l.hasButtons=(h||s)&&c(p,n.hasButtons,e.hasButtons),l.hasButtons&&(l.buttons=s?r.buttons:e.buttons,l.onButtonsRender=r.onButtonsRender||e.onButtonsRender));l.hasGroupTitle=!a.common.isNullOrEmpty(n.groupTitle);f[n.id]=l}return!0},getTemplateParams:function(a){return f[a]}}};
a.common.LabelAnnotationTemplate=function(){var a=["div",{"class":["bp-item","bp-label-annotation"]}];return{template:function(){return a},getHashCode:function(){return"defaultLabelAnnotationTemplate"},render:function(a,d){d.element.innerHTML=d.context.title}}};a.orgdiagram.ReadTemplatesTask=function(g,b){var d={};return{process:function(){var c,f,e,h=g.getOptions(),i=h.templates;d={};e=new a.orgdiagram.TemplateConfig;d.DefaultWidgetTemplate=new a.orgdiagram.Template(e,new b.ItemTemplate(h,e),new b.HighlightTemplate(h,
e),new b.DotHighlightTemplate(h,e),new b.CursorTemplate(h,e));c=new a.orgdiagram.TemplateConfig;c.name="DefaultWidgetLabelAnnotationTemplate";c.isActive=!1;c.itemSize=new a.common.Size(100,20);c.minimizedItemSize=new a.common.Size(0,0);c.minimizedItemCornerRadius=c.minimizedItemSize.width/2;e=c;d.DefaultWidgetLabelAnnotationTemplate=new a.orgdiagram.Template(e,new b.LabelAnnotationTemplate,null,new b.DotHighlightTemplate(h,e),null);c=0;for(f=i.length;c<f;c+=1)e=i[c],d[e.name]=new a.orgdiagram.Template(e,
a.common.isNullOrEmpty(e.itemTemplate)?new b.ItemTemplate(h,e):new b.UserTemplate(h,e.itemTemplate,h.onItemRender),a.common.isNullOrEmpty(e.highlightTemplate)?new b.HighlightTemplate(h,e):new b.UserTemplate(h,e.highlightTemplate,h.onHighlightRender),new b.DotHighlightTemplate(h,e),a.common.isNullOrEmpty(e.cursorTemplate)?new b.CursorTemplate(h,e):new b.UserTemplate(h,e.cursorTemplate,h.onCursorRender));return!0},getTemplate:function(a,b,e){return d[a]||d[b]||d[e]},DefaultWidgetTemplateName:"DefaultWidgetTemplate",
DefaultWidgetLabelAnnotationTemplateName:"DefaultWidgetLabelAnnotationTemplate"}};a.orgdiagram.CombinedNormalVisibilityItemsTask=function(g,b,d,c,f,e,h,i,j,k,m,n){function l(a){var b=[],c,d,e,f,g,h,i={};c=0;for(d=a.length;c<d;c+=1){e=a[c];g=e.getItems();e=0;for(f=g.length;e<f;e+=1)h=g[e],i.hasOwnProperty(h)||(b.push(h),i[h]=!0)}return b}var p=[],q={},r=[b,d,c,f,e,h,i,j,k,m,n],s=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,
hash:q},b=g.getOptions();p=s.read(p,l(r),"items",a);if(0==b.pageFitMode||1==b.minimalVisibility)a.isChanged=!1;return a.isChanged},isItemSelected:function(a){return q.items.hasOwnProperty(a)}}};a.orgdiagram.CursorItemTask=function(a,b){var d=null;return{process:function(){var c=a.getCursorItem(),f=null!=b?b.getActiveItems():{};d=null!=c&&f.hasOwnProperty(c)?c:null;return!0},getCursorTreeItem:function(){return d},getItems:function(){return null!=d?[d]:[]}}};a.orgdiagram.CursorNeighboursTask=function(a,
b){function d(a,b){var c=[];null!==a&&b.loopNeighbours(this,a,function(a,b){0===b.visibility&&c.push(a);return!0});return c}var c=[];return{process:function(){var f=b.getNavigationFamily(),e=a.getCursorTreeItem();c=d(e,f);return!0},getItems:function(){return c}}};a.orgdiagram.HighlightItemTask=function(a,b){var d=null;return{process:function(){var c=a.getHighlightItem(),f=null!=b?b.getActiveItems():{};d=null!=c&&f.hasOwnProperty(c)?c:null;return!0},getHighlightTreeItem:function(){return d}}};a.orgdiagram.NormalVisibilityItemsByAnnotationTask=
function(g){function b(a){var b=[],c={},d,f,g,n,l,p;d=0;for(f=a.length;d<f;d+=1)if(g=a[d],g.selectItems){l=g.items;g=0;for(n=l.length;g<n;g+=1)p=l[g],null!=p&&!c.hasOwnProperty(p)&&(b.push(p),c[p]=!0)}return b}var d=[],c={},f=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,hash:c},h=g.getAnnotations();d=f.read(d,b(h),"items",a);return a.isChanged},getItems:function(){return d}}};a.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask=
function(g){function b(a){var b=[],c={},d,g,f;d=0;for(g=a.length;d<g;d+=1)f=a[d],f.selectItems&&(null!=f.fromItem&&!c.hasOwnProperty(f.fromItem)&&(b.push(f.fromItem),c[f.fromItem]=!0),null!=f.toItem&&!c.hasOwnProperty(f.toItem)&&(b.push(f.toItem),c[f.toItem]=!0));return b}var d=[],c={},f=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,hash:c},h=g.getAnnotations();d=f.read(d,b(h),"items",a);return a.isChanged},getItems:function(){return d}}};
a.orgdiagram.SelectedItemsTask=function(g){function b(a){var b=[],c={},d,f,g;d=0;for(f=a.length;d<f;d+=1)g=a[d],null!=g&&!c.hasOwnProperty(g)&&(b.push(g),c[g]=!0);return b}var d=[],c={},f=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,hash:c},h=g.getSelectedItems();d=f.read(d,b(h),"items",a);return a.isChanged},getItems:function(){return d},isSelected:function(a){return c.items.hasOwnProperty(a)}}};a.orgdiagram.SelectionPathItemsTask=
function(a,b,d,c){function f(a,b,c){var d=[],e={},f,g,p;g=0;for(p=a.length;g<p;g+=1)switch(f=a[g],c){case 1:b.loopParents(this,f,function(a,c){if(null!=e[a])return b.SKIP;4!=c.visibility&&d.push(a);e[a]=!0})}return d}var e=[];return{process:function(){var h=c.getSelectionPathMode(),i=a.getNavigationFamily(),j=b.getCursorTreeItem(),k=d.getItems().slice(0);k.push(j);e=f(k,i,h);return!0},getItems:function(){return e}}};a.orgdiagram.CombinedContextsTask=function(a,b){return{process:function(){return!0},
getConfig:function(d){return a.getConfig(d)||null!=b&&b.getConfig(d)}}};a.orgdiagram.ConnectionsGraphTask=function(g,b,d,c,f){var e={graph:null,nodeid:0};return{process:function(){for(var h=g().activate("placeholder",6),i=c.getBundles(),j=c.getNestedLayoutBottomConnectorIds(),k=d.getOptions(),m={graph:a.common.graph(),nodeid:0},h={treeItemsPositions:f.getItemsPositions(),nestedLayoutBottomConnectorIds:j,transform:b.getTransform(),hasGraphics:h.hasGraphics},k={connectorType:k.connectorType,showExtraArrows:k.showExtraArrows,
bevelSize:k.bevelSize,elbowType:k.elbowType},j=0,n=i.length;j<n;j+=1)i[j].trace(m,h,k);e=m;return!0},getGraph:function(){return e.graph}}};a.orgdiagram.ItemsPositionsTask=function(g,b,d,c,f,e,h,i,j,k,m){var n,l;function p(b){var c=new a.common.Rect(0,0,0,0),d,e,f,g,h;switch(J.orientationType){case 2:case 3:b.invert()}if(!F.isEmpty())switch(I.pageFitMode){case 0:case 5:d=[new a.orgdiagram.LevelVisibility(0,1)];c=q(d,0);break;default:d=[new a.orgdiagram.LevelVisibility(0,1)];e=[];switch(I.minimalVisibility){case 2:e.push(2);
break;case 0:case 3:case 4:e.push(2),e.push(3)}F.loopLevelsReversed(this,function(b){var c;for(c=0;c<e.length;c+=1)d.push(new a.orgdiagram.LevelVisibility(b,e[c]))});f=q(d,d.length-1);f.addRect(b);f.offset(0,0,5,5);h=g=b=null;c=q(d,0);if(!r(c,f)&&(b=0,c=q(d,d.length-1),r(c,f))){for(h=g=d.length-1;1<g-b;)h=Math.floor((g+b)/2),c=q(d,h),r(c,f)?g=h:b=h;g!==h&&(c=q(d,g))}}return c}function q(b,c){var d,e;E=[];F.loopLevels(this,function(){var b=new a.orgdiagram.TreeLevelPosition;b.currentvisibility=1;E.push(b)});
for(d=0;d<=c;d+=1)e=b[d],E[e.level].currentvisibility=e.currentvisibility;w();x();u();d=I.lineLevelShift;var f,g,h,m,n=e=0;f=8*H.linesWidth;switch(H.arrowsDirection){case 1:e=f;n=0;break;case 2:e=0,n=f}f=0;for(g=E.length;f<g;f+=1)h=E[f],m=i.getConnectorsStacksSizes(f),d+=h.setShift(d,A(h.actualVisibility),n,e,m.parentsStackSize);return new a.common.Rect(0,0,Math.round(t()),Math.round(s()))}function r(a,b){var c=!1;switch(I.pageFitMode){case 1:b.width>=a.width&&(c=!0);break;case 2:b.height>=a.height&&
(c=!0);break;case 3:b.height>=a.height&&b.width>=a.width&&(c=!0)}return c}function s(){var a=E[E.length-1];return a.shift+a.nextLevelShift}function t(){var a=0,b,c;b=0;for(c=E.length;b<c;b+=1)a=Math.max(a,E[b].currentOffset);return a+=I.normalItemsInterval}function w(){var b=k.getCursorTreeItem();n={};F.loopLevels(this,function(c){var d=E[c];F.loopLevelItems(this,c,function(c,e){var f=new a.orgdiagram.TreeItemPosition,g=m.isItemSelected(c)?1:e.visibility,h=j.getTemplateParams(c),g=0===g?d.currentvisibility:
g,i=b==c,k=I,l=J.orientationType,p,q,r;switch(g){case 1:p=h.template.templateConfig;q=new a.common.Size(p.itemSize);r=new a.common.Rect(0,0,q.width,q.height);i&&(q.height+=p.cursorPadding.top+p.cursorPadding.bottom,q.width+=p.cursorPadding.left+p.cursorPadding.right,r.x=p.cursorPadding.left,r.y=p.cursorPadding.top);h.hasSelectorCheckbox&&(q.height+=k.checkBoxPanelSize);if(h.hasButtons)switch(q.width+=k.buttonsPanelSize,k.groupTitlePlacementType){case 3:r.x+=k.buttonsPanelSize}if(h.hasGroupTitle)switch(q.width+=
k.groupTitlePanelSize,k.groupTitlePlacementType){case 3:break;default:r.x+=k.groupTitlePanelSize}break;case 2:p=h.template.templateConfig;q=new a.common.Size(p.minimizedItemSize);break;case 3:case 4:q=new a.common.Size}switch(l){case 2:case 3:q.invert()}f.actualVisibility=g;f.actualSize=q;f.contentPosition=r;n[c]=f})})}function u(){var a,b;F.loopLevels(this,function(c){var d=E[c];d.shift=0;d.depth=0;d.actualVisibility=4;b=a=null;F.loopLevelItems(this,c,function(c){c=n[c];d.depth=Math.max(d.depth,
c.actualSize.height);switch(c.actualVisibility){case 2:case 3:case 4:b=!b?c.actualSize.height:Math.min(b,c.actualSize.height);break;default:a=!a?c.actualSize.height:Math.min(a,c.actualSize.height)}d.actualVisibility=Math.min(d.actualVisibility,c.actualVisibility)});null==a&&(a=d.depth);null!=b&&b>a&&(a=b);switch(I.verticalAlignment){case 0:d.horizontalConnectorsDepth=a/2;break;case 1:d.horizontalConnectorsDepth=d.depth/2;break;case 2:d.horizontalConnectorsDepth=d.depth-a/2}})}function A(a){var b=
0;switch(a){case 1:b=I.normalLevelShift;break;case 2:b=I.dotLevelShift;break;case 3:case 4:b=I.lineLevelShift}return b}function x(){var a,b;a=0;for(b=E.length;a<b;a+=1)E[a].currentOffset=0;G.loopPostOrder(this,function(a,b){var c=n[a],d=c.actualVisibility,e=F.getLevelIndex(a),e=E[e],d=N[0===d?e.currentvisibility:d]/2,f,g,h,i,m,j,k,l;f=8*H.linesWidth;c.leftPadding=d+(0<e.currentOffset?d*b.relationDegree*I.cousinsIntervalMultiplier:0);c.rightPadding=d;0!=H.arrowsDirection&&(b.connectorPlacement&8&&
(c.leftPadding+=f),b.connectorPlacement&2&&(c.rightPadding+=f));c.offset=e.currentOffset+c.leftPadding;e.currentOffset=c.offset+c.actualSize.width+c.rightPadding;if(G.hasChildren(a))if(c=B(b),0<c)y(b,c);else if(0>c&&(c=-c,z(b,c),g=null,h={},m=null,e=G.parent(b.id),null!==e&&(G.loopChildrenReversed(this,e.id,function(a,c){if(c===b)g=[];else if(null!==g){var d=null,e=[],f,j,k,l;f=C[c.id];void 0===f&&(f=[]);f=f.slice();f.splice(0,0,c.id);j=0;for(k=f.length;j<k;j+=1)l=n[f[j]],e[j]=l.offset+l.actualSize.width+
l.rightPadding;f=[];var p;j=D[b.id];void 0===j&&(j=[]);j=j.slice();j.splice(0,0,b.id);k=0;for(l=j.length;k<l;k+=1)p=n[j[k]],f[k]=p.offset-p.leftPadding;j=Math.min(e.length,f.length);for(k=0;k<j&&!(l=f[k]-e[k],d=null!==d?Math.min(d,l):l,0>=l);k+=1);i=Math.floor(d);h[c.id]=i;if(0<i)g.splice(0,0,c);else return m=c,!0}}),0<g.length))){d=null;if(null!==m){j=[m];j=j.concat(g);j.push(b);d=[[m]];e=1;for(f=j.length;e<f;e+=1)k=j[e-1],l=j[e],2==k.gravity||1==l.gravity?d[d.length-1].push(l):d.push([l])}else d=
[g.slice(0)],d[d.length-1].push(b);if(0<d.length){g=d[d.length-1];for(e=g.length-2;0<=e;e-=1)l=g[e],i=h[l.id],c=Math.min(i,c),z(l,c),y(l,c)}j=c/(d.length-1);for(f=d.length-2;0<f;f-=1){k=d[f];for(e=k.length-1;0<=e;e-=1)l=k[e],i=h[l.id],c=Math.min(f*j,Math.min(i,c)),z(l,c),y(l,c)}}})}function B(a){var b=n[a.id],b=b.offset+b.actualSize.width/2,c=null,d,e,f;if(null===a.visualAggregatorId)switch(d=null,G.loopChildren(this,a.id,function(a,b){d=b;if(d.connectorPlacement&1)return!0}),e=n[d.id],f=null,G.loopChildrenReversed(this,
a.id,function(a,b){f=b;if(f.connectorPlacement&1)return!0}),a=n[f.id],L.horizontalAlignment){case 1:c=e.offset+e.actualSize.width/2;break;case 2:c=a.offset+a.actualSize.width/2;break;case 0:c=(e.offset+a.offset+a.actualSize.width)/2}else a=n[a.visualAggregatorId],c=a.offset+a.actualSize.width/2;return b-c}function z(a,b){var c=n[a.id];c.offset+=b;var d=E[F.getLevelIndex(a.id)];d.currentOffset=Math.max(d.currentOffset,c.offset+c.actualSize.width+c.rightPadding)}function y(a,b){var c,d;G.loopLevels(this,
a.id,function(a){c=n[a];c.offset+=b;d=E[F.getLevelIndex(a)];d.currentOffset=Math.max(d.currentOffset,c.offset+c.actualSize.width);return!0})}function v(){var b=null;F.loopLevels(this,function(c){var d=E[c];F.loopLevelItems(this,c,function(c){var e,f,g,h,i,m,c=n[c];e=c.actualSize;h=b;f=0;switch(c.actualVisibility){case 1:switch(I.verticalAlignment){case 0:f=0;break;case 1:f=(d.depth-e.height)/2;break;case 2:f=d.depth-e.height}break;case 2:case 3:case 4:f=d.horizontalConnectorsDepth-e.height/2}e=new a.common.Rect(c.offset,
d.shift+f,e.width,e.height);f=d.shift+d.horizontalConnectorsDepth;g=null!=h?h.shift+h.connectorShift:null;h=null!=h?h.levelSpace/2:null;i=d.shift+d.connectorShift;m=d.levelSpace/2;c.actualPosition=e;c.horizontalConnectorsShift=f;c.topConnectorShift=g;c.topConnectorInterval=h;c.bottomConnectorShift=i;c.bottomConnectorInterval=m});b=d})}n={};l=null;var F,E,G,D,C,J,H,L,I,Q,N;return{process:function(){var m;m=I=c.getOptions();var j=[];j[1]=m.normalItemsInterval;j[2]=m.dotItemsInterval;j[3]=m.lineItemsInterval;
j[4]=m.lineItemsInterval;N=j;J=d.getOptions();H=f.getOptions();L=e.getOptions();F=i.getTreeLevels();G=h.getVisualTree();D=h.getLeftMargins();C=h.getRightMargins();E=[];n={};m=g.getOptimalPanelSize();Q=b.getOptions();m.scale(1/Q.scale);m=new a.common.Rect(0,0,m.width,m.height);l=p(m);v();return!0},getItemsPositions:function(){return n},getItemPosition:function(a){return n[a]},getContentSize:function(){return l}}};a.orgdiagram.OrgTreeTask=function(g){var b,d;function c(c){var g,i,j,k,m,n=0,l,p=a.common.tree();
k=0;for(m=c.length;k<m;k+=1)j=c[k],null!=j.id&&(g=new a.orgdiagram.OrgItem(j),l=parseInt(j.id,10),n=Math.max(isNaN(l)?0:l,n),p.add(j.parent,g.id,g));n+=1;c=new a.orgdiagram.ItemConfig;c.id=n;c.title="internal root";c.isVisible=!1;c.isActive=!1;i=new a.orgdiagram.OrgItem(c);i.hideParentConnection=!0;i.hideChildrenConnection=!0;p.add(null,i.id,i);p.loopLevels(this,function(a,b,c){if(0<c)return p.BREAK;i.id!=a&&(p.adopt(i.id,a),b.itemType=0)});f(p);b=p;d=n;return!0}function f(a){a.loopLevels(this,function(b,
c){var d=!0;if(c.isVisible)return a.SKIP;a.loopChildren(this,b,function(a,b){if(0!=b.itemType)return d=!1,!0});if(d)c.hideChildrenConnection=!0,a.loopChildren(this,b,function(a,b){b.hideParentConnection=!0});else return a.SKIP})}d=b=null;return{process:function(){c(g.getItems());return!0},getOrgTree:function(){return b},getMaximumId:function(){return d}}};a.orgdiagram.PaletteManagerTask=function(g,b){var d;return{process:function(){var c=[];null!=b&&(c=b.getOptions().linesPalette);d=new a.common.PaletteManager(g.getOptions(),
c);return!0},getPaletteManager:function(){return d}}};a.orgdiagram.VisualTreeLevelsTask=function(g){function b(b,c,d,e){var f,g,l,p,q,r,s,t={},w,u,A;d.loopLevels(this,function(x){var B=new a.orgdiagram.TreeLevelConnectorStackSize;c[x]=B;s=[];d.loopLevelItems(this,x,function(c,f){var g=[];if(!t.hasOwnProperty(c)&&(f.connectorPlacement&4&&g.push(c),g=g.concat(f.partners),0<g.length)){r=new a.common.VerticalConnectorBundle(g,[]);for(var i=0,m=g.length;i<m;i+=1)t[g[i]]=r;e.loopChildren(this,c,function(a,
b){b.connectorPlacement&1&&r.toItems.push(a)});1<g.length&&s.push(r);(1<r.fromItems.length||0<r.toItems.length)&&b.push(r)}f.connectorPlacement&8&&(r=new a.common.HorizontalConnectorBundle(c,d.getPrevItem(c)),b.push(r));f.connectorPlacement&2&&(r=new a.common.HorizontalConnectorBundle(c,d.getNextItem(c)),b.push(r))});if(0<s.length){A=a.common.pile();f=0;for(g=s.length;f<g;f+=1){r=s[f];u=w=null;l=0;for(p=r.fromItems.length;l<p;l+=1)q=d.getItemPosition(r.fromItems[l]),w=null!=w?Math.min(w,q):q,u=null!=
u?Math.max(u,q):q;A.add(w,u,r)}B.parentsStackSize=A.resolve(this,function(a,b,c,d,e){c.fromOffset=d+1;c.fromStackSize=e})}})}var d=null,c=null,f=null,e=new a.orgdiagram.TreeLevelConnectorStackSize;return{process:function(){var e=g.getVisualTree();d=a.common.TreeLevels();e.loopLevels(this,function(a,b,c){d.addItem(c,a,b)});c=[];f=[];b(c,f,d,e);return!0},getTreeLevels:function(){return d},getBundles:function(){return c},getConnectorsStacksSizes:function(a){return f[a]||e},getNestedLayoutBottomConnectorIds:function(){return{}}}};
a.orgdiagram.VisualTreeTask=function(g,b,d,c){function f(a,b,d){var f,g,h,s,w,u,D,C,J,H,L,I,Q={},N,ca={},P,T,U,da={},V;a.loopPostOrder(this,function(a,b,c,d){b.hasVisibleChildren=b.isVisible||b.hasVisibleChildren;null!=d&&(d.hasVisibleChildren=d.hasVisibleChildren||b.hasVisibleChildren)});a.loopLevels(this,function(e,h){var i,j,v;if(!c&&!h.hasVisibleChildren)return a.SKIP;i=d.node(e);i||(i=q({visibility:4,connectorPlacement:0,parentId:null,actualItemType:0},h),d.add(null,e,i));U=T=0;if(null!=(u=d.indexOf(e)))T=
u,U=d.countSiblings(e)-u-1;j=[];a.loopChildren(this,e,function(a,b){if(c||b.hasVisibleChildren){f=q({parentId:e,actualItemType:b.itemType},b);switch(i.actualItemType){case 7:case 8:case 6:switch(f.actualItemType){case 7:case 8:case 6:f.actualItemType=2;break;case 0:f.actualItemType=1}}switch(f.actualItemType){case 5:r(i,f),f.connectorPlacement=5,v=q({visibility:4}),d.add(v.id,f.id,f),f=v;case 8:case 2:g=d.parent(e);if(i.connectorPlacement&2)s=n(d,t.navigationFamily,i),d.add(g.id,f.id,f,s+1),f.connectorPlacement=
6,f.gravity=2;else if(i.connectorPlacement&8)w=l(d,t.navigationFamily,i),d.add(g.id,f.id,f,w),f.connectorPlacement=12,f.gravity=1;else switch(b.adviserPlacementType){case 2:s=n(d,t.navigationFamily,i);d.add(g.id,f.id,f,s+1);f.connectorPlacement=6;f.gravity=2;break;default:w=l(d,t.navigationFamily,i),d.add(g.id,f.id,f,w),f.connectorPlacement=12,f.gravity=1}switch(f.actualItemType){case 8:null!=i.parentId?r(d.node(i.parentId),f):r(i,f,!0);break;case 2:r(i,f)}break;case 4:r(i,f),f.connectorPlacement=
5,v=q({visibility:4}),d.add(v.id,f.id,f),f=v;case 1:null===i.visualAggregatorId&&p(d,i,!1);switch(b.adviserPlacementType){case 2:d.add(e,f.id,f,0);f.connectorPlacement=6;f.gravity=2;break;default:d.add(e,f.id,f),f.connectorPlacement=12,f.gravity=1}1==f.actualItemType&&r(i,f);break;case 0:j.push(f);r(i,f);break;case 7:case 6:g=d.parent(e);if(i.connectorPlacement&2)d.add(g.id,f.id,f,T),f.connectorPlacement=6,f.gravity=2;else if(i.connectorPlacement&8)d.add(g.id,f.id,f,d.countChildren(g.id)-U),f.connectorPlacement=
12,f.gravity=1;else{switch(b.adviserPlacementType){case 2:d.add(g.id,f.id,f,T);f.gravity=2;break;default:d.add(g.id,f.id,f,d.countChildren(g.id)-U),f.gravity=1}switch(f.actualItemType){case 6:f.connectorPlacement=5;break;case 7:f.connectorPlacement=4}}null!=i.parentId?r(d.node(i.parentId),f):r(i,f,!0)}}});switch(i.actualItemType){case 7:case 8:case 6:break;default:V=[],null!=(g=d.parent(e))&&d.loopChildrenRange(this,g.id,T,d.countChildren(g.id)-U,function(b,c){if(c.id==e)V.push(c);else switch(c.actualItemType){case 7:case 8:case 6:a.parentid(c.id)==
e&&V.push(c)}}),1<V.length&&(da[e]=V)}Q[e]=[];ca[e]=[];var C=i,I=h.childrenPlacementType,L=Q[e],J=ca[e],H,N,D,P,ja,ka,M,K,O=4==C.visibility&&0===C.connectorPlacement;switch(b.horizontalAlignment){case 0:case 1:N=3;break;case 2:N=2}0===I&&(I=m(a,C)?0===b.leavesPlacementType?3:b.leavesPlacementType:0===b.childrenPlacementType?2:b.childrenPlacementType);H=C;null!==C.visualAggregatorId&&(H=d.node(C.visualAggregatorId));3==I&&3>j.length&&(I=2);switch(I){case 2:I=0;for(P=j.length;I<P;I+=1)C=j[I],L=a.node(C.id),
d.add(H.id,C.id,C),C.connectorPlacement=(L.hideParentConnection?0:1)|(L.hideChildrenConnection?0:4),0===I&&(C.relationDegree=1);break;case 3:P=Math.min(b.maximumColumnsInMatrix,Math.ceil(Math.sqrt(j.length)));ja=Math.ceil(j.length/P);ka=Math.ceil(P/2);for(M=0;M<ka;M+=1){N=H;for(K=0;K<ja;K+=1){C=k(j,2*M,K,P);I=k(j,2*M+1,K,P);void 0===L[K]&&(L[K]=[],J[K]=[]);null!==C&&(0===M&&(C.relationDegree=1),d.add(N.id,C.id,C),C.connectorPlacement=(O?0:2)|4,C.gravity=2,J[K].push(C));if(null!==C||null!==I)D=q({visibility:4,
connectorPlacement:O?0:5}),d.add(N.id,D.id,D),L[K].push(D);null!==I&&(d.add(N.id,I.id,I),I.connectorPlacement=(O?0:8)|4,I.gravity=1,J[K].push(I));N=D}}2<P&&(H.visualAggregatorId=null);break;case 1:I=0;for(P=j.length;I<P;I+=1){C=j[I];D=q({visibility:4,connectorPlacement:O?0:5});switch(N){case 2:d.add(H.id,C.id,C);d.add(H.id,D.id,D);C.connectorPlacement=(O?0:2)|4;C.gravity=2;break;case 3:d.add(H.id,D.id,D),d.add(H.id,C.id,C),C.connectorPlacement=(O?0:8)|4,C.gravity=1}L[I]=[D];J[I]=[C];H=D}break;default:throw"Children placement is undefined!";
}});a.loopPostOrder(this,function(a){var b=d.node(a),c,f,g;if(null!=b){c=ca[a];f=Q[a];H=i(d,b);if(0<H&&(b.visualDepth=H+1,null!==b.visualAggregatorId)){h=d.node(b.visualAggregatorId);g=d.hasChildren(h.id);for(u=0;u<H-1;u+=1)h=p(d,h,!g)}g=0;var m=d.parent(b.id),n,k,l;if(null!==m){n=d.indexOf(b.id);for(k=1;null!=(l=d.getChild(m.id,n+k));)if(l.connectorPlacement&8)g=Math.max(g,j(d,l)),k+=1;else break;for(k=1;null!=(l=d.getChild(m.id,n-k));)if(l.connectorPlacement&2)g=Math.max(g,j(d,l)),k+=1;else break}H=
g;if(1<H){b.visualDepth+=H-1;g=d.hasChildren(a);h=b;for(u=0;u<H-1;u+=1)h=p(d,h,!g)}L=[];u=0;for(D=c.length;u<D;u+=1){P=c[u];C=L[u]=0;for(J=P.length;C<J;C+=1)L[u]=Math.max(L[u],j(d,P[C]))}u=0;for(D=L.length;u<D;u+=1)if(I=L[u],1<I){C=0;for(J=f[u].length;C<J;C+=1)if(N=f[u][C],d.hasChildren(N.id))for(H=I;1<H;)N=p(d,N,!1),H-=1}null!=da[a]&&e(d,b,da[a])}})}function e(a,b,c){var d,e,f,g,i=0,m=[],j,k;e=0;for(f=c.length;e<f;e+=1)d=c[e],i=Math.max(i,d.visualDepth);e=0;for(f=c.length;e<f;e+=1){d=c[e];j=h(a,
d);g=1;for(k=d;null!=k.visualAggregatorId;)k=a.node(k.visualAggregatorId),k.connectorPlacement=5,g+=1;for(;g<i;)j=p(a,j,!1),g+=1;m.push(h(a,j).id)}k=h(a,b);if(a.hasChildren(k.id)){j=c[Math.floor(c.length/2)];if(1<c.length&&0===c.length%2){e=a.parent(j.id);f=n(a,t.navigationFamily,j);g=a.getChild(e.id,f).gravity||a.getChild(e.id,f+1).gravity;j=q({visibility:4,connectorPlacement:j.connectorPlacement&10,gravity:g});a.add(e.id,j.id,j,f+1);for(g=1;g<i;)j=p(a,j,!1),j.connectorPlacement=0,g+=1}e=0;for(f=
c.length;e<f;e+=1)d=c[e],t.navigationFamily.loopChildren(this,b.id,function(a,c){switch(c.actualItemType){case 5:case 2:case 4:case 1:break;default:b.id!=d.id&&r(d,c)}return t.navigationFamily.SKIP});j=h(a,j);a.moveChildren(k.id,j.id)}j.partners=m}function h(a,b){for(var c=b;null!=c.visualAggregatorId;)c=a.node(c.visualAggregatorId);return c}function i(a,b){var c=0;null!=b.visualAggregatorId&&a.loopLevels(this,b.id,function(d,e,f){if(b.visualAggregatorId==d)return a.SKIP;c=f+1});return c}function j(a,
b){var c=0;a.loopLevels(this,b.id,function(a,b,d){c=d+1});return c+1}function k(a,b,c,d){0<d%2&&(b===d-1?b=a.length:b===d&&(b=d-1));b=c*d+b;return b>a.length-1?null:a[b]}function m(a,b){var c=!1,d=!0;a.loopChildren(this,b.id,function(b,e){c=!0;if(0===e.itemType&&a.hasChildren(b))return d=!1,!0});return c&&d}function n(a,b,c){var d=null,e={},f=a.parent(c.id);a.loopChildrenReversed(this,f.id,function(a,f,g){if(null===d)a==c.id&&(d=-1,e[c.id]=!0,b.loopChildren(this,c.id,function(a,c,d){if(0<d)return b.BREAK;
e[a]=!0}));else if(e.hasOwnProperty(a))b.loopChildren(this,f.id,function(a,c,d){if(0<d)return b.BREAK;e[a]=!0});else return d=g,!0});return d}function l(a,b,c){var d=null,e={},f=a.parent(c.id);a.loopChildren(this,f.id,function(a,f,g,h){if(null===d)a==c.id&&(d=h+1,e[c.id]=!0,b.loopChildren(this,c.id,function(a,c,d){if(0<d)return b.BREAK;e[a]=!0}));else if(e.hasOwnProperty(a))b.loopChildren(this,a,function(a,c,d){if(0<d)return b.BREAK;e[a]=!0});else return d=g,!0});return d}function p(a,b,c){c=q({visibility:4,
visualAggregatorId:b.visualAggregatorId,connectorPlacement:4==b.visibility&&0===b.connectorPlacement||c?0:5});a.insert(b.id,c.id,c);b.visualAggregatorId=c.id;return c}function q(b,c){var d=new a.orgdiagram.TreeItem,e;for(e in b)b.hasOwnProperty(e)&&(d[e]=b[e]);null!=c?(d.id=c.id,d.visibility=c.isVisible?0:4):(w+=1,d.id=w);return d}function r(a,b,c){var d=[];c||4==a.visibility||!u.hasOwnProperty(a.id)?(c||d.push(a.id),t.navigationFamily.loopParents(this,a.id,function(a,b){if(4!=b.visibility&&(d.push(a),
u.hasOwnProperty(a)))return t.navigationFamily.SKIP})):d.push(a.id);null!=t.navigationFamily.node(b.id)?t.navigationFamily.adopt(d,b.id):t.navigationFamily.add(d,b.id,b)}function s(a,b,c){a.loop(this,function(a){b[a]=[];c[a]=[]});a.loopPostOrder(this,function(a,d,e){var d=b[e],f=c[e],g=b[a],h=c[a],i;if(null!=e){d[0]||(d[0]=a);e=0;for(i=g.length;e<i;e+=1)d[e+1]||(d[e+1]=g[e]);f[0]=a;e=0;for(i=h.length;e<i;e+=1)f[e+1]=h[e]}})}var t={visualTree:null,leftMargins:{},rightMargins:{},navigationFamily:null},
w,u;return{process:function(){var c=g.getOrgTree(),e=d.getOptions();u=null!=b?b.getActiveItems():{};t.visualTree=a.common.tree();t.navigationFamily=a.common.family();w=g.getMaximumId();c.hasNodes()&&f(c,e,t.visualTree);t.leftMargins={};t.rightMargins={};s(t.visualTree,t.leftMargins,t.rightMargins);return!0},getVisualTree:function(){return t.visualTree},getNavigationFamily:function(){return t.navigationFamily},getConnectionsFamily:function(){return t.connectionsFamily},getLeftMargins:function(){return t.leftMargins},
getRightMargins:function(){return t.rightMargins}}};a.common.AnnotationLabelTemplate=function(){var g=["div",{type:"checkbox",name:"checkbox","class":["bp-item","bp-corner-all","bp-connector-label"]}];return{template:function(){return g},getHashCode:function(){return"defaultAnnotationLabelTemplate"},render:function(b,d){var c=d.context;a.common.isArray(c.label)?(d.element.innerHTML="",d.element.appendChild(a.common.JsonML.toHTML(c.label))):d.element.innerHTML=c.label}}};a.common.ButtonsTemplate=function(){var g=
["div",{style:{position:"absolute"}}];return{template:function(){return g},getHashCode:function(){return"defaultButtonsTemplate"},render:function(b,d){var c=0,f,e=d.buttons,g,i;switch(d.renderingMode){case 0:for(i=0;i<e.length;i+=1)f=e[i],g=["button",{style:{position:"absolute",top:c+"px",left:"0px"},"class":["orgdiagrambutton","bp-button"],"data-buttonname":f.name},["span",{style:{width:f.size.width+"px",height:f.size.height+"px"},"class":["bp-icon",f.icon]}]],d.element.appendChild(a.common.JsonML.toHTML(g)),
c+=10+f.size.height}}}};a.common.CheckBoxTemplate=function(a){var b=["div",["label",["nobr",["input",{type:"checkbox",name:"checkbox","class":"bp-selectioncheckbox"}],"\u00a0",["span",{name:"selectiontext","class":"bp-selectiontext"},a]]]];return{template:function(){return b},getHashCode:function(){return"defaultCheckBoxTemplate"},render:function(a,b){var f=b.element.firstChild.firstChild.firstChild;f.checked=b.isSelected;f.setAttribute("data-id",b.id);b.element.firstChild.firstChild.childNodes[2].setAttribute("data-id",
b.id)}}};a.common.CursorTemplate=function(a,b){var d=["div",{style:{width:b.itemSize.width+b.cursorPadding.left+b.cursorPadding.right+"px",height:b.itemSize.height+b.cursorPadding.top+b.cursorPadding.bottom+"px",borderWidth:b.cursorBorderWidth+"px"},"class":["bp-item","bp-corner-all","bp-cursor-frame"]}];return{template:function(){return d},getHashCode:function(){return"defaultCursorTemplate"},render:function(){}}};a.common.DotHighlightTemplate=function(a,b){var d,c=b.minimizedItemCornerRadius;null==
c&&(c=Math.max(b.highlightPadding.left+b.minimizedItemSize.width+b.highlightPadding.right,b.highlightPadding.top+b.minimizedItemSize.height+b.highlightPadding.bottom)+b.highlightBorderWidth);d=["div",{style:{borderWidth:b.highlightBorderWidth+"px",MozBorderRadius:c+"px",WebkitBorderRadius:c+"px","-khtml-border-radius":c+"px",borderRadius:c+"px"},"class":["bp-item","bp-highlight-dot-frame"]}];return{template:function(){return d},getHashCode:function(){return"defaultDotHighlightTemplate"},render:function(){}}};
a.common.GroupTitleTemplate=function(g){var b={style:{fontSize:g.groupTitleFontSize,fontFamily:g.groupTitleFontFamily,fontWeight:g.groupTitleFontWeight,fontStyle:g.groupTitleFontStyle},"class":["bp-item","bp-corner-all","bp-grouptitle-frame"]},d=g.groupTitleVerticalAlignment,c="";switch(g.groupTitleOrientation){case 1:c="rotate(-90deg)";break;case 2:c="rotate(90deg)"}var f=g.groupTitleFontSize,e=g.groupTitleFontFamily,h=g.groupTitleFontWeight,i=g.groupTitleFontStyle,j=null;switch(g.groupTitleHorizontalAlignment){case 0:j=
"center";break;case 1:j="left";break;case 2:j="right"}c={fontSize:f,fontFamily:e,fontWeight:h,fontStyle:i,position:"absolute",padding:0,margin:0,textAlign:j,lineHeight:1,"-webkit-transform-origin":"center center","-moz-transform-origin":"center center","-o-transform-origin":"center center","-ms-transform-origin":"center center","-webkit-transform":c,"-moz-transform":c,"-o-transform":c,"-ms-transform":c,transform:c};switch(d){case 0:d=["div",{style:c,"class":["bp-title-content","bp-item","bp-corner-all"]}];
break;default:c.borderCollapse="collapse";c={style:c};f=null;switch(d){case 1:f="middle";break;case 0:f="top";break;case 2:f="bottom"}d=["table",c,["tbody",["tr",["td",{style:{verticalAlign:f,padding:0},"class":"bp-title-content"}]]]]}var k=["div",b,d];return{template:function(){return k},getHashCode:function(){return"defaultGroupTitleTemplate"},render:function(b,c){var d=c.context,e=d.groupTitleColor||g.groupTitleColor,f={},h=c.width,i=c.height;f.left=Math.round(h/2-i/2)+"px";f.top=Math.round(i/
2-h/2)+"px";f.width=i+"px";f.height=h+"px";f.maxWidth=f.width;f.maxHeight=f.height;a.common.JsonML.applyStyles(c.element.firstChild,f);d=d.groupTitle||"";d=d.replace(RegExp("\n","g"),"<br/>");switch(g.groupTitleVerticalAlignment){case 0:f=c.element.firstChild;break;default:f=c.element.firstChild.firstChild.firstChild.firstChild,f.style.borderCollapse="collapse"}f.style.color=a.common.highestContrast(e,g.itemTitleSecondFontColor,g.itemTitleFirstFontColor);f.textContent=d;a.common.JsonML.applyStyles(c.element,
{backgroundColor:e})}}};a.common.HighlightTemplate=function(a,b){var d=["div",{style:{borderWidth:b.highlightBorderWidth+"px"},"class":["bp-item","bp-corner-all","bp-highlight-frame"]}];return{template:function(){return d},getHashCode:function(){return"defaultHighlightTemplate"},render:function(){}}};a.common.ItemTemplate=function(g,b){var d,c=new a.common.Size(b.itemSize);c.width-=2*b.itemBorderWidth;c.height-=2*b.itemBorderWidth;d=["div",{style:{borderWidth:b.itemBorderWidth+"px"},"class":["bp-item",
"bp-corner-all","bt-item-frame"]},["div",{name:"titleBackground",style:{top:"2px",left:"2px",width:c.width-4+"px",height:"18px"},"class":["bp-item","bp-corner-all","bp-title-frame"]},["div",{name:"title",style:{top:"1px",left:"4px",width:c.width-4-8+"px",height:"16px"},"class":["bp-item","bp-title"]}]],["div",{name:"photoBorder",style:{top:"24px",left:"2px",width:"50px",height:"60px"},"class":["bp-item","bp-photo-frame"]},["img",{name:"photo",alt:"",style:{width:"50px",height:"60px"}}]],["div",{name:"description",
style:{top:"24px",left:"56px",width:c.width-4-56+"px",height:"74px"},"class":["bp-item","bp-description"]}]];return{template:function(){return d},getHashCode:function(){return"defaultItemTemplate"},render:function(b,c){var d=c.context,i=null!=d.itemTitleColor?d.itemTitleColor:"#4169e1",j=a.common.highestContrast(i,g.itemTitleSecondFontColor,g.itemTitleFirstFontColor),k=c.element,m=k.firstChild,n=k.childNodes[1].firstChild,l=m.firstChild,k=k.childNodes[2];a.common.JsonML.applyStyles(m,{backgroundColor:i});
n.src=d.image;n.alt=d.title;a.common.JsonML.applyStyles(l,{color:j});l.textContent=d.title;k.textContent=d.description}}};a.common.UserTemplate=function(g,b,d){var c=a.common.hashCode(JSON.stringify(b));return{template:function(){return b},getHashCode:function(){return c},render:function(b,c){if(null!=d)d(b,c);else{var h=c.context,i=null!=h.itemTitleColor?h.itemTitleColor:"#4169e1",j=a.common.highestContrast(i,g.itemTitleSecondFontColor,g.itemTitleFirstFontColor);a.common.getElementsByName(this,c.element,
"photo",function(a){a.src=h.image;a.alt=h.title});a.common.getElementsByName(this,c.element,"titleBackground",function(b){a.common.JsonML.applyStyles(b,{background:i})});a.common.getElementsByName(this,c.element,"title",function(b){a.common.JsonML.applyStyles(b,{color:j});b.textContent=h.title});a.common.getElementsByName(this,c.element,"description",function(a){a.textContent=h.description})}}}};a.orgdiagram.BaseControl=function(g,b,d,c,f){function e(b,c){null==c&&(c=!0);switch(b){case 1:h(c,J);break;
case 2:var e=J;v.layout.forceCenterOnCursor=!1;v.tasks.process("HighlightItemOptionTask",null,e);v.graphics.end();break;default:p(v.layout);l(v.layout);var C=v.layout,e=v.name,H=a.common.getInnerSize(C.element),H=new a.common.Rect(0,0,H.width,H.height),y=new a.common.Rect(H),z=a.common.getFixOfPixelALignment(g);a.common.JsonML.appendDOM(C.element,a.common.JsonML.toHTML(["div",{tabindex:0,style:{position:"relative",overflow:"auto","-webkit-overflow-scrolling":"touch",top:"0px",left:"0px",width:H.width+
"px",height:H.height+"px",padding:"0px",marginBottom:"0px",marginRight:"0px",marginLeft:z.width+"px",marginTop:z.height+"px"},"class":e,$:function(a){C.scrollPanel=a}},["div",{style:a.common.mergeObjects({position:"absolute",overflow:"hidden"},y.getCSS()),"class":e,$:function(a){C.mousePanel=a}},["div",{style:a.common.mergeObjects({position:"absolute",overflow:"hidden"},y.getCSS()),"class":["placeholder",e],$:function(a){C.placeholder=a}},["div",{style:{position:"absolute",overflow:"visible",top:"0px",
left:"0px",width:"0px",height:"0px"},"class":["calloutplaceholder",e],$:function(a){C.calloutPlaceholder=a}}]]]]));e=v.layout;e.mousePanel.addEventListener("mousemove",q);e.mousePanel.addEventListener("click",s);e.mousePanel.addEventListener("dblclick",t);e.mousePanel.addEventListener("change",r);e.scrollPanel.addEventListener("keydown",w);e.scrollPanel.addEventListener("scroll",i);v.options.enablePanning&&a.common.isChrome()&&(e.scrollPanel.draggable=!0,e.scrollPanel.addEventListener("dragstart",
u),e.scrollPanel.addEventListener("drag",x),e.scrollPanel.addEventListener("dragend",x),e.scrollPanel.addEventListener("dragover",A));v.tasks=d(j,k,m,n,f);v.graphics=a.common.createGraphics(v.options.graphicsType,v.layout.element);v.graphics.debug=J;h(!0,J)}}function h(b,c){var d;v.layout.forceCenterOnCursor=b;v.tasks.process("OptionsTask",null,c);v.graphics.end();b&&(d=v.tasks.getTask("CenterOnCursorTask"),d=d.getPlaceholderOffset(),v.layout.scrollPanel.scrollLeft=d.x,v.layout.scrollPanel.scrollTop=
d.y);d=a.common.getFixOfPixelALignment(v.layout.element);a.common.JsonML.applyStyles(v.layout.scrollPanel,{top:"0px",left:"0px",marginBottom:"0px",marginRight:"0px",marginLeft:d.width+"px",marginTop:d.height+"px"})}function i(){null==H&&(H=window.setTimeout(function(){var a=J;v.layout.forceCenterOnCursor=!1;v.tasks.process("LayoutOptionsTask",null,a);v.graphics.end();window.clearTimeout(H);H=null},200))}function j(){return v.options}function k(){return v.graphics}function m(){var b=v.layout,c=a.common.getInnerSize(b.element),
d=new a.common.Point(b.scrollPanel.scrollLeft,b.scrollPanel.scrollTop);return{forceCenterOnCursor:b.forceCenterOnCursor,scrollPanelSize:c,placeholderOffset:d}}function n(b){var c=v.layout,d=new a.common.Size(b.contentSize);d.scale(1*b.scale);a.common.JsonML.applyStyles(c.mousePanel,d.getCSS());a.common.JsonML.applyStyles(c.placeholder,b.contentSize.getCSS());var e="scale("+b.scale+","+b.scale+")";a.common.JsonML.applyStyles(c.placeholder,{"transform-origin":"0 0",transform:e,"-ms-transform":e,"-webkit-transform":e,
"-o-transform":e,"-moz-transform":e});e=new a.common.Size(b.scrollPanelSize);b.autoSize&&(e=new a.common.Size(d.width+25,d.height+25),e.cropBySize(b.autoSizeMaximum),e.addSize(b.autoSizeMinimum),a.common.JsonML.applyStyles(c.element,e.getCSS()));a.common.JsonML.applyStyles(c.scrollPanel,e.getCSS());return e}function l(){if(null!=v.layout.scrollPanel){var a=v.layout.scrollPanel.parentNode;null!=a&&a.removeChild(v.layout.scrollPanel)}}function p(a){null!=a.mousePanel&&(a.mousePanel.removeEventListener("mousemove",
q),a.mousePanel.removeEventListener("click",s),a.mousePanel.removeEventListener("dblclick",t),a.mousePanel.removeEventListener("change",r));null!=a.scrollPanel&&(a.scrollPanel.removeEventListener("keydown",w),a.scrollPanel.removeEventListener("scroll",i),a.scrollPanel.removeEventListener("dragstart",u),a.scrollPanel.removeEventListener("drag",x),a.scrollPanel.removeEventListener("dragend",x),a.scrollPanel.removeEventListener("dragover",A))}function q(b){var c=a.common.getElementOffset(v.layout.mousePanel),
d=b.pageX-c.left,c=b.pageY-c.top,e=v.tasks.getTask("CreateTransformTask"),f=v.tasks.getTask("HighlightItemOptionTask");f.hasHighlightEnabled()&&(d=e.getTreeItemForMousePosition(d,c,f.getGravityRadius()),B(b,d))}function r(b){var d=b.target,e=d.getAttribute("data-id");if(null!=e){var f=(v.options.selectedItems||[]).slice(),g=c(v,null,e,void 0),h=a.common.indexOf(f,e);y("onSelectionChanging",b,g);g.cancel||(0<=h?f.splice(h,1):f.push(e),v.options.selectedItems=f,0>h?d.setAttribute("checked","checked"):
d.removeAttribute("checked"),y("onSelectionChanged",b,g))}}function s(b){var d=a.common.getElementOffset(v.layout.mousePanel),e=b.pageX-d.left,f=b.pageY-d.top,g=v.tasks.getTask("CreateTransformTask"),d=v.tasks.getTask("CursorItemOptionTask"),h=v.tasks.getTask("HighlightItemOptionTask"),e=g.getTreeItemForMousePosition(e,f,h.getGravityRadius()),f=b.target;null!==e&&(a.common.hasClass(f,v.name+"button")||a.common.hasClass(f.parentNode,v.name+"button")?(d=a.common.hasClass(f,v.name+"button")?f:f.parentNode,
d=d.getAttribute("data-buttonname"),f=c(v,null,e,d),y("onButtonClick",b,f)):"checkbox"===f.getAttribute("name")||"selectiontext"===f.getAttribute("name")||(f=c(v,null,e,void 0),y("onMouseClick",b,f),!f.cancel&&d.hasCursorEnabled()&&(z(b,e),v.layout.scrollPanel.focus())))}function t(a){var b;b=v.tasks.getTask("HighlightItemTask").getHighlightTreeItem();null!==b&&(b=c(v,null,b,void 0),y("onMouseDblClick",a,b))}function w(a){var b=v.tasks.getTask("HighlightItemTask"),c=v.tasks.getTask("HighlightItemOptionTask"),
d=v.tasks.getTask("CursorItemTask"),e=v.tasks.getTask("CursorItemOptionTask"),f=v.tasks.getTask("AlignDiagramTask"),g=v.tasks.getTask("CreateTransformTask").getTransform(),h=null,i=null,m=v.layout;c.hasHighlightEnabled()&&e.hasCursorEnabled()?(h=b.getHighlightTreeItem(),null===h&&(h=d.getCursorTreeItem())):c.hasHighlightEnabled()?h=b.getHighlightTreeItem():e.hasCursorEnabled()&&(h=d.getCursorTreeItem());if(null!=h){switch(a.which){case 13:e.hasCursorEnabled()&&(z(a,h),a.preventDefault(),m.scrollPanel.focus());
break;case 40:i=1;break;case 38:i=0;break;case 37:i=2;break;case 39:i=3}if(null!=i){for(d=!1;!d;)d=!0,i=g.getOrientation(i),b=f.getNextItem(h,i),null!=b&&(a.preventDefault(),c.hasHighlightEnabled()?B(a,b):e.hasCursorEnabled()&&z(a,b));m.scrollPanel.focus()}}}function u(b){var c=v.layout.scrollPanel;F=new a.common.Point(b.clientX,b.clientY);E=new a.common.Point(c.scrollLeft,c.scrollTop);D=D||new Image;b.dataTransfer.setDragImage(D,0,0)}function A(a){a.preventDefault();a.dataTransfer.dropEffect="move"}
function x(b){G=new a.common.Point(E.x-(b.clientX-F.x),E.y-(b.clientY-F.y));null==C&&(C=window.setTimeout(function(){var a=v.layout.scrollPanel;a.scrollLeft=G.x;a.scrollTop=G.y;window.clearTimeout(C);C=null},50))}function B(a,b){var d=!0,e;null!==b?b!==v.options.highlightItem&&(e=c(v,v.options.highlightItem,b,void 0),v.options.highlightItem=b,y("onHighlightChanging",a,e),e.cancel?d=!1:(h(!1,!1),y("onHighlightChanged",a,e))):null!==v.options.highlightItem&&(e=c(v,v.options.highlightItem,null,void 0),
v.options.highlightItem=null,y("onHighlightChanging",a,e),e.cancel?d=!1:(h(!1,!1),y("onHighlightChanged",a,e)));return d}function z(a,b){var d;b!==v.options.cursorItem&&(d=c(v,v.options.cursorItem,b,void 0),v.options.cursorItem=b,y("onCursorChanging",a,d),d.cancel||(h(!0,J),y("onCursorChanged",a,d)))}function y(a,b,c){a=v.options[a];null!=a&&a(b,c)}var v={name:"orgdiagram",options:b,tasks:null,graphics:null,mouse:null,layout:{element:g,scrollPanel:null,mousePanel:null,placeholder:null,calloutPlaceholder:null,
forceCenterOnCursor:!0}},F,E,G,D,C,J=!1,H=null;e();return{destroy:function(){p(v.layout);l(v.layout);v.tasks=null;v.graphics=null},setOptions:function(a){for(var b in a)a.hasOwnProperty(b)&&(v.options[b]=a[b])},getOptions:j,setOption:function(a,b){return v.options[a]=b},getOption:function(a){return v.options[a]},update:e}};a.orgdiagram.Control=function(g,b){return a.orgdiagram.BaseControl(g,b,a.orgdiagram.TaskManagerFactory,a.orgdiagram.EventArgsFactory,{AnnotationLabelTemplate:a.common.AnnotationLabelTemplate,
ButtonsTemplate:a.common.ButtonsTemplate,CheckBoxTemplate:a.common.CheckBoxTemplate,CursorTemplate:a.common.CursorTemplate,DotHighlightTemplate:a.common.DotHighlightTemplate,GroupTitleTemplate:a.common.GroupTitleTemplate,HighlightTemplate:a.common.HighlightTemplate,ItemTemplate:a.common.ItemTemplate,UserTemplate:a.common.UserTemplate,LabelAnnotationTemplate:a.common.LabelAnnotationTemplate})};a.orgdiagram.EventArgsFactory=function(g,b,d,c){var f=new a.orgdiagram.EventArgs,e=g.tasks.getTask("CombinedContextsTask"),
h=g.tasks.getTask("AlignDiagramTask"),b=e.getConfig(b),i=e.getConfig(d);b&&null!=b.id&&(f.oldContext=b);i&&null!=i.id&&(f.context=i,null!==i.parent&&(f.parentItem=e.getConfig(i.parent)),e=a.common.getElementOffset(g.layout.mousePanel),g=a.common.getElementOffset(g.layout.element),d=h.getItemPosition(d),f.position=(new a.common.Rect(d.actualPosition)).translate(e.left,e.top).translate(-g.left,-g.top));null!=c&&(f.name=c);return f};a.orgdiagram.getProcessDiagramConfig=function(){var g=function(){};
return a.orgdiagram.TaskManagerFactory(g,g,g).getProcessDiagramConfig()};a.orgdiagram.TaskManagerFactory=function(g,b,d,c,f){var e=new a.common.TaskManager;e.addDependency("options",g);e.addDependency("graphics",b);e.addDependency("getLayout",d);e.addDependency("setLayout",c);e.addDependency("templates",f);e.addDependency("defaultConfig",new a.orgdiagram.Config);e.addDependency("defaultItemConfig",new a.orgdiagram.ItemConfig);e.addDependency("defaultTemplateConfig",new a.orgdiagram.TemplateConfig);
e.addDependency("defaultButtonConfig",new a.orgdiagram.ButtonConfig);e.addDependency("defaultBackgroundAnnotationConfig",new a.orgdiagram.BackgroundAnnotationConfig);e.addDependency("defaultConnectorAnnotationConfig",new a.orgdiagram.ConnectorAnnotationConfig);e.addDependency("defaultHighlightPathAnnotationConfig",new a.orgdiagram.HighlightPathAnnotationConfig);e.addDependency("defaultShapeAnnotationConfig",new a.orgdiagram.ShapeAnnotationConfig);e.addDependency("isFamilyChartMode",!1);e.addDependency("showElbowDots",
!1);e.addDependency("null",null);e.addDependency("foreground",2);e.addDependency("background",1);e.addTask("OptionsTask",["options"],a.orgdiagram.OptionsTask,"#000000");e.addTask("LayoutOptionsTask",["getLayout","OptionsTask"],a.orgdiagram.LayoutOptionsTask,"#000000");e.addTask("CurrentControlSizeTask",["LayoutOptionsTask","ItemsSizesOptionTask"],a.orgdiagram.CurrentControlSizeTask,"#000000");e.addTask("CurrentScrollPositionTask",["LayoutOptionsTask"],a.orgdiagram.CurrentScrollPositionTask,"#000000");
e.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.CalloutOptionTask,"#000080");e.addTask("ConnectorsOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ConnectorsOptionTask,"#000080");e.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],a.orgdiagram.ItemsOptionTask,"#000080");e.addTask("ItemsContentOptionTask",["OptionsTask","defaultItemConfig"],a.orgdiagram.ItemsContentOptionTask,"#000080");e.addTask("ItemsSizesOptionTask",["OptionsTask",
"defaultConfig","defaultItemConfig","defaultButtonConfig"],a.orgdiagram.ItemsSizesOptionTask,"#000080");e.addTask("LabelsOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.LabelsOptionTask,"#000080");e.addTask("TemplatesOptionTask",["OptionsTask","defaultConfig","defaultButtonConfig","defaultTemplateConfig"],a.orgdiagram.TemplatesOptionTask,"#000080");e.addTask("OrientationOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.OrientationOptionTask,"#000080");e.addTask("VisualTreeOptionTask",
["OptionsTask","defaultConfig"],a.orgdiagram.VisualTreeOptionTask,"#000080");e.addTask("MinimizedItemsOptionTask",["OptionsTask"],a.orgdiagram.MinimizedItemsOptionTask,"#000080");e.addTask("CursorItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorItemOptionTask,"#000080");e.addTask("HighlightItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.HighlightItemOptionTask,"#000080");e.addTask("SelectedItemsOptionTask",["OptionsTask"],a.orgdiagram.SelectedItemsOptionTask,"#000080");
e.addTask("CursorSelectionPathModeOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorSelectionPathModeOptionTask,"#000080");e.addTask("SplitAnnotationsOptionTask",["OptionsTask"],a.orgdiagram.SplitAnnotationsOptionTask,"#00ffff");e.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");e.addTask("BackgroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig",
"background"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");e.addTask("ForegroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","foreground"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");e.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","background"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");e.addTask("ForegroundConnectorAnnotationOptionTask",
["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");e.addTask("BackgroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");e.addTask("BackgroundAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultBackgroundAnnotationConfig"],a.orgdiagram.BackgroundAnnotationOptionTask,"#000080");e.addTask("ScaleOptionTask",
["OptionsTask","defaultConfig"],a.orgdiagram.ScaleOptionTask,"#000080");e.addTask("CombinedContextsTask",["ItemsContentOptionTask"],a.orgdiagram.CombinedContextsTask,"#00ffff");e.addTask("OrgTreeTask",["ItemsOptionTask"],a.orgdiagram.OrgTreeTask,"#ff0000");e.addTask("ReadTemplatesTask",["TemplatesOptionTask","templates"],a.orgdiagram.ReadTemplatesTask,"#00ffff");e.addTask("ActiveItemsTask",["ItemsSizesOptionTask","ReadTemplatesTask"],a.orgdiagram.ActiveItemsTask,"#00ffff");e.addTask("ItemTemplateParamsTask",
["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],a.orgdiagram.ItemTemplateParamsTask,"#00ffff");e.addTask("GroupTitleTemplateTask",["TemplatesOptionTask","templates"],a.orgdiagram.GroupTitleTemplateTask,"#00ffff");e.addTask("CheckBoxTemplateTask",["ItemsSizesOptionTask","templates"],a.orgdiagram.CheckBoxTemplateTask,"#00ffff");e.addTask("ButtonsTemplateTask",["ItemsSizesOptionTask","templates"],a.orgdiagram.ButtonsTemplateTask,"#00ffff");e.addTask("AnnotationLabelTemplateTask",
["ItemsOptionTask","templates"],a.orgdiagram.AnnotationLabelTemplateTask,"#00ffff");e.addTask("VisualTreeTask",["OrgTreeTask","ActiveItemsTask","VisualTreeOptionTask","isFamilyChartMode"],a.orgdiagram.VisualTreeTask,"#ff0000");e.addTask("VisualTreeLevelsTask",["VisualTreeTask","ItemTemplateParamsTask"],a.orgdiagram.VisualTreeLevelsTask,"#ff0000");e.addTask("ConnectionsGraphTask",["graphics","CreateTransformTask","ConnectorsOptionTask","VisualTreeLevelsTask","AlignDiagramTask"],a.orgdiagram.ConnectionsGraphTask,
"#00ffff");e.addTask("HighlightItemTask",["HighlightItemOptionTask","ActiveItemsTask"],a.orgdiagram.HighlightItemTask,"#00ffff");e.addTask("CursorItemTask",["CursorItemOptionTask","ActiveItemsTask"],a.orgdiagram.CursorItemTask,"#00ffff");e.addTask("CursorNeighboursTask",["CursorItemTask","VisualTreeTask"],a.orgdiagram.CursorNeighboursTask,"#00ffff");e.addTask("SelectedItemsTask",["SelectedItemsOptionTask"],a.orgdiagram.SelectedItemsTask,"#00ffff");e.addTask("SelectionPathItemsTask",["VisualTreeTask",
"CursorItemTask","SelectedItemsTask","CursorSelectionPathModeOptionTask"],a.orgdiagram.SelectionPathItemsTask,"#00ffff");e.addTask("NormalVisibilityItemsByForegroundShapeAnnotationTask",["ForegroundShapeAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");e.addTask("NormalVisibilityItemsByBackgroundShapeAnnotationTask",["BackgroundShapeAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");e.addTask("NormalVisibilityItemsByBackgroundAnnotationTask",
["BackgroundAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");e.addTask("NormalVisibilityItemsByForegroundHighlightPathAnnotationTask",["ForegroundHighlightPathAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");e.addTask("NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask",["BackgroundHighlightPathAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");e.addTask("NormalVisibilityItemsByForegroundConnectorAnnotationTask",
["ForegroundConnectorAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,"#00ffff");e.addTask("NormalVisibilityItemsByBackgroundConnectorAnnotationTask",["BackgroundConnectorAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,"#00ffff");e.addTask("CombinedNormalVisibilityItemsTask","ItemsSizesOptionTask CursorItemTask CursorNeighboursTask SelectedItemsTask SelectionPathItemsTask NormalVisibilityItemsByForegroundShapeAnnotationTask NormalVisibilityItemsByBackgroundShapeAnnotationTask NormalVisibilityItemsByBackgroundAnnotationTask NormalVisibilityItemsByForegroundHighlightPathAnnotationTask NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask NormalVisibilityItemsByForegroundConnectorAnnotationTask NormalVisibilityItemsByBackgroundConnectorAnnotationTask".split(" "),
a.orgdiagram.CombinedNormalVisibilityItemsTask,"#00ffff");e.addTask("ItemsPositionsTask","CurrentControlSizeTask ScaleOptionTask OrientationOptionTask ItemsSizesOptionTask ConnectorsOptionTask VisualTreeOptionTask VisualTreeTask VisualTreeLevelsTask ItemTemplateParamsTask CursorItemTask CombinedNormalVisibilityItemsTask".split(" "),a.orgdiagram.ItemsPositionsTask,"#ff0000");e.addTask("AlignDiagramTask","OrientationOptionTask ItemsSizesOptionTask VisualTreeOptionTask ScaleOptionTask CurrentControlSizeTask ActiveItemsTask ItemsPositionsTask isFamilyChartMode".split(" "),
a.orgdiagram.AlignDiagramTask,"#ff0000");e.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],a.orgdiagram.CreateTransformTask,"#00ffff");e.addTask("CenterOnCursorTask","LayoutOptionsTask CurrentControlSizeTask CurrentScrollPositionTask CursorItemTask AlignDiagramTask CreateTransformTask ScaleOptionTask".split(" "),a.orgdiagram.CenterOnCursorTask,"#00ffff");e.addTask("PaletteManagerTask",["ConnectorsOptionTask","null"],a.orgdiagram.PaletteManagerTask,"#00ffff");e.addTask("ApplyLayoutChangesTask",
"graphics setLayout ItemsSizesOptionTask CurrentControlSizeTask ScaleOptionTask AlignDiagramTask".split(" "),a.orgdiagram.ApplyLayoutChangesTask,"#008000");e.addTask("DrawBackgroundAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask BackgroundAnnotationOptionTask VisualTreeTask AlignDiagramTask".split(" "),a.orgdiagram.DrawBackgroundAnnotationTask,"#008000");e.addTask("DrawBackgroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","ForegroundHighlightPathAnnotationOptionTask",
"ConnectionsGraphTask","foreground"],a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");e.addTask("DrawForegroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","BackgroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","background"],a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");e.addTask("DrawForegroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground".split(" "),
a.orgdiagram.DrawConnectorAnnotationTask,"#008000");e.addTask("DrawBackgroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background".split(" "),a.orgdiagram.DrawConnectorAnnotationTask,"#008000");e.addTask("DrawForegroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground".split(" "),
a.orgdiagram.DrawShapeAnnotationTask,"#008000");e.addTask("DrawBackgroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background".split(" "),a.orgdiagram.DrawShapeAnnotationTask,"#008000");e.addTask("DrawCursorTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask ItemTemplateParamsTask CursorItemTask SelectedItemsTask".split(" "),
a.orgdiagram.DrawCursorTask,"#008000");e.addTask("DrawHighlightTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask ItemTemplateParamsTask HighlightItemTask CursorItemTask SelectedItemsTask".split(" "),a.orgdiagram.DrawHighlightTask,"#008000");e.addTask("DrawHighlightAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask ScaleOptionTask CombinedContextsTask CalloutOptionTask ReadTemplatesTask AlignDiagramTask CenterOnCursorTask HighlightItemTask CursorItemTask SelectedItemsTask".split(" "),
a.orgdiagram.DrawHighlightAnnotationTask,"#008000");e.addTask("DrawTreeItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask ScaleOptionTask ItemsSizesOptionTask CombinedContextsTask AlignDiagramTask CenterOnCursorTask ItemTemplateParamsTask CursorItemTask SelectedItemsTask GroupTitleTemplateTask CheckBoxTemplateTask ButtonsTemplateTask".split(" "),a.orgdiagram.DrawTreeItemsTask,"#008000");e.addTask("DrawMinimizedItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask MinimizedItemsOptionTask ItemTemplateParamsTask AlignDiagramTask".split(" "),
a.orgdiagram.DrawMinimizedItemsTask,"#008000");e.addTask("DrawConnectorsTask",["graphics","ConnectionsGraphTask","ConnectorsOptionTask","showElbowDots","PaletteManagerTask"],a.orgdiagram.DrawConnectorsTask,"#008000");e.addTask("DrawItemLabelsTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","LabelsOptionTask","AlignDiagramTask"],a.orgdiagram.DrawItemLabelsTask,"#008000");return e};a.common.binarySearch=function(a,b,d,c){var f=null,e,d=d||0,h=c||a.length-1,i,j;if(0<a.length&&(j=a[d],
f={index:d,item:j},c=b(j,d),0<c))if(e=Math.abs(c),j=a[h],c=b(j,h),0<=c)f={index:h,item:j};else{c=Math.abs(c);e>c&&(e=c,f={index:h,item:j});for(;d+1<h;)if(i=Math.round((d+h)/2),j=a[i],c=b(j,i),0===c){f={index:i,item:j};break}else 0<c?d=i:h=i,c=Math.abs(c),e>c&&(e=c,f={index:i,item:j})}return f};a.common.family=function(g){function b(a,b,c,d){var e;if(null!=d&&(b=b[c],null!=b))for(e in b)if(b.hasOwnProperty(e)&&d.call(a,e,b[e]))break}function d(a,b){var c=!1;null!=v[a]&&null!=v[a][b]&&(delete v[a][b],
F[a]-=1,delete E[b][a],G[b]-=1,F[a]||(delete v[a],delete F[a]),E[b]||(delete E[b],delete G[b],null==z[null]&&(z[null]={},y[null]=0),z[null][b]=!0,y[null]+=1),c=!0);return c}function c(a,b){var c;if(null!=b)for(c in D)if(D.hasOwnProperty(c)&&b.call(a,c,D[c]))break}function f(a,c,d,e){for(var f,g,h={},i=0,m=!0;m;){f={};m=!1;for(g in d)if(d.hasOwnProperty(g)&&!h[g])switch(h[g]=!0,e.call(a,g,D[g],i)){case 1:f={};m=!1;break;case 2:break;default:b(this,c,g,function(a){h[a]||(m=f[a]=!0)})}d=f;i+=1}}function e(a,
b,c){null!=c&&null!=b&&(null!=D[b]&&null!=v[b])&&f(a,v,v[b],c)}function h(a,b,c){null!=c&&null!=b&&(null!=D[b]&&null!=E[b])&&f(a,E,E[b],c)}function i(a,c,d,e,f,g){var h,i,m,n;if(null!=g){c=[];i={};for(h in D)D.hasOwnProperty(h)&&(i[h]=d[h]||0,i[h]||c.push(h));for(n=0;0<c.length;){m=[];d=0;for(f=c.length;d<f;d+=1){h=c[d];if(g.call(a,h,D[h],n)){m=[];break}n+=1;b(this,e,h,function(a){i[a]-=1;0===i[a]&&m.push(a)})}c=m}}}function j(a,b){i(a,E,G,v,F,b)}function k(a,b){i(a,v,F,E,G,b)}function m(a,b,c,d,
e,f,g,h,i){var m=!1,n,j;if(null!=D[a]&&null!=g[a]){m=!0;if(i){i=0;for(n=b.length;i<n;i+=1)if(j=b[i],null==D[j]||null==g[a][j])m=!1}if(m&&(null!=d&&(D[c]=d),null!=D[c])){e[c]||(e[c]={},f[c]=0);g[c]||(g[c]={},h[c]=0);e[c][a]||(e[c][a]=!0,f[c]+=1);g[a][c]||(g[a][c]=!0,h[a]+=1);i=0;for(n=b.length;i<n;i+=1)j=b[i],c!=j&&(null!=g[a][j]&&(delete g[a][j],h[a]-=1),null!=e[j][a]&&(delete e[j][a],f[j]-=1),e[j][c]||(e[j][c]=!0,f[j]+=1),g[c][j]||(g[c][j]=!0,h[c]+=1))}}return m}function n(a,b,c,d){return m(a,b,
c,d,E,G,v,F,!0)}function l(){this.key=this.id="";this.children=[];this.childrenHash={};this.processed=!1}function p(a){this.items=[];this.difference=this.weight=0;0<arguments.length&&(this.difference=a)}function q(c){var d=a.common.graph(),e,f,g,h,i,m,j,n,k={};for(e in c)c.hasOwnProperty(e)&&b(this,v,e,function(a){if(!k.hasOwnProperty(a)){k[a]=!0;f=[];b(this,E,a,function(a){f.push(a)});g=0;for(i=f.length;g<i-1;g+=1)if(m=f[g],c.hasOwnProperty(m))for(h=g+1;h<i;h+=1)if(j=f[h],c.hasOwnProperty(j)){n=
Math.abs(c[m].children.length-c[j].children.length);var e=d.edge(m,j);null==e&&(e=new p(n),d.addEdge(m,j,e));e.items.push(a);e.weight+=1}}});return d}function r(a,b){this.parentid=a;this.childid=b;this.key=a+","+b}function s(a,b){this.from=a;this.to=b;this.distance=0}function t(a){return F[a]||0}function w(a){return G[a]||0}function u(a){var b=null,a=v[a]||{};for(b in a)if(a.hasOwnProperty(b))return b;return null}function A(a){var b=null,a=E[a]||{};for(b in a)if(a.hasOwnProperty(b))return b;return null}
function x(a,b){this.parentid=a;this.childid=b;this.ids=[];this.nodes=[]}function B(){return a.common.family({roots:z,rootsCount:y,children:v,childrenCount:F,parents:E,parentsCount:G,nodes:D})}var z={},y={},v={},F={},E={},G={},D={};a.common.isObject(g)&&(z=a.common.cloneObject(g.roots,!1),y=a.common.cloneObject(g.rootsCount,!0),v=a.common.cloneObject(g.children,!1),F=a.common.cloneObject(g.childrenCount,!0),E=a.common.cloneObject(g.parents,!1),G=a.common.cloneObject(g.parentsCount,!0),D=a.common.cloneObject(g.nodes,
!0));return{add:function(a,c,d){var e,f,g={};if(!a||0===a.length)a=[null];if(null==D[c]&&null!=d){D[c]=d;d=0;for(e=a.length;d<e;d+=1)f=a[d],null==g[f]&&f!=c&&(g[f]=!0,null!=D[f]?(null==E[c]&&(E[c]={},G[c]=0),E[c][f]||(E[c][f]=!0,G[c]+=1),null==v[f]&&(v[f]={},F[f]=0),v[f][c]||(v[f][c]=!0,F[f]+=1)):(null==z[f]&&(z[f]={},y[f]=0),z[f][c]||(z[f][c]=!0,y[f]+=1)));null!=z[c]&&(v[c]=z[c],F[c]=y[c],delete z[c],delete y[c],b(this,v,c,function(a){null==E[a]&&(E[a]={},G[a]=0);E[a][c]||(E[a][c]=!0,G[a]+=1)}))}},
adopt:function(a,b){var c,d,e;if(null!=D[b]){c=0;for(d=a.length;c<d;c+=1)if(e=a[c],null==E[b]&&(E[b]={},G[b]=0),e!=b&&null!=D[e])E[b][e]||(E[b][e]=!0,G[b]+=1),null==v[e]&&(v[e]={},F[e]=0),v[e][b]||(v[e][b]=!0,F[e]+=1);else throw"Item cannot be parent of itself and parent should exist in the structure!";}else throw"Child should be in hierarchy!";},bundleChildren:n,bundleParents:function(a,b,c,d){return m(a,b,c,d,v,F,E,G,!0)},optimizeReferences:function(c){var d={},f={},g={},h,i,j,n,k,p;k=0;var r=10,
s;if(null!=c){for(h in D)k+=1,D.hasOwnProperty(h)&&(i=new l,b(this,v,h,function(a){i.children.push(a);i.childrenHash[a]=!0}),i.children.sort(),i.id=h,i.key=i.children.join(","),g[i.id]=i);for(r=Math.pow(10,k.toString().length);!a.common.isEmptyObject(g);){j={};s={};n=q(g);for(h in g)g.hasOwnProperty(h)&&(k=g[h],k.processed||(p=n.getSpanningTree(h,function(a){return a.weight*r+r-a.difference}),p.loopLevels(this,function(a,b){g[a].processed=!0;p.loopChildren(this,a,function(h,i){var k=n.edge(a,h),p=
null,q,r,t,u,w,y;g[h].processed=!0;if(1<k.weight){r=k.items.join(",");if(d.hasOwnProperty(r))p=d[r];else{q=c();D[q.id]=q;p=new l;p.id=q.id;p.key=r;r=0;for(t=k.items.length;r<t;r+=1)y=k.items[r],p.children.push(y),p.childrenHash[y]=!0,s[y]=!0;p.children.sort();d[p.key]=p;f[p.id]=p;j[p.id]=p;s[p.id]=p;u=p.children.slice(0);e(this,b.replacementItem||a,function(a){!p.childrenHash[a]&&null!=f[a]&&(w=!0,e(this,a,function(a){if(!p.childrenHash[a])return w=!1,1;if(!s.hasOwnProperty(a))return 2}),w&&u.push(a));
return 2});m(b.replacementItem||a,u,p.id,q,E,G,v,F,!1);if(1>=(F[a]||0)&&null==b.replacementItem)b.replacementItem=p.id}if(p.id!=h&&(u=p.children.slice(0),e(this,i.replacementItem||h,function(a){null!=f[a]&&!p.childrenHash[a]&&(w=!0,e(this,a,function(a){return!p.childrenHash[a]?(w=!1,1):(s.hasOwnProperty(a),2)}),w&&u.push(a));return 2}),m(i.replacementItem||h,u,p.id,null,E,G,v,F,!1),1>=(F[h]||0)&&null==i.replacementItem))i.replacementItem=p.id}})})));g=j}}},eliminateManyToMany:function(a){var c,d;
for(c in v)v.hasOwnProperty(c)&&1<(F[c]||0)&&b(this,v,c,function(b){if(1<(G[b]||0))d=a(),n(c,[b],d.id,d)})},groupBy:function(a,b,c){if(null!=c){var d={},e;for(e in D){var f=F[e]||0;if(1>=(G[e]||0)&&1>=f){var f=A(e),g=u(e),h=f+" * "+g;d.hasOwnProperty(h)||(d[h]=new x(f,g));d[h].ids.push(e);d[h].nodes.push(D[e])}}for(h in d)if(d.hasOwnProperty(h)&&(e=d[h],e.ids.length>=b&&c.call(a,e.parentid,e.childid,e.ids,e.nodes)))break}},getPlanarFamily:function(b){var c=new a.common.family,d,f;b.loopLevels(this,
function(g){var h=new a.common.LinkedHashItems,i={},m={},j=[];b.loopLevelItems(this,g,function(a){e(this,a,function(c){var d=b.getItemPosition(c),e=new r(a,c);m[e.key]=e;var f=[];h.isEmpty()?h.add(d,[e]):(h.iterateBack(function(b,c){if(c<d)return h.insertAfter(c,d,[e]),!0;if(c==d)return b.push(e),!0;for(var g=0,i=b.length;g<i;g+=1){var m=b[g];m.parentid!=a&&f.push(m)}}),h.startKey()>d&&h.unshift(d,[e]));i[e.key]=f;for(var c=0,g=f.length;c<g;c+=1)i[f[c].key].push(e);return 2});if(1==t(a)){var c=u(a);
1==w(c)&&(c=new r(a,c),j.push(c.key))}});var g=[],n,k;for(k in i){n=i[k];var l=n.length;null!=g[l]?g[l].push(k):g[l]=[k]}l={};g.unshift(j);for(var p=0,q=g.length;p<q;p+=1){var s=g[p];if(null!=s){d=0;for(f=s.length;d<f;d+=1)if(k=s[d],!l.hasOwnProperty(k)){l[k]=!0;n=m[k];null==c.node(n.parentid)&&c.add(null,n.parentid,{});null==c.node(n.childid)?c.add([n.parentid],n.childid,{}):c.adopt([n.parentid],n.childid);n=i[k];k=0;for(var v=n.length;k<v;k+=1)l[n[k].key]=!0}}}});return c},getFamilyWithoutGrandParentsRelations:function(){var d=
new a.common.family,e={},f=[],g=0,h;for(h in E)E.hasOwnProperty(h)&&b(this,E,h,function(a){var b=e[h];null==b&&(b={},e[h]=b);b.hasOwnProperty(a)||(b=new s(h,a,g),f.push(b),e[h][a]=b)});for(;0<f.length;){for(var i=[],g=g+1,m=0,n=f.length;m<n;m+=1){var j=f[m];h=j.to;E.hasOwnProperty(h)&&b(this,E,h,function(a){var b=e[j.from];null==b&&(b={},e[j.from]=b);if(b.hasOwnProperty(a))b[a].distance=g;else{var c=new s(h,a,g);i.push(c);b[a]=c}})}f=i}c(this,function(a,c){var f=[];b(this,E,a,function(b){0===e[a][b].distance&&
f.push(b)});d.add(f,a,c)});return d},getGraph:function(){var c=a.common.graph(),d;for(d in v)v.hasOwnProperty(d)&&b(this,v,d,function(a){var b=c.edge(d,a);null==b&&(b=new p({}),c.addEdge(d,a,b))});return c},removeNode:function(a){null!=D[a]&&(b(this,v,a,function(b){delete E[b][a];G[b]-=1;G[b]||(delete E[b],delete G[b],null==z[null]&&(z[null]={},y[null]=0),z[null][b]||(z[null][b]=!0,y[null]+=1))}),b(this,E,a,function(b){delete v[b][a];F[b]-=1;F[b]||(delete v[b],delete F[b])}),null!=z[null]&&null!=
z[null][a]&&(delete z[null][a],y[null]-=1,y[null]||(delete z[null],delete y[null])),delete v[a],delete F[a],delete E[a],delete G[a],delete D[a])},removeRelation:function(a,b){var c=!1;null!=D[a]&&null!=D[b]&&(c=d(a,b)||d(b,a));return c},node:function(a){return D[a]},loop:c,loopLevels:function(a,c,d){function e(){this.items={};this.minimumLevel=null}function f(a,b,c){var d=l[b];d||(d=new e,l[b]=d);d.addItemToLevel(a,c);u=null==u?c:Math.min(u,c);n[a]=c;i[a]=!0}var g=[],h={},i={},m=[],n={},l={},p,q,
r,s,t,u=null;r=c?j:k;var w,y,x,A,z,B,F,G;e.prototype.addItemToLevel=function(a,b){var c=this.items[b];c?c.push(a):(c=[a],this.items[b]=c);this.minimumLevel=null==this.minimumLevel?b:Math.min(this.minimumLevel,b)};if(null!=d){r(this,function(a,b,c){g.push(a);h[a]=c});r=0;for(w=g.length;r<w;r+=1)if(p=g[r],null==i[p]){m.push(p);for(f(p,r,0);0<m.length;){z=A=x=null;B=!c;F=[];p=0;for(s=m.length;p<s;p+=1)t=m[p],y=n[t],G=!1,c?(b(this,E,t,function(a){var b;if(!i[a]&&(G=!0,b=h[a],null==x||!B||x<b||x==b&&z>
y-1))x=b,A=a,z=y-1,B=!0}),b(this,v,t,function(a){var b;if(!i[a]&&(G=!0,b=h[a],null==x||!B&&(x>b||x==b&&z<y+1)))x=b,A=a,z=y+1,B=!1})):(b(this,v,t,function(a){var b;if(!i[a]&&(G=!0,b=h[a],null==x||B||x<b||x==b&&z<y+1))x=b,A=a,z=y+1,B=!1}),b(this,E,t,function(a){var b;if(!i[a]&&(G=!0,b=h[a],null==x||B&&(x>b||x==b&&z>y-1)))x=b,A=a,z=y-1,B=!0})),G&&F.push(t);null!=A&&(F.push(A),f(A,r,z));m=F}}m=!0;for(c=u;m;){p={};m=!1;for(q in l)if(l.hasOwnProperty(q)&&(r=l[q],s=r.items[r.minimumLevel-u+c],null!=s)){p[q]=
r;m=!0;r=0;for(w=s.length;r<w;r+=1)if(t=s[r],d.call(a,t,D[t],c-u))return m=!1,!0}l=p;c+=1}}},loopTopo:j,loopTopoReversed:k,loopChildren:e,loopParents:h,findLargestRoot:function(){var a=null,b,c={},d={},e;b=null;k(this,function(f,g){c.hasOwnProperty(f)||(c[f]={},d[f]=0);c[f][f]=!0;d[f]+=1;e=!0;h(this,g.id,function(a){var b,g;e=!1;c.hasOwnProperty(a)||(c[a]={},d[a]=0);if(!d[a]&&1==G[f])c[a]=c[f],d[a]=d[f];else for(g in b=c[f],b)b.hasOwnProperty(g)&&(c[a][g]=!0,d[a]+=1);return 2});if(e&&(!b||d[f]>b))b=
d[f],a=f});return a},loopRoots:function(a,b){var c=null,d,e=0,f={},g={},i,m={},n={},j,l,p,q,r,s,t;k(this,function(a,b){f.hasOwnProperty(a)||(f[a]={},g[a]=0);f[a][a]=!0;g[a]+=1;i=!0;h(this,b.id,function(b){var c,d;i=!1;f.hasOwnProperty(b)||(f[b]={},g[b]=0);if(!g[b]&&1==G[a])f[b]=f[a],g[b]=g[a];else for(d in c=f[a],c)c.hasOwnProperty(d)&&!f[b][d]&&(f[b][d]=!0,g[b]+=1);return 2});i&&(m[a]=!0,e+=1)});q={};for(p in m)if(m.hasOwnProperty(p))for(l in d=f[p],d)d.hasOwnProperty(l)&&(q[l]||(q[l]=[]),q[l].push(p.toString()));
for(;0<e;){d=null;for(j in m)if(m.hasOwnProperty(j)&&(!d||g[j]<d))d=g[j],c=j;if(null!=c){null!=b&&b.call(a,c,D[c]);d=f[c];for(l in d)if(d.hasOwnProperty(l)&&!n[l]){p=q[l];s=0;for(t=p.length;s<t;s+=1)r=p[s],g[r]-=1;n[l]=!0}delete m[c];e-=1}}},hasNodes:function(){return!a.common.isEmptyObject(D)},hasCommonChild:function(a){var c=!1,d,e,f,g,h,i,m;d={};g=f=0;for(h=a.length;g<h;g+=1)i=a[g],null!=D[i]&&!d[i]&&(d[i]=!0,f+=1);e={};for(i in d)d.hasOwnProperty(i)&&b(this,v,i,function(a){e[a]=e[a]?e[a]+1:1});
for(m in e)if(e.hasOwnProperty(m)&&null!=E[m]&&(G[m]||0)==e[m]&&e[m]==f){c=!0;break}return c},loopNeighbours:function(a,b,c){var d={};null!=c&&(e(this,b,function(b,e){d.hasOwnProperty(b)||(d[b]=null,c.call(a,b,e,1)&&(d[b]=2,h(this,b,function(b,e){d.hasOwnProperty(b)||(d[b]=null,c.call(a,b,e,2)&&(d[b]=2));return d[b]})));return d[b]}),h(this,b,function(b,f){d.hasOwnProperty(b)||(d[b]=null,c.call(a,b,f,1)&&(d[b]=2,e(this,b,function(b,e){d.hasOwnProperty(b)||(d[b]=!0,c.call(a,b,e,2)&&(d[b]=2));return d[b]})));
return d[b]}))},countChildren:t,countParents:w,firstParent:A,firstChild:u,validate:function(a){function d(a){var b=0,c;if(null!=a)for(c in a)a.hasOwnProperty(c)&&(b+=1);return b}var e,f;c(this,function(c){b(this,v,c,function(b){if(!E.hasOwnProperty(b)||!E[b].hasOwnProperty(c))return null!=a&&(a.message="Child #"+b+" does not reference parent #"+c),!1});b(this,E,c,function(b){if(!v.hasOwnProperty(b)||!v[b].hasOwnProperty(c))return null!=a&&(a.message="Parent #"+b+" does not reference child #"+c),!1})});
for(e in E)if(E.hasOwnProperty(e)){if((G[e]||0)!=d(E[e]))return null!=a&&(a.message="Parents count for item #"+e+" missmatch."),!1;if(E.hasOwnProperty(e)&&!D.hasOwnProperty(e))return null!=a&&(a.message="Orphant parents for item #"+e),!1}for(f in v)if(v.hasOwnProperty(f)){if((F[f]||0)!=d(v[f]))return null!=a&&(a.message="Children count for item "+f+" missmatch."),!1;if(v.hasOwnProperty(f)&&!D.hasOwnProperty(f))return null!=a&&(a.message="Orphant children of item "+f),!1}for(f in z)if(z.hasOwnProperty(f)){if((y[f]||
0)!=d(z[f]))return null!=a&&(a.message="Root children count for item @"+f+" missmatch."),!1;b(this,z,f,function(b){if(!D.hasOwnProperty(b))return null!=a&&(a.message="Child #"+b+"of root #"+f+" does not exists."),!1})}return!0},hasLoops:function(){var a=B();j(this,function(b){a.removeNode(b)});return a.hasNodes()},clone:B,BREAK:1,SKIP:2}};a.common.FamilyAlignment=function(g,b,d,c){function f(b,c){var d=b[c];null==d&&(d=new a.common.FamilyMargins,b[c]=d);return d}function e(a,b,c,d,e,f,g,h){var j=
f,w=f;c.loopSiblings(this,b,function(a){a=g.getItemPosition(a);j=Math.min(j,a);w=Math.max(w,a)});for(var u=f-1;u>=j;u-=1){var A=g.getItemAtPosition(d,u);if(!a.hasOwnProperty(A)){var x=g.getItemAtPosition(d,u+1);a[A]=a[x]-(i[A]/2+(h[x]||0)+i[x]/2)}}for(u=f+1;u<=w;u+=1)A=g.getItemAtPosition(d,u),a.hasOwnProperty(A)||(x=g.getItemAtPosition(d,u-1),a[A]=a[x]+(i[x]/2+(h[A]||0)+i[A]/2));A=g.getItemAtPosition(d,j);x=a[A]-i[A]/2;A=g.getItemAtPosition(d,w);x+=a[A]+i[A]/2;x/=2;w=j=null;c.loopNonSiblings(this,
b,function(a){a=g.getItemPosition(a);j=null!=j?Math.min(j,a):a;w=null!=w?Math.max(w,a):a});c=0;for(u=j;u<=w;u+=1)b=g.getItemAtPosition(e,u),c+=i[b],u>j&&(c+=h[b]||0);u=x-c/2;b=g.getItemAtPosition(e,j);a.hasOwnProperty(b)||(a[b]=u+i[b]/2);for(u=j+1;u<=w;u+=1)b=g.getItemAtPosition(e,u),a.hasOwnProperty(b)||(x=g.getItemAtPosition(e,u-1),a[b]=a[x]+(i[x]/2+(h[b]||0)+i[b]/2))}var h,i={},j;null!=c&&d.loopItems(this,function(a,b){i[a]=c.call(g,a,b)});j=function(b,c){var d={},e={},g=null;c.loopLevelsReversed(this,
function(h){var j=new a.common.FamilyMargins;null!=g&&(g.add(0,Number.MAX_VALUE),j.merge(g,0));var s=g=j;c.loopLevelItems(this,h,function(a,g,h){var j=f(e,a);j.add(i[a],h);switch(b.countParents(a)){case 0:null!=s&&(d[a]=s.attach(j));break;case 1:b.loopParents(this,a,function(c){c=f(e,c);d[a]=c.merge(j);s=c;return b.BREAK});break;default:var p=0,q=null,r=null,y={};b.loopParents(this,a,function(a,d,e){if(0<e)return b.BREAK;p+=i[a];d=c.getItemPosition(a);q=null==q?d:Math.min(q,d);r=null==r?d:Math.max(r,
d);y[d]=a});g=-p/2;for(h=q;h<=r;h+=1){var v=y[h],g=g+i[v]/2,F=f(e,v);F.attach(j,-g);s=F;g+=i[v]/2}}})});return d}(b,d);h=function(b,c,d){var f={},g=a.common.getFamilyUnits(b),h={};c.loopLevels(this,function(a){c.loopLevelItems(this,a,function(b,j,k){if(!f.hasOwnProperty(b)){j=0;if(0===k)null!=d[b]&&(j+=d[b]+i[b]/2);else var u=c.getItemAtPosition(a,k-1),j=j+(f[u]+i[u]/2+(d[b]||0)+i[b]/2);f[b]=j}j=g[b];if(null!=j)for(u=0;u<j.length;u+=1){var A=j[u];h.hasOwnProperty(A.id)||(h[A.id]=!0,e(f,b,A,a,a+1,
k,c,d))}})});return f}(b,d,j);return{getOffset:function(a){return h[a]}}};a.common.FamilyMargins=function(){function a(b,d,c,f){this.left=b;this.right=d;this.leftIndex=c;this.rightIndex=f}this.items=[];this.add=function(b,d,c,f){switch(arguments.length){case 2:this.items.push(new a(-b/2,b/2,d,d));break;case 4:this.items.push(new a(b,d,c,f))}};this.merge=function(b,d){for(var c=this.getDistanceTo(b),f=0,e=0,h=this.items.length,i=b.items.length,j=Math.min(h,i),k=Math.max(h,i),m=0;m<j;m+=1){var n=this.items[h-
1-m],l=b.items[i-1-m];0===m&&(e=n.right-n.left+(c||0)+(d||0)+l.right-l.left,f=e/2+n.left,e=e/2-l.right);n.left-=f;n.right=l.right+e;n.rightIndex=l.rightIndex;this.items[k-1-m]=n}for(m=j;m<k;m+=1)n=this.items[h-1-m],l=b.items[i-1-m],null==n?this.items[k-1-m]=new a(l.left+e,l.right+e,l.leftIndex,l.rightIndex):(n.left-=f,n.right-=f);return c};this.attach=function(b,d){for(var c=this.getDistanceTo(b),f=d||0,e=this.items.length,h=b.items.length,i=Math.min(e,h),j=Math.max(e,h),k=0;k<i;k+=1){var m=this.items[e-
1-k],n=b.items[h-1-k];0===k&&(f=m.right+(c||0)+(d||0)-n.left);m.right=n.right+f;m.rightIndex=n.rightIndex;this.items[j-1-k]=m}for(k=i;k<j;k+=1)m=this.items[e-1-k],null==m&&(n=b.items[h-1-k],this.items[j-1-k]=new a(n.left+f,n.right+f,n.leftIndex,n.rightIndex));return c};this.getDistanceTo=function(a){var d=null,c=0,f=this.items.length,e=a.items.length,g=Math.min(f,e);if(0<g){for(var i=0;i<g;i+=1){var j=this.items[f-1-i],k=a.items[e-1-i];0===i?d=c=j.right-k.left:j.rightIndex<k.leftIndex&&(d=Math.max(d,
j.right-k.left))}d-=c}return d};this.loop=function(a,d){if(null!=d)for(var c=0,f=this.items.length;c<f;c+=1){var e=this.items[f-1-c];if(d.call(a,c,e.left,e.right,e.leftIndex,e.rightIndex))break}};this.getLeft=function(a){var d=this.items.length-1;if(d>=a)return this.items[d-a].left}};a.common.FibonacciHeap=function(a){function b(a){this.key=a.key;this.priority=a.priority;this.item=a.item}function d(a,b,c){this.key=a;this.priority=b;this.item=c;this.degree=0;this.marked=!1;this.right=this.left=this.child=
this.parent=null}function c(a,b){var c=p[a.right];b.right=a.right;b.left=a.key;a.right=b.key;c.left=b.key}function f(a){var b=p[a.left],c=p[a.right];b.right=c.key;c.left=b.key;a.right=a.key;a.left=a.key}function e(){var a=null;null!=l&&(a=new b(p[l]));return a}function h(){var a=e();if(null!=a){var b=p[l],c=p[b.right];if(null!=b.child){var d=p[b.child],g=p[d.left];b.right=d.key;c.left=g.key;d.left=b.key;g.right=c.key;f(b);delete p[b.key];l=null;i(d.key)}else f(b),delete p[b.key],l=null,c.key!=b.key&&
i(c.key)}return a}function i(b){var c=[],d,e={};for(d=b;!e.hasOwnProperty(d);){var b=p[d],f=b.right;e[d]=!0;for(b.parent=null;null!=(d=c[b.degree]);)(a?b.priority>d.priority:b.priority<d.priority)?j(b,d):(j(d,b),b=d),c[b.degree-1]=null;c[b.degree]=b;if(null==l||null==p[l]||(a?p[l].priority<=b.priority:p[l].priority>=b.priority))l=b.key;d=f}}function j(b,d){b.degree+=1;f(d);var e=p[b.child];if(null!=e){if(c(e,d),a?e.priority<d.priority:e.priority>d.priority)b.child=d.key}else b.child=d.key;d.parent=
b.key}function k(b,c){var d=p[b];if(a?d.priority>c:d.priority<c)throw"Priority increase is not supported";d.priority=c;if(null!=d.parent){var e=p[d.parent];if(a?e.priority<d.priority:e.priority>d.priority)m(e,d),n(e)}if(a?p[l].priority<d.priority:p[l].priority>d.priority)l=d.key}function m(a,b){b.marked=!1;b.parent=null;b.right==b.key?a.child=null:(a.child=b.right,f(b));a.degree-=1;c(p[l],b)}function n(a){if(null!=a.parent)if(a.marked){var b=p[a.parent];m(b,a);n(b)}else a.marked=!0}var l=null,p={};
return{add:function(b,e,f){if(p.hasOwnProperty(b))throw"Duplicate keys are not supported!";e=new d(b,e,f);p[b]=e;if(null==l)e.left=b,l=e.right=b;else if(f=p[l],c(f,e),a?f.priority<e.priority:f.priority>e.priority)l=b},getPriority:function(a){var b=null;p.hasOwnProperty(a)&&(b=p[a].priority);return b},setPriority:k,heapRoot:e,extractRoot:h,deleteKey:function(b){k(b,a?Infinity:-1);h()},validate:function(){var a=0,b;for(b in p)if(p.hasOwnProperty(b)){var c=p[b],a=a+1;if(null!=c.child){if(!p.hasOwnProperty(c.child))throw"Child does not exists";
var d=p[c.child];if(d.parent!=c.key)throw"Child references wrong parent";}if(null!=c.parent&&!p.hasOwnProperty(c.parent))throw"Parent does not exists";if(null!=c.left){if(!p.hasOwnProperty(c.left))throw"Left does not exists";d=p[c.left];if(d.right!=c.key)throw"Left references wrong right";}if(null!=c.right){if(!p.hasOwnProperty(c.right))throw"Right does not exists";d=p[c.right];if(d.left!=c.key)throw"Right references wrong left";}}if(null==l&&0<a)throw"Orphans";if(null!=l){if(!p.hasOwnProperty(l))throw"Root node does not exists";
c=p[l];if(null!=c.parent)throw"Root node has parent reference";b=[l];c={};for(d=0;0<b.length;){for(var e=[],f=0,g=b.length;f<g;f+=1)for(var h=p[b[f]];!c.hasOwnProperty(h.key);)c[h.key]=!0,d+=1,null!=h.child&&e.push(h.child),h=p[h.right];b=e}if(a!=d)throw"Tree has loops or orpants";}}}};a.common.getCrossingRectangles=function(g,b,d){function c(a,b,c,d){this.isStart=a;this.index=b;this.x=c;this.rect=d}function f(){this.count=0;this.rectangles={};this.add=function(a){this.count+=1;this.rectangles[a]=
!0};this.remove=function(a){this.count-=1;delete this.rectangles[a];return 0==this.count}}function e(a,c,e,f,h){a.loopForward(this,c,function(a,c){if(a>e)return!0;for(var i in c.rectangles)if(c.rectangles.hasOwnProperty(i)){var j=f>i?f+"-"+i:i+"-"+f;m.hasOwnProperty(j)||(m[j]=!0,d.call(g,h,b[i]))}})}if(null!=d){for(var h=[],i=0;i<b.length;i+=1){var j=b[i];h.push(new c(1,i,j.x,j));h.push(new c(0,i,j.right(),j))}h.sort(function(a,b){return a.x==b.x?b.isStart-a.isStart:a.x-b.x});for(var j=a.common.SortedList(),
k={},m={},i=0;i<h.length;i+=1){var n=h[i],l=[n.rect.y,n.rect.bottom()];if(1==n.isStart){e(j,l[0],l[1],n.index,n.rect);for(var p=0,q=l.length;p<q;p+=1){var r=l[p],s=k[r];null==s&&(s=new f,k[r]=s,j.add(r,s));s.add(n.index)}}else{p=0;for(q=l.length;p<q;p+=1)r=l[p],s=k[r],s.remove(n.index)&&(delete k[r],j.remove(r));e(j,l[0],l[1],n.index,n.rect)}}}};a.common.getFamilyUnits=function(a){function b(){this.toIndex=this.fromIndex=0;this.items=[];this.hash={}}function d(a){this.id=a;this.parents=new b;this.children=
new b;this.loopSiblings=function(a,b,c){this._loop(a,this.parents.hash.hasOwnProperty(b)?this.parents.items:this.children.items,c)};this.loopNonSiblings=function(a,b,c){this._loop(a,!this.parents.hash.hasOwnProperty(b)?this.parents.items:this.children.items,c)};this.loop=function(a,b){this._loop(a,this.parents.items,b);this._loop(a,this.children.items,b)};this._loop=function(a,b,c){if(null!=c)for(var d=0,e=b.length;d<e;d+=1)c.call(a,b[d])};this.addParent=function(a){this._add(a,this.parents)};this.addChild=
function(a){this._add(a,this.children)};this._add=function(a,b){b.hash.hasOwnProperty(a)||(b.items.push(a),b.hash[a]=!0)}}var c=[],f={},e,h;e=0;a.loop(this,function(b){var h=a.countChildren(b);if(0<h&&!f.hasOwnProperty(b)){var i=new d(e);e+=1;i.addParent(b);a.loopChildren(this,b,function(b){i.addChild(b);1==h&&a.loopParents(this,b,function(b){i.addParent(b);f[b]=i;return a.SKIP});return a.SKIP});c.push(i);f[b]=i}});var i={};e=0;for(h=c.length;e<h;e+=1){var j=c[e];j.loop(this,function(a){i.hasOwnProperty(a)?
i[a].push(j):i[a]=[j]})}return i};a.common.getLiniarBreaks=function(g){function b(b,d){var e=0,f=(c[d]-c[b]+g[b])/(d-b+1),h=a.common.binarySearch(g,function(a){return f-a},b,d);h.item<=f?(e+=f*(h.index+1-b)-(c[h.index]-c[b]+g[b]),e+=c[d]-c[h.index]-f*(d-h.index)):(e+=f*(h.index-b)-(c[h.index]-c[b]-g[h.index]+g[b]),e+=c[d]-c[h.index]+g[h.index]-f*(d-h.index+1));return e}function d(a,c){var d;d=0+b(0,a);c>a+1&&(d+=b(a+1,c-1));return d+=b(c,f-1)}for(var c=[],f=g.length,e=0,h=0;h<f;h+=1)e+=g[h],c[h]=
e;for(var e=0,h=f-1,i=d(e,h);e<h+1;){var j=d(e+1,h),k=d(e,h-1);if(j<k){if(j>=i)break;e+=1;i=j}else{if(k>=i)break;h-=1;i=k}}return[e,h-1,f-1]};a.common.getMergedRectangles=function(g,b,d){function c(a,b){this.start=a;this.startHead=null;this.end=b;this.endHead=null;this.overlap=function(a){return!(this.end<a.start||this.start>a.end)}}function f(a,b){this.x=a;this.ranges=b}function e(a,b){this.isHead=a;this.list=b;B.hasOwnProperty(b)||(B[b]=[]);B[b].push(this);this.add=function(a){a.from.equalTo(a.to)||
(this.isHead?x[this.list].add(z,a):x[this.list].unshift(z,a),z+=1)};this.getTail=function(){return new e(!this.isHead,this.list)};this.attach=function(a){if(this.list!=a.list){x[this.list].attach(x[a.list]);var b=B[a.list];delete B[a.list];if(null!=b)for(var c=0,d=b.length;c<d;c+=1){var e=b[c];e!=a&&(e.list=this.list,B[this.list].push(e))}}}}function h(b){x.push(new a.common.LinkedHashItems);return new e(b,x.length-1)}var i,j,k,m,n;b.sort(function(a,b){return a.x==b.x?a.y-b.y:a.x-b.x});var l=[],p=
{};i=0;for(j=b.length;i<j;i+=1){k=b[i];m=[k.x,k.right()];for(var q=0;q<m.length;q+=1){var r=m[q];n=p[r];null==n&&(n={x:r,add:[],remove:[]},p[r]=n,l.push(n));r==k.x?n.add.push(i):n.remove.push(i)}}l.sort(function(a,b){return a.x-b.x});q={};p=[];p.push(new f(null,[]));i=0;for(j=l.length;i<j;i+=1){n=l[i];k=0;for(m=n.add.length;k<m;k+=1)q[n.add[k]]=!0;k=0;for(m=n.remove.length;k<m;k+=1)delete q[n.remove[k]];var r=[],s;for(s in q)q.hasOwnProperty(s)&&r.push(b[s]);r.sort(function(a,b){return a.y-b.y});
var t=[],w=null,u=null;k=0;for(m=r.length;k<m;k+=1){var A=r[k];null==w?(w=A.y,u=A.bottom()):u<A.y?(t.push(new c(w,u)),w=A.y,u=A.bottom()):u=Math.max(u,A.bottom())}null!=w&&t.push(new c(w,u));p.push(new f(n.x,t))}var x=[],B={},z=1;i=1;for(j=p.length;i<j;i+=1){b=p[i-1];n=p[i];for(k=s=0;s<b.ranges.length||k<n.ranges.length;)if(m=s<b.ranges.length?b.ranges[s]:null,q=k<n.ranges.length?n.ranges[k]:null,null==q){l=[new a.common.Point(b.x,m.end),new a.common.Point(n.x,m.end),new a.common.Point(n.x,m.start),
new a.common.Point(b.x,m.start)];for(t=1;t<l.length;t+=1)m.endHead.add(new a.common.Vector(l[t-1],l[t]));m.endHead.attach(m.startHead);s+=1}else if(null==m)q.endHead=h(!0),q.endHead.add(new a.common.Vector(new a.common.Point(n.x,q.start),new a.common.Point(n.x,q.end))),q.startHead=q.endHead.getTail(),k+=1;else if(q.overlap(m)){l=[new a.common.Point(b.x,m.start),new a.common.Point(n.x,m.start),new a.common.Point(n.x,q.start)];for(t=1;t<l.length;t+=1)m.startHead.add(new a.common.Vector(l[t],l[t-1]));
q.startHead=m.startHead;for(t=!0;t;)if(t=!1,m.end>q.end)r=k+1<n.ranges.length?n.ranges[k+1]:null,null!=r&&r.overlap(m)&&(t=new a.common.Point(n.x,r.start),w=new a.common.Point(n.x,q.end),q.endHead=h(!0),q.endHead.add(new a.common.Vector(t,w)),r.startHead=q.endHead.getTail(),k+=1,q=r,t=!0);else if(r=s+1<b.ranges.length?b.ranges[s+1]:null,null!=r&&r.overlap(q)){l=[new a.common.Point(b.x,m.end),new a.common.Point(n.x,m.end),new a.common.Point(n.x,r.start),new a.common.Point(b.x,r.start)];for(t=1;t<l.length;t+=
1)m.endHead.add(new a.common.Vector(l[t-1],l[t]));m.endHead.attach(r.startHead);s+=1;m=r;t=!0}l=[new a.common.Point(b.x,m.end),new a.common.Point(n.x,m.end),new a.common.Point(n.x,q.end)];for(t=1;t<l.length;t+=1)m.endHead.add(new a.common.Vector(l[t-1],l[t]));q.endHead=m.endHead;s+=1;k+=1}else if(m.start<q.start){l=[new a.common.Point(b.x,m.end),new a.common.Point(n.x,m.end),new a.common.Point(n.x,m.start),new a.common.Point(b.x,m.start)];for(t=1;t<l.length;t+=1)m.endHead.add(new a.common.Vector(l[t-
1],l[t]));m.endHead.attach(m.startHead);s+=1}else q.endHead=h(!0),q.endHead.add(new a.common.Vector(new a.common.Point(n.x,q.start),new a.common.Point(n.x,q.end))),q.startHead=q.endHead.getTail(),k+=1}if(null!=d)for(i=0;i<x.length;i+=1)B.hasOwnProperty(i)&&(j=x[i],l=[],j.iterate(function(a){0==l.length&&l.push(a.from);l.push(a.to)}),d.call(g,l))};a.common.getMinimumCrossingRows=function(a,b,d){var c=null,f=null;if(null!=d){b.sort(function(a,b){return a.y-b.y});for(var e=0;e<b.length;e+=1){var h=b[e],
i=h.bottom();null===c?(c=h.y,f=i):h.y>=f?(d.call(a,c),c=h.y,f=i):(h.y>c&&(c=h.y),i<f&&(f=i))}null!==c&&d.call(a,c)}};a.common.graph=function(){function g(a,b,d,e){var f=[],g,l,p,q;f.push(b);d[b]=!0;if(null!=e)for(;0<f.length;){b=[];l=0;for(p=f.length;l<p;l+=1)for(q in g=f[l],e.call(a,g),g=c[g],g)g.hasOwnProperty(q)&&!d.hasOwnProperty(q)&&(d[q]=!0,b.push(q));f=b}}function b(a,b){var d=null,e,f,g,l=0,p=null;for(e in c)if(c.hasOwnProperty(e)){f=c[e];l=0;for(g in f)f.hasOwnProperty(g)&&(l+=b.call(a,f[g],
e,g));if(l>p||null==p)d=e,p=l}return d}function d(a,d,g,k,m){var n={},l,p=[],q={},r=0,s,t,w,u,A,x;if(null!=g&&null!=k&&(null==d&&(d=b(a,g)),null!=d)){k.call(a,d);n[d]=!0;r+=1;for(q[d]=null;0<r;){p=[];t=s=null;w={};for(l in n)if(n.hasOwnProperty(l)){u=c[l];d=!1;for(A in u)if(u.hasOwnProperty(A)&&!q.hasOwnProperty(A))switch(x=g.call(a,u[A],l,A),d=!0,m){case f:null==w[A]&&(w[A]=0);w[A]+=x;if(!t||w[A]>t)s=A,t=w[A];break;case e:if(w[A]=null==w[A]?x:Math.min(w[A],x),!t||w[A]<t)s=A,t=w[A]}d||p.push(l)}if(null==
s)break;else n[s]=!0,r+=1,q[s]=!0,k.call(a,s);d=0;for(s=p.length;d<s;d+=1)delete n[p[d]],r-=1}}}var c={},f=1,e=2;return{addEdge:function(a,b,d){if((null==c[a]||null==c[a][b])&&null!=d)null==c[a]&&(c[a]={}),c[a][b]=d,null==c[b]&&(c[b]={}),c[b][a]=d},edge:function(a,b){var d=null;null!=c[a]&&c[a][b]&&(d=c[a][b]);return d},hasNode:function(a){return c.hasOwnProperty(a)},loopNodes:function(a,b,d){a={};if(null==b)for(b in c)c.hasOwnProperty(b)&&(a.hasOwnProperty[b]||g(this,b,a,d));else g(this,b,a,d)},
loopNodeEdges:function(a,b,d){var e;if(null!=d&&(b=c[b],null!=b))for(e in b)b.hasOwnProperty(e)&&d.call(a,e,b[e])},getSpanningTree:function(b,d){var e=a.common.tree(),f=a.common.FibonacciHeap(!0),g,n={},l,p,q,r;f.add(b,0,null);for(n[b]=null;null!=(g=f.extractRoot());){l=c[g.key];for(p in l)l.hasOwnProperty(p)&&!e.node(p)&&(q=null!=d?d(l[p]):l[p],r=f.getPriority(p),null==r?(f.add(p,q,null),n[p]=g.key.toString()):r<=q&&(f.setPriority(p,q),n[p]=g.key.toString()));e.add(n[g.key],g.key.toString(),{})}return e},
getTotalWeightGrowthSequence:function(a,c,e){var g=b(a,c);d(a,g,c,e,f)},getMinimumWeightGrowthSequence:function(a,b,c,f){d(a,b,c,f,e)},getShortestPath:function(b,d,e,f,g){var n=a.common.FibonacciHeap(!1),l={},p={},q,r,s={},t=0,w=0,l=0;for(r=e.length;l<r;l+=1)q=e[l],s.hasOwnProperty(q)||(t+=1,s[q]=!0);n.add(d,0,null);for(p[d]=null;null!=(d=n.extractRoot());){e=c[d.key];for(q in e)e.hasOwnProperty(q)&&(r=d.priority+(null!=f?f.call(b,e[q],d,q):1),l=n.getPriority(q),null!=l?l>r&&(n.setPriority(q,r),p[q]=
d.key):p.hasOwnProperty(q)||(n.add(q,r,null),p[q]=d.key));if(s.hasOwnProperty(d.key)){l=[];for(e=d.key;null!=e;)l.push(e),e=p[e];g.call(b,l,d.key);w+=1;if(w>=t)break}}}}};a.common.LCA=function(g){var b=[],d=[],c={},f;(function(){var e=0;g.loopEulerWalk(this,function(a,f,g){b.push(a);d.push(g);c.hasOwnProperty(a)||(c[a]=e);e+=1});f=a.common.RMQ(d)})();return{getLowestCommonAncestor:function(a,d){var g=c[a],j=c[d],g=g<j?f.getRangeMinimumIndex(g,j):f.getRangeMinimumIndex(j,g);return b[g]}}};a.common.LinkedHashItems=
function(){function a(b,c){if(e.hasOwnProperty(b))throw"Duplicate segments are not supported!";e[b]=c;h[b]=null;null==k?(j=b,i[b]=null):(h[k]=b,i[b]=k);k=b}function b(a,b){if(e.hasOwnProperty(a))throw"Duplicate segments are not supported!";e[a]=b;i[a]=null;null==j?(k=a,h[a]=null):(i[j]=a,h[a]=j);j=a}function d(c,d,f){if(e.hasOwnProperty(d))throw"Duplicate segments are not supported!";if(null==c)b(d,f);else{var j=h[c];null==j?a(d,f):(e[d]=f,h[c]=d,h[d]=j,i[j]=d,i[d]=c)}}function c(a,b,c,d){var f;null==
c&&(c=a?j:k);if(null!=b)for(;null!=c;){f=e[c];if(null!=f&&b(f,c))break;c=c==d?null:a?h[c]:i[c]}}function f(a,b,d){c(!0,a,b,d)}var e={},h={},i={},j=null,k=null;return{add:a,item:function(a){return e[a]},nextKey:function(a){return h[a]},prevKey:function(a){return i[a]},startKey:function(){return j},endKey:function(){return k},unshift:b,insertAfter:d,insertBefore:function(a,c,f){if(e.hasOwnProperty(c))throw"Duplicate segments are not supported!";if(null==a||!e.hasOwnProperty(a))throw"Before key should be defined!";
a=i[a];null==a?b(c,f):d(a,c,f)},remove:function(a){var b=i[a],c=h[a];null!=b?h[b]=c:j=c;null!=c?i[c]=b:k=b;delete e[a];delete h[a];delete i[a]},isEmpty:function(){return null==j},attach:function(b){b.iterate(function(b,c){a(c,b)})},iterate:f,iterateBack:function(a,b,d){c(!1,a,b,d)},empty:function(){e={};h={};i={};k=j=null},toArray:function(){var a=[];f(function(b){a.push(b)});return a},validate:function(a){var b,c;for(b in e)if(e.hasOwnProperty(b)&&(!h.hasOwnProperty(b)||!i.hasOwnProperty(b)))return null!=
a&&(a.message="Orphant key found!"),!1;if(!e.hasOwnProperty(j)||!e.hasOwnProperty(k))return null!=a&&(a.message="Start or end values are missing!"),!1;for(b in h)if(h.hasOwnProperty(b)){if(!e.hasOwnProperty(b)||!i.hasOwnProperty(b))return null!=a&&(a.message="Orphant key found!"),!1;if((c=h[b])&&!h.hasOwnProperty(c))return null!=a&&(a.message="Next key not found!"),!1}for(b in i)if(i.hasOwnProperty(b)){if(!e.hasOwnProperty(b)||!h.hasOwnProperty(b))return null!=a&&(a.message="Orphant key found!"),
!1;if((c=i[b])&&!i.hasOwnProperty(c))return null!=a&&(a.message="Prev key not found!"),!1}return!0}}};a.common.mergeSort=function(a,b,d){var c=null,f,e,h,i,j,k,m,n,l,p,q,r;switch(a.length){case 0:c=[];break;default:c=[];for(h=0;h<a.length;h+=1){f=a[h];e=[];k=c.length;m=f.length;j=i=0;q=l=p=n=null;0<k&&(n=c[i],p=!b?n:b(n));0<m&&(l=f[j],q=!b?l:b(l));for(r=null;i<k||j<m;)if(i>=k){if(!d||r!=l)e.push(l),r=l;j+=1;j<m&&(l=f[j],q=!b?l:b(l))}else if(j>=m){if(!d||r!=n)e.push(n),r=n;i+=1;i<k&&(n=c[i],p=!b?n:
b(n))}else if(p<q){if(!d||r!=n)e.push(n),r=n;i+=1;i<k&&(n=c[i],p=!b?n:b(n))}else{if(!d||r!=l)e.push(l),r=l;j+=1;j<m&&(l=f[j],q=!b?l:b(l))}c=e}}return c};a.common.pile=function(){function a(b,d,e,g){this.context=e;this.from=b;this.to=d;this.offset=null;this.direction=g}function b(a,d,e,g,i){if(a>=d.length)return 0;if(e.hasOwnProperty(a))return e[a];for(var j=d[a],k=b(a+1,d,e,g,i),m=a+1;m<d.length&&!(d[m].from>=j.to);)m+=1;d=1+b(m,d,e,g,i);d>k?(e[a]=d,g[a]=m,i[a]=!0):(e[a]=k,g[a]=a+1,i[a]=!1);return e[a]}
var d=[];return{add:function(b,f,e){b<f?d.push(new a(b,f,e,1)):d.push(new a(f,b,e,-1))},resolve:function(a,f){var e,g,i,j,k,m,n=0;if(null!=f){j=d.slice(0);j.sort(function(a,b){return a.from-b.from});for(k=[];0<j.length;){e={};g={};i={};b(0,j,e,g,i);e=[];k[n]=[];for(m=0;g.hasOwnProperty(m);)i[m]&&(e.push(m),k[n].push(j[m])),m=g[m];for(m=e.length-1;0<=m;m-=1)j.splice(e[m],1);n+=1}for(i=0;i<n;i+=1){e=k[i];for(m=0;m<e.length;m+=1)if(g=e[m],f.call(a,g.from,g.to,g.context,i,n,g.direction))return n}}return n}}};
a.common.QuadTree=function(g){function b(a,b,c,d){this.x=a;this.y=b;this.scale=c;this.size=d;this.quadrants=[];this.points=[]}function d(a){var c=a.size/2;a.quadrants=[new b(a.x,a.y,a.scale-1,c),new b(a.x+c,a.y,a.scale-1,c),new b(a.x,a.y+c,a.scale-1,c),new b(a.x+c,a.y+c,a.scale-1,c)];for(var c=0,d=a.points.length;c<d;c+=1){var e=a.points[c];a.quadrants[a.getQuadrantIndex(Math.floor(e.x),Math.floor(e.y))].points.push(e)}a.points=null}var c=Math.max(1,Math.floor(Math.log(g)/Math.log(2))),f=8,e=256,
h=null,h=new b(0,0,f,e);b.prototype.notEnclosed=function(a){return this.x<a.x||this.x+this.size>a.x+a.width||this.y<a.y||this.y+this.size>a.y+a.height?!0:!1};b.prototype.overlaps=function(a){return this.x+this.size<a.x||a.x+a.width<this.x||this.y+this.size<a.y||a.y+a.height<this.y?!1:!0};b.prototype.getQuadrantIndex=function(a,b){var c=this.scale-1;return a>>c&1|(b>>c&1)<<1};return{addPoint:function(a){for(var g=Math.max(Math.floor(a.x),Math.floor(a.y));e<=g;){f+=1;e*=2;var k=new b(0,0,f,e);d(k);
k.quadrants[0]=h;h=k}var g=Math.floor(a.x),k=Math.floor(a.y),m=h;if(0>g||0>k)throw"Negative values are not supported in the quad tree.";for(;(null==m.points||0<m.points.length)&&!(m.scale==c&&null!=m.points);)null!=m.points&&0<m.points.length&&d(m),m=m.quadrants[m.getQuadrantIndex(g,k)];m.points.push(a)},loopArea:function(a,b,c){var d,e,f;if(null!=c)for(var g=[h],q=[];0<g.length||0<q.length;){var r=[],s=[];e=0;for(f=g.length;e<f;e+=1)if(d=g[e],d.overlaps(b))if(d.notEnclosed(b))if(null==d.points)for(var t=
0;4>t;t+=1)r.push(d.quadrants[t]);else for(var t=0,w=d.points.length;t<w;t+=1){var u=d.points[t];if(b.contains(u)&&c.call(a,u))return}else q.push(d);e=0;for(f=q.length;e<f;e+=1)if(d=q[e],null==d.points)for(t=0;4>t;t+=1)s.push(d.quadrants[t]);else{t=0;for(w=d.points.length;t<w;t+=1)if(c.call(a,d.points[t]))return}g=r;q=s}},validate:function(){for(var b=[h];0<b.length;){for(var c=[],d=0,e=b.length;d<e;d+=1){var f=b[d],g=new a.common.Rect(f.x,f.y,f.size,f.size);if(null!=f.points&&0<f.quadrants.length)return!1;
if(null==f.points)for(g=0;4>g;g+=1)c.push(f.quadrants[g]);else for(var p=0,q=f.points.length;p<q;p+=1)if(!g.contains(f.points[p]))return!1}b=c}return!0},getPositions:function(b){for(var c=[],d=[h];0<d.length;){for(var e=[],f=0,g=d.length;f<g;f+=1){var p=d[f],q=new a.common.Rect(p.x,p.y,p.size,p.size);q.context={isHighlighted:!1};null!=b&&(b.overlaps(q)&&null!=p.points&&0<p.points.length)&&(q.context.isHighlighted=!0);c.push(q);for(q=0;4>q;q+=1){var r=p.quadrants[q];null!=r&&e.push(r)}}d=e}return c}}};
a.common.RMQ=function(a){function b(b,e){var f=Math.floor(Math.log(e-b+1)/c);return a[d[b][f]]<=a[d[e-(1<<f)+1][f]]?d[b][f]:d[e-(1<<f)+1][f]}for(var d=[],c=Math.log(2),f,e=0,h=a.length;e<h;e+=1)d[e]=[e];f=1;for(h=a.length;1<<f<h;f+=1)for(e=0;e+(1<<f)-1<h;e+=1)d[e][f]=a[d[e][f-1]]<a[d[e+(1<<f-1)][f-1]]?d[e][f-1]:d[e+(1<<f-1)][f-1];return{getRangeMinimumIndex:b,getRangeMinimum:function(c,d){return a[b(c,d)]}}};a.common.SortedList=function(){function a(b,c){this.value=b;this.context=c;this.right=this.left=
null;this.balance=0}function b(a){var b;if(2==a.balance){var e=a.right;b=e.balance;if(0<=b)d(e,a),1==e.balance?(a.balance=0,e.balance=0):(a.balance=-1,e.balance=1);else{var f=e.left;c(f,e);d(e,a);a.balance=0;switch(f.balance){case 1:e.balance=-1;f.balance=0;break;case 0:f.balance=0;e.balance=0;break;default:f.balance=1,e.balance=0}}}else if(-2==a.balance)if(b=a.left.balance,0>=b)e=a.left,c(e,a),-1==e.balance?(a.balance=0,e.balance=0):(a.balance=1,e.balance=-1);else switch(e=a.left,f=e.right,d(f,e),
c(e,a),a.balance=0,f.balance){case -1:f.balance=0;e.balance=1;break;case 0:f.balance=0;e.balance=0;break;default:f.balance=-1,e.balance=0}return b}function d(a,b){e(a,b);b.right=a.right;a.right=a.left;a.left=b.left;b.left=a}function c(a,b){e(a,b);b.left=a.left;a.left=a.right;a.right=b.right;b.right=a}function f(a,b){var c=null!=a.right?a.right:a.left;null!=b?b.value>a.value?b.left=c:b.right=c:k=c}function e(a,b){var c=a.value;a.value=b.value;b.value=c;c=a.context;a.context=b.context;b.context=c}function h(a,
b,c){if(null!=c){for(var d=[],e=null,e=k;null!=e;)e.value>=b||null==b?(d.push(e),e=e.left):e=e.right;for(;null!=(e=d.pop())&&!c.call(a,e.value,e.context);)for(e=e.right;null!=e;)if(null!=e.left)d.push(e),e=e.left;else{if(c.call(a,e.value,e.context))return;e=e.right}}}function i(a,b,c){if(null!=c){for(var d=[],e=null,e=k;null!=e;)e.value<=b||null==b?(d.push(e),e=e.right):e=e.left;for(;null!=(e=d.pop())&&!c.call(a,e.value,e.context);)for(e=e.left;null!=e;)if(null!=e.right)d.push(e),e=e.right;else{if(c.call(a,
e.value,e.context))return;e=e.left}}}function j(a){var b=[],c=0;if(null!=a)for(b.push(a);0<b.length;){for(var d=[],e=0;e<b.length;e+=1)a=b[e],null!=a.left&&d.push(a.left),null!=a.right&&d.push(a.right);b=d;c+=1}return c}var k=null;return{add:function(c,d,e,f){if(null==k)k=new a(c,d);else{for(var h=[],i=null,j=k;null!=j;)if(null!=i&&h.push(i),i=j,i.value==c)if(null!=f)f.call(e,i.context);else throw"Structure does not support duplicates.";else j=i.value>c?i.left:i.right;h.push(i);d=new a(c,d);i.value>
c?i.left=d:i.right=d;for(i=d;null!=(j=h.pop());){if(i.value<j.value)if(0>j.balance){j.balance-=1;b(j);break}else{if(0<j.balance){j.balance-=1;break}j.balance-=1}else if(0<j.balance){j.balance+=1;b(j);break}else{if(0>j.balance){j.balance+=1;break}j.balance+=1}i=j}}},remove:function(a){for(var c=[],d=k;null!=d;)if(d.value==a){if(null!=d.right&&null!=d.left){c.push(d);for(a=d.right;null!=a.left;)c.push(a),a=a.left;var e=a;d.value=e.value;d.context=e.context;f(a,c[c.length-1]);c.push(a)}else f(d,c[c.length-
1]),c.push(d);for(a=c.length-2;0<=a;a-=1)if(e=c[a],d=c[a+1],e.value>d.value)if(0<e.balance){if(e.balance+=1,0===b(e))break}else{if(0===e.balance){e.balance+=1;break}e.balance+=1}else if(0>e.balance){if(e.balance-=1,0===b(e))break}else{if(0===e.balance){e.balance-=1;break}e.balance-=1}break}else c.push(d),d=d.value>a?d.left:d.right},loopForward:h,loopBackward:i,nextContext:function(a){var b=null;h(this,a,function(a,c){b=c;return!0});return b},previousContext:function(a){var b=null;i(this,a,function(a,
c){b=c;return!0});return b},validate:function(){if(null!=k)for(var a=[k];0<a.length;){for(var b=[],c=0;c<a.length;c+=1){var d=a[c];if(null==d.value||null!=d.left&&(b.push(d.left),d.left.value>=d.value)||null!=d.right&&(b.push(d.right),d.right.value<=d.value))return!1;if(d.balance!=j(d.right)-j(d.left))return console.log("Disbalanced node: "+d.value+" - "+JSON.stringify(k)),!1}a=b}return!0}}};a.common.SpatialIndex=function(g){function b(b,c){this.minimum=b;this.maximum=c;this.quadTree=a.common.QuadTree(2*
c)}var d=[];g.sort(function(a,b){return a-b});switch(g.length){case 0:d.push(new b(0,1E6));break;case 1:var c=g[0];d.push(new b(0,c));break;case 2:c=g[0];g=g[1];g>2*c?(d.push(new b(0,c)),d.push(new b(c,g))):d.push(new b(0,g));break;default:for(var c=a.common.getLiniarBreaks(g),f=0,e=0;e<c.length;e+=1){var h=g[c[e]];d.push(new b(f,h));f=h}}return{addRect:function(a){for(var b=Math.max(a.width,a.height),c=a.centerPoint(),e=0,f=d.length;e<f;e+=1){var g=d[e];if(b<=g.maximum||e==f-1){c.context=a;g.quadTree.addPoint(c);
break}}},loopArea:function(b,c,e){if(null!=e)for(var f=0,g=d.length;f<g;f+=1){var h=d[f],p=new a.common.Rect(c);p.offset(h.maximum/2);h.quadTree.loopArea(this,p,function(a){a=a.context;if(c.overlaps(a))return e.call(b,a)})}},validate:function(){for(var a=!0,b=0,c=d.length;b<c;b+=1)var e=d[b],a=a&&e.quadTree.validate();return a},getPositions:function(a){for(var b=[],c=0,e=d.length;c<e;c+=1)b=b.concat(d[c].quadTree.getPositions(a));return b}}};a.common.tree=function(g){function b(a,b,c){var d,f,g;if(null!=
e[b]&&(b=i[b],null!=b)){f=0;for(g=b.length;f<g&&!(d=b[f],c.call(a,d,e[d],f,g-1));f+=1);}}function d(a){var b=null;null!=h[a]&&(b=h[a]);return b}function c(a,b){var c,d=a.length;for(c=0;c<d;c+=1)if(a[c]==b)return a.splice(c,1),d-1;return d}function f(a,c,f){if(null!=f&&e.hasOwnProperty(c)){var g=d(c);null!=g&&f.call(a,g,e[g])||(b(a,g,function(b,d){b!=c&&f.call(a,b,d)}),b(a,c,function(b,c){f.call(a,b,c)}))}}var e={},h={},i={},j={},k={};a.common.isObject(g)&&(e=a.common.cloneObject(g.nodes,!0),h=a.common.cloneObject(g.parents,
!0),i=a.common.cloneObject(g.children,!1),j=a.common.cloneObject(g.roots,!1),k=a.common.cloneObject(g.rootChildren,!0));return{loop:function(a,b){var c;if(null!=b)for(c in e)if(e.hasOwnProperty(c)&&b.call(a,c,e[c]))break},loopLevels:function(a,b,c){var d=0,f=[],g,h,j,w,u;switch(arguments.length){case 2:h=b;break;case 3:g=b,h=c}if(null!=h){if(null==g)for(j in k)k.hasOwnProperty(j)&&(f=f.concat(k[j]));else null!=i[g]&&(f=f.concat(i[g]));for(;0<f.length;){j=[];w=0;for(u=f.length;w<u;w+=1)switch(g=f[w],
h.call(a,g,e[g],d)){case 1:j=[];break;case 2:break;default:null!=i[g]&&(j=j.concat(i[g]))}f=j;d+=1}}},loopParents:function(a,b,c,d){if(null!=e[b]&&null!=c&&!(!0===d&&c.call(a,b,e[b])))for(;null!=(b=h[b])&&!c.call(a,b,e[b]););},loopChildren:b,loopChildrenRange:function(a,b,c,d,f){var g;if(null!=e[b]&&(b=i[b],null!=b))if(c<d){c=Math.max(c,0);d=Math.min(d,b.length-1);for(g=c;g<=d&&!(c=b[g],f.call(a,c,e[c],g,NaN));g+=1);}else{c=Math.min(c,b.length-1);d=Math.max(0,d);for(g=c;g>=d&&!(c=b[g],f.call(a,c,
e[c],g,NaN));g-=1);}},loopChildrenReversed:function(a,b,c){var d,f,g;if(null!=e[b]&&(b=i[b],g=b.length-1,null!=b))for(f=g;0<=f&&!(d=b[f],c.call(a,d,e[d],f,g));f-=1);},loopPostOrder:function(a,b){var c=[],d,f,g;if(null!=b){for(d in k)k.hasOwnProperty(d)&&(c=c.concat(k[d]));for(;0<c.length;)if(d=c[c.length-1],d!=f&&null!=(g=i[d]))for(d=g.length-1;0<=d;d-=1)c.push(g[d]);else if(c.pop(),f=h[d],b.call(a,d,e[d],f,e[f]))break}},loopPreOrder:function(a,b){var c=[],d,f,g,j;if(null!=b){for(d in k)k.hasOwnProperty(d)&&
(c=c.concat(k[d]));for(;0<c.length;){d=c[c.length-1];if(d!=g&&(f=h[d],b.call(a,d,e[d],f,e[f])))break;if(d!=g&&null!=(j=i[d]))for(d=j.length-1;0<=d;d-=1)c.push(j[d]);else c.pop(),g=h[d]}}},loopEulerWalk:function(a,b){var c=[],d,f=[],g=0,j,t,w;if(null!=b){for(d in k)if(k.hasOwnProperty(d)){w=k[d];j=0;for(g=w.length;j<g;j+=1)c.push(w[j]),f.push(0)}for(;0<c.length;){j=c.length-1;d=c[j];g=f[j];if(b.call(a,d,e[d],g))break;if(d!=t&&null!=(w=i[d]))for(j=w.length-1;0<=j;j-=1)c.push(w[j]),f.push(g+1),0<j&&
(c.push(d),f.push(g));else c.pop(),f.pop(),t=h[d]}}},loopNeighbours:function(a,b,c,d){var g={},h=[b],i,j=0;if(null!=d&&e.hasOwnProperty(b))for(g[b]=!0;0<h.length;){i=[];for(var b=0,k=h.length;b<k;b+=1){var u=h[b];if(0<j&&d.call(a,u,e[u],j))return;j<c&&f(this,u,function(a){g.hasOwnProperty(a)||(i.push(a),g[a]=!0)})}h=i;j+=1}},zipUp:function(a,b,c,d){var e,f;if(null!=d)for(;null!=b&&null!=c&&b!=c;){e=h[b];f=h[c];if(d.call(a,b,e,c,f))break;b=e;c=f}},parentid:d,parent:function(a){var b=null;null!=h[a]&&
(b=e[h[a]]);return b},adopt:function(a,b){if(null!=e[a]&&null!=e[b])if(a!=b)j.hasOwnProperty(b)&&(c(k[j[b]],b)||delete k[j[b]],delete j[b]),h.hasOwnProperty(b)&&(c(i[h[b]],b)||delete i[h[b]]),h[b]=a,null!=i[a]?i[a].push(b):i[a]=[b];else throw"Item cannot be parent of itself!";else throw"Both parent and child should be in hierarchy!";},moveChildren:function(a,c){null!=e[a]&&(null!=e[c]&&a!=c)&&null!=i[a]&&(b(this,a,function(a){h[a]=c}),i[c]=null!=i[c]?i[c].concat(i[a]):i[a],delete i[a])},node:function(a){return e[a]},
add:function(a,b,c,d){var f;if(null!=e[b])throw"Node already exists";if(null!=b&&(null!=c&&null==e[b])&&(null!=e[a]?(h[b]=a,null!=i[a]?null==d?i[a].push(b):i[a].splice(d,0,b):i[a]=[b]):(j[b]=a,null!=k[a]?null==d?k[a].push(b):k[a].splice(d,0,b):k[a]=[b]),e[b]=c,null!=k[b])){i[b]=k[b];delete k[b];d=i[b];a=0;for(c=d.length;a<c;a+=1)f=d[a],delete j[f],h[f]=b}},insert:function(a,c,d){null!=e[a]&&(null!=c&&null==e[c]&&null!=d)&&(e[c]=d,null!=i[a]&&(i[c]=i[a]),i[a]=[c],b(this,c,function(a){h[a]=c}),h[c]=
a)},hasNodes:function(){return!a.common.isEmptyObject(k)},hasChildren:function(a){return null!=i[a]},countChildren:function(a){return null!=i[a]?i[a].length:0},countSiblings:function(a){a=d(a);return null!=a?i[a].length:0},indexOf:function(b){var c=d(b);return null!=c?a.common.indexOf(i[c],b):null},getChild:function(a,b){var c=null,d;if(null!=(d=i[a]))c=e[d[b]];return c},arrangeChildren:function(a,b){var c,d,f,b=b.slice(0);if(null!=e[a])if(null!=i[a])if(i[a].length==b.length){d=0;for(f=b.length;d<
f;d+=1)if(c=b[d],h[c]!=a)throw"Child "+c+" does not belong to given node!";i[a]=b}else throw"Collections of children don't match each other!";else if(0<b.length)throw"Collections of children don't match each other!";},validate:function(){var a=!0,b;for(b in j)if(j.hasOwnProperty(b)&&null!=j[b]){a=!1;break}return a},clone:function(){return a.common.tree({nodes:e,parents:h,children:i,roots:j,rootChildren:k})},BREAK:1,SKIP:2}};a.common.TreeLevels=function(g){function b(a){this.context=a;this.items=[]}
function d(a,b,c){this.context=a;this.positions={};this.positions[c]=b;this.endLevel=this.startLevel=c}function c(a){null==f[a]&&(f[a]=new b(null),h=null===h?a:Math.min(h,a),i=null===i?a:Math.max(i,a));return f[a]}var f=[],e={},h=null,i=null;a.common.isObject(g)&&(f=a.common.cloneObject(g.levels,!0),e=a.common.cloneObject(g.items,!0),h=a.common.cloneObject(g.minimum,!0),i=a.common.cloneObject(g.maximum,!0));return{addlevel:function(a,b){c(a).context=b},hasLevel:function(a){return null!=f[a]},hasItem:function(a){return e.hasOwnProperty(a)},
addItem:function(a,b,f){var g;e.hasOwnProperty(b)?(g=c(a),g.items.push(b),b=e[b],b.positions[a]=g.items.length-1,b.startLevel=Math.min(b.startLevel,a),b.endLevel=Math.max(b.endLevel,a)):(g=c(a),g.items.push(b),e[b]=new d(f,g.items.length-1,a))},getItemContext:function(a){var b=null;e.hasOwnProperty(a)&&(b=e[a].context);return b},getLevelIndex:function(a){return e.hasOwnProperty(a)?e[a].startLevel:null},getEndLevelIndex:function(a){return e.hasOwnProperty(a)?e[a].endLevel:null},getItemPosition:function(a,
b){var c=e[a];return null!=c?null!=b?c.positions[b]:c.positions[c.startLevel]:null},getItemAtPosition:function(a,b){var c=f[a],d=null;null!=c&&(d=c.items[b]);return d},loopLevels:function(a,b){var c,d;if(null!=b)for(c=h;c<=i&&!(d=f[c],null!=d&&b.call(a,c,d.context));c+=1);},loopLevelsReversed:function(a,b){var c,d;if(null!=b)for(c=i;c>=h&&!(d=f[c],null!=d&&b.call(a,c,d.context));c-=1);},loopLevelItems:function(a,b,c){var d,g,h;if(null!=c&&(g=f[b],null!=g)){b=0;for(d=g.items.length;b<d&&!(h=g.items[b],
c.call(a,h,e[h].context,b));b+=1);}},getLevelLength:function(a){var b=0,a=f[a];null!=a&&(b=a.items.length);return b},loopItems:function(a,b){var c,d,g,p,q,r,s={};if(null!=b)for(p=h;p<=i;p+=1)if(g=f[p],null!=g){q=g.items;c=0;for(d=q.length;c<d;c+=1)if(r=q[c],!s.hasOwnProperty(r)&&(s[r]=!0,b.call(a,r,e[r].context,c,p,g.context)))return}},binarySearch:function(b,c,d){var g=null;null!=d&&(c=f[c],null!=c&&(g=a.common.binarySearch(c.items,function(a){return d.call(b,a,e[a].context)})));return g.item},loopMerged:function(b,
c,d){var g,h,i,q=[];g=0;for(h=f.length;g<h;g+=1)i=f[g],null!=i&&q.push(i.items);i=a.common.mergeSort(q,c,!0);if(null!=d){g=0;for(h=i.length;g<h&&!(c=i[g],d.call(b,c,e[c].context));g+=1);}},loopFromItem:function(a,b,c,d,g){var h;if(e.hasOwnProperty(b)&&(b=e[b],h=g||b.startLevel,g=f[h].items,b=b.positions[h],null!=d))if(c)for(c=b-1;0<=c&&!(h=g[c],d.call(a,h,e[h].context));c-=1);else{c=b+1;for(b=g.length;c<b&&!(h=g[c],d.call(a,h,e[h].context));c+=1);}},loopLevelsFromItem:function(a,b,c,d){if(e.hasOwnProperty(b)&&
(b=e[b],null!=d))if(c)for(c=b.endLevel+1;c<=i&&!(b=f[c],d.call(a,c,null!=b?b.context:null));c+=1);else for(c=b.startLevel-1;c>=h&&!(b=f[c],d.call(a,c,null!=b?b.context:null));c-=1);},getPrevItem:function(a,b){var c=null;e.hasOwnProperty(a)&&(c=e[a],b=b||c.startLevel,c=f[b].items[c.positions[b]-1]);return c},getNextItem:function(a,b){var c=null;e.hasOwnProperty(a)&&(c=e[a],b=b||c.startLevel,c=f[b].items[c.positions[b]+1]);return c},length:function(){return f.length},isEmpty:function(){return!f.length},
clone:function(){return a.common.TreeLevels({levels:f,items:e,minimum:h,maximum:i})}}};a.common.DependencyManager=function(){var a={};return{register:function(b,d){return a[b]=d},resolve:function(b,d,c){var f=[],e=c||{};return function(){for(var c=Array.prototype.slice.call(arguments,0),i=0;i<b.length;i+=1){var j=b[i];f.push(a.hasOwnProperty(j)&&""!==j?a[j]:c.shift())}f=f.concat(c);return d.apply(e||{},f)}}}};a.common.KeyboardNavigationManager=function(){function g(a,b){this.itemid=a;this.row=b}function b(){if(null==
h){var b=0;e=a.common.SortedList();a.common.getMinimumCrossingRows(this,f,function(a){e.add(a,b);b+=1});h=a.common.TreeLevels();f.sort(function(a,b){return a.horizontalCenter()-b.horizontalCenter()});for(var c=0,d=f.length;c<d;c+=1){var g=f[c];e.loopForward(this,g.y,function(a,b){if(a>g.bottom())return!0;h.addItem(b,g.context,g)})}}}function d(a){b();if(null==i||i.itemid!=a)i=new g(a,h.getLevelIndex(a));return i}function c(a){var b=h.getItemContext(i.itemid).horizontalCenter(),c=i.itemid;h.loopLevelsFromItem(this,
i.itemid,a,function(a){i.row=a;i.itemid=h.binarySearch(this,a,function(a,c){return b-c.horizontalCenter()});return!0});c==i.itemid&&(i.row=a?h.getEndLevelIndex(i.itemid):h.getLevelIndex(i.itemid))}var f=[],e,h,i=null;return{addRect:function(b,c){var d=new a.common.Rect(b);d.context=c;f.push(d)},prepair:b,getItemAbove:function(a){i=d(a);c(!1);return i.itemid},getItemBelow:function(a){i=d(a);c(!0);return i.itemid},getItemOnLeft:function(a){i=d(a);a=h.getPrevItem(i.itemid,i.row);null!=a&&(i.itemid=a);
return i.itemid},getItemOnRight:function(a){i=d(a);a=h.getNextItem(i.itemid,i.row);null!=a&&(i.itemid=a);return i.itemid},getNavigationLevels:function(){b();var a=[];h.loopLevels(this,function(b){var c=[];h.loopLevelItems(this,b,function(a){c.push(a)});a.push(c)});return a}}};a.common.TaskManager=function(){function g(a,b,c,d){this.name=a;this.dependencies=b;this.factory=c;this.task=null;this.color=d}var b=new a.common.family,d=new a.common.DependencyManager,c=[];return{addTask:function(a,d,h,i){if(0<
c.length)throw"Task Manager is already initialized";b.add(d,a,new g(a,d,h,i))},addDependency:function(a,b){if(0<c.length)throw"Task Manager is already initialized";d.register(a,b)},getTask:function(a){return(a=b.node(a))&&a.task},process:function(a,e,g){var i=!1;0===c.length&&b.loopTopo(this,function(a,b){b.task=d.register(a,d.resolve(b.dependencies,b.factory)());c.push(b)});g&&console.log("-- process --");for(var j={},k=0,m=c.length;k<m;k+=1){var n=c[k],l=[];if(n.name==a||j.hasOwnProperty(n.name)){if(g)var p=
performance.now();(i=n.task.process(g))&&b.loopChildren(this,n.name,function(a){j[a]=!0;g&&l.push(a);return b.SKIP});if(g)var q=performance.now();if(g){var r=Math.round(q-p,2);console.log(k+". "+n.name+(", "+r+" ms. ")+(i?" - forces: "+l.toString():""))}}if(n.name==e)break}},getProcessDiagramConfig:function(){var f=new a.famdiagram.Config;0===c.length&&b.loopTopo(this,function(a,b){b.task=d.register(a,d.resolve(b.dependencies,b.factory)());c.push(b)});for(var e=0,g=c.length;e<g;e+=1){var i=c[e],j=
new a.famdiagram.ItemConfig;j.id=i.name;j.title=a.common.splitCamelCaseName(i.name).join(" ");j.description=i.task.description||"";j.itemTitleColor=i.color;j.parents=[];b.loopParents(this,i.name,function(a){j.parents.push(a);return b.SKIP});f.items.push(j)}return f}}};a.pdf.graphics=function(g){this._context=this._doc=g;this._dummyPlaceholder=new a.common.Placeholder};a.pdf.graphics.prototype.clean=function(){};a.pdf.graphics.prototype.resize=function(){};a.pdf.graphics.prototype.begin=function(){};
a.pdf.graphics.prototype.end=function(){};a.pdf.graphics.prototype.reset=function(){};a.pdf.graphics.prototype.activate=function(){return this._dummyPlaceholder};a.pdf.graphics.prototype.text=function(){};a.pdf.graphics.prototype.polylinesBuffer=function(a){a.loop(this,function(a){0<a.length()&&this.polyline(a)})};a.pdf.graphics.prototype.polyline=function(a){var b=a.paletteItem.toAttr(),d,c=this._doc;c.save();a.loop(this,function(a){switch(a.segmentType){case 1:c.moveTo(Math.round(a.x)+0.5,Math.round(a.y)+
0.5);break;case 0:c.lineTo(Math.round(a.x)+0.5,Math.round(a.y)+0.5);break;case 4:a.width==a.height&&a.width/2<=a.cornerRadius?c.roundedRect(Math.round(a.x)+0.5,Math.round(a.y)+0.5,a.width,a.height,Math.min(a.width,a.height)/2):0===a.cornerRadius?(c.moveTo(Math.round(a.x)+0.5,Math.round(a.y)+0.5),c.lineTo(Math.round(a.x+a.width)+0.5,Math.round(a.y)+0.5),c.lineTo(Math.round(a.x+a.width)+0.5,Math.round(a.y+a.height)+0.5),c.lineTo(Math.round(a.x)+0.5,Math.round(a.y+a.height)+0.5),c.lineTo(Math.round(a.x)+
0.5,Math.round(a.y)+0.5)):(d=Math.min(a.cornerRadius,Math.min(a.width/2,a.height/2)),c.roundedRect(Math.round(a.x)+0.5,Math.round(a.y)+0.5,a.width,a.height,d));break;case 2:c.quadraticCurveTo(Math.round(a.cpX)+0.5,Math.round(a.cpY)+0.5,Math.round(a.x)+0.5,Math.round(a.y)+0.5);break;case 3:c.bezierCurveTo(Math.round(a.cpX1)+0.5,Math.round(a.cpY1)+0.5,Math.round(a.cpX2)+0.5,Math.round(a.cpY2)+0.5,Math.round(a.x)+0.5,Math.round(a.y)+0.5)}});c.lineJoin("round");if(null!=b.lineType)switch(a=Math.round(b.lineWidth)||
1,b.lineType){case 1:c.dash(a,2*a);break;case 2:c.dash(5*a,3*a)}void 0!==b.lineWidth&&void 0!==b.fillColor?c.lineWidth(b.lineWidth).fillOpacity(b.opacity).fillAndStroke(b.fillColor,b.borderColor):void 0!==b.lineWidth?c.lineWidth(b.lineWidth).stroke(b.borderColor):void 0!==b.fillColor&&c.fillOpacity(b.opacity).fillColor(b.fillColor);c.restore()};a.pdf.graphics.prototype.rightAngleLine=function(){};a.pdf.graphics.prototype.template=function(g,b,d,c,f,e,h,i,j,k,m,n,l){d=0;null!==l&&void 0!==l.borderWidth&&
(d=this.getPxSize(l.borderWidth));g=new a.common.Rect(g+f,b+e,h-d,i-d);null==n&&(n=new a.common.RenderEventArgs);null!==m&&m(this._doc,g,n)};a.pdf.graphics.prototype.getPxSize=function(a,b){var d=a;"string"===typeof a&&(d=0<a.indexOf("pt")?96*parseInt(a,10)/72:0<a.indexOf("%")?parseFloat(a)/100*b:parseInt(a,10));return d};a.pdf.famdiagram.Plugin=function(g){function b(){return e.options}function d(){return e.graphics}function c(){var c=new a.common.TaskManager;c.addDependency("options",b);c.addDependency("graphics",
d);c.addDependency("defaultConfig",new a.famdiagram.Config);c.addDependency("defaultItemConfig",new a.famdiagram.ItemConfig);c.addDependency("defaultTemplateConfig",new a.famdiagram.TemplateConfig);c.addDependency("defaultButtonConfig",new a.famdiagram.ButtonConfig);c.addDependency("defaultPaletteItemConfig",new a.famdiagram.PaletteItemConfig);c.addDependency("defaultBackgroundAnnotationConfig",new a.famdiagram.BackgroundAnnotationConfig);c.addDependency("defaultConnectorAnnotationConfig",new a.famdiagram.ConnectorAnnotationConfig);
c.addDependency("defaultHighlightPathAnnotationConfig",new a.famdiagram.HighlightPathAnnotationConfig);c.addDependency("defaultShapeAnnotationConfig",new a.famdiagram.ShapeAnnotationConfig);c.addDependency("defaultLabelAnnotationConfig",new a.famdiagram.LabelAnnotationConfig);c.addDependency("isFamilyChartMode",!0);c.addDependency("showElbowDots",!0);c.addDependency("null",null);c.addDependency("foreground",2);c.addDependency("background",1);c.addTask("OptionsTask",["options"],a.famdiagram.OptionsTask,
"#000000");c.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.CalloutOptionTask,"#000080");c.addTask("ConnectorsOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ConnectorsOptionTask,"#000080");c.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],a.famdiagram.ItemsOptionTask,"#000080");c.addTask("SpousesOptionTask",["OptionsTask","defaultItemConfig"],a.famdiagram.SpousesOptionTask,"#000080");c.addTask("ItemsSizesOptionTask",["OptionsTask",
"defaultConfig","defaultItemConfig","defaultButtonConfig"],a.orgdiagram.ItemsSizesOptionTask,"#000080");c.addTask("TemplatesOptionTask",["OptionsTask","defaultConfig","defaultButtonConfig","defaultTemplateConfig"],a.orgdiagram.TemplatesOptionTask,"#000080");c.addTask("OrientationOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.OrientationOptionTask,"#000080");c.addTask("VisualTreeOptionTask",["OptionsTask"],a.famdiagram.VisualTreeOptionTask,"#000080");c.addTask("HideGrandParentsConnectorsOptionTask",
["OptionsTask","defaultConfig"],a.famdiagram.HideGrandParentsConnectorsOptionTask,"#000080");c.addTask("NormalizeOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.NormalizeOptionTask,"#000080");c.addTask("OrderFamilyNodesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.famdiagram.OrderFamilyNodesOptionTask,"#000080");c.addTask("LinePaletteOptionTask",["OptionsTask","defaultPaletteItemConfig"],a.famdiagram.LinePaletteOptionTask,"#000080");c.addTask("CursorItemOptionTask",["OptionsTask",
"defaultConfig"],a.orgdiagram.CursorItemOptionTask,"#000080");c.addTask("HighlightItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.HighlightItemOptionTask,"#000080");c.addTask("SelectedItemsOptionTask",["OptionsTask"],a.orgdiagram.SelectedItemsOptionTask,"#000080");c.addTask("SplitAnnotationsOptionTask",["OptionsTask"],a.orgdiagram.SplitAnnotationsOptionTask,"#00ffff");c.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],
a.orgdiagram.ShapeAnnotationOptionTask,"#000080");c.addTask("BackgroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","background"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");c.addTask("ForegroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","foreground"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");c.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask",
"defaultHighlightPathAnnotationConfig","background"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");c.addTask("ForegroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");c.addTask("BackgroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");c.addTask("BackgroundAnnotationOptionTask",
["SplitAnnotationsOptionTask","defaultBackgroundAnnotationConfig"],a.orgdiagram.BackgroundAnnotationOptionTask,"#000080");c.addTask("ScaleOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ScaleOptionTask,"#000080");c.addTask("UserDefinedNodesOrderTask",["OrderFamilyNodesOptionTask","defaultItemConfig"],a.famdiagram.UserDefinedNodesOrderTask,"#ff0000");c.addTask("LogicalFamilyTask",["ItemsOptionTask"],a.famdiagram.LogicalFamilyTask,"#00ffff");c.addTask("LabelAnnotationOptionTask",["SplitAnnotationsOptionTask",
"LogicalFamilyTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationOptionTask,"#000080");c.addTask("LabelAnnotationTemplateOptionTask",["LabelAnnotationOptionTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationTemplateOptionTask,"#000080");c.addTask("LabelAnnotationPlacementOptionTask",["LabelAnnotationOptionTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationPlacementOptionTask,"#000080");c.addTask("CombinedContextsTask",["ItemsOptionTask","LabelAnnotationOptionTask"],
a.orgdiagram.CombinedContextsTask,"#00ffff");c.addTask("AddLabelAnnotationsTask",["LabelAnnotationPlacementOptionTask","LogicalFamilyTask"],a.famdiagram.AddLabelAnnotationsTask,"#ff0000");c.addTask("RemoveLoopsTask",["ItemsOptionTask","AddLabelAnnotationsTask"],a.famdiagram.RemoveLoopsTask,"#ff0000");c.addTask("AddSpousesTask",["SpousesOptionTask","RemoveLoopsTask"],a.famdiagram.AddSpousesTask,"#ff0000");c.addTask("HideGrandParentsConnectorsTask",["HideGrandParentsConnectorsOptionTask","AddSpousesTask"],
a.famdiagram.HideGrandParentsConnectorsTask,"#ff0000");c.addTask("NormalizeLogicalFamilyTask",["NormalizeOptionTask","HideGrandParentsConnectorsTask"],a.famdiagram.NormalizeLogicalFamilyTask,"#ff0000");c.addTask("OrderFamilyNodesTask",["OrderFamilyNodesOptionTask","UserDefinedNodesOrderTask","NormalizeLogicalFamilyTask","defaultItemConfig"],a.famdiagram.OrderFamilyNodesTask,"#ff0000");c.addTask("ReadTemplatesTask",["TemplatesOptionTask"],a.pdf.orgdiagram.ReadTemplatesTask,"#00ffff");c.addTask("ItemTemplateParamsTask",
["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],a.orgdiagram.ItemTemplateParamsTask,"#00ffff");c.addTask("LabelAnnotationTemplateParamsTask",["ItemsSizesOptionTask","LabelAnnotationTemplateOptionTask","ReadTemplatesTask"],a.famdiagram.LabelAnnotationTemplateParamsTask,"#00ffff");c.addTask("CombinedTemplateParamsTask",["ItemTemplateParamsTask","LabelAnnotationTemplateParamsTask"],a.famdiagram.CombinedTemplateParamsTask,"#00ffff");c.addTask("GroupTitleTemplateTask",["TemplatesOptionTask"],
a.pdf.orgdiagram.GroupTitleTemplateTask,"#00ffff");c.addTask("CheckBoxTemplateTask",["ItemsSizesOptionTask"],a.pdf.orgdiagram.CheckBoxTemplateTask,"#00ffff");c.addTask("ButtonsTemplateTask",["ItemsSizesOptionTask"],a.pdf.orgdiagram.ButtonsTemplateTask,"#00ffff");c.addTask("AnnotationLabelTemplateTask",["ItemsOptionTask"],a.pdf.orgdiagram.AnnotationLabelTemplateTask,"#00ffff");c.addTask("ConnectionsGraphTask",["graphics","CreateTransformTask","ConnectorsOptionTask","OrderFamilyNodesTask","AlignDiagramTask"],
a.orgdiagram.ConnectionsGraphTask,"#00ffff");c.addTask("HighlightItemTask",["HighlightItemOptionTask","null"],a.orgdiagram.HighlightItemTask,"#00ffff");c.addTask("CursorItemTask",["CursorItemOptionTask","null"],a.orgdiagram.CursorItemTask,"#00ffff");c.addTask("SelectedItemsTask",["SelectedItemsOptionTask"],a.orgdiagram.SelectedItemsTask,"#00ffff");c.addTask("CombinedNormalVisibilityItemsTask",["OptionsTask"],a.pdf.orgdiagram.DummyCombinedNormalVisibilityItemsTask,"#00ffff");c.addTask("CurrentControlSizeTask",
["OptionsTask"],a.pdf.orgdiagram.DummyCurrentControlSizeTask,"#00ffff");c.addTask("ItemsPositionsTask","CurrentControlSizeTask ScaleOptionTask OrientationOptionTask ItemsSizesOptionTask ConnectorsOptionTask OrderFamilyNodesOptionTask OrderFamilyNodesTask CombinedTemplateParamsTask CursorItemTask CombinedNormalVisibilityItemsTask".split(" "),a.famdiagram.ItemsPositionsTask,"#ff0000");c.addTask("AlignDiagramTask","OrientationOptionTask ItemsSizesOptionTask VisualTreeOptionTask ScaleOptionTask CurrentControlSizeTask null ItemsPositionsTask isFamilyChartMode".split(" "),
a.orgdiagram.AlignDiagramTask,"#ff0000");c.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],a.orgdiagram.CreateTransformTask,"#00ffff");c.addTask("PaletteManagerTask",["ConnectorsOptionTask","LinePaletteOptionTask"],a.orgdiagram.PaletteManagerTask,"#00ffff");c.addTask("DrawBackgroundAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask BackgroundAnnotationOptionTask AddLabelAnnotationsTask AlignDiagramTask".split(" "),a.orgdiagram.DrawBackgroundAnnotationTask,
"#008000");c.addTask("DrawBackgroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background DrawBackgroundAnnotationTask".split(" "),a.orgdiagram.DrawShapeAnnotationTask,"#008000");c.addTask("DrawBackgroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background DrawBackgroundShapeAnnotationTask".split(" "),
a.orgdiagram.DrawConnectorAnnotationTask,"#008000");c.addTask("DrawBackgroundHighlightPathAnnotationTask","graphics ConnectorsOptionTask ForegroundHighlightPathAnnotationOptionTask ConnectionsGraphTask foreground DrawBackgroundConnectorAnnotationTask".split(" "),a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");c.addTask("DrawConnectorsTask","graphics ConnectionsGraphTask ConnectorsOptionTask showElbowDots PaletteManagerTask DrawBackgroundHighlightPathAnnotationTask".split(" "),a.orgdiagram.DrawConnectorsTask,
"#008000");c.addTask("DrawForegroundHighlightPathAnnotationTask","graphics ConnectorsOptionTask BackgroundHighlightPathAnnotationOptionTask ConnectionsGraphTask background DrawConnectorsTask".split(" "),a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");c.addTask("DrawTreeItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask null ItemsSizesOptionTask CombinedContextsTask AlignDiagramTask null CombinedTemplateParamsTask CursorItemTask SelectedItemsTask GroupTitleTemplateTask CheckBoxTemplateTask ButtonsTemplateTask DrawForegroundHighlightPathAnnotationTask".split(" "),
a.orgdiagram.DrawTreeItemsTask,"#008000");c.addTask("DrawCursorTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask CombinedTemplateParamsTask CursorItemTask SelectedItemsTask DrawTreeItemsTask".split(" "),a.orgdiagram.DrawCursorTask,"#008000");c.addTask("DrawHighlightTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask CombinedTemplateParamsTask HighlightItemTask CursorItemTask SelectedItemsTask DrawCursorTask".split(" "),
a.orgdiagram.DrawHighlightTask,"#008000");c.addTask("DrawForegroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground DrawHighlightTask".split(" "),a.orgdiagram.DrawShapeAnnotationTask,"#008000");c.addTask("DrawForegroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground DrawForegroundShapeAnnotationTask".split(" "),
a.orgdiagram.DrawConnectorAnnotationTask,"#008000");return c}function f(){e.options.hasButtons=2;e.options.pageFitMode=5;e.options.autoSizeMaximum=new a.common.Size(1E5,1E5)}var e={name:"famdiagram",doc:null,options:g,tasks:null,graphics:null};return{draw:function(g,i,j){e.doc=g;e.tasks=c(b,d);e.graphics=new a.pdf.graphics(e.doc);e.graphics.debug=!1;f();e.doc.save();e.doc.translate(i,j);e.tasks.process("OptionsTask",null,!1);e.doc.restore();g=e.tasks.getTask("AlignDiagramTask");return new a.common.Size(g.getContentSize())},
getSize:function(){e.tasks=c(b,d);f();e.tasks.process("OptionsTask","AlignDiagramTask",!1);var g=e.tasks.getTask("AlignDiagramTask");return new a.common.Size(g.getContentSize())}}};a.pdf.Template=function(g,b){this.cursorTemplate=this.dotHighlightTemplate=this.highlightTemplate=this.itemTemplate=this.templateConfig=null;null!=b&&(this.templateConfig=b,this.itemTemplate=a.common.isNullOrEmpty(b.itemTemplate)?new a.pdf.ItemTemplate(g,b):new a.pdf.UserTemplate(g,b,g.onItemRender),this.highlightTemplate=
a.common.isNullOrEmpty(b.highlightTemplate)?new a.pdf.HighlightTemplate(g,b):new a.pdf.UserTemplate(g,b,g.onHighlightRender),this.dotHighlightTemplate=new a.pdf.DummyTemplate(g,b),this.cursorTemplate=a.common.isNullOrEmpty(b.cursorTemplate)?new a.pdf.CursorTemplate(g,b):new a.pdf.UserTemplate(g,b,g.onCursorRender))};a.pdf.orgdiagram.DummyCurrentControlSizeTask=function(){return{process:function(){return!0},getScrollPanelSize:function(){return new a.common.Size(800,600)},getOptimalPanelSize:function(){return new a.common.Size(775,
575)}}};a.pdf.orgdiagram.AnnotationLabelTemplateTask=function(){var g=null;return{process:function(){return!1},getTemplate:function(){null==g&&(g=new a.pdf.AnnotationLabelTemplate);return g}}};a.pdf.orgdiagram.ButtonsTemplateTask=function(){var g=null;return{process:function(){return!1},getTemplate:function(){null==g&&(g=new a.pdf.DummyTemplate);return g}}};a.pdf.orgdiagram.CheckBoxTemplateTask=function(g){var b=null;return{process:function(){b=null;return!0},getTemplate:function(){var d;null==b&&
(d=g.getOptions(),b=new a.pdf.CheckBoxTemplate(d.selectCheckBoxLabel));return b}}};a.pdf.orgdiagram.GroupTitleTemplateTask=function(g){var b=null;return{process:function(){b=null;return!0},getTemplate:function(){var d;null==b&&(d=g.getOptions(),b=new a.pdf.GroupTitleTemplate(d.itemTitleFirstFontColor,d.itemTitleSecondFontColor));return b}}};a.pdf.orgdiagram.ReadTemplatesTask=function(g){var b={};return{process:function(){var d,c,f,e=g.getOptions(),h=e.templates;b={};b.DefaultWidgetTemplate=new a.pdf.Template(e,
new a.orgdiagram.TemplateConfig);d=new a.orgdiagram.TemplateConfig;d.name="DefaultWidgetLabelAnnotationTemplate";d.isActive=!1;d.itemSize=new a.common.Size(100,20);d.minimizedItemSize=new a.common.Size(0,0);c=new a.pdf.Template;c.templateConfig=d;c.minimizedItemCornerRadius=d.minimizedItemSize.width/2;c.itemTemplate=new a.pdf.LabelAnnotationTemplate;c.dotHighlightTemplate=new a.pdf.DummyTemplate;b.DefaultWidgetLabelAnnotationTemplate=c;d=0;for(c=h.length;d<c;d+=1)f=h[d],b[f.name]=new a.pdf.Template(e,
f);return!0},getTemplate:function(a,c,f){return b[a]||b[c]||b[f]},DefaultWidgetTemplateName:"DefaultWidgetTemplate",DefaultWidgetLabelAnnotationTemplateName:"DefaultWidgetLabelAnnotationTemplate"}};a.pdf.orgdiagram.DummyCombinedNormalVisibilityItemsTask=function(){return{process:function(){return!0},isItemSelected:function(){return!1}}};a.pdf.orgdiagram.Plugin=function(g){function b(){return e.options}function d(){return e.graphics}function c(){var c=new a.common.TaskManager;c.addDependency("options",
b);c.addDependency("graphics",d);c.addDependency("defaultConfig",new a.orgdiagram.Config);c.addDependency("defaultItemConfig",new a.orgdiagram.ItemConfig);c.addDependency("defaultTemplateConfig",new a.orgdiagram.TemplateConfig);c.addDependency("defaultButtonConfig",new a.orgdiagram.ButtonConfig);c.addDependency("defaultBackgroundAnnotationConfig",new a.orgdiagram.BackgroundAnnotationConfig);c.addDependency("defaultConnectorAnnotationConfig",new a.orgdiagram.ConnectorAnnotationConfig);c.addDependency("defaultHighlightPathAnnotationConfig",
new a.orgdiagram.HighlightPathAnnotationConfig);c.addDependency("defaultShapeAnnotationConfig",new a.orgdiagram.ShapeAnnotationConfig);c.addDependency("isFamilyChartMode",!1);c.addDependency("showElbowDots",!1);c.addDependency("null",null);c.addDependency("foreground",2);c.addDependency("background",1);c.addTask("OptionsTask",["options"],a.orgdiagram.OptionsTask,"#000000");c.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.CalloutOptionTask,"#000080");c.addTask("ConnectorsOptionTask",
["OptionsTask","defaultConfig"],a.orgdiagram.ConnectorsOptionTask,"#000080");c.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],a.orgdiagram.ItemsOptionTask,"#000080");c.addTask("ItemsSizesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig","defaultButtonConfig"],a.orgdiagram.ItemsSizesOptionTask,"#000080");c.addTask("TemplatesOptionTask",["OptionsTask","defaultConfig","defaultButtonConfig","defaultTemplateConfig"],a.orgdiagram.TemplatesOptionTask,"#000080");c.addTask("OrientationOptionTask",
["OptionsTask","defaultConfig"],a.orgdiagram.OrientationOptionTask,"#000080");c.addTask("VisualTreeOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.VisualTreeOptionTask,"#000080");c.addTask("CursorItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorItemOptionTask,"#000080");c.addTask("HighlightItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.HighlightItemOptionTask,"#000080");c.addTask("SelectedItemsOptionTask",["OptionsTask"],a.orgdiagram.SelectedItemsOptionTask,
"#000080");c.addTask("SplitAnnotationsOptionTask",["OptionsTask"],a.orgdiagram.SplitAnnotationsOptionTask,"#00ffff");c.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");c.addTask("BackgroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","background"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");c.addTask("ForegroundHighlightPathAnnotationOptionTask",
["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","foreground"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");c.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","background"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");c.addTask("ForegroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],a.orgdiagram.ConnectorAnnotationOptionTask,
"#000080");c.addTask("BackgroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");c.addTask("BackgroundAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultBackgroundAnnotationConfig"],a.orgdiagram.BackgroundAnnotationOptionTask,"#000080");c.addTask("ScaleOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ScaleOptionTask,"#000080");c.addTask("CombinedContextsTask",["ItemsOptionTask"],
a.orgdiagram.CombinedContextsTask,"#00ffff");c.addTask("OrgTreeTask",["ItemsOptionTask"],a.orgdiagram.OrgTreeTask,"#ff0000");c.addTask("ReadTemplatesTask",["TemplatesOptionTask"],a.pdf.orgdiagram.ReadTemplatesTask,"#00ffff");c.addTask("ItemTemplateParamsTask",["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],a.orgdiagram.ItemTemplateParamsTask,"#00ffff");c.addTask("GroupTitleTemplateTask",["TemplatesOptionTask"],a.pdf.orgdiagram.GroupTitleTemplateTask,"#00ffff");c.addTask("CheckBoxTemplateTask",
["ItemsSizesOptionTask"],a.pdf.orgdiagram.CheckBoxTemplateTask,"#00ffff");c.addTask("ButtonsTemplateTask",["ItemsSizesOptionTask"],a.pdf.orgdiagram.ButtonsTemplateTask,"#00ffff");c.addTask("AnnotationLabelTemplateTask",["ItemsOptionTask"],a.pdf.orgdiagram.AnnotationLabelTemplateTask,"#00ffff");c.addTask("VisualTreeTask",["OrgTreeTask","null","VisualTreeOptionTask","isFamilyChartMode"],a.orgdiagram.VisualTreeTask,"#ff0000");c.addTask("VisualTreeLevelsTask",["VisualTreeTask","ItemTemplateParamsTask"],
a.orgdiagram.VisualTreeLevelsTask,"#ff0000");c.addTask("ConnectionsGraphTask",["graphics","CreateTransformTask","ConnectorsOptionTask","VisualTreeLevelsTask","AlignDiagramTask"],a.orgdiagram.ConnectionsGraphTask,"#00ffff");c.addTask("HighlightItemTask",["HighlightItemOptionTask","null"],a.orgdiagram.HighlightItemTask,"#00ffff");c.addTask("CursorItemTask",["CursorItemOptionTask","null"],a.orgdiagram.CursorItemTask,"#00ffff");c.addTask("SelectedItemsTask",["SelectedItemsOptionTask"],a.orgdiagram.SelectedItemsTask,
"#00ffff");c.addTask("CombinedNormalVisibilityItemsTask",["OptionsTask"],a.pdf.orgdiagram.DummyCombinedNormalVisibilityItemsTask,"#00ffff");c.addTask("CurrentControlSizeTask",["OptionsTask"],a.pdf.orgdiagram.DummyCurrentControlSizeTask,"#00ffff");c.addTask("ItemsPositionsTask","CurrentControlSizeTask ScaleOptionTask OrientationOptionTask ItemsSizesOptionTask ConnectorsOptionTask VisualTreeOptionTask VisualTreeTask VisualTreeLevelsTask ItemTemplateParamsTask CursorItemTask CombinedNormalVisibilityItemsTask".split(" "),
a.orgdiagram.ItemsPositionsTask,"#ff0000");c.addTask("AlignDiagramTask","OrientationOptionTask ItemsSizesOptionTask VisualTreeOptionTask ScaleOptionTask CurrentControlSizeTask null ItemsPositionsTask isFamilyChartMode".split(" "),a.orgdiagram.AlignDiagramTask,"#ff0000");c.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],a.orgdiagram.CreateTransformTask,"#00ffff");c.addTask("PaletteManagerTask",["ConnectorsOptionTask","null"],a.orgdiagram.PaletteManagerTask,"#00ffff");c.addTask("DrawBackgroundAnnotationTask",
"graphics CreateTransformTask ApplyLayoutChangesTask BackgroundAnnotationOptionTask VisualTreeTask AlignDiagramTask".split(" "),a.orgdiagram.DrawBackgroundAnnotationTask,"#008000");c.addTask("DrawBackgroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background DrawBackgroundAnnotationTask".split(" "),a.orgdiagram.DrawShapeAnnotationTask,"#008000");c.addTask("DrawBackgroundConnectorAnnotationTask",
"graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background DrawBackgroundShapeAnnotationTask".split(" "),a.orgdiagram.DrawConnectorAnnotationTask,"#008000");c.addTask("DrawTreeItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask null ItemsSizesOptionTask CombinedContextsTask AlignDiagramTask null ItemTemplateParamsTask CursorItemTask SelectedItemsTask GroupTitleTemplateTask CheckBoxTemplateTask ButtonsTemplateTask DrawBackgroundConnectorAnnotationTask".split(" "),
a.orgdiagram.DrawTreeItemsTask,"#008000");c.addTask("DrawBackgroundHighlightPathAnnotationTask","graphics ConnectorsOptionTask ForegroundHighlightPathAnnotationOptionTask ConnectionsGraphTask foreground DrawTreeItemsTask".split(" "),a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");c.addTask("DrawConnectorsTask","graphics ConnectionsGraphTask ConnectorsOptionTask showElbowDots PaletteManagerTask DrawBackgroundHighlightPathAnnotationTask".split(" "),a.orgdiagram.DrawConnectorsTask,"#008000");
c.addTask("DrawForegroundHighlightPathAnnotationTask","graphics ConnectorsOptionTask BackgroundHighlightPathAnnotationOptionTask ConnectionsGraphTask background DrawConnectorsTask".split(" "),a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");c.addTask("DrawForegroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground DrawForegroundHighlightPathAnnotationTask".split(" "),
a.orgdiagram.DrawShapeAnnotationTask,"#008000");c.addTask("DrawForegroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground DrawForegroundShapeAnnotationTask".split(" "),a.orgdiagram.DrawConnectorAnnotationTask,"#008000");c.addTask("DrawCursorTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask ItemTemplateParamsTask CursorItemTask SelectedItemsTask DrawForegroundConnectorAnnotationTask".split(" "),
a.orgdiagram.DrawCursorTask,"#008000");c.addTask("DrawHighlightTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask ItemTemplateParamsTask HighlightItemTask CursorItemTask SelectedItemsTask DrawCursorTask".split(" "),a.orgdiagram.DrawHighlightTask,"#008000");return c}function f(){e.options.hasButtons=2;e.options.pageFitMode=5;e.options.autoSizeMaximum=new a.common.Size(1E5,1E5)}var e={name:"orgdiagram",doc:null,options:g,tasks:null,graphics:null};return{draw:function(g,
i,j){e.doc=g;e.tasks=c(b,d);e.graphics=new a.pdf.graphics(e.doc);e.graphics.debug=!1;f();e.doc.save();e.doc.translate(i,j);e.tasks.process("OptionsTask",null,!1);e.doc.restore();g=e.tasks.getTask("AlignDiagramTask");return new a.common.Size(g.getContentSize())},getSize:function(){e.tasks=c(b,d);f();e.tasks.process("OptionsTask","AlignDiagramTask",!1);var g=e.tasks.getTask("AlignDiagramTask");return new a.common.Size(g.getContentSize())}}};a.pdf.AnnotationLabelTemplate=function(){return{template:function(){return{}},
getHashCode:function(){return 0},render:function(a,b,d){d=d.context;a.save();a.font("Helvetica",12).text(d.label,b.x,b.y,{width:b.width,height:b.height,align:"center"});a.restore()}}};a.pdf.CheckBoxTemplate=function(a){return{template:function(){return{}},getHashCode:function(){return 0},render:function(b,d,c){c=c.isSelected?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAF/SURBVDhPpZM7rwFREMf/u4hEY5vVkigoSERiKwq1QqOh28R30QnFRqnSKHwFn0C37Sbi0SCE2KzE41wzd/feG48g91ftmdn5zznzkLLZrNhutzidTvgEv98PRVEgxeNx0e12EYvFcDweXfdjZFmGEIKDx+MxdF0HotGomEwmV/tnUAzFyqT8KrNHLpdDJpPBZrPh81UHLPAO7XYb6/Ua8/kcpmnC5/NBkqT3BJbLJRqNBgKBACqVCgqFAg6HA/veEiiVSlBVFZfLBZ1Ox7V+81KAMtPVV6sV+v2+a/2FBeg9RDqdhqZp/E1Mp1O0Wi32V6tVLuAtLEBvGw6HmM1m2O/3yOfz7CyXy4hEItz3ZrPJtr/8dIEKUiwWYRgGX3e32yGZTOJ8PnMBB4MBB9xy14VarcaZFosFQqEQHMdBvV5HIpFw/3gATZNlWTxdHr1eT4TDYZFKpVzLPRRDsU9HeTQaCdu23dM91wKzwNNlCgaDXINHW0pF95bpn+us4AsY2TIOZFyZ9AAAAABJRU5ErkJggg==":
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAACjSURBVDhPrZNNCsQgDEY/f2q33sCCN+iNPJlXE2/gTtDiVBln1TJo+zZBJS+YELLvewkhIOeMETjnkFKCaK2LtRbbtiGl9H2+hlKKUkpLds7BGAMopYr3/rwfo+bUXFrN/yrfcXrQBDMwxkAImRfEGFucFnTeEdT/zNIEy7K0wyi/KfSGjPJoCp13BDM9EEK0eLtM67riOI7LLa0F+zI9XGeJDyTldfBA9FNyAAAAAElFTkSuQmCC";b.save();b.image(c,d.x,d.y);b.font("Helvetica",11).text(a,d.x+20,d.y+4,{ellipsis:!0,width:d.width-4,height:d.height,
align:"left"});b.restore()}}};a.pdf.CursorTemplate=function(a,b){return{template:function(){return{}},getHashCode:function(){return 0},render:function(a,c){a.save();a.roundedRect(c.x,c.y,c.width,c.height,4).lineWidth(b.cursorBorderWidth).stroke("#fbd850");a.restore()}}};a.pdf.DummyTemplate=function(){return{template:function(){return{}},getHashCode:function(){return 0},render:function(){}}};a.pdf.GroupTitleTemplate=function(g,b){return{template:function(){return{}},getHashCode:function(){return 0},
render:function(d,c,f){var f=f.context,e=f.groupTitleColor||"#4169e1",h=a.common.highestContrast(e,b,g);d.save();d.translate(c.width,0).rotate(90,{origin:[c.x,c.y]});d.fillColor(e).roundedRect(c.x,c.y,c.height-2,c.width,4).fill();d.fillColor(h).font("Helvetica",12).text(f.groupTitle,c.x+4,c.y+6,{ellipsis:!0,width:c.height-4,height:c.width-4,align:"center"});d.restore()}}};a.pdf.HighlightTemplate=function(a,b){return{template:function(){return{}},getHashCode:function(){return 0},render:function(a,
c){a.save();a.roundedRect(c.x,c.y,c.width,c.height,4).lineWidth(b.highlightBorderWidth).stroke("#fbcb09");a.restore()}}};a.pdf.ItemTemplate=function(g,b){return{template:function(){return{}},getHashCode:function(){return 0},render:function(d,c,f){var f=f.context,e=null!=f.itemTitleColor?f.itemTitleColor:"#4169e1",h=a.common.highestContrast(e,g.itemTitleSecondFontColor,g.itemTitleFirstFontColor),i=new a.common.Size(b.itemSize);i.width-=2*b.itemBorderWidth;i.height-=2*b.itemBorderWidth;d.save();d.roundedRect(c.x,
c.y,c.width,c.height,4).lineWidth(b.itemBorderWidth).stroke("#dddddd");d.fillColor(e).roundedRect(c.x+2,c.y+2,i.width-4,18,2).fill();d.fillColor(h).font("Helvetica",12).text(f.title,c.x+4,c.y+7,{ellipsis:!0,width:i.width-4-8,height:16,align:"left"});null!=f.image&&d.image(f.image,c.x+3,c.y+24);d.rect(c.x+3,c.y+24,50,60).stroke("#cccccc");d.fillColor("black").font("Helvetica",10).text(f.description,c.x+56,c.y+24,{ellipsis:!0,width:i.width-4-56,height:74,align:"left"});d.restore()}}};a.pdf.LabelAnnotationTemplate=
function(){return{template:function(){return{}},getHashCode:function(){return 0},render:function(a,b,d){d=d.context;a.save();a.font("Helvetica",12).text(d.title,b.x,b.y,{width:b.width,height:b.height,align:"center"});a.restore()}}};a.pdf.UserTemplate=function(g,b,d){return{template:function(){return{}},getHashCode:function(){return 0},render:function(c,f,e){null!=d?d(c,f,e):a.pdf.ItemTemplate(g,b).render(c,f,e)}}};return a});
