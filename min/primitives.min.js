/*
 Basic Primitives Diagrams v5.9.2
 Copyright (c) 2013 - 2020 Basic Primitives Inc

 Non-commercial - Free
 http://creativecommons.org/licenses/by-nc/3.0/

 Commercial and government licenses:
 http://www.basicprimitives.com/pdf/license.pdf

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};
$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var c=0;c<a.length;++c){var b=a[c];if(b&&b.Math==Math)return b}return globalThis};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,b,f){if(c){b=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var e=a[f];e in b||(b[e]={});b=b[e]}a=a[a.length-1];f=b[a];c=c(f);c!=f&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,b,f){var c=this.length||0;0>b&&(b=Math.max(0,c+b));if(null==f||f>c)f=c;f=Number(f);0>f&&(f=Math.max(0,c+f));for(b=Number(b||0);b<f;b++)this[b]=a;return this}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,c){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:c})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(b){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(b||"")+"_"+c++,b)}var c=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var b=0,f={next:function(){if(b<a.length){var e=b++;return{value:c(e,a[e]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,b){return b})}},"es8","es3");
(function(a,c){"function"===typeof define&&define.amd?define([],function(){return a.primitives=c()}):"object"===typeof module&&module.exports?module.exports=a.primitives=c():a.primitives=c()})(this,function(){var a={common:{version:"5.9.2"},orgdiagram:{},famdiagram:{},text:{},callout:{},connector:{},shape:{},pdf:{orgdiagram:{},famdiagram:{}}};a.common.getElementsByName=function(a,b,f,e){b=b.getElementsByTagName("*");for(var c=0;c<b.length;c+=1){var d=b[c];d.name==f&&e.call(a,d)}};a.common.getFixOfPixelALignment=
function(c){var b=c.getBoundingClientRect();c=b.top+document.body.scrollTop;b=b.left+document.body.scrollLeft;return new a.common.Size(-b+Math.floor(b),-c+Math.floor(c))};a.common.getElementOffset=function(a){var c=a.getBoundingClientRect();a=a.ownerDocument.documentElement;return{top:c.top+window.pageYOffset-a.clientTop,left:c.left+window.pageXOffset-a.clientLeft}};a.common.hasClass=function(a,b){a=a.className;if(null!=a&&"string"==typeof a){a=a.split(" ");for(var c=0;c<a.length;c+=1)if(a[c]==b)return!0}return!1};
a.common.stopPropagation=function(a){void 0!==a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble?a.cancelBubble=!0:void 0!==a.preventDefault&&a.preventDefault()};a.common.getInnerSize=function(c){c=window.getComputedStyle(c);return new a.common.Size(parseInt(c.width,10),parseInt(c.height,10))};a.common.isEven=function(a){return 0==a%2};a.common.isNullOrEmpty=function(a){var c=!0;void 0!==a&&null!==a&&(a=a.toString(),0<a.length&&(c=!1));return c};a.common.isArray=Array.isArray||function(a){return a instanceof
Array};a.common.loop=function(c,b,f){var e;if(null!=f)if(a.common.isArray(b)){var g=0;for(e=b.length;g<e&&!f.call(c,g,b[g]);g+=1);}else for(g in b)if(b.hasOwnProperty(g)&&f.call(c,g,b[g]))break};a.common.splitCamelCaseName=function(a){for(var c=[],f="",e=0;e<a.length;e+=1){var g=a[e];"A"<=g&&"Z">=g?(""!==f&&c.push(f),f=g):f+=g}""!==f&&c.push(f);return c};a.common.isObject=function(a){return null!==a&&"object"==typeof a};a.common.isEmptyObject=function(a){for(var c in a)if(a.hasOwnProperty(c))return!1;
return!0};a.common.cloneObject=function(c,b){if(null===c)var f=null;else if(c instanceof Array)if(b)f=c.slice(0);else{f=[];for(var e=0,g=c.length;e<g;e+=1)f.push(a.common.cloneObject(c[e],b))}else switch(typeof c){case "object":f={};for(e in c)c.hasOwnProperty(e)&&(f[e]=b?c[e]:a.common.cloneObject(c[e],b));break;default:f=c}return f};a.common.mergeObjects=function(a,b){for(var c=1;c<arguments.length;c+=1){var e=arguments[c];if(null!=e)for(var g in e)e.hasOwnProperty(g)&&(a[g]=e[g])}return a};a.common.hashCode=
function(a){var c=0,f;if(0<a.length)for(f=0;f<a.length;f+=1){var e=a.charCodeAt(f);c=(c<<5)-c+e;c&=c}return c};a.common.indexOf=function(a,b,f){var c;for(c=0;c<a.length;c+=1){var g=a[c];if(null!=f?f(g,b):g==b)return c}return-1};a.common._supportsSVG=null;a.common.supportsSVG=function(){null===a.common._supportsSVG&&(a.common._supportsSVG=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape",
"1.0"));return a.common._supportsSVG};a.common._supportsCanvas=null;a.common.supportsCanvas=function(){null===a.common._supportsCanvas&&(a.common._supportsCanvas=!!window.HTMLCanvasElement);return a.common._supportsCanvas};a.common.createGraphics=function(c,b){var f=null,e;c=[c];for(e in a.common.GraphicsType)a.common.GraphicsType.hasOwnProperty(e)&&c.push(a.common.GraphicsType[e]);for(e=0;null===f&&e<c.length;e+=1)switch(c[e]){case 0:a.common.supportsSVG()&&(f=new a.common.SvgGraphics(b));break;
case 1:a.common.supportsCanvas()&&(f=new a.common.CanvasGraphics(b))}return f};a.common.isChrome=function(){return null!=navigator?/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor):!1};a.common.getColorHexValue=function(c){if("#"===c.substr(0,1))return c;var b=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(c);if(null!==b&&0<b.length){c=parseInt(b[2],10);var f=parseInt(b[3],10);var e=parseInt(b[4],10);c=(c<<16|f<<8|e).toString(16);return b[1]+"000000".substr(0,6-c.length)+c}if(void 0===
a.common.ColorHexs)for(f in a.common.ColorHexs={},a.common.Colors)a.common.Colors.hasOwnProperty(f)&&(a.common.ColorHexs[f.toUpperCase()]=a.common.Colors[f]);return a.common.ColorHexs[c.toUpperCase()]};a.common.getColorName=function(c){var b;c=a.common.getColorHexValue(c);if(void 0===a.common.ColorNames)for(b in a.common.ColorNames={},a.common.Colors)a.common.Colors.hasOwnProperty(b)&&(a.common.ColorNames[a.common.Colors[b]]=b);return a.common.ColorNames[c]};a.common.getRed=function(a){return"#"===
a.substr(0,1)&&7===a.length?parseInt(a.substr(1,2),16):null};a.common.getGreen=function(a){return"#"===a.substr(0,1)&&7===a.length?parseInt(a.substr(3,2),16):null};a.common.getBlue=function(a){return"#"===a.substr(0,1)&&7===a.length?parseInt(a.substr(5,2),16):null};a.common.beforeOpacity=function(c,b){var f=a.common;c=f.getColorHexValue(c);var e=Math.ceil((f.getRed(c)-255*(1-b))/b);var g=Math.ceil((f.getGreen(c)-255*(1-b))/b);c=Math.ceil((f.getBlue(c)-255*(1-b))/b);e=(e<<16|g<<8|c).toString(16);return"#"+
"000000".substr(0,6-e.length)+e};a.common.highestContrast=function(c,b,f){var e=b,g=a.common,d=c+","+b+","+f;void 0===g.highestContrasts&&(g.highestContrasts={});g.highestContrasts.hasOwnProperty(d)?e=g.highestContrasts[d]:(g.luminosity(b,c)<g.luminosity(f,c)&&(e=f),g.highestContrasts[d]=e);return e};a.common.luminosity=function(c,b){var f=a.common;c=f.getColorHexValue(c);b=f.getColorHexValue(b);c=.2126*Math.pow(f.getRed(c)/255,2.2)+.7152*Math.pow(f.getRed(c)/255,2.2)+.0722*Math.pow(f.getRed(c)/255,
2.2);f=.2126*Math.pow(f.getRed(b)/255,2.2)+.7152*Math.pow(f.getRed(b)/255,2.2)+.0722*Math.pow(f.getRed(b)/255,2.2);return c>f?(c+.05)/(f+.05):(f+.05)/(c+.05)};a.common.compareArrays=function(a,b,f){var c=!0,g;if(a.length!=b.length)c=!1;else{var d={};var h=0;for(g=a.length;h<g;h+=1){var k=null!=f?f(a[h]):a[h];d.hasOwnProperty(k)?d[k]+=1:d[k]=1}h=0;for(g=b.length;h<g;h+=1)if(k=null!=f?f(b[h]):b[h],d.hasOwnProperty(k)){if(--d[k],0>d[k]){c=!1;break}}else{c=!1;break}}return c};a.common.JsonML={};"undefined"!==
typeof document&&function(a,b){function c(a){this.value=a}function e(a){return"function"===typeof a}function g(a){switch(typeof a){case "object":return a?p(a)?2:q(a)?5:a instanceof Date?4:3:0;case "function":return 1;case "undefined":return 0;default:return 4}}var d={accesskey:"accessKey",bgcolor:"bgColor",cellpadding:"cellPadding",cellspacing:"cellSpacing",checked:"defaultChecked","class":"className",colspan:"colSpan",contenteditable:"contentEditable",defaultchecked:"defaultChecked","for":"htmlFor",
formnovalidate:"formNoValidate",hidefocus:"hideFocus",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",readonly:"readOnly",rowspan:"rowSpan",spellcheck:"spellCheck",tabindex:"tabIndex",usemap:"useMap",willvalidate:"willValidate"},h={enctype:"encoding",onscroll:"DOMMouseScroll"},k={autocapitalize:1,autocomplete:1,autocorrect:1},l={async:1,autofocus:1,checked:1,defaultchecked:1,defer:1,disabled:1,formnovalidate:1,hidden:1,indeterminate:1,ismap:1,multiple:1,novalidate:1,readonly:1,required:1,
spellcheck:1,willvalidate:1},n=/^[\r\n]+/,m=/[\r\n]+$/;c.prototype.toString=function(){return this.value};a.raw=function(a){return new c(a)};var q=a.isRaw=function(a){return a instanceof c},p=Array.isArray||function(a){return a instanceof Array},r=function(a){if(!a){if(b.createDocumentFragment)return b.createDocumentFragment();a=""}else if("!"===a.charAt(0))return b.createComment("!"===a?"":a.substr(1)+" ");return"style"===a.toLowerCase()&&b.createStyleSheet?b.createStyleSheet():b.createElement(a)},
t=function(a,c,b){"on"===c.substr(0,2)&&(c=c.substr(2));switch(typeof b){case "function":if(a.addEventListener)a.addEventListener(c,b,!1);else if(a.attachEvent&&0!==g(a[c]))a.attachEvent("on"+c,b);else{var d=a["on"+c]||a[c];a["on"+c]=a[c]=e(d)?function(a){return!1!==d.call(this,a)&&!1!==b.call(this,a)}:b}break;case "string":a["on"+c]=new Function("event",b)}},u=a.applyStyles=function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a.style[b]=c[b]);return a},w=a.appendDOM=function(a,c){if(c){var d=(a.tagName||
"").toLowerCase();if(8===a.nodeType)3===c.nodeType&&(a.nodeValue+=c.nodeValue);else if("table"===d&&a.tBodies)if(c.tagName)if((d=c.tagName.toLowerCase())&&"tbody"!==d&&"thead"!==d){var f=0<a.tBodies.length?a.tBodies[a.tBodies.length-1]:null;f||(f=r("th"===d?"thead":"tbody"),a.appendChild(f));f.appendChild(c)}else!1!==a.canHaveChildren&&a.appendChild(c);else{if(11===c.nodeType)for(;c.firstChild;)w(a,c.removeChild(c.firstChild))}else if("style"===d&&b.createStyleSheet)a.cssText=c;else if(!1!==a.canHaveChildren)a.appendChild(c);
else if("object"===d&&c.tagName&&"param"===c.tagName.toLowerCase()){try{a.appendChild(c)}catch(z){}try{a.object&&(a.object[c.name]=c.value)}catch(z){}}}},v=function(a){return!!a&&3===a.nodeType&&(!a.nodeValue||!/\S/.exec(a.nodeValue))},x=function(a,c){a&&3===a.nodeType&&c.exec(a.nodeValue)&&(a.nodeValue=a.nodeValue.replace(c,""))},E=function(a){if(a){for(;v(a.firstChild);)a.removeChild(a.firstChild);for(x(a.firstChild,n);v(a.lastChild);)a.removeChild(a.lastChild);x(a.lastChild,m)}},A=function(a){var c=
r("div");c.innerHTML=""+a;E(c);if(1===c.childNodes.length)return c.firstChild;for(a=r("");c.firstChild;)a.appendChild(c.firstChild);return a},F=function(a){return b.createTextNode("["+a+"]")};a.onerror=null;var y=a.patch=function(a,c,f){for(var e=1;e<c.length;e+=1)if(p(c[e])||"string"===typeof c[e])w(a,B(c[e],f));else if(q(c[e]))w(a,A(c[e].value));else if("object"===typeof c[e]&&null!==c[e]&&1===a.nodeType){var m=void 0,n=c[e];if(n.name&&b.attachEvent&&!a.parentNode)try{var v=r("<"+a.tagName+' name="'+
n.name+'">');a.tagName===v.tagName&&(a=v)}catch(M){}for(m in n)if(n.hasOwnProperty(m)){var C=n[m],x=g(C);if(m)if(0===x&&(C="",x=4),m=d[m.toLowerCase()]||m,"$"===m)C(a);else if("className"==m)if(p(C))for(x=0;x<C.length;x+=1)a.className+=" "+C[x];else a.className+=" "+C;else"style"===m?0!==g(a.style.cssText)?"string"==typeof C?a.style.cssText=C:u(a,C):a.style=C:"on"===m.substr(0,2)?(t(a,m,C),(m=h[m])&&t(a,m,C)):k[m.toLowerCase()]||4===x&&"$"!==m.charAt(0)&&0===g(a[m])&&0===g(a[h[m]])?l[m.toLowerCase()]?
C&&(a.setAttribute(m,m),(m=h[m])&&a.setAttribute(m,m)):(a.setAttribute(m,C),(m=h[m])&&a.setAttribute(m,C)):(a[m]=C,(m=h[m])&&(a[m]=C))}}return a},B=a.toHTML=function(c,d){try{if(!c)return null;if("string"===typeof c)return b.createTextNode(c);if(q(c))return A(c.value);if(!p(c)||"string"!==typeof c[0])throw new SyntaxError("invalid JsonML");var f=c[0];if(!f){var h=r("");for(f=1;f<c.length;f+=1)w(h,B(c[f],d));E(h);return 1===h.childNodes.length?h.firstChild:h}if("style"===f.toLowerCase()&&b.createStyleSheet)return y(b.createStyleSheet(),
c,d),null;var g=y(r(f),c,d);E(g);return g&&e(d)?d(g):g}catch(H){try{return(e(a.onerror)?a.onerror:F)(H,c,d)}catch(L){return b.createTextNode("["+L+"]")}}};a.toHTMLText=function(a,c){a=B(a,c);if(a.outerHTML)return a.outerHTML;c=r("div");c.appendChild(a);var b=c.innerHTML;c.removeChild(a);return b}}(a.common.JsonML,document);a.common.AdviserPlacementType={Auto:0,Left:2,Right:3};a.orgdiagram.AdviserPlacementType=a.common.AdviserPlacementType;a.common.AnnotationType={Connector:0,Shape:1,HighlightPath:2,
Label:3,Background:4};a.common.ChildrenPlacementType={Auto:0,Vertical:1,Horizontal:2,Matrix:3};a.orgdiagram.ChildrenPlacementType=a.common.ChildrenPlacementType;a.common.Colors={AliceBlue:"#f0f8ff",AntiqueWhite:"#faebd7",Aqua:"#00ffff",Aquamarine:"#7fffd4",Azure:"#f0ffff",Beige:"#f5f5dc",Bisque:"#ffe4c4",Black:"#000000",BlanchedAlmond:"#ffebcd",Blue:"#0000ff",BlueViolet:"#8a2be2",Brown:"#a52a2a",BurlyWood:"#deb887",Bronze:"#cd7f32",CadetBlue:"#5f9ea0",ChartReuse:"#7fff00",Chocolate:"#d2691e",Coral:"#ff7f50",
CornflowerBlue:"#6495ed",Cornsilk:"#fff8dc",Crimson:"#dc143c",Cyan:"#00ffff",DarkBlue:"#00008b",DarkCyan:"#008b8b",DarkGoldenrod:"#b8860b",DarkGray:"#a9a9a9",DarkGreen:"#006400",DarkKhaki:"#bdb76b",DarkMagenta:"#8b008b",DarkOliveGreen:"#556b2f",Darkorange:"#ff8c00",DarkOrchid:"#9932cc",DarkRed:"#8b0000",DarkSalmon:"#e9967a",DarkSeaGreen:"#8fbc8f",DarkSlateBlue:"#483d8b",DarkSlateGray:"#2f4f4f",DarkTurquoise:"#00ced1",DarkViolet:"#9400d3",DeepPink:"#ff1493",DeepSkyBlue:"#00bfff",DimGray:"#696969",
DodgerBlue:"#1e90ff",FireBrick:"#b22222",FloralWhite:"#fffaf0",ForestGreen:"#228b22",Fuchsia:"#ff00ff",Gainsboro:"#dcdcdc",GhostWhite:"#f8f8ff",Gold:"#ffd700",Goldenrod:"#daa520",Gray:"#808080",Green:"#008000",GreenYellow:"#adff2f",Honeydew:"#f0fff0",Hotpink:"#ff69b4",IndianRed:"#cd5c5c",Indigo:"#4b0082",Ivory:"#fffff0",Khaki:"#f0e68c",Lavender:"#e6e6fa",LavenderBlush:"#fff0f5",Lawngreen:"#7cfc00",Lemonchiffon:"#fffacd",LightBlue:"#add8e6",LightCoral:"#f08080",LightCyan:"#e0ffff",LightGoldenrodYellow:"#fafad2",
LightGray:"#d3d3d3",LightGreen:"#90ee90",LightPink:"#ffb6c1",LightSalmon:"#ffa07a",LightSeaGreen:"#20b2aa",LightSkyBlue:"#87cefa",LightSlateGray:"#778899",LightSteelBlue:"#b0c4de",LightYellow:"#ffffe0",Lime:"#00ff00",Limegreen:"#32cd32",Linen:"#faf0e6",Magenta:"#ff00ff",Maroon:"#800000",MediumAquamarine:"#66cdaa",MediumBlue:"#0000cd",MediumOrchid:"#ba55d3",MediumPurple:"#9370d8",MediumSeaGreen:"#3cb371",MediumSlateBlue:"#7b68ee",MediumSpringGreen:"#00fa9a",MediumTurquoise:"#48d1cc",MediumVioletRed:"#c71585",
MidnightBlue:"#191970",MintCream:"#f5fffa",MistyRose:"#ffe4e1",Moccasin:"#ffe4b5",NavajoWhite:"#ffdead",Navy:"#000080",Oldlace:"#fdf5e6",Olive:"#808000",Olivedrab:"#6b8e23",Orange:"#ffa500",OrangeRed:"#ff4500",Orchid:"#da70d6",PaleGoldenRod:"#eee8aa",PaleGreen:"#98fb98",PaleTurquoise:"#afeeee",PaleVioletRed:"#d87093",Papayawhip:"#ffefd5",Peachpuff:"#ffdab9",Peru:"#cd853f",Pink:"#ffc0cb",Plum:"#dda0dd",PowderBlue:"#b0e0e6",Purple:"#800080",Red:"#ff0000",RosyBrown:"#bc8f8f",RoyalBlue:"#4169e1",SaddleBrown:"#8b4513",
Salmon:"#fa8072",SandyBrown:"#f4a460",SeaGreen:"#2e8b57",Seashell:"#fff5ee",Sienna:"#a0522d",Silver:"#c0c0c0",SkyBlue:"#87ceeb",SlateBlue:"#6a5acd",SlateGray:"#708090",Snow:"#fffafa",SpringGreen:"#00ff7f",SteelBlue:"#4682b4",Tan:"#d2b48c",Teal:"#008080",Thistle:"#d8bfd8",Tomato:"#ff6347",Turquoise:"#40e0d0",Violet:"#ee82ee",Wheat:"#f5deb3",White:"#ffffff",WhiteSmoke:"#f5f5f5",Yellow:"#ffff00",YellowGreen:"#9acd32"};a.common.ConnectorLabelPlacementType={From:0,Between:1,To:2};a.common.ConnectorPlacementType=
{Offbeat:0,Straight:1};a.common.ConnectorShapeType={OneWay:0,TwoWay:1,BothWay:2};a.common.ConnectorStyleType={Extra:0,Regular:1,Highlight:2};a.common.ConnectorType={Squared:0,Angular:1,Curved:2};a.orgdiagram.ConnectorType=a.common.ConnectorType;a.common.ElbowType={None:0,Dot:1,Bevel:2,Round:3};a.common.Enabled={Auto:0,True:1,False:2};a.common.GraphicsType={SVG:0,Canvas:1};a.common.GroupByType={None:0,Parents:1,Children:2};a.common.HorizontalAlignmentType={Center:0,Left:1,Right:2};a.orgdiagram.ItemType=
{Regular:0,Adviser:2,Assistant:1,SubAssistant:4,SubAdviser:5,GeneralPartner:6,LimitedPartner:7,AdviserPartner:8};a.common.LabelType={Regular:0,Dummy:1,Fixed:2,None:3};a.common.Layers={BackgroundAnnotation:2,BackgroundAnnotations:3,BackgroundConnectorAnnotation:4,BackgroundHighlightPathAnnotations:5,Connector:6,ForegroundHighlightPathAnnotations:7,Highlight:8,Marker:9,Label:10,Cursor:11,Item:12,ForegroundAnnotations:13,ForegroundConnectorAnnotation:14,Annotation:15,Controls:16};a.common.LineType={Solid:0,
Dotted:1,Dashed:2};a.common.LoopsLayoutMode={Optimized:0,KeepItemsOrder:1};a.common.NavigationMode={Default:0,CursorOnly:1,HighlightOnly:3,Inactive:2};a.common.NeighboursSelectionMode={ParentsAndChildren:0,ParentsChildrenSiblingsAndSpouses:1};a.common.OrientationType={Top:0,Bottom:1,Left:2,Right:3,None:4};a.orgdiagram.OrientationType=a.common.OrientationType;a.common.PageFitMode={None:0,PageWidth:1,PageHeight:2,FitToPage:3,AutoSize:5,SelectionOnly:6};a.orgdiagram.PageFitMode=a.common.PageFitMode;
a.common.PlacementType={Auto:0,TopLeft:8,Top:1,TopRight:2,RightTop:11,Right:3,RightBottom:12,BottomRight:4,Bottom:5,BottomLeft:6,LeftBottom:10,Left:7,LeftTop:9};a.common.RenderingMode={Create:0,Update:1};a.common.SegmentType={Line:0,Move:1,QuadraticArc:2,CubicArc:3,Dot:4};a.common.SelectionPathMode={None:0,FullStack:1};a.orgdiagram.SelectionPathMode=a.common.SelectionPathMode;a.common.ShapeType={Rectangle:0,Oval:1,Triangle:2,CrossOut:3,Circle:4,Rhombus:5,Wedge:7,FramedOval:8,FramedTriangle:9,FramedWedge:10,
FramedRhombus:11,None:6};a.common.SideFlag={Top:1,Right:2,Bottom:4,Left:8};a.text.TextOrientationType={Horizontal:0,RotateLeft:1,RotateRight:2,Auto:3};a.common.UpdateMode={Recreate:0,Refresh:1,PositonHighlight:2};a.orgdiagram.UpdateMode=a.common.UpdateMode;a.common.VectorRelationType={None:0,Null:1,Collinear:2,Opposite:3};a.common.VerticalAlignmentType={Top:0,Middle:1,Bottom:2};a.common.Visibility={Auto:0,Normal:1,Dot:2,Line:3,Invisible:4};a.common.ZOrderType={Auto:0,Background:1,Foreground:2};a.common.RenderEventArgs=
function(){this.renderingMode=this.templateName=this.context=this.element=this.id=null;this.isSelected=this.isCursor=!1};a.common.BaseShape=function(){};a.common.BaseShape.prototype._getLabelPosition=function(c,b,f,e,g,d,h,k){switch(k){case 1:c=new a.common.Rect(c+f/2-g/2,b-h-d,g,d);break;case 2:c=new a.common.Rect(c+f-g,b-h-d,g,d);break;case 8:c=new a.common.Rect(c,b-h-d,g,d);break;case 3:c=new a.common.Rect(c+f+h,b+e/2-d/2,g,d);break;case 11:c=new a.common.Rect(c+f+h,b,g,d);break;case 12:c=new a.common.Rect(c+
f+h,b+e-d,g,d);break;case 4:c=new a.common.Rect(c+f-g,b+e+h,g,d);break;case 6:c=new a.common.Rect(c,b+e+h,g,d);break;case 7:c=new a.common.Rect(c-g-h,b+e/2-d/2,g,d);break;case 9:c=new a.common.Rect(c-g-h,b,g,d);break;case 10:c=new a.common.Rect(c-g-h,b+e-d,g,d);break;default:c=new a.common.Rect(c+f/2-g/2,b+e+h,g,d)}return c};a.common.BaseShape.prototype._betweenPoint=function(c,b){return new a.common.Point((c.x+b.x)/2,(c.y+b.y)/2)};a.common.BaseShape.prototype._offsetPoint=function(c,b,f){var e=c.distanceTo(b);
return 0===e||0===f?new a.common.Point(c):new a.common.Point(c.x+(b.x-c.x)/e*f,c.y+(b.y-c.y)/e*f)};a.common.Callout=function(a){this.m_graphics=a;this.pointerPlacement=0;this.cornerRadius="10%";this.offset=0;this.lineWidth=this.opacity=1;this.pointerWidth="10%";this.borderColor="#000000";this.lineType=0;this.fillColor="#d3d3d3";this.m_map=[[8,7,6],[1,null,5],[2,3,4]]};a.common.Callout.prototype=new a.common.BaseShape;a.common.Callout.prototype.draw=function(c,b){b=(new a.common.Rect(b)).offset(this.offset);
var f=new a.common.Point(b.x,b.y),e=new a.common.Point(b.right(),b.y),g=new a.common.Point(b.right(),b.bottom()),d=new a.common.Point(b.left(),b.bottom());b=[null,null,null,null,null,null,null,null];d=[f,e,g,d];e=this.m_graphics.getPxSize(this.cornerRadius,Math.min(f.distanceTo(e),e.distanceTo(g)));var h={};null!==this.fillColor&&(h.fillColor=this.fillColor,h.opacity=this.opacity);null!==this.lineColor&&(h.lineColor=this.borderColor);h.lineWidth=this.lineWidth;h.lineType=this.lineType;var k=new a.common.PaletteItem(h);
h=new a.common.PolylinesBuffer;k=h.getPolyline(k);null!==c&&(f=0===this.pointerPlacement?this._getPlacement(c,f,g):this.pointerPlacement,null!==f&&(b[f]=c));for(f=0;f<d.length;f+=1)this._drawSegment(k,d[0],d[1],d[2],this.pointerWidth,e,b[1],b[2]),c=d.shift(),d.push(c),c=b.shift(),b.push(c),c=b.shift(),b.push(c);this.m_graphics.polylinesBuffer(h)};a.common.Callout.prototype._getPlacement=function(a,b,f){return this.m_map[a.x<b.x?0:a.x>f.x?2:1][a.y<b.y?0:a.y>f.y?2:1]};a.common.Callout.prototype._drawSegment=
function(c,b,f,e,g,d,h,k){var l=this._offsetPoint(b,f,d),n=this._offsetPoint(f,b,d);e=this._offsetPoint(f,e,d);g=this.m_graphics.getPxSize(g,b.distanceTo(f)/2);0===c.length()&&c.addSegment(new a.common.MoveSegment(l));null!==h&&(l=this._betweenPoint(b,f),b=this._offsetPoint(l,b,g),g=this._offsetPoint(l,f,g),c.addSegment(new a.common.LineSegment(b)),c.addSegment(new a.common.LineSegment(h)),c.addSegment(new a.common.LineSegment(g)));c.addSegment(new a.common.LineSegment(n));null!==k?(c.addSegment(new a.common.LineSegment(k)),
c.addSegment(new a.common.LineSegment(e))):c.addSegment(new a.common.QuadraticArcSegment(f,e))};a.common.ConnectorOffbeat=function(){};a.common.ConnectorOffbeat.prototype=new a.common.BaseShape;a.common.ConnectorOffbeat.prototype.draw=function(c,b,f,e,g,d,h,k,l,n,m,q,p,r,t){p=d=0;var u=null;var w=c.getPolyline(b);var v=[];switch(l){case 1:v=[-g/2,g/2];var x=!1;break;case 0:v=[0];x=!1;break;case 2:v=[0],x=!0}var E=Math.max(q?h.width:0,5*g);if(f.right()+E<e.left()||f.left()>e.right()+E){if(f.left()>
e.right()){var A=new a.common.Point(f.left(),f.verticalCenter());var F=new a.common.Point(e.right(),e.verticalCenter())}else A=new a.common.Point(f.right(),f.verticalCenter()),F=new a.common.Point(e.left(),e.verticalCenter());q&&(f.left()>e.right()?(d=7,p=3):(d=3,p=7));var y=new a.common.Rect(A,F);var B=A.y<=F.y;var C=A.x<F.x;if(y.height<y.width){y.height<2*g&&y.offset(0,B?2*g:0,0,B?0:2*g);k=0;for(E=v.length;k<E;k+=1){var D=v[k];c.addInverted(function(d){d=d.getPolyline(b);d.addSegment(new a.common.MoveSegment(A.x,
A.y+D));d.addSegment(new a.common.QuadraticArcSegment(y.horizontalCenter(),(B?y.top():y.bottom())+D,F.x,F.y+D));x&&d.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))})},k||0==l);w.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))})}q&&(l=h.width<y.width/5*2?a.common.QuadraticArcSegment.prototype.offsetPoint(A.x,A.y,y.horizontalCenter(),B?y.top():y.bottom(),F.x,F.y,.5):new a.common.Point(A.x,B?y.top():y.bottom()),u=new a.common.Rect(l.x+(C?g:-h.width-
g),B?l.y-h.height-g:l.y+g,h.width,h.height))}else{k=0;for(E=v.length;k<E;k+=1)D=v[k],c.addInverted(function(d){d=d.getPolyline(b);d.addSegment(new a.common.MoveSegment(A.x,A.y+D));d.addSegment(new a.common.QuadraticArcSegment(y.horizontalCenter()+D*(B!=C?1:-1),(B?y.top():y.bottom())+D,y.horizontalCenter()+D*(B!=C?1:-1),y.verticalCenter()+D));d.addSegment(new a.common.QuadraticArcSegment(y.horizontalCenter()+D*(B!=C?1:-1),(B?y.bottom():y.top())+D,F.x,F.y+D));x&&d.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))})},
k||0==l),w.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))});q&&(u=new a.common.Rect(y.horizontalCenter()+(B!=C?g:-(g+h.width)),y.verticalCenter()-h.height/2,h.width,h.height))}}else if(f.verticalCenter()<e.top()||f.verticalCenter()>e.bottom()){C=f.x<k.width/2;A=new a.common.Point(C?f.right():f.left(),f.verticalCenter());F=new a.common.Point(C?e.right():e.left(),e.verticalCenter());y=new a.common.Rect(A,F);y.offset(10*g,0,10*g,0);B=A.y<=F.y;k=0;for(E=v.length;k<E;k+=1)D=v[k],
c.addInverted(function(d){d=d.getPolyline(b);d.addSegment(new a.common.MoveSegment(A.x,A.y+D));d.addSegment(new a.common.QuadraticArcSegment(C?y.right()+D*(B?-1:1):y.left()-D*(B?-1:1),y.verticalCenter(),C?e.right():e.left(),e.verticalCenter()-D));x&&d.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))})},k||0==l),w.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))});q&&(p=d=C?3:7,l=a.common.QuadraticArcSegment.prototype.offsetPoint(A.x,A.y,C?y.right():
y.left(),y.verticalCenter(),F.x,F.y,.5),u=new a.common.Rect(l.x+(C?g/2:-g/2-h.width),l.y-h.height/2,h.width,h.height))}else{A=new a.common.Point(f.horizontalCenter(),f.top());F=new a.common.Point(e.horizontalCenter(),e.top());y=new a.common.Rect(A,F);y.offset(0,7*g,0,0);C=A.x<F.x;k=0;for(E=v.length;k<E;k+=1)D=v[k],c.addInverted(function(d){d=d.getPolyline(b);d.addSegment(new a.common.MoveSegment(A.x+D,A.y));d.addSegment(new a.common.QuadraticArcSegment(y.horizontalCenter(),y.top()-D*(C?-1:1),e.horizontalCenter()-
D,e.top()));x&&d.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))})},k||0==l),w.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))});q&&(p=d=1,l=a.common.QuadraticArcSegment.prototype.offsetPoint(A.x,A.y,y.horizontalCenter(),y.top(),F.x,F.y,.5),u=new a.common.Rect(l.x-h.width/2,l.y-(n+h.height),h.width,h.height))}if(q)switch(m){case 0:u=this._getLabelPosition(f.x,f.y,f.width,f.height,u.width,u.height,n,d);break;case 2:u=this._getLabelPosition(e.x,e.y,
e.width,e.height,u.width,u.height,n,p)}null!=r&&r(u,t)};a.common.ConnectorStraight=function(){};a.common.ConnectorStraight.prototype=new a.common.BaseShape;a.common.ConnectorStraight.prototype.draw=function(c,b,f,e,g,d,h,k,l,n,m,q,p,r,t){var u,w,v,x,E=g/2,A=null,F=0,y=0,B=this;var C=new a.common.Vector(f.centerPoint(),e.centerPoint());f.loopEdges(function(a,c){u=a.getIntersectionPoint(C,!0,1);F=c;return null!=u});e.loopEdges(function(a,c){w=a.getIntersectionPoint(C,!0,1);y=c;return null!=w});if(null!=
u&&null!=w){var D=new a.common.Vector(u,w);p.getOffset(D,function(f,e,g){D.offset((f*d-(e-1)*d/2)*g);u=D.from;w=D.to;switch(l){case 1:x=new a.common.Vector(w.clone(),u.clone());x.offset(E);B._drawLine(c,b,x.from,x.to,!1);x=new a.common.Vector(u.clone(),w.clone());x.offset(E);B._drawLine(c,b,x.from,x.to,!1);break;case 0:B._drawLine(c,b,u,w,!1);break;case 2:B._drawLine(c,b,u,w,!0)}if(q){switch(m){case 0:A=B._getLabelPositionBySnapPoint(u.x,u.y,h.width,h.height,n,F);break;case 1:v=B._betweenPoint(u,
w);A=B._getLabelPositionBySnapPoint(v.x,v.y,h.width,h.height,n,3);break;case 2:A=B._getLabelPositionBySnapPoint(w.x,w.y,h.width,h.height,n,y)}null!=r&&r.call(this,A,t)}})}};a.common.ConnectorStraight.prototype._drawLine=function(c,b,f,e,g){c.addInverted(function(h){d=h.getPolyline(b);d.addSegment(new a.common.MoveSegment(f));d.addSegment(new a.common.LineSegment(e));d.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))})},!1);if(g){var d=c.getPolyline(b);d.addArrow(b.lineWidth,
function(a){a.mergeTo(c.getPolyline(a.paletteItem))})}};a.common.ConnectorStraight.prototype._getLabelPositionBySnapPoint=function(c,b,f,e,g,d){var h=null;switch(d){case 0:case 1:h=new a.common.Rect(c-f/2,b-g-e,f,e);break;case 3:h=new a.common.Rect(c+g,b-e/2,f,e);break;case 5:h=new a.common.Rect(c-f/2,b+g,f,e);break;case 7:h=new a.common.Rect(c-f-g,b-e/2,f,e)}return h};a.common.Marker=function(){};a.common.Marker.Markers={};a.common.Marker.DrawCircle=function(c,b){var f=Math.min(b.width/2,b.height/
2);b=new a.common.Rect(b.horizontalCenter()-f,b.verticalCenter()-f,2*f,2*f);a.common.Marker.DrawOval(c,b)};a.common.Marker.DrawRectangle=function(c,b){c.addSegment(new a.common.MoveSegment(b.x,b.verticalCenter()));c.addSegment(new a.common.LineSegment(b.x,b.y));c.addSegment(new a.common.LineSegment(b.right(),b.y));c.addSegment(new a.common.LineSegment(b.right(),b.bottom()));c.addSegment(new a.common.LineSegment(b.x,b.bottom()));c.addSegment(new a.common.LineSegment(b.x,b.verticalCenter()))};a.common.Marker.DrawOval=
function(c,b){var f=b.width/2*.5522848;var e=b.height/2*.5522848;c.addSegment(new a.common.MoveSegment(b.x,b.verticalCenter()));c.addSegment(new a.common.CubicArcSegment(b.x,b.verticalCenter()-e,b.horizontalCenter()-f,b.y,b.horizontalCenter(),b.y));c.addSegment(new a.common.CubicArcSegment(b.horizontalCenter()+f,b.y,b.right(),b.verticalCenter()-e,b.right(),b.verticalCenter()));c.addSegment(new a.common.CubicArcSegment(b.right(),b.verticalCenter()+e,b.horizontalCenter()+f,b.bottom(),b.horizontalCenter(),
b.bottom()));c.addSegment(new a.common.CubicArcSegment(b.horizontalCenter()-f,b.bottom(),b.x,b.verticalCenter()+e,b.x,b.verticalCenter()))};a.common.Marker.DrawTriangle=function(c,b){c.addSegment(new a.common.MoveSegment(b.left(),b.bottom()));c.addSegment(new a.common.LineSegment(b.horizontalCenter(),b.y));c.addSegment(new a.common.LineSegment(b.right(),b.bottom()));c.addSegment(new a.common.LineSegment(b.left(),b.bottom()))};a.common.Marker.DrawCrossOut=function(c,b){c.addSegment(new a.common.MoveSegment(b.horizontalCenter(),
b.verticalCenter()));c.addSegment(new a.common.LineSegment(b.x,b.y));c.addSegment(new a.common.MoveSegment(b.horizontalCenter(),b.verticalCenter()));c.addSegment(new a.common.LineSegment(b.right(),b.bottom()));c.addSegment(new a.common.MoveSegment(b.horizontalCenter(),b.verticalCenter()));c.addSegment(new a.common.LineSegment(b.right(),b.y));c.addSegment(new a.common.MoveSegment(b.horizontalCenter(),b.verticalCenter()));c.addSegment(new a.common.LineSegment(b.left(),b.bottom()))};a.common.Marker.DrawRhombus=
function(c,b){c.addSegment(new a.common.MoveSegment(b.horizontalCenter(),b.bottom()));c.addSegment(new a.common.LineSegment(b.left(),b.verticalCenter()));c.addSegment(new a.common.LineSegment(b.horizontalCenter(),b.y));c.addSegment(new a.common.LineSegment(b.right(),b.verticalCenter()));c.addSegment(new a.common.LineSegment(b.horizontalCenter(),b.bottom()))};a.common.Marker.DrawWedge=function(c,b){c.addSegment(new a.common.MoveSegment(b.horizontalCenter(),b.y));c.addSegment(new a.common.LineSegment(b.right(),
b.y));c.addSegment(new a.common.LineSegment(b.horizontalCenter(),b.bottom()));c.addSegment(new a.common.LineSegment(b.left(),b.y));c.addSegment(new a.common.LineSegment(b.horizontalCenter(),b.y))};a.common.Marker.DrawFramedOval=function(c,b){a.common.Marker.DrawRectangle(c,b);a.common.Marker.DrawOval(c,b)};a.common.Marker.DrawFramedTriangle=function(c,b){a.common.Marker.DrawRectangle(c,b);a.common.Marker.DrawTriangle(c,b)};a.common.Marker.DrawFramedWedge=function(c,b){a.common.Marker.DrawRectangle(c,
b);a.common.Marker.DrawWedge(c,b)};a.common.Marker.DrawFramedRhombus=function(c,b){a.common.Marker.DrawRectangle(c,b);a.common.Marker.DrawRhombus(c,b)};a.common.Marker.DrawNone=function(a,b){};a.common.Marker.Markers[4]=a.common.Marker.DrawCircle;a.common.Marker.Markers[0]=a.common.Marker.DrawRectangle;a.common.Marker.Markers[1]=a.common.Marker.DrawOval;a.common.Marker.Markers[2]=a.common.Marker.DrawTriangle;a.common.Marker.Markers[3]=a.common.Marker.DrawCrossOut;a.common.Marker.Markers[5]=a.common.Marker.DrawRhombus;
a.common.Marker.Markers[7]=a.common.Marker.DrawWedge;a.common.Marker.Markers[8]=a.common.Marker.DrawFramedOval;a.common.Marker.Markers[9]=a.common.Marker.DrawFramedTriangle;a.common.Marker.Markers[10]=a.common.Marker.DrawFramedWedge;a.common.Marker.Markers[11]=a.common.Marker.DrawFramedRhombus;a.common.Marker.Markers[6]=a.common.Marker.DrawNone;a.common.Marker.prototype.draw=function(c,b,f,e){c=c.getPolyline(e);a.common.Marker.Markers[b](c,f)};a.common.MergedRectangles=function(a){this.graphics=a;
this.transform=null;this.opacity=this.lineWidth=1;this.fillColor=null;this.lineType=0;this.borderColor=null};a.common.MergedRectangles.prototype=new a.common.BaseShape;a.common.MergedRectangles.prototype.draw=function(c){var b=new a.common.PaletteItem({lineColor:this.borderColor,lineWidth:this.lineWidth,fillColor:this.fillColor,lineType:this.lineType,opacity:this.opacity}),f=new a.common.Polyline(b);a.common.getMergedRectangles(this,c,function(c){for(var b=0,d=c.length;b<d;b+=1){var e=c[b];0==b?f.addSegment(new a.common.MoveSegment(e.x,
e.y)):f.addSegment(new a.common.LineSegment(e.x,e.y))}});f.transform(this.transform,!0);this.graphics.polyline(f)};a.common.Shape=function(c){this.m_graphics=c;this.transform=null;this.orientationType=0;this.panelSize=null;this.shapeType=0;this.offset=new a.common.Thickness(0,0,0,0);this.lineWidth=1;this.labelOffset=4;this.cornerRadius="10%";this.opacity=1;this.fillColor=null;this.labelSize=new a.common.Size(60,30);this.lineType=0;this.borderColor=null;this.hasLabel=!1;this.labelTemplate=null;this.labelPlacement=
0};a.common.Shape.prototype=new a.common.BaseShape;a.common.Shape.prototype.draw=function(c,b){var f;c=(new a.common.Rect(c)).offset(this.offset);this.transform=new a.common.Transform;this.transform.size=this.panelSize;this.transform.setOrientation(this.orientationType);this.hasLabel&&(f=this._getLabelPosition(c.x,c.y,c.width,c.height,this.labelSize.width,this.labelSize.height,this.labelOffset,this.labelPlacement));switch(this.shapeType){case 0:var e=new a.common.Callout(this.m_graphics);e.cornerRadius=
this.cornerRadius;e.opacity=this.opacity;e.lineWidth=this.lineWidth;e.lineType=this.lineType;e.borderColor=this.borderColor;e.fillColor=this.fillColor;e.draw(null,c);break;default:e=new a.common.PaletteItem({lineColor:this.borderColor,lineWidth:this.lineWidth,lineType:this.lineType,fillColor:this.fillColor,opacity:this.opacity});this.transform.transformRect(c.x,c.y,c.width,c.height,!1,this,function(b,d,f,e){c=new a.common.Rect(b,d,f,e)});var g=new a.common.Marker;var d=new a.common.PolylinesBuffer;
g.draw(d,this.shapeType,c,e);d.transform(this.transform,!0);this.m_graphics.polylinesBuffer(d)}this.hasLabel&&this.m_graphics.template(f.x,f.y,0,0,0,0,f.width,f.height,this.labelTemplate.template(),this.labelTemplate.getHashCode(),this.labelTemplate.render,b,null)};a.common.Point=function(a,b){this.context=this.y=this.x=null;switch(arguments.length){case 1:this.x=a.x;this.y=a.y;this.context=a.context;break;case 2:this.x=a,this.y=b}};a.common.Point.prototype.scale=function(a){this.x*=a;this.y*=a;return this};
a.common.Point.prototype.distanceTo=function(a,b){var c=0,e=0;switch(arguments.length){case 1:c=a.x;e=a.y;break;case 2:c=a,e=b}c=this.x-c;e=this.y-e;return Math.sqrt(c*c+e*e)};a.common.Point.prototype.equalTo=function(a){return this.x==a.x&&this.y==a.y};a.common.Point.prototype.swap=function(a){var c=a.x,f=a.y;a.x=this.x;a.y=this.y;this.x=c;this.y=f};a.common.Point.prototype.clone=function(){return new a.common.Point(this)};a.common.Point.prototype.toString=function(a){a=void 0!==a?a:"px";var c="left:"+
this.x+a+";";return c+="top:"+this.y+a+";"};a.common.Point.prototype.getCSS=function(a){a=void 0!==a?a:"px";return{left:this.x+a,top:this.y+a}};a.common.Rect=function(a,b,f,e){this.context=this.height=this.width=this.y=this.x=null;switch(arguments.length){case 1:this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;break;case 2:this.x=Math.min(a.x,b.x);this.y=Math.min(a.y,b.y);this.width=Math.abs(b.x-a.x);this.height=Math.abs(b.y-a.y);break;case 4:this.x=a,this.y=b,this.width=f,this.height=
e}};a.common.Rect.prototype.left=function(){return this.x};a.common.Rect.prototype.top=function(){return this.y};a.common.Rect.prototype.right=function(){return this.x+this.width};a.common.Rect.prototype.bottom=function(){return this.y+this.height};a.common.Rect.prototype.verticalCenter=function(){return this.y+this.height/2};a.common.Rect.prototype.horizontalCenter=function(){return this.x+this.width/2};a.common.Rect.prototype.centerPoint=function(){return new a.common.Point(this.horizontalCenter(),
this.verticalCenter())};a.common.Rect.prototype.isEmpty=function(){return null===this.x||null===this.y||null===this.width||null===this.height||0>this.width||0>this.height};a.common.Rect.prototype.offset=function(a,b,f,e){switch(arguments.length){case 1:null!==a&&"object"==typeof a?(this.x-=a.left,this.y-=a.top,this.width=this.width+a.left+a.right,this.height=this.height+a.top+a.bottom):(this.x-=a,this.y-=a,this.width+=2*a,this.height+=2*a);break;case 4:this.x-=a,this.y-=b,this.width=this.width+a+
f,this.height=this.height+b+e}return this};a.common.Rect.prototype.scale=function(a){this.x*=a;this.y*=a;this.width*=a;this.height*=a;return this};a.common.Rect.prototype.translate=function(a,b){this.x+=a;this.y+=b;return this};a.common.Rect.prototype.invert=function(){var a=this.width,b=this.x;this.width=this.height;this.height=a;this.x=this.y;this.y=b;return this};a.common.Rect.prototype.loopEdges=function(c){var b=[new a.common.Point(this.left(),this.top()),new a.common.Point(this.right(),this.top()),
new a.common.Point(this.right(),this.bottom()),new a.common.Point(this.left(),this.bottom())],f=[1,3,5,7];b.push(b[0]);if(null!=c)for(var e=1,g=b.length;e<g&&!c(new a.common.Vector(b[e-1],b[e]),f[e-1]);e+=1);return this};a.common.Rect.prototype.contains=function(a,b){switch(arguments.length){case 1:return this.x<=a.x&&a.x<=this.x+this.width&&this.y<=a.y&&a.y<=this.y+this.height;case 2:return this.x<=a&&a<=this.x+this.width&&this.y<=b&&b<=this.y+this.height;default:return!1}};a.common.Rect.prototype.cropByRect=
function(a){this.x<a.x&&(this.width-=a.x-this.x,this.x=a.x);this.right()>a.right()&&(this.width-=this.right()-a.right());this.y<a.y&&(this.height-=a.y-this.y,this.y=a.y);this.bottom()>a.bottom()&&(this.height-=this.bottom()-a.bottom());this.isEmpty()&&(this.height=this.width=this.y=this.x=null);return this};a.common.Rect.prototype.overlaps=function(a){var c=!0;if(this.x+this.width<a.x||a.x+a.width<this.x||this.y+this.height<a.y||a.y+a.height<this.y)c=!1;return c};a.common.Rect.prototype.addRect=function(a,
b,f,e){switch(arguments.length){case 1:if(!a.isEmpty())if(this.isEmpty())this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height;else{var c=Math.max(this.right(),a.right());var d=Math.max(this.bottom(),a.bottom());this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.width=c-this.x;this.height=d-this.y}break;case 2:this.isEmpty()?(this.x=a,this.y=b,this.height=this.width=0):(c=Math.max(this.right(),a),d=Math.max(this.bottom(),b),this.x=Math.min(this.x,a),this.y=Math.min(this.y,b),this.width=
c-this.x,this.height=d-this.y);break;case 4:this.isEmpty()?(this.x=a,this.y=b,this.width=f,this.height=e):(c=Math.max(this.right(),a+f),d=Math.max(this.bottom(),b+e),this.x=Math.min(this.x,a),this.y=Math.min(this.y,b),this.width=c-this.x,this.height=d-this.y)}return this};a.common.Rect.prototype.getCSS=function(a){a=void 0!==a?a:"px";return{left:this.x+a,top:this.y+a,width:this.width+a,height:this.height+a}};a.common.Rect.prototype.toString=function(a){a=void 0!==a?a:"px";var c="left:"+this.x+a+";";
c+="top:"+this.y+a+";";c+="width:"+this.width+a+";";return c+="height:"+this.height+a+";"};a.common.Rect.prototype.validate=function(){if(isNaN(this.x)||isNaN(this.y)||isNaN(this.width)||isNaN(this.height))throw"Invalid rect position.";};a.common.Rect.prototype.equalTo=function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height};a.common.Rect.prototype.getProjectionPoint=function(c){var b=null;if(!this.contains(c)){var f=new a.common.Vector(this.centerPoint(),c);this.loopEdges(function(a){b=
f.getIntersectionPoint(a,!0,1);return null!=b})}return b};a.common.MoveSegment=function(){this.parent=a.common.Point.prototype;this.parent.constructor.apply(this,arguments);this.segmentType=1};a.common.MoveSegment.prototype=new a.common.Point;a.common.MoveSegment.prototype.clone=function(){return new a.common.MoveSegment(this)};a.common.MoveSegment.prototype.loop=function(a,b){null!=b&&b.call(a,this.x,this.y,0)};a.common.MoveSegment.prototype.setPoint=function(a,b){this.x=a.x;this.y=a.y};a.common.MoveSegment.prototype.getEndPoint=
function(){return this};a.common.MoveSegment.prototype.invert=function(a){this.x=a.x;this.y=a.y};a.common.MoveSegment.prototype.transform=function(a,b){var c=this;a.transformPoint(c.x,c.y,b,c,function(a,b){c.x=a;c.y=b})};a.common.CubicArcSegment=function(c,b,f,e,g,d){this.parent=a.common.Point.prototype;this.cpY2=this.cpX2=this.cpY1=this.cpX1=this.y=this.x=null;switch(arguments.length){case 3:this.parent.constructor.apply(this,[f.x,f.y]);this.cpX1=c.x;this.cpY1=c.y;this.cpX2=b.x;this.cpY2=b.y;break;
case 6:this.parent.constructor.apply(this,[g,d]),this.cpX1=c,this.cpY1=b,this.cpX2=f,this.cpY2=e}this.segmentType=3};a.common.CubicArcSegment.prototype=new a.common.Point;a.common.CubicArcSegment.prototype.clone=function(){return new a.common.CubicArcSegment(this.cpX1,this.cpY1,this.cpX2,this.cpY2,this.x,this.y)};a.common.CubicArcSegment.prototype.loop=function(a,b){null!=b&&(b.call(a,this.cpX1,this.cpY1,0),b.call(a,this.cpX2,this.cpY2,1),b.call(a,this.x,this.y,2))};a.common.CubicArcSegment.prototype.setPoint=
function(a,b){switch(b){case 0:this.cpX1=a.x;this.cpY1=a.y;break;case 1:this.cpX2=a.x;this.cpY2=a.y;break;case 2:this.x=a.x,this.y=a.y}};a.common.CubicArcSegment.prototype.getEndPoint=function(){return this};a.common.CubicArcSegment.prototype.invert=function(a){var b=this.cpX1,c=this.cpY1;this.x=a.x;this.y=a.y;this.cpX1=this.cpX2;this.cpY1=this.cpY2;this.cpX2=b;this.cpY2=c};a.common.CubicArcSegment.prototype.transform=function(a,b){var c=this;a.transform3Points(c.x,c.y,c.cpX1,c.cpY1,c.cpX2,c.cpY2,
b,c,function(a,b,d,f,k,l){c.x=a;c.y=b;c.cpX1=d;c.cpY1=f;c.cpX2=k;c.cpY2=l})};a.common.CubicArcSegment.prototype.trim=function(a,b){var c=.5,e=this.offsetPoint(this.x,this.y,this.cpX2,this.cpY2,this.cpX1,this.cpY1,a.x,a.y,c),g=this.offsetPoint(this.x,this.y,this.cpX2,this.cpY2,this.cpX1,this.cpY1,a.x,a.y,.1);c=b*(c/e.distanceTo(this.x,this.y)+.1/g.distanceTo(this.x,this.y))/2;e=this.offsetPoint(this.x,this.y,this.cpX2,this.cpY2,this.cpX1,this.cpY1,a.x,a.y,c);this.x=e.x;this.y=e.y;return this};a.common.CubicArcSegment.prototype.offsetPoint=
function(c,b,f,e,g,d,h,k,l){return new a.common.Point((1-l)*(1-l)*(1-l)*c+3*(1-l)*(1-l)*l*f+3*(1-l)*l*l*g+l*l*l*h,(1-l)*(1-l)*(1-l)*b+3*(1-l)*(1-l)*l*e+3*(1-l)*l*l*d+l*l*l*k)};a.common.DotSegment=function(a,b,f,e,g){this.segmentType=4;this.x=a;this.y=b;this.width=f;this.height=e;this.cornerRadius=g};a.common.Label=function(){this.position=this.text=null;this.weight=0;this.isActive=!0;this.horizontalAlignmentType=this.labelOrientation=this.labelType=0;this.verticalAlignmentType=2;this.parent=a.common.Rect.prototype;
this.parent.constructor.apply(this,arguments)};a.common.Label.prototype=new a.common.Rect;a.common.LineSegment=function(){this.parent=a.common.MoveSegment.prototype;this.parent.constructor.apply(this,arguments);this.segmentType=0};a.common.LineSegment.prototype=new a.common.MoveSegment;a.common.LineSegment.prototype.clone=function(){return new a.common.LineSegment(this)};a.common.LineSegment.prototype.trim=function(a,b){a=this.offsetPoint(this,a,b);this.x=a.x;this.y=a.y;return this};a.common.LineSegment.prototype.offsetPoint=
function(c,b,f){var e=c.distanceTo(b);return 0===e||0===f?new a.common.Point(c):new a.common.Point(c.x+(b.x-c.x)/e*f,c.y+(b.y-c.y)/e*f)};a.common.Matrix=function(a,b,f,e){this.b2=this.a2=this.b1=this.a1=null;switch(arguments.length){case 1:this.a1=a.a1;this.b1=a.b1;this.a2=a.a2;this.b2=a.b2;break;case 4:this.a1=a,this.b1=b,this.a2=f,this.b2=e}};a.common.Matrix.prototype.determinant=function(){return this.a1*this.b2-this.b1*this.a2};a.common.PaletteItem=function(c){this.lineColor="#c0c0c0";this.lineWidth=
1;this.lineType=0;this.opacity=this.fillColor=null;this._key="";var b;var f=["lineColor","lineWidth","lineType","fillColor","opacity"];var e=0;for(b=f.length;e<b;e+=1){var g=f[e];null!=c&&c.hasOwnProperty(g)&&(this[g]=c[g]);this._key+=(a.common.isNullOrEmpty(this._key)?"":", ")+g+":"+this[g]}};a.common.PaletteItem.prototype.toAttr=function(){var a={lineWidth:this.lineWidth,lineType:this.lineType};null!==this.fillColor&&(a.fillColor=this.fillColor);null!==this.opacity&&(a.opacity=this.opacity);null!==
this.lineColor&&(a.borderColor=this.lineColor);return a};a.common.PaletteItem.prototype.toString=function(){return this._key};a.common.PaletteManager=function(c,b){this.palette=[];this.cursor=0;var f;if(0===b.length)this.palette=[new a.common.PaletteItem({lineColor:c.linesColor,lineWidth:c.linesWidth,lineType:c.linesType})],this.paletteLength=this.palette.length,this.regularIndex=0;else{var e=0;for(f=b.length;e<f;e+=1)this.palette.push(new a.common.PaletteItem(b[e]));this.paletteLength=this.palette.length;
this.palette.push(new a.common.PaletteItem({lineColor:c.linesColor,lineWidth:c.linesWidth,lineType:c.linesType}));this.regularIndex=this.palette.length-1}this.palette.push(new a.common.PaletteItem({lineColor:c.highlightLinesColor,lineWidth:c.highlightLinesWidth,lineType:c.highlightLinesType}));this.highlightIndex=this.palette.length-1};a.common.PaletteManager.prototype.selectPalette=function(a){this.cursor=a%this.paletteLength};a.common.PaletteManager.prototype.getPalette=function(a){var b=null;switch(a){case 1:b=
this.regularIndex;break;case 2:b=this.highlightIndex;break;case 0:b=this.cursor}return this.palette[b]};a.common.Polyline=function(c){function b(a,b){var c,d;if(null!=b){var f=0;for(c=l.length;f<c&&(!(d=l[f])||!b.call(a,d,f));f+=1);}}function f(){return a.common.isNullOrEmpty(k.fillColor)}function e(b,c,d,f,e,h){var g=new a.common.Polyline(m);e=[new a.common.Point(e,-h/2),new a.common.Point(0,0),new a.common.Point(e,h/2),new a.common.Point(e/4*3,0)];var k=Math.atan2(c-f,b-d);b=0;for(c=e.length;b<
c;b+=1){h=e[b];var q=h.x*Math.cos(k)-h.y*Math.sin(k);var l=h.x*Math.sin(k)+h.y*Math.cos(k);h.x=q+d;h.y=l+f}g.addSegment(new a.common.MoveSegment(e[0].x,e[0].y));g.addSegment(new a.common.LineSegment(e[1].x,e[1].y));g.addSegment(new a.common.LineSegment(e[2].x,e[2].y));g.addSegment(new a.common.QuadraticArcSegment(e[3].x,e[3].y,e[0].x,e[0].y));return g}function g(a,b){this.segment=a;this.pointIndex=b}function d(b,c,d,f,e){var h=b.relateTo(c),k=e?0:d;2==h?c.offset(k):3==h&&0===c.from.context.pointIndex?
(h=new a.common.LineSegment(c.from),f.addSegment(h),c.offset(k),f=c.from.clone(),f.context=new g(h,0),k=new a.common.Vector(b.to.clone(),f),e||(c.from=f.clone()),k.offset(d),k.intersect(b),k.from.context.pushToSegment(k.from),c.intersect(k),e&&k.to.context.pushToSegment(k.to)):(c.offset(k),c.intersect(b));c.from.context.pushToSegment(c.from)}function h(a,b,c,f){var e=a[0],h=e.to.context.segment.getEndPoint().toString();if(b.hasOwnProperty(h)){var g=b[h];d(e,g,c,f,!0);delete b[h]}e.to.context.pushToSegment(e.to);
a.length=0}var k=new a.common.PaletteItem,l=[],n;switch(arguments.length){case 1:k=c}var m=new a.common.PaletteItem({lineColor:k.lineColor,lineWidth:0,fillColor:k.lineColor,opacity:k.opacity||1});g.prototype.pushToSegment=function(a){this.segment.setPoint(a,this.pointIndex)};return n={paletteItem:k,arrowPaletteItem:m,addSegment:function(a){l.push(a)},addSegments:function(a){var b;var c=0;for(b=a.length;c<b;c+=1)l.push(a[c])},mergeTo:function(a){a.addSegments(l)},length:function(){return l.length},
loop:b,loopReversed:function(a,b){var c,d;if(null!=b)for(c=l.length-1;0<=c&&(!(d=l[c])||!b.call(a,d,c));--c);},transform:function(a,c){b(this,function(b){null!=b.transform&&b.transform(a,c)})},isInvertable:f,addInverted:function(b){var c=!1,d=[];f()?b.loopReversed(this,function(b,f){4!=b.segmentType&&(c||(l.push(new a.common.MoveSegment(b.getEndPoint())),c=!0),d.unshift(b),1<d.length&&(d[1].invert(d[0].getEndPoint()),l.push(d[1]),d.length=1))}):b.mergeTo(n)},addArrow:function(b,c){var d=l.length;
var f=3*b;var h=2*b;switch(b){case 1:f=8;h=6;break;case 2:f=12;h=8;break;case 3:f=16,h=10}if(null!=c&&1<d){b=l[d-2].getEndPoint();var g=l[d-1];null!=g.trim&&(d=new a.common.Point(g.getEndPoint()),d.distanceTo(b)>f&&(b=g.trim(b,f),f=e(b.x,b.y,d.x,d.y,f,h),c(f,b)))}},addOffsetArrow:function(b,c,d,f,h){var g=l.length;var k=3*c;var m=2*c;switch(c){case 1:k=8;m=6;break;case 2:k=12;m=8;break;case 3:k=16,m=10}if(null!=h&&1<g){c=l[g-2].getEndPoint();var q=l[g-1];if(null!=q.offsetPoint){g=new a.common.Point(q.getEndPoint());
var p=c.distanceTo(g);p>f&&(d*=p,b?(b=q.offsetPoint(c,g,d),k=e(c.x,c.y,b.x,b.y,k,m)):(b=q.offsetPoint(g,c,d),k=e(g.x,g.y,b.x,b.y,k,m)),h(k))}}},optimizeMoveSegments:function(){var a;var b={};var c=[],d=[];var f=0;for(a=l.length;f<a-1;f+=1){var e=l[f];var h=l[f+1];switch(e.segmentType){case 0:case 2:case 3:switch(h.segmentType){case 1:case 4:e=e.x+"&"+e.y,b.hasOwnProperty(e)||(b[e]=f)}break;case 1:e=e.x+"&"+e.y,b.hasOwnProperty(e)&&!c[b[e]]&&(c[b[e]]=f+1,d[f]=!0)}}h=[];for(f=0;f<a;f+=1)if(!d[f]&&(e=
l[f],h.push(e),d[f]=!0,0<c[f]))for(b=c[f];b<a&&!d[b];)e=l[b],h.push(e),d[b]=!0,b=0<c[b]?c[b]:b+1;l=h},getOffsetPolyine:function(c){var f=new a.common.Polyline(k),e={},m=[],l=[];b(this,function(b){var k=b.clone();switch(k.segmentType){case 4:case 1:0<l.length&&h(l,e,c,f);m.length=0;1==k.segmentType&&(b=new a.common.Point(k),b.context=new g(k,0),m.push(b));break;default:k.loop(this,function(b,h,q){b=new a.common.Point(b,h);b.context=new g(k,q);m.unshift(b);1<m.length&&(l.unshift(new a.common.Vector(m[1].clone(),
m[0].clone())),m.length=1);switch(l.length){case 1:q=l[0];b=q.from.toString();e[b]=q;q.offset(c);q.from.context.pushToSegment(q.from);break;case 2:b=l[1],q=l[0],d(b,q,c,f,!1),l.length=1}})}f.addSegment(k)});0<l.length&&h(l,e,c,f);return f},toString:function(){return k.toString()},getStartPoint:function(){var a=null;0<l.length&&(a=l[0].getEndPoint());return a},getEndPoint:function(){var a=null;0<l.length&&(a=l[l.length-1].getEndPoint());return a},clone:function(){var b,c=new a.common.Polyline(k),d=
[];var f=0;for(b=l.length;f<b;f+=1){var e=l[f];d.push(e.clone())}c.addSegments(d);return c}}};a.common.PolylinesBuffer=function(){function c(b,c){b[c.toString()]||(b[c.toString()]=new a.common.Polyline(c));return b[c.toString()]}function b(a,b){var c,e;if(null!=b)for(c in f)if(f.hasOwnProperty(c)&&(e=f[c])&&(e.optimizeMoveSegments(),b.call(a,e)))break}var f={};return{getPolyline:function(a){return c(f,a)},loop:b,addInverted:function(a,g){var d;var e=f;f={};null!=a&&a(this);b(this,function(a){d=c(e,
a.paletteItem);g?a.mergeTo(d):d.addInverted(a)});f=e},transform:function(a,c){b(this,function(b){b.transform(a,c)})}}};a.common.QuadraticArcSegment=function(a,b,f,e){this.cpY=this.cpX=this.y=this.x=null;switch(arguments.length){case 2:this.x=b.x;this.y=b.y;this.cpX=a.x;this.cpY=a.y;break;case 4:this.cpX=a,this.cpY=b,this.x=f,this.y=e}this.segmentType=2};a.common.QuadraticArcSegment.prototype.clone=function(){return new a.common.QuadraticArcSegment(this.cpX,this.cpY,this.x,this.y)};a.common.QuadraticArcSegment.prototype.loop=
function(a,b){null!=b&&(b.call(a,this.cpX,this.cpY,0),b.call(a,this.x,this.y,1))};a.common.QuadraticArcSegment.prototype.setPoint=function(a,b){switch(b){case 0:this.cpX=a.x;this.cpY=a.y;break;case 1:this.x=a.x,this.y=a.y}};a.common.QuadraticArcSegment.prototype.getEndPoint=function(){return this};a.common.QuadraticArcSegment.prototype.invert=function(a){this.x=a.x;this.y=a.y};a.common.QuadraticArcSegment.prototype.transform=function(a,b){var c=this;a.transformPoints(c.x,c.y,c.cpX,c.cpY,b,c,function(a,
b,d,f){c.x=a;c.y=b;c.cpX=d;c.cpY=f})};a.common.QuadraticArcSegment.prototype.trim=function(a,b){var c=.5,e=this.offsetPoint(this.x,this.y,this.cpX,this.cpY,a.x,a.y,c),g=this.offsetPoint(this.x,this.y,this.cpX,this.cpY,a.x,a.y,.1);c=b*(c/e.distanceTo(this.x,this.y)+.1/g.distanceTo(this.x,this.y))/2;e=this.offsetPoint(this.x,this.y,this.cpX,this.cpY,a.x,a.y,c);this.x=e.x;this.y=e.y;return this};a.common.QuadraticArcSegment.prototype.offsetPoint=function(c,b,f,e,g,d,h){return new a.common.Point((1-h)*
(1-h)*c+2*(1-h)*h*f+h*h*g,(1-h)*(1-h)*b+2*(1-h)*h*e+h*h*d)};a.common.Size=function(a,b){this.height=this.width=0;switch(arguments.length){case 1:this.width=a.width;this.height=a.height;break;case 2:this.width=a,this.height=b}};a.common.Size.prototype.invert=function(){var a=this.width;this.width=this.height;this.height=a;return this};a.common.Size.prototype.scale=function(a){this.width*=a;this.height*=a;return this};a.common.Size.prototype.space=function(){return this.width*this.height};a.common.Size.prototype.getCSS=
function(a){a=void 0!==a?a:"px";return{width:this.width+a,height:this.height+a}};a.common.Size.prototype.cropBySize=function(a){this.width=Math.min(this.width,a.width);this.height=Math.min(this.height,a.height);return this};a.common.Size.prototype.maxSize=function(a){this.width=Math.max(this.width,a.width);this.height=Math.max(this.height,a.height);return this};a.common.Size.prototype.addThickness=function(a){this.width=Math.max(0,this.width+a.left+a.right);this.height=Math.max(0,this.height+a.top+
a.bottom);return this};a.common.Size.prototype.removeThickness=function(a){this.width=Math.max(0,this.width-a.left-a.right);this.height=Math.max(0,this.height-a.top-a.bottom);return this};a.common.Size.prototype.validate=function(){if(isNaN(this.width)||isNaN(this.height))throw"Invalid size.";};a.common.Thickness=function(a,b,f,e){this.bottom=this.right=this.top=this.left=0;switch(arguments.length){case 1:null!==a&&"object"==typeof a?(this.left=a.left,this.top=a.top,this.right=a.right,this.bottom=
a.bottom):this.bottom=this.right=this.top=this.left=a;break;case 4:this.left=a,this.top=b,this.right=f,this.bottom=e}return this};a.common.Thickness.prototype.isEmpty=function(){return 0===this.left&&0===this.top&&0===this.right&&0===this.bottom};a.common.Thickness.prototype.maxThickness=function(a){this.left=Math.max(this.left,a.left);this.top=Math.max(this.top,a.top);this.right=Math.max(this.right,a.right);this.bottom=Math.max(this.bottom,a.bottom);return this};a.common.Thickness.prototype.addThickness=
function(a,b,f,e){switch(arguments.length){case 1:null!==a&&"object"==typeof a?(this.left+=a.left,this.top+=a.top,this.right+=a.right,this.bottom+=a.bottom):(this.left+=a,this.top+=a,this.right+=a,this.bottom+=a);break;case 4:this.left+=a,this.top+=b,this.right+=f,this.bottom+=e}return this};a.common.Thickness.prototype.scale=function(a){this.left*=a;this.top*=a;this.right*=a;this.bottom*=a;return this};a.common.Thickness.prototype.toString=function(a){a=void 0!==a?a:"px";return this.left+a+", "+
this.top+a+", "+this.right+a+", "+this.bottom+a};a.common.Vector=function(a,b){this.context=this.to=this.from=null;switch(arguments.length){case 1:this.from=a.from;this.to=a.to;break;case 2:this.from=a,this.to=b}};a.common.Vector.prototype.isNull=function(){return this.from.x==this.to&&this.from.y==this.to.y};a.common.Vector.prototype.length=function(){return this.from.distanceTo(this.to)};a.common.Vector.prototype.equalTo=function(a){return this.from.equalTo(a.from)&&this.to.equalTo(a.to)};a.common.Vector.prototype.getMiddlePoint=
function(){return new a.common.Point((this.from.x+this.to.x)/2,(this.from.y+this.to.y)/2)};a.common.Vector.prototype.relateTo=function(a){var b=0,c=this.to.x-this.from.x,e=this.to.y-this.from.y,g=a.to.x-a.from.x;a=a.to.y-a.from.y;switch((c?8:0)+(e?4:0)+(g?2:0)+(a?1:0)){case 0:case 1:case 2:case 3:case 4:case 8:case 12:b=1;break;case 5:b=0<e*a?2:3;break;case 10:b=0<c*g?2:3;break;case 15:c/g==e/a&&(b=0<c/g?2:3)}return b};a.common.Vector.prototype.offset=function(a){var b=this.length(),c=(this.to.y-
this.from.y)*a/b;a=-(this.to.x-this.from.x)*a/b;this.from.x+=c;this.from.y+=a;this.to.x+=c;this.to.y+=a};a.common.Vector.prototype.getLine=function(){var a=this.from.x,b=this.from.y,f=this.to.x,e=this.to.y;return[e-b,a-f,a*(b-e)+b*(f-a)]};a.common.Vector.prototype.getLineKey=function(){var a=this.getLine(),b=a[0],f=a[1];a=a[2];a=0!==f?[Math.floor(b/f*1E4),1,Math.floor(a/f*1E4)]:[1,0,Math.floor(a/b*1E4)];return a.toString()};a.common.Vector.prototype.intersect=function(c){var b=this.getLine(),f=c.getLine(),
e=(new a.common.Matrix(b[0],b[1],f[0],f[1])).determinant();var g=!1;0!==e&&(g=new a.common.Matrix(-b[2],b[1],-f[2],f[1]),g=g.determinant(),b=new a.common.Matrix(b[0],-b[2],f[0],-f[2]),b=b.determinant(),f=g/e,e=b/e,c.to.x=f,c.to.y=e,this.from.x=f,this.from.y=e,g=!0);return g};a.common.Vector.prototype.getIntersectionPoint=function(c,b,f){var e=this.getLine(),g=c.getLine(),d=(new a.common.Matrix(e[0],e[1],g[0],g[1])).determinant(),h=null;if(0!==d){var k=new a.common.Matrix(-e[2],e[1],-g[2],g[1]);k=
k.determinant();e=new a.common.Matrix(e[0],-e[2],g[0],-g[2]);e=e.determinant();k/=d;d=e/d;b?c._contains(k,d,f)&&this._contains(k,d,f)&&(h=new a.common.Point(k,d)):h=new a.common.Point(k,d)}return h};a.common.Vector.prototype._contains=function(a,b,f){var c=Math.min(this.from.y,this.to.y),g=Math.max(this.from.x,this.to.x),d=Math.max(this.from.y,this.to.y);return Math.min(this.from.x,this.to.x)-f<=a&&a<=g+f&&c-f<=b&&b<=d+f};a.common.Graphics=function(c){this.m_element=c;this.m_placeholders={};this.m_activePlaceholder=
null;this.m_cache=new a.common.Cache;this.graphicsType=null;this.debug=this.hasGraphics=!1;this.layerNames={};a.common.loop(this,a.common.Layers,function(a,c){this.layerNames[c]=a})};a.common.Graphics.prototype.clean=function(){var a,b;this.m_cache.clear();this.m_element=this.m_cache=null;for(a in this.m_placeholders)if(this.m_placeholders.hasOwnProperty(a)){var f=this.m_placeholders[a];for(b in f.layers)if(f.layers.hasOwnProperty(b)){var e=f.layers[b];e.canvas.parentNode.removeChild(e.canvas);e.canvas=
null}f.layers.length=0;f.activeLayer=null;f.size=null;f.rect=null;f.div=null}this.m_placeholders.length=0;this.m_activePlaceholder=null};a.common.Graphics.prototype.resize=function(a,b,f){a=this.m_placeholders[a];null!=a&&this.resizePlaceholder(a,0,0,b,f)};a.common.Graphics.prototype.position=function(a,b,f,e,g){a=this.m_placeholders[a];null!=a&&this.resizePlaceholder(a,b,f,e,g)};a.common.Graphics.prototype.show=function(c){c=this.m_placeholders[c];null!=c&&a.common.JsonML.applyStyles(c.div,{display:"inherit",
visibility:"inherit"})};a.common.Graphics.prototype.hide=function(c){c=this.m_placeholders[c];null!=c&&a.common.JsonML.applyStyles(c.div,{display:"none",visibility:"hidden"})};a.common.Graphics.prototype.resizePlaceholder=function(c,b,f,e,g){var d;c.size=new a.common.Size(e,g);c.rect=new a.common.Rect(b,f,e,g);a.common.JsonML.applyStyles(c.div,c.rect.getCSS());for(d in c.layers)c.layers.hasOwnProperty(d)&&(b=c.layers[d],-1!==b.name&&a.common.JsonML.applyStyles(b.canvas,{position:"absolute",width:"0px",
height:"0px"}))};a.common.Graphics.prototype.begin=function(){this.m_cache.begin()};a.common.Graphics.prototype.end=function(){this.m_cache.end()};a.common.Graphics.prototype.reset=function(a,b){var c="none",e=-1;switch(arguments.length){case 1:"string"===typeof a?c=a:e=a;break;case 2:c=a,e=b}this.m_cache.reset(c,e)};a.common.Graphics.prototype.activate=function(a,b){switch(arguments.length){case 1:"string"===typeof a?(this._activatePlaceholder(a),this._activateLayer(-1)):(this._activatePlaceholder("none"),
this._activateLayer(a));break;case 2:this._activatePlaceholder(a),this._activateLayer(b)}return this.m_activePlaceholder};a.common.Graphics.prototype._activatePlaceholder=function(c){var b=this.m_placeholders[c];if(void 0===b){if("none"===c)var f=this.m_element;else b=this.m_element.getElementsByClassName(c),f=0<b.length?b[0]:this.m_element;b=new a.common.Placeholder(c);b.div=f;b.size=a.common.getInnerSize(f);b.rect=new a.common.Rect(0,0,b.size.width,b.size.height);this.m_placeholders[c]=b}this.m_activePlaceholder=
b};a.common.Graphics.prototype._activateLayer=function(c){var b=this.m_activePlaceholder.layers[c],f;if(void 0===b){var e=this.m_activePlaceholder;if(-1===c)b=new a.common.Layer(c),b.canvas=e.div;else{var g=a.common.JsonML.toHTML(["div",{style:{position:"absolute",width:"0px",height:"0px"},"class":["Layer"+c,"Layer"+this.layerNames[c]]}]);var d=null;for(f in e.layers)e.layers.hasOwnProperty(f)&&(b=e.layers[f],b.name<c&&(d=null!==d?Math.max(d,b.name):b.name));b=new a.common.Layer(c);b.canvas=g;null===
d?this.prepend(e.div,b.canvas):this.insertAfter(e.layers[d].canvas,b.canvas)}e.layers[c]=b}this.m_activePlaceholder.activeLayer=b};a.common.Graphics.prototype.prepend=function(a,b){null==a.firstChild?a.appendChild(b):a.insertBefore(b,a.firstChild)};a.common.Graphics.prototype.insertAfter=function(a,b){var c=a.parentNode;c.lastChild==a?c.appendChild(b):c.insertBefore(b,a.nextSibling)};a.common.Graphics.prototype.text=function(c,b,f,e,g,d,h,k,l){var n=this.m_activePlaceholder;h={position:"absolute",
padding:0,margin:0,textAlign:this._getTextAlign(h),fontSize:l.fontSize,fontFamily:l.fontFamily,fontWeight:l.fontWeight,fontStyle:l.fontStyle,color:l.fontColor,lineHeight:1};l="";switch(d){case 0:case 3:h.left=c+"px";h.top=b+"px";h.width=f+"px";h.height=e+"px";break;case 1:h.left=c+Math.round(f/2-e/2)+"px";h.top=b+Math.round(e/2-f/2)+"px";h.width=e+"px";h.height=f+"px";l="rotate(-90deg)";break;case 2:h.left=c+Math.round(f/2-e/2)+"px",h.top=b+Math.round(e/2-f/2)+"px",h.width=e+"px",h.height=f+"px",
l="rotate(90deg)"}h["-webkit-transform-origin"]="center center";h["-moz-transform-origin"]="center center";h["-o-transform-origin"]="center center";h["-ms-transform-origin"]="center center";h["-webkit-transform"]=l;h["-moz-transform"]=l;h["-o-transform"]=l;h["-ms-transform"]=l;h.transform=l;h.maxWidth=h.width;h.maxHeight=h.height;g=g.replace(/\n/g,"<br/>");switch(k){case 0:this.debug&&(h.border="solid 1px black");b=this.m_cache.get(n.name,n.activeLayer.name,"text");null===b?(b=a.common.JsonML.toHTML(["div",
{style:h,$:function(a){a.innerHTML=g}}]),n.activeLayer.canvas.appendChild(b),this.m_cache.put(n.name,n.activeLayer.name,"text",b)):(a.common.JsonML.applyStyles(b,h),b.innerHTML=g);break;default:h.borderCollapse="collapse",c={verticalAlign:this._getVerticalAlignment(k),padding:0},this.debug&&(c.border="solid 1px black"),b=this.m_cache.get(n.name,n.activeLayer.name,"textintable"),null===b?(b=a.common.JsonML.toHTML(["table",{style:h},["tbody",["tr",["td",{style:c,$:function(a){a.innerHTML=g}}]]]]),n.activeLayer.canvas.appendChild(b),
this.m_cache.put(n.name,n.activeLayer.name,"textintable",b)):(a.common.JsonML.applyStyles(b,h),n=b.getElementsByTagName("td")[0],a.common.JsonML.applyStyles(n,c),n.innerHTML=g)}};a.common.Graphics.prototype._getTextAlign=function(a){var b=null;switch(a){case 0:b="center";break;case 1:b="left";break;case 2:b="right"}return b};a.common.Graphics.prototype._getVerticalAlignment=function(a){var b=null;switch(a){case 1:b="middle";break;case 0:b="top";break;case 2:b="bottom"}return b};a.common.Graphics.prototype.polylinesBuffer=
function(a){a.loop(this,function(a){0<a.length()&&this.polyline(a)})};a.common.Graphics.prototype.polyline=function(a){var b=null,c=null,e=a.paletteItem.toAttr();a.loop(this,function(a){switch(a.segmentType){case 1:b=Math.round(a.x)+.5;c=Math.round(a.y)+.5;break;case 0:this.rightAngleLine(b,c,Math.round(a.x)+.5,Math.round(a.y)+.5,e);b=Math.round(a.x)+.5;c=Math.round(a.y)+.5;break;case 4:this.dot(a.x,a.y,a.width,a.height,a.cornerRadius,e)}})};a.common.Graphics.prototype.dot=function(c,b,f,e,g,d){var h=
this.m_activePlaceholder,k=this.m_cache.get(h.name,h.activeLayer.name,"dot"),l=void 0!==d.lineWidth&&void 0!==d.borderColor;c={position:"absolute",width:f-(l?1:0),top:Math.round(b),left:Math.round(c),padding:0,margin:0,lineHeight:"0px",overflow:"hidden",height:e-(l?1:0),background:d.fillColor,MozBorderRadius:g,WebkitBorderRadius:g,"-khtml-border-radius":g,borderRadius:g,fontSize:"0px",borderStyle:l?"Solid":"None",borderWidth:l?"1px":"0px",borderColor:l?d.borderColor:""};null===k?(k=a.common.JsonML.toHTML(["div",
{style:c}]),h.activeLayer.canvas.appendChild(k),this.m_cache.put(h.name,h.activeLayer.name,"dot",k)):a.common.JsonML.applyStyles(k,c)};a.common.Graphics.prototype.rightAngleLine=function(c,b,f,e,g){var d=this.m_activePlaceholder,h=Math.abs(e-b)>Math.abs(f-c),k=g.lineWidth;g={position:"absolute",top:Math.round(Math.min(b,e)-(h?0:k/2)),left:Math.round(Math.min(c,f)-(h?k/2:0)),padding:0,margin:0,opacity:.5,lineHeight:"0px",overflow:"hidden",background:g.borderColor,fontSize:"0px"};h?(g.width=k,g.height=
Math.abs(Math.round(e-b))):(g.width=Math.abs(Math.round(f-c)),g.height=k);c=this.m_cache.get(d.name,d.activeLayer.name,"rect");null===c?(c=a.common.JsonML.toHTML(["div",{style:g}]),d.activeLayer.canvas.appendChild(c),this.m_cache.put(d.name,d.activeLayer.name,"rect",c)):a.common.JsonML.applyStyles(c,g)};a.common.Graphics.prototype.template=function(c,b,f,e,g,d,h,k,l,n,m,q,p){f=this.m_activePlaceholder;e="template"+(null!==n?n:a.common.hashCode(l));var r=0;n=this.m_cache.get(f.name,f.activeLayer.name,
e);null!==p&&void 0!==p.borderWidth&&(r=this.getPxSize(p.borderWidth));var t={width:h-r+"px",height:k-r+"px",top:b+d+"px",left:c+g+"px"};a.common.mergeObjects(t,p);null==q&&(q=new a.common.RenderEventArgs);q.x=c+g;q.y=b+d;q.width=h-r;q.height=k-r;null==n?(n=this.getElementByTemplate(l),t=a.common.mergeObjects(t,{position:"absolute",padding:"0px",margin:"0px"},p),a.common.JsonML.applyStyles(n,t),q.element=n,q.renderingMode=0,null!==m&&m(null,q),f.activeLayer.canvas.appendChild(n),this.m_cache.put(f.name,
f.activeLayer.name,e,n)):(q.element=n,q.renderingMode=1,a.common.JsonML.applyStyles(n,t),null!==m&&m(null,q));return n};a.common.Graphics.prototype.getElementByTemplate=function(c){if(a.common.isArray(c))c=a.common.JsonML.toHTML(c);else{var b=document.createElement("div");b.innerHTML=c;c=b.firstChild}return c};a.common.Graphics.prototype.getPxSize=function(a,b){var c=a;"string"===typeof a&&(c=0<a.indexOf("pt")?96*parseInt(a,10)/72:0<a.indexOf("%")?parseFloat(a)/100*b:parseInt(a,10));return c};a.common.Cache=
function(){this.threshold=20;this.m_visible={};this.m_invisible={}};a.common.Cache.prototype.begin=function(){var a,b,f;for(a in this.m_visible)if(this.m_visible.hasOwnProperty(a))for(b in this.m_visible[a])if(this.m_visible[a].hasOwnProperty(b)){for(f=this.m_visible[a][b].length-1;0<=f;--f){var e=this.m_visible[a][b][f];e.style.visibility="hidden";this.m_invisible[a][b].push(e)}this.m_visible[a][b].length=0}};a.common.Cache.prototype.end=function(){var a,b,f;for(a in this.m_visible)if(this.m_visible.hasOwnProperty(a))for(b in this.m_visible[a])if(this.m_visible[a].hasOwnProperty(b)&&
this.m_invisible[a][b].length>this.threshold)for(;void 0!==(f=this.m_invisible[a][b].pop());)f.parentNode.removeChild(f)};a.common.Cache.prototype.reset=function(a,b){a=a+"-"+b;var c,e;for(c in this.m_visible[a])if(this.m_visible[a].hasOwnProperty(c)){for(e=this.m_visible[a][c].length-1;0<=e;--e)b=this.m_visible[a][c][e],this.m_invisible[a][c].push(b),b.style.visibility="hidden";this.m_visible[a][c].length=0}};a.common.Cache.prototype.clear=function(){var a,b,f;for(a in this.m_visible)if(this.m_visible.hasOwnProperty(a))for(b in this.m_visible[a])if(this.m_visible[a].hasOwnProperty(b)){for(;void 0!==
(f=this.m_visible[a][b].pop());)f.parentNode.removeChild(f);for(;void 0!==(f=this.m_invisible[a][b].pop());)f.parentNode.removeChild(f)}};a.common.Cache.prototype.get=function(a,b,f){a=a+"-"+b;void 0===this.m_visible[a]&&(this.m_visible[a]={},this.m_invisible[a]={});void 0===this.m_visible[a][f]&&(this.m_visible[a][f]=[],this.m_invisible[a][f]=[]);b=this.m_invisible[a][f].pop()||null;null!==b&&(this.m_visible[a][f].push(b),b.style.visibility="inherit");return b};a.common.Cache.prototype.put=function(a,
b,f,e){this.m_visible[a+"-"+b][f].push(e)};a.common.CanvasGraphics=function(c){this.parent=a.common.Graphics.prototype;this.parent.constructor.apply(this,arguments);this.graphicsType=1;this.m_maximum=8E3};a.common.CanvasGraphics.prototype=new a.common.Graphics;a.common.CanvasGraphics.prototype.clean=function(){var a,b;for(a in this.m_placeholders)if(this.m_placeholders.hasOwnProperty(a)){var f=this.m_placeholders[a];for(b in f.layers)if(f.layers.hasOwnProperty(b)){var e=f.layers[b];null!==e.canvascanvas&&
(e.canvascanvas.parentNode.removeChild(e.canvascanvas),e.canvascanvas=null)}}this.parent.clean.apply(this,arguments)};a.common.CanvasGraphics.prototype._activatePlaceholder=function(a){this.parent._activatePlaceholder.apply(this,arguments);var b=this.m_activePlaceholder;var c=b.size.width;var e=b.size.height;b.hasGraphics=c>this.m_maximum||e>this.m_maximum?!1:!0};a.common.CanvasGraphics.prototype.resizePlaceholder=function(a,b,f,e,g){var c;this.parent.resizePlaceholder.apply(this,arguments);for(c in a.layers)if(a.layers.hasOwnProperty(c)){var h=
a.layers[c];null!==h.canvascanvas&&(h.canvascanvas.width=e,h.canvascanvas.height=g)}};a.common.CanvasGraphics.prototype.begin=function(){var a,b;this.parent.begin.apply(this);for(a in this.m_placeholders)if(this.m_placeholders.hasOwnProperty(a)){var f=this.m_placeholders[a];var e=f.size.width;var g=f.size.height;for(b in f.layers)if(f.layers.hasOwnProperty(b)){var d=f.layers[b];null!==d.canvascanvas&&d.canvascontext.clearRect(0,0,e,g)}}};a.common.Graphics.prototype._getContext=function(a,b){var c=
a.size.width,e=a.size.height;null===b.canvascanvas&&(b.canvascanvas=document.createElement("canvas"),b.canvascanvas.width=c,b.canvascanvas.height=e,this.prepend(a.activeLayer.canvas,b.canvascanvas),b.canvascontext=b.canvascanvas.getContext("2d"));return b.canvascontext};a.common.CanvasGraphics.prototype.reset=function(a,b){var c="none",e=-1;switch(arguments.length){case 1:"string"===typeof a?c=a:e=a;break;case 2:c=a,e=b}this.parent.reset.apply(this,arguments);var g=this.m_placeholders[c];if(void 0!==
g){c=g.size.width;var d=g.size.height;e=g.layers[e];void 0!==e&&null!==e.canvascanvas&&e.canvascontext.clearRect(0,0,c,d)}};a.common.CanvasGraphics.prototype.polyline=function(a){var b=this.m_activePlaceholder,c=a.paletteItem.toAttr(),e;if(b.hasGraphics){var g=b.activeLayer;var d=this._getContext(b,g);d.save();void 0!==c.lineWidth&&void 0!==c.borderColor?(d.strokeStyle=c.borderColor,d.lineWidth=c.lineWidth):(d.lineWidth=0,d.strokeStyle="Transparent");if(null!=c.lineType){b=Math.round(c.lineWidth)||
1;switch(c.lineType){case 0:var h=[];break;case 1:h=[b,b];break;case 2:h=[5*b,3*b]}void 0!==d.setLineDash?d.setLineDash(h):void 0!==d.webkitLineDash?d.webkitLineDash=h:void 0!==d.mozDash&&(d.mozDash=h)}d.beginPath();a.loop(this,function(a){switch(a.segmentType){case 1:d.moveTo(Math.round(a.x)+.5,Math.round(a.y)+.5);break;case 0:d.lineTo(Math.round(a.x)+.5,Math.round(a.y)+.5);break;case 4:a.width==a.height&&a.width/2<=a.cornerRadius?(d.moveTo(Math.round(a.x)+a.width+.5,Math.round(a.y)+a.height/2+.5),
d.arc(Math.round(a.x)+a.width/2+.5,Math.round(a.y)+a.height/2+.5,Math.round(a.width/2),0,2*Math.PI,!1)):0===a.cornerRadius?(d.moveTo(Math.round(a.x)+.5,Math.round(a.y)+.5),d.lineTo(Math.round(a.x+a.width)+.5,Math.round(a.y)+.5),d.lineTo(Math.round(a.x+a.width)+.5,Math.round(a.y+a.height)+.5),d.lineTo(Math.round(a.x)+.5,Math.round(a.y+a.height)+.5),d.lineTo(Math.round(a.x)+.5,Math.round(a.y)+.5)):(e=Math.min(a.cornerRadius,Math.min(a.width/2,a.height/2)),d.moveTo(Math.round(a.x)+.5,Math.round(a.y+
e)+.5),d.arc(Math.round(a.x+e)+.5,Math.round(a.y+e)+.5,Math.round(e),Math.PI,-Math.PI/2,!1),d.lineTo(Math.round(a.x+a.width-e)+.5,Math.round(a.y)+.5),d.arc(Math.round(a.x+a.width-e)+.5,Math.round(a.y+e)+.5,Math.round(e),-Math.PI/2,0,!1),d.lineTo(Math.round(a.x+a.width)+.5,Math.round(a.y+a.height-e)+.5),d.arc(Math.round(a.x+a.width-e)+.5,Math.round(a.y+a.height-e)+.5,Math.round(e),0,Math.PI/2,!1),d.lineTo(Math.round(a.x+e)+.5,Math.round(a.y+a.height)+.5),d.arc(Math.round(a.x+e)+.5,Math.round(a.y+a.height-
e)+.5,Math.round(e),Math.PI/2,Math.PI,!1),d.lineTo(Math.round(a.x)+.5,Math.round(a.y+e)+.5));break;case 2:d.quadraticCurveTo(Math.round(a.cpX)+.5,Math.round(a.cpY)+.5,Math.round(a.x)+.5,Math.round(a.y)+.5);break;case 3:d.bezierCurveTo(Math.round(a.cpX1)+.5,Math.round(a.cpY1)+.5,Math.round(a.cpX2)+.5,Math.round(a.cpY2)+.5,Math.round(a.x)+.5,Math.round(a.y)+.5)}});null!=c.opacity&&(d.globalAlpha=c.opacity);void 0!==c.lineWidth&&d.stroke();void 0!==c.fillColor&&(d.fillStyle=c.fillColor,d.fill());d.restore()}else this.parent.polyline.apply(this,
arguments)};a.common.Element=function(a,b){this.name=this.ns=null;this.attr={};this.style={};this.children=[];switch(arguments.length){case 1:this.name=a;break;case 2:this.ns=a,this.name=b}};a.common.Element.prototype.setAttribute=function(a,b){this.attr[a]=b};a.common.Element.prototype.appendChild=function(a){this.children[this.children.length]=a};a.common.Element.prototype.create=function(a){var b;var c=null!==this.ns?document.createElementNS(this.ns,this.name):document.createElement(this.name);
for(e in this.attr)this.attr.hasOwnProperty(e)&&(void 0!==a?c[e]=this.attr[e]:c.setAttribute(e,this.attr[e]));for(e in this.style)this.style.hasOwnProperty(e)&&(c.style[e]=this.style[e]);for(b=0;b<this.children.length;b+=1){var e=this.children[b];"string"===typeof e?c.appendChild(document.createTextNode(e)):c.appendChild(e.create(a))}return c};a.common.Element.prototype.update=function(a,b){for(e in this.style)if(this.style.hasOwnProperty(e)){var c=this.style[e];a.style[e]!==c&&(a.style[e]=c)}for(e in this.attr)this.attr.hasOwnProperty(e)&&
(c=this.attr[e],void 0!==b?a[e]!==c&&(a[e]=c):a.getAttribute(e)!==c&&a.setAttribute(e,c));var e=this.children.length;for(c=0;c<e;c+=1){var g=this.children[c];"string"===typeof g?a.innerHtml!==g&&(a.innerHtml=g):this.children[c].update(a.children[c],b)}};a.common.Layer=function(a){this.name=a;this.svgcanvas=this.canvascanvas=this.canvas=null};a.common.Placeholder=function(a){this.name=a;this.layers={};this.div=this.rect=this.size=this.activeLayer=null;this.hasGraphics=!0};a.common.SvgGraphics=function(c){this.parent=
a.common.Graphics.prototype;this.parent.constructor.apply(this,arguments);this._svgxmlns="http://www.w3.org/2000/svg";this.graphicsType=0;this.hasGraphics=!0};a.common.SvgGraphics.prototype=new a.common.Graphics;a.common.SvgGraphics.prototype.clean=function(){var a,b;for(a in this.m_placeholders)if(this.m_placeholders.hasOwnProperty(a)){var f=this.m_placeholders[a];for(b in f.layers)if(f.layers.hasOwnProperty(b)){var e=f.layers[b];null!==e.svgcanvas&&(e.svgcanvas.parentNode.removeChild(e.svgcanvas),
e.svgcanvas=null)}}this.parent.clean.apply(this,arguments)};a.common.SvgGraphics.prototype.resizePlaceholder=function(c,b,f,e,g){var d;this.parent.resizePlaceholder.apply(this,arguments);for(d in c.layers)if(c.layers.hasOwnProperty(d)){var h=c.layers[d];null!==h.svgcanvas&&(a.common.JsonML.applyStyles(h.svgcanvas,{position:"absolute",width:e+"px",height:g+"px"}),h.svgcanvas.viewBox="0 0 "+e+" "+g)}};a.common.SvgGraphics.prototype._getCanvas=function(){var c=this.m_activePlaceholder,b=c.activeLayer,
f=c.rect;null===b.svgcanvas&&(b.svgcanvas=document.createElementNS(this._svgxmlns,"svg"),b.svgcanvas.viewBox=f.x+" "+f.y+" "+f.width+" "+f.height,a.common.JsonML.applyStyles(b.svgcanvas,{width:f.width+"px",height:f.height+"px"}),this.prepend(c.activeLayer.canvas,b.svgcanvas));return b.svgcanvas};a.common.SvgGraphics.prototype.polyline=function(c){var b=this.m_activePlaceholder,f=c.paletteItem.toAttr(),e,g;var d=new a.common.Element(this._svgxmlns,"path");void 0!==f.fillColor?(d.setAttribute("fill",
f.fillColor),d.setAttribute("fill-opacity",f.opacity)):d.setAttribute("fill-opacity",0);void 0!==f.lineWidth&&void 0!==f.borderColor?(d.setAttribute("stroke",f.borderColor),d.setAttribute("stroke-width",f.lineWidth),void 0!==f.opacity?d.setAttribute("stroke-opacity",f.opacity):d.setAttribute("stroke-opacity",1)):(d.setAttribute("stroke","transparent"),d.setAttribute("stroke-width",0));if(null!=f.lineType){var h=Math.round(f.lineWidth)||1;switch(f.lineType){case 0:d.setAttribute("stroke-dasharray",
"");break;case 1:d.setAttribute("stroke-dasharray",h+","+h);break;case 2:d.setAttribute("stroke-dasharray",5*h+","+3*h)}}var k="";c.loop(this,function(a){switch(a.segmentType){case 1:k+="M"+(Math.round(a.x)+.5)+" "+(Math.round(a.y)+.5);break;case 0:k+="L"+(Math.round(a.x)+.5)+" "+(Math.round(a.y)+.5);break;case 2:k+="Q"+(Math.round(a.cpX)+.5)+" "+(Math.round(a.cpY)+.5)+" "+(Math.round(a.x)+.5)+" "+(Math.round(a.y)+.5);break;case 4:a.width==a.height&&a.width/2<=a.cornerRadius?(e=a.width/2,k+="M"+(Math.round(a.x)+
.5)+" "+(Math.round(a.y)+a.height/2+.5),k+="A"+e+" "+e+" 0 0 0 "+(Math.round(a.x+a.width)+.5)+" "+(Math.round(a.y)+a.height/2+.5),k+="A"+e+" "+e+" 0 0 0 "+(Math.round(a.x)+.5)+" "+(Math.round(a.y)+a.height/2+.5)):0===a.cornerRadius?(k+="M"+(Math.round(a.x)+.5)+" "+(Math.round(a.y)+.5),k+="L"+(Math.round(a.x+a.width)+.5)+" "+(Math.round(a.y)+.5),k+="L"+(Math.round(a.x+a.width)+.5)+" "+(Math.round(a.y+a.height)+.5),k+="L"+(Math.round(a.x)+.5)+" "+(Math.round(a.y+a.height)+.5),k+="L"+(Math.round(a.x)+
.5)+" "+(Math.round(a.y)+.5)):(g=Math.min(a.cornerRadius,Math.min(a.width/2,a.height/2)),k+="M"+(Math.round(a.x)+.5)+" "+(Math.round(a.y+g)+.5),k+="A"+Math.round(g)+" "+Math.round(g)+" 0 0 1 "+(Math.round(a.x+g)+.5)+" "+(Math.round(a.y)+.5),k+="L"+(Math.round(a.x+a.width-g)+.5)+" "+(Math.round(a.y)+.5),k+="A"+Math.round(g)+" "+Math.round(g)+" 0 0 1 "+(Math.round(a.x+a.width)+.5)+" "+(Math.round(a.y+g)+.5),k+="L"+(Math.round(a.x+a.width)+.5)+" "+(Math.round(a.y+a.height-g)+.5),k+="A"+Math.round(g)+
" "+Math.round(g)+" 0 0 1 "+(Math.round(a.x+a.width-g)+.5)+" "+(Math.round(a.y+a.height)+.5),k+="L"+(Math.round(a.x+g)+.5)+" "+(Math.round(a.y+a.height)+.5),k+="A"+Math.round(g)+" "+Math.round(g)+" 0 0 1 "+(Math.round(a.x)+.5)+" "+(Math.round(a.y+a.height-g)+.5),k+="L"+(Math.round(a.x)+.5)+" "+(Math.round(a.y+g)+.5));break;case 3:k+="C"+(Math.round(a.cpX1)+.5)+" "+(Math.round(a.cpY1)+.5)+" "+(Math.round(a.cpX2)+.5)+" "+(Math.round(a.cpY2)+.5)+" "+(Math.round(a.x)+.5)+" "+(Math.round(a.y)+.5)}});d.setAttribute("d",
k);c=this.m_cache.get(b.name,b.activeLayer.name,"path");null===c?(c=d.create(),d=this._getCanvas(),d.appendChild(c),this.m_cache.put(b.name,b.activeLayer.name,"path",c)):d.update(c)};a.common.Transform=function(){this.invertVertically=this.invertHorizontally=this.invertArea=!1;this.size=null};a.common.Transform.prototype.setOrientation=function(a){switch(a){case 0:this.invertVertically=this.invertHorizontally=this.invertArea=!1;break;case 1:this.invertHorizontally=this.invertArea=!1;this.invertVertically=
!0;break;case 2:this.invertArea=!0;this.invertVertically=this.invertHorizontally=!1;break;case 3:this.invertHorizontally=this.invertArea=!0,this.invertVertically=!1}};a.common.Transform.prototype.getOrientation=function(a){var b=a;if(this.invertHorizontally)switch(a){case 2:b=3;break;case 3:b=2}if(this.invertVertically)switch(a){case 0:b=1;break;case 1:b=0}if(this.invertArea)switch(b){case 0:b=2;break;case 1:b=3;break;case 2:b=0;break;case 3:b=1}return b};a.common.Transform.prototype.transformPoint=
function(a,b,f,e,g){if(f&&this.invertArea){var c=a;a=b;b=c}this.invertHorizontally&&(a=this.size.width-a);this.invertVertically&&(b=this.size.height-b);!f&&this.invertArea&&(c=a,a=b,b=c);g.call(e,a,b)};a.common.Transform.prototype.transformPoints=function(a,b,f,e,g,d,h){if(g&&this.invertArea){var c=a;a=b;b=c;c=f;f=e;e=c}this.invertHorizontally&&(a=this.size.width-a,f=this.size.width-f);this.invertVertically&&(b=this.size.height-b,e=this.size.height-e);!g&&this.invertArea&&(c=a,a=b,b=c,c=f,f=e,e=c);
h.call(d,a,b,f,e)};a.common.Transform.prototype.transform3Points=function(a,b,f,e,g,d,h,k,l){if(h&&this.invertArea){var c=a;a=b;b=c;c=f;f=e;e=c;c=g;g=d;d=c}this.invertHorizontally&&(a=this.size.width-a,f=this.size.width-f,g=this.size.width-g);this.invertVertically&&(b=this.size.height-b,e=this.size.height-e,d=this.size.height-d);!h&&this.invertArea&&(c=a,a=b,b=c,c=f,f=e,e=c,c=g,g=d,d=c);l.call(k,a,b,f,e,g,d)};a.common.Transform.prototype.transformRect=function(a,b,f,e,g,d,h){if(g&&this.invertArea){var c=
a;a=b;b=c;c=f;f=e;e=c}this.invertHorizontally&&(a=this.size.width-a-f);this.invertVertically&&(b=this.size.height-b-e);!g&&this.invertArea&&(c=a,a=b,b=c,c=f,f=e,e=c);h.call(d,a,b,f,e)};a.common.ArrayReader=function(c,b,f,e,g){this.itemTemplate=c;this.containsUniqueItems=b;this.uniquePropertyKey=f;this.containsPrimitiveValues=a.common.isNullOrEmpty(f);this.createSourceHash=e;this.isOrdered=g};a.common.ArrayReader.prototype.read=function(c,b,f,e){var g=[],d={},h={},k={},l,n=f+"-seq";b&&a.common.isArray(b)||
(b=[]);var m=e.hash.hasOwnProperty(f)?e.hash[f]:{};var q=e.hash.hasOwnProperty(n)?e.hash[n]:{};var p=0;for(l=b.length;p<l;p+=1){var r=b[p];var t=this.containsUniqueItems?this.containsPrimitiveValues?r:r[this.uniquePropertyKey]:p;if(!d.hasOwnProperty(t)){var u=this.itemTemplate.read(m.hasOwnProperty(t)?m[t]:{},r,f+"-"+p,e);g.push(u);d[t]=u;h[p]=t;this.createSourceHash&&(k[t]=r);this.isOrdered&&q[p]!=h[p]&&(e.isChanged=!0)}}e.hash[f]=d;e.hash[n]=h;this.createSourceHash&&(e.sourceHash[f]=k);if(null==
c||c.length!=g.length)e.isChanged=!0;return g};a.common.EnumerationReader=function(a,b,f){this.enumeration=a;this.isNullable=b;this.defaultValue=f;this.hash={};for(var c in a)this.hash[a[c]]=c};a.common.EnumerationReader.prototype.read=function(a,b,f,e){null!==b&&"undefined"!=typeof b&&this.hash.hasOwnProperty(b)||(b=this.isNullable?null:this.defaultValue);a!==b&&(e.isChanged=!0);return b};a.common.FunctionReader=function(){};a.common.FunctionReader.prototype.read=function(a,b,f,e){return"function"==
typeof b?b:null};a.common.ObjectReader=function(a,b,f){this.dataTemplate=a;this.isNullable=b;this.defaultValue=f};a.common.ObjectReader.prototype.read=function(c,b,f,e){var g=a.common.isObject(c),d;b||(b=this.isNullable?null:this.defaultValue);if(a.common.isObject(b)){var h={};for(d in this.dataTemplate)if(this.dataTemplate.hasOwnProperty(d)){var k=this.dataTemplate[d];h[d]=k.read(g?c[d]:null,b[d],f+"-"+d,e)}}else h=b,c!==b&&(e.isChanged=!0);return h};a.common.ValueReader=function(a,b,f){this.acceptedTypes=
a;this.isNullable=b;this.defaultValue=f;this.hash={};for(b=0;b<a.length;b+=1)this.hash[a[b]]=!0};a.common.ValueReader.prototype.stringify=function(a){if(1==this.hash.object){var b=[];return JSON.stringify(a,function(a,c){return"_"===a[0]?null:null!==c&&"object"==typeof c?-1==b.indexOf(c)?(b.push(c),c):null:c})}return a};a.common.ValueReader.prototype.read=function(a,b,f,e){null!==b&&"undefined"!=typeof b&&this.hash.hasOwnProperty(typeof b)||(b=this.isNullable?null:this.defaultValue);f=b;this.stringify(a)!==
this.stringify(b)&&(e.isChanged=!0);return f};a.famdiagram.EventArgs=function(){this.context=this.oldContext=null;this.parentItems=[];this.childrenItems=[];this.name=this.position=null;this.cancel=!1};a.famdiagram.TemplateConfig=function(){this.name=null;this.isActive=!0;this.itemSize=new a.common.Size(120,100);this.itemBorderWidth=1;this.minimizedItemShapeType=this.itemTemplate=null;this.minimizedItemSize=new a.common.Size(4,4);this.minimizedItemCornerRadius=null;this.minimizedItemLineWidth=1;this.minimizedItemBorderColor=
null;this.minimizedItemLineType=0;this.minimizedItemFillColor=null;this.minimizedItemOpacity=1;this.highlightPadding=new a.common.Thickness(2,2,2,2);this.highlightBorderWidth=1;this.highlightTemplate=null;this.cursorPadding=new a.common.Thickness(3,3,3,3);this.cursorBorderWidth=2;this.onButtonsRender=this.buttons=this.cursorTemplate=null};a.famdiagram.BackgroundAnnotationConfig=function(c){var b;this.annotationType=4;this.items=[];this.zOrderType=0;this.offset=new a.common.Thickness(18,18,18,18);
this.lineWidth=2;this.opacity=1;this.fillColor=this.borderColor=null;this.lineType=0;this.selectItems=!1;switch(arguments.length){case 1:if(null!==c)if(c instanceof Array)this.items=c;else if("object"==typeof c)for(b in c)c.hasOwnProperty(b)&&(this[b]=c[b])}};a.famdiagram.ButtonConfig=function(c,b,f){this.name=c;this.icon=b;this.text=!1;this.label=null;this.tooltip=f;this.size=new a.common.Size(16,16)};a.famdiagram.Config=function(c){this.name=void 0!==c?c:"FamDiagram";this.classPrefix="famdiagram";
this.graphicsType=this.navigationMode=0;this.pageFitMode=3;this.minimalVisibility=2;this.orientationType=0;this.verticalAlignment=1;this.arrowsDirection=this.loopsLayoutMode=0;this.showExtraArrows=!0;this.extraArrowsMinimumSpace=30;this.groupByType=2;this.alignBylevels=!0;this.enableMatrixLayout=!1;this.minimumMatrixSize=4;this.maximumColumnsInMatrix=6;this.hideGrandParentsConnectors=!1;this.elbowType=3;this.elbowDotSize=this.bevelSize=4;this.emptyDiagramMessage="Diagram is empty.";this.items=[];
this.annotations=[];this.highlightItem=this.cursorItem=null;this.highlightGravityRadius=40;this.selectedItems=[];this.hasSelectorCheckbox=0;this.selectCheckBoxLabel="Selected";this.neighboursSelectionMode=this.selectionPathMode=0;this.showFrame=!1;this.frameInnerPadding=new a.common.Thickness(2,2,2,2);this.frameOuterPadding=new a.common.Thickness(2,2,2,2);this.templates=[];this.defaultLabelAnnotationTemplate=this.defaultTemplateName=null;this.hasButtons=0;this.buttons=[];this.onCursorRender=this.onHighlightRender=
this.onItemRender=this.onMouseDblClick=this.onMouseClick=this.onButtonClick=this.onSelectionChanged=this.onSelectionChanging=this.onCursorChanged=this.onCursorChanging=this.onHighlightChanged=this.onHighlightChanging=this.onButtonsRender=null;this.dotLevelShift=this.normalLevelShift=20;this.normalItemsInterval=this.lineLevelShift=10;this.dotItemsInterval=1;this.lineItemsInterval=2;this.cousinsIntervalMultiplier=5;this.itemTitleFirstFontColor="#ffffff";this.itemTitleSecondFontColor="#000080";this.minimizedItemShapeType=
6;this.linesColor="#c0c0c0";this.linesWidth=1;this.linesType=0;this.showNeigboursConnectorsHighlighted=!1;this.highlightLinesColor="#ff0000";this.highlightLinesWidth=1;this.highlightLinesType=0;this.linesPalette=[];this.showCallout=!0;this.calloutMaximumVisibility=2;this.calloutPlacementOffset=100;this.defaultCalloutTemplateName=null;this.calloutfillColor="#000000";this.calloutBorderColor=null;this.calloutCornerRadius=this.calloutOffset=4;this.calloutPointerWidth="10%";this.calloutLineWidth=1;this.calloutOpacity=
.2;this.buttonsPanelSize=28;this.checkBoxPanelSize=this.groupTitlePanelSize=24;this.groupTitleOrientation=this.groupTitlePlacementType=2;this.groupTitleVerticalAlignment=1;this.groupTitleHorizontalAlignment=0;this.groupTitleFontSize="12px";this.groupTitleFontFamily="Arial";this.groupTitleColor="#4169e1";this.groupTitleFontStyle=this.groupTitleFontWeight="normal";this.distance=3;this.scale=1;this.minimumScale=.5;this.maximumScale=1;this.showLabels=0;this.labelSize=new a.common.Size(80,24);this.labelOffset=
1;this.labelOrientation=0;this.labelPlacement=1;this.labelFontSize="10px";this.labelFontFamily="Arial";this.labelColor="#000000";this.labelFontStyle=this.labelFontWeight="normal";this.enablePanning=!0;this.autoSizeMinimum=new a.common.Size(800,600);this.autoSizeMaximum=new a.common.Size(1024,768)};a.famdiagram.ConnectorAnnotationConfig=function(c,b){var f;this.annotationType=0;this.zOrderType=2;this.toItem=this.fromItem=null;this.connectorPlacementType=this.connectorShapeType=0;this.labelPlacementType=
1;this.offset=new a.common.Thickness(0,0,0,0);this.lineWidth=2;this.color="#000000";this.lineType=0;this.selectItems=!0;this.label=null;this.labelSize=new a.common.Size(60,30);switch(arguments.length){case 1:for(f in c)c.hasOwnProperty(f)&&(this[f]=c[f]);break;case 2:this.fromItem=c,this.toItem=b}};a.famdiagram.HighlightPathAnnotationConfig=function(a){var b;this.zOrderType=this.annotationType=2;this.items=[];this.lineWidth=2;this.color="#ff0000";this.lineType=0;this.opacity=1;this.showArrows=!0;
this.selectItems=!1;switch(arguments.length){case 1:if(null!==a)if(a instanceof Array)this.items=a;else if("object"==typeof a)for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}};a.famdiagram.ItemConfig=function(a,b,f,e,g){var c;this.id=null;this.parents=[];this.spouses=[];this.relativeItem=null;this.placementType=3;this.context=this.image=this.description=this.title=this.primaryParent=this.position=null;this.itemTitleColor="#4169e1";this.groupTitle=this.minimizedItemShapeType=null;this.groupTitleColor=
"#4169e1";this.isActive=!0;this.hasButtons=this.hasSelectorCheckbox=0;this.templateName=null;this.showCallout=0;this.label=this.calloutTemplateName=null;this.showLabel=0;this.labelSize=null;this.labelOrientation=3;this.labelPlacement=0;switch(arguments.length){case 1:for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);break;case 5:this.id=a,this.parents=b,this.title=f,this.description=e,this.image=g}};a.famdiagram.LabelAnnotationConfig=function(a,b){var c;this.annotationType=3;this.fromItem=null;this.toItems=
[];this.title=null;this.itemTitleColor="#4169e1";this.templateName=null;switch(arguments.length){case 1:for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);break;case 2:this.fromItem=a,this.toItem=b}};a.famdiagram.PaletteItemConfig=function(a,b,f){var c;this.lineColor="#c0c0c0";this.lineWidth=1;this.lineType=0;switch(arguments.length){case 1:for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);break;case 3:this.lineColor=a,this.lineWidth=b,this.lineType=f}};a.famdiagram.ShapeAnnotationConfig=function(c){var b;
this.annotationType=1;this.zOrderType=0;this.items=[];this.shapeType=0;this.offset=new a.common.Thickness(0,0,0,0);this.lineWidth=2;this.cornerRadius="10%";this.opacity=1;this.fillColor=this.borderColor=null;this.lineType=0;this.selectItems=!1;this.label=null;this.labelSize=new a.common.Size(60,30);this.labelPlacement=0;this.labelOffset=4;switch(arguments.length){case 1:if(null!==c)if(c instanceof Array)this.items=c;else if("object"==typeof c)for(b in c)c.hasOwnProperty(b)&&(this[b]=c[b])}};a.famdiagram.EdgeItem=
function(a,b,f,e){this.values=[b,e];this[a]=0;this[f]=1};a.famdiagram.EdgeItem.prototype.getNear=function(a){return this.values[this[a]]};a.famdiagram.EdgeItem.prototype.getFar=function(a){return this.values[Math.abs(this[a]-1)]};a.famdiagram.EdgeItem.prototype.setNear=function(a,b){this.values[this[a]]=b};a.famdiagram.EdgeItem.prototype.setFar=function(a,b){this.values[Math.abs(this[a]-1)]=b};a.famdiagram.EdgeItem.prototype.toString=function(){return this.parent+","+this.child};a.famdiagram.FamilyItem=
function(a){var b;this.itemConfig=this.familyId=this.id=null;this.isActive=this.isVisible=!0;this.isLevelNeutral=!1;this.level=null;this.levelGravity=0;this.hideChildrenConnection=this.hideParentConnection=!1;switch(arguments.length){case 1:for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}};a.famdiagram.Slot=function(a){this.itemId=a;this.position=null;this.balance=0;this.left={};this.right={};this.crossings={}};a.famdiagram.Slot.prototype.clone=function(c){var b=new a.famdiagram.Slot(c),f;for(f in this.left)this.left.hasOwnProperty(f)&&
(b.left[f]=this.left[f]);for(f in this.right)this.right.hasOwnProperty(f)&&(b.right[f]=this.right[f]);for(f in this.crossings)this.crossings.hasOwnProperty(f)&&(b.crossings[f]=this.crossings[f]);b.itemid=c;return b};a.famdiagram.LabelAnnotationOptionTask=function(c,b,f){var e=[],g={},d=null,h={},k=new a.common.ArrayReader(new a.common.ObjectReader({zOrderType:new a.common.EnumerationReader(a.common.ZOrderType,!1,f.zOrderType),fromItem:new a.common.ValueReader(["string","number"],!0),toItems:new a.common.ArrayReader(new a.common.ValueReader(["string",
"number"],!0),!0),title:new a.common.ValueReader(["string"],!0),itemTitleColor:new a.common.ValueReader(["string"],!1,f.itemTitleColor),templateName:new a.common.ValueReader(["string"],!0)},!1),!1,null,!0);return{process:function(){var a={isChanged:!1,hash:h,sourceHash:{}},f=b.getMaximumId(),m;e=k.read(e,c.getAnnotations(3),"annotations",a);g={};var q=a.sourceHash.annotations;var p=0;for(m=e.length;p<m;p+=1){var r=e[p];f+=1;r.id=f;g[r.id]=q[p]}d=f;return a.isChanged},getAnnotations:function(){return e},
getMaximumId:function(){return d},getConfig:function(a){return g[a]}}};a.famdiagram.LabelAnnotationPlacementOptionTask=function(c,b){var f=[],e={},g=new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["number"],!0),fromItem:new a.common.ValueReader(["string","number"],!0),toItems:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0)}),!0,"id");return{process:function(){var a={isChanged:!1,hash:e};f=g.read(f,c.getAnnotations(),"annotations",a);return a.isChanged},
getAnnotations:function(){return f},getMaximumId:function(){return c.getMaximumId()}}};a.famdiagram.LabelAnnotationTemplateOptionTask=function(c,b){var f=[],e={},g=new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["number"],!0),title:new a.common.ValueReader(["string"],!0),itemTitleColor:new a.common.ValueReader(["string"],!1,b.itemTitleColor),templateName:new a.common.ValueReader(["string"],!0)}),!0,"id");return{process:function(){var a={isChanged:!1,hash:e};f=g.read(f,
c.getAnnotations(),"annotations",a);return a.isChanged},getAnnotations:function(){return f}}};a.famdiagram.NeighboursSelectionModeOptionTask=function(c,b){var f={},e=new a.common.ObjectReader({neighboursSelectionMode:new a.common.EnumerationReader(a.common.NeighboursSelectionMode,!1,b.neighboursSelectionMode)});return{process:function(){var a={isChanged:!1};f=e.read(f,c.getOptions(),"options",a);return a.isChanged},getNeighboursSelectionMode:function(){return f.neighboursSelectionMode}}};a.famdiagram.HideGrandParentsConnectorsOptionTask=
function(c,b){var f={},e={},g=new a.common.ObjectReader({hideGrandParentsConnectors:new a.common.ValueReader(["boolean"],!1,b.hideGrandParentsConnectors)});return{process:function(){var a={isChanged:!1,hash:e};f=g.read(f,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return f}}};a.famdiagram.ItemsOptionTask=function(c,b){var f={},e={},g={},d=new a.common.ObjectReader({items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),
parents:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0),isActive:new a.common.ValueReader(["boolean"],!1,b.isActive)}),!0,"id",!0)});return{process:function(){var a={isChanged:!1,hash:e,sourceHash:g};f=d.read(f,c.getOptions(),"options",a);return a.isChanged},getItems:function(){return f.items},getConfig:function(a){return g["options-items"][a]}}};a.famdiagram.LinePaletteOptionTask=function(c,b){var f={},e={},g=new a.common.ObjectReader({linesPalette:new a.common.ArrayReader(new a.common.ObjectReader({lineColor:new a.common.ValueReader(["string"],
!1,b.lineColor),lineWidth:new a.common.ValueReader(["number"],!1,b.lineWidth),lineType:new a.common.EnumerationReader(a.common.LineType,!1,b.lineType)}),!1)});return{process:function(){var a={isChanged:!1,hash:e};f=g.read(f,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return f}}};a.famdiagram.NormalizeOptionTask=function(c,b){var f={},e={},g=new a.common.ObjectReader({groupByType:new a.common.EnumerationReader(a.common.GroupByType,!1,b.groupByType),alignBylevels:new a.common.ValueReader(["boolean"],
!1,b.alignBylevels)});return{process:function(){var a={isChanged:!1,hash:e};f=g.read(f,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return f}}};a.famdiagram.OptionsTask=function(a){return{process:function(){return!0},getOptions:a,description:"Raw options."}};a.famdiagram.OrderFamilyNodesOptionTask=function(c,b,f){var e={},g={},d=new a.common.ObjectReader({enableMatrixLayout:new a.common.ValueReader(["boolean"],!1,b.enableMatrixLayout),minimumMatrixSize:new a.common.ValueReader(["number"],
!1,b.minimumMatrixSize),maximumColumnsInMatrix:new a.common.ValueReader(["number"],!1,b.maximumColumnsInMatrix),items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),position:new a.common.ValueReader(["number"],!0),relativeItem:new a.common.ValueReader(["string","number"],!0),placementType:new a.common.EnumerationReader(a.common.AdviserPlacementType,!1,f.placementType),primaryParent:new a.common.ValueReader(["string","number"],!0)}),!0,"id")});
return{process:function(){var a={isChanged:!1,hash:g};e=d.read(e,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return e}}};a.famdiagram.RemoveLoopsOptionTask=function(c,b){var f={},e={},g=new a.common.ObjectReader({loopsLayoutMode:new a.common.EnumerationReader(a.common.LoopsLayoutMode,!1,b.loopsLayoutMode)});return{process:function(){var a={isChanged:!1,hash:e};f=g.read(f,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return f}}};a.famdiagram.SpousesOptionTask=
function(c,b){var f={},e={},g=new a.common.ObjectReader({items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),spouses:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:e};f=g.read(f,c.getOptions(),"options",a);return a.isChanged},getItems:function(){return f.items}}};a.famdiagram.VisualTreeOptionTask=function(a){var b={leavesPlacementType:2,childrenPlacementType:2,
maximumColumnsInMatrix:6,horizontalAlignment:0};return{process:function(){return!1},getOptions:function(){return b}}};a.famdiagram.CombinedTemplateParamsTask=function(a,b){return{process:function(){return!0},getTemplateParams:function(c){return a.getTemplateParams(c)||b.getTemplateParams(c)}}};a.famdiagram.LabelAnnotationTemplateParamsTask=function(c,b,f){var e={};return{process:function(){var g=c.getOptions(),d=b.getAnnotations(),h;e={};var k=0;for(h=d.length;k<h;k+=1){var l=d[k],n=new a.orgdiagram.TemplateParams,
m=f.getTemplate(l.templateName,g.defaultLabelAnnotationTemplate,f.DefaultWidgetLabelAnnotationTemplateName);n.template=m;e[l.id]=n}return!0},getTemplateParams:function(a){return e[a]}}};a.famdiagram.BaseTransformer=function(a){this.debug=a};a.famdiagram.BaseTransformer.prototype.validate=function(a,b){if(!a.validate())throw"Family structure failed to pass validation!";a.loop(this,function(c,e){a.loopChildren(this,c,function(c,d,f){if(null===d.level||null===e.level||(b?d.level!=e.level+1:d.level<=
e.level))throw"Family tree is broken. Children/Parents or levels mismatch!";return a.SKIP})})};a.famdiagram.FamilyBalance=function(){};a.famdiagram.FamilyBalance.prototype.balance=function(c){var b={maximumId:null,treeLevels:a.common.TreeLevels(),bundles:[],connectorStacks:[]},f={orgTree:a.common.tree(),maximumId:c.maximumId,orgPartners:{},itemByChildrenKey:{},minimumLevel:null,maximumLevel:null};this.createOrgTree(c,f);var e,g=-1;f.orgTree.loopLevels(this,function(a,f,k){f=c.logicalFamily.node(a);
null!=f&&(e!==k&&(e=k,g+=1),b.treeLevels.addItem(g,a,f))});this.recalcLevelsDepth(b.bundles,b.connectorStacks,b.treeLevels,c.logicalFamily);b.maximumId=f.maximumId;return b};a.famdiagram.FamilyBalance.prototype.Family=function(a){this.id=null;this.familyPriority=1;this.childFamilies=[];this.items=[];this.links=[];this.backLinks=[];1==arguments.length&&(this.id=a)};a.famdiagram.FamilyBalance.prototype.FamLink=function(a,b){this.fromItem=a;this.toItem=b};a.famdiagram.FamilyBalance.prototype.createOrgTree=
function(c,b){var f,e,g=[],d=[];if(0<c.logicalFamily.hasNodes()){var h={};var k=0;var l=[];c.logicalFamily.loopRoots(this,function(a,e){p=new this.Family(k);this.extractOrgChart(a,c.logicalFamily,c.primaryParents,b.orgTree,b.orgPartners,b.itemByChildrenKey,h,p);d.push(p);l.push(p);k+=1});l.sort(function(a,b){var c=a.items[0].level,d=b.items[0].level;return c!=d?c-d:b.items.length-a.items.length});g=[];var n={};if(0<d.length){var m=a.common.graph();var q=0;for(f=d.length;q<f;q+=1){var p=d[q];var r=
0;for(e=p.links.length;r<e;r+=1){var t=p.links[r];var u=c.logicalFamily.node(t.fromItem).familyId;var w=c.logicalFamily.node(t.toItem).familyId;u!=w&&(m.addEdge(u,w,{weight:0}),m.edge(u,w).weight+=1);d[w].backLinks.push(new this.FamLink(t.toItem,t.fromItem))}}for(;g.length<d.length;)for(q=0,f=l.length;q<f;q+=1)if(p=l[q],!n.hasOwnProperty(p.id)){var v=m.getSpanningTree(p.id,function(a){return-a.weight});null!=v.node(p.id)?(v.loopPostOrder(this,function(a,b,c,e){b=d[a];e=d[c];var f=[];null!=c&&(e.familyPriority+=
b.familyPriority);f=[];v.loopChildren(this,a,function(a,b,c){f.push(a)});f.sort(function(a,b){return d[a].familyPriority-d[b].familyPriority});v.arrangeChildren(a,f)}),v.loopPreOrder(this,function(a,b){g.push(a);n[a]=!0})):(g.push(p.id),n[p.id]=!0)}}b.maximumId+=1;var x=new a.famdiagram.FamilyBalanceItem(b.maximumId,null,b.minimumLevel-1);b.orgTree.add(null,x.id,x);m={};q=0;for(f=g.length;q<f;q+=1){p=d[g[q]];w={};var E=x;var A=0;e=p.links.concat(p.backLinks);for(r=0;r<e.length;r+=1)if(t=e[r],u=b.orgTree.node(t.toItem),
b.orgTree.node(t.fromItem),!0===m[u.familyId]){var F=p.items[0];var y=u;y.level>=F.level&&b.orgTree.loopParents(this,y.id,function(a,b){y=b;if(b.level<F.level)return!0});w.hasOwnProperty(y.id)?w[y.id]+=1:w[y.id]=1;A<w[y.id]&&(E=y,A=w[y.id])}this.attachFamilyToOrgChart(b,E,p);m[p.id]=!0}q=this.getExtraGravity(b);f=this.getGrandChildren(b);this.balanceOrgTree(b.orgTree,q,f,c.itemsPositions,c.itemsGroups)}};a.famdiagram.FamilyBalance.prototype.getGrandChildren=function(a){var b={};a.orgTree.loopPostOrder(this,
function(c,e,g,d){a.minimumLevel=null!=a.minimumLevel?Math.min(a.minimumLevel,e.level):e.level;a.maximumLevel=null!=a.maximumLevel?Math.max(a.maximumLevel,e.level):e.level;if(null!=g&&(b[g]||(b[g]={}),e=e.level-1,b[g][e]=b[g][e]?b[g][e]+1:1,null!=b[c]))for(e in b[c])b[c].hasOwnProperty(e)&&(b[g][e]=b[g][e]?b[g][e]+b[c][e]:b[c][e])});return b};a.famdiagram.FamilyBalance.prototype.balanceOrgTree=function(c,b,f,e,g){var d,h,k,l,n,m,q,p,r,t,u;c.loopLevels(this,function(w,v,x){var E=a.common.graph(),A=
{},F=null,y;q=[];c.loopChildren(this,v.id,function(a,e,f){var g;null==F&&(F=e);A[e.id]={};if(b.hasOwnProperty(e.id))for(g in m=b[e.id],m)if(m.hasOwnProperty(g))for(t=m[g],A[e.id][g]={},d=0,h=t.length;d<h;d+=1)n=t[d],y=n.commonParent==v.id?n.toParent:c.node(n.fromParent).childIndex<c.node(n.toParent).childIndex?"__right__":"__left__",e.id!=y&&(E.addEdge(e.id,y,{weight:0}),E.edge(e.id,y).weight+=1,null==A[e.id][g][y]&&(A[e.id][g][y]=0),A[e.id][g][y]+=1);0<f&&E.addEdge(e.id,F.id,{weight:0})});if(null!=
F)for(u=[],E.getTotalWeightGrowthSequence(this,function(a){return a.weight},function(a){u.push(a)}),0===u.length&&(u=[F.id]),p=this.balanceItems(u,"__left__","__right__",A,f,e,g),k=0,l=p.length;k<l;k+=1)r=c.node(p[k]),r.childIndex=k,q.push(r.id);c.arrangeChildren(v.id,q)})};a.famdiagram.FamilyBalance.prototype.balanceItems=function(c,b,f,e,g,d,h){var k=[],l,n=a.common.LinkedHashItems(),m=0,q={},p={},r,t,u,w,v,x,E,A,F,y,B,C,D;var K=[b,null,f];for(l=0;l<K.length;l+=1){var G=K[l];var z=m++;var H=new a.famdiagram.Slot(G);
H.position=l;n.add(z,H);null!==G&&(p[G]=z)}for(l=0;l<c.length;l+=1)if(G=c[l],G!=b&&G!=f){K=z=x=v=w=u=t=r=null;h.hasOwnProperty(G)&&(H=h[G],q.hasOwnProperty(H)&&(K=d[G],H=q[H],z=H.previousContext(K),K=H.nextContext(K)));n.iterate(function(a,b){var c,d;if(null==a.itemId){B=g[G];y=F=A=E=0;for(c in a.crossings)a.crossings.hasOwnProperty(c)&&(B&&null!=B[c]&&(E+=a.crossings[c]*B[c]),y+=a.crossings[c]);for(c in e[G])if(e[G].hasOwnProperty(c)){var f=e[G][c];for(d in f)if(f.hasOwnProperty(d)&&p.hasOwnProperty(d)){var h=
n.item(p[d]);null!=h&&(h.position<a.position?(E+=(a.left[c]||0)-(h.left[c]||0),F+=Math.abs(h.balance+1)):(E+=(a.right[c]||0)-(h.right[c]||0),F+=Math.abs(h.balance-1)),A+=Math.abs(h.position-a.position))}}if(null==u||u>E||u==E&&(w>A||w==A&&(v>F||v==F&&x>y)))r=b,u=E,t=a,w=A,v=F,x=y}},z,K);n.insertBefore(r,m++,t.clone(null));var L=p[G]=m;z=t.clone(G);d.hasOwnProperty(G)&&(H=h[G],q.hasOwnProperty(H)||(q[H]=a.common.SortedList()),H=q[H],H.add(d[G],m));n.insertBefore(r,m++,z);var J=z.position=0;n.iterate(function(a,
b){var c;if(b!=L){b=g[G];for(c in b)b.hasOwnProperty(c)&&(a.left[c]=a.left[c]?a.left[c]+b[c]:b[c]);J+=1;a.position=J}},L);J=0;n.iterateBack(function(a,b){var c;if(b!=L){b=g[G];for(c in g[G])g[G].hasOwnProperty(c)&&(a.right[c]=a.right[c]?a.right[c]+b[c]:b[c]);--J;a.position=J}},L);for(C in e[G])if(e[G].hasOwnProperty(C)){var N=e[G][C];for(D in N)if(N.hasOwnProperty(D)&&p.hasOwnProperty(D)){var M=p[D];H=n.item(M);null!=H&&(0>H.position?(H.balance+=1,--z.balance,n.iterateBack(function(a,b){b!=L&&b!=
M&&(a.crossings[C]=a.crossings[C]?a.crossings[C]+N[D]:N[D])},L,M)):(--H.balance,z.balance+=1,n.iterate(function(a,b){b!=L&&b!=M&&(a.crossings[C]=a.crossings[C]?a.crossings[C]+N[D]:N[D])},L,M)))}}}n.iterate(function(a){a=a.itemId;null!=a&&a!=b&&a!=f&&k.push(a)});return k};a.famdiagram.FamilyBalance.prototype.ExtraGravity=function(a){this.toParent=this.fromParent=this.commonParent=null;this.level=a};a.famdiagram.FamilyBalance.prototype.getExtraGravity=function(a){var b,c={},e;for(b in a.orgPartners)if(a.orgPartners.hasOwnProperty(b)){var g=
a.orgTree.node(b);var d=a.orgPartners[b];var h=0;for(e=d.length;h<e;h+=1){var k=a.orgTree.node(d[h]);this.addExtraGravitiesForConnection(a.orgTree,c,k,g)}}return c};a.famdiagram.FamilyBalance.prototype.addExtraGravitiesForConnection=function(a,b,f,e){var c=new this.ExtraGravity(f.level),d=new this.ExtraGravity(e.level);a.zipUp(this,f.id,e.id,function(a,e,f,g){this.addExtraGravityForItem(b,a,c);this.addExtraGravityForItem(b,f,d);if(e==g)return c.commonParent=e,c.fromParent=a,c.toParent=f,d.commonParent=
e,d.fromParent=f,d.toParent=a,!0})};a.famdiagram.FamilyBalance.prototype.addExtraGravityForItem=function(a,b,f){a.hasOwnProperty(b)||(a[b]={});null==a[b][f.level]&&(a[b][f.level]=[]);a[b][f.level].push(f)};a.famdiagram.FamilyBalance.prototype.attachFamilyToOrgChart=function(c,b,f){var e=f.items[0],g=b;for(b=b.level+1;b<e.level;b+=1){c.maximumId+=1;var d=new a.famdiagram.FamilyBalanceItem(c.maximumId,null,b);c.orgTree.add(g.id,d.id,d);f.items.push(d);g=d}e.hideParentConnection=!0;c.orgTree.adopt(g.id,
e.id,e)};a.famdiagram.FamilyBalance.prototype.extractOrgChart=function(c,b,f,e,g,d,h,k){var l;var n=b.node(c);c=new a.famdiagram.FamilyBalanceItem(n.id,k.id,n.level);e.add(null,c.id,c);k.items.push(c);h[n.id]=n;n.familyId=k.id;for(l=this.extractChildren(n,b,f,e,g,d,h,k);0<l.length;){var m=[];c=0;for(n=l.length;c<n;c+=1){var q=l[c];m=m.concat(this.extractChildren(q,b,f,e,g,d,h,k))}l=m}};a.famdiagram.FamilyBalance.prototype.extractChildren=function(c,b,f,e,g,d,h,k){var l=[],n=null,m=null,q;1==b.countChildren(c.id)&&
(n=b.firstChild(c.id));if(null!=d[n])m=d[n],null==g[m.id]&&(g[m.id]=[]),g[m.id].push(c.id),k.links.push(new this.FamLink(c.id,n));else{if(null!=n){if(f.hasOwnProperty(n)&&(f=f[n],f!=c.id))return null==g[f]&&(g[f]=[]),g[f].push(c.id),k.links.push(new this.FamLink(c.id,n)),l;d[n]=c}b.loopChildren(this,c.id,function(d,f,g){if(h[f.id])throw"Many to many relations should not exist at this stage";l.push(f);q=new a.famdiagram.FamilyBalanceItem(f.id,k.id,f.level);e.add(c.id,q.id,q);k.items.push(q);h[f.id]=
!0;f.familyId=k.id;return b.SKIP})}return l};a.famdiagram.FamilyBalance.prototype.recalcLevelsDepth=function(c,b,f,e){var g,d,h,k,l,n,m,q={},p,r,t;f.loopLevels(this,function(u,w){w=new a.orgdiagram.TreeLevelConnectorStackSize;b[u]=w;m=[];f.loopLevelItems(this,u,function(b,d,f){var h=[],g=[],k=null;!q.hasOwnProperty(b)&&(q[b]=!0,d.hideChildrenConnection?k=b:h.push(b),e.loopChildren(this,b,function(a,b,c){e.loopParents(this,a,function(a,b){q.hasOwnProperty(a)||(q[a]=!0,b.hideChildrenConnection?k=a:
h.push(a));return e.SKIP});b.hideParentConnection?k=a:g.push(a);return e.SKIP}),1<h.length||0<g.length)&&(n=new a.common.VerticalConnectorBundle(h,g,k),c.push(n),1<h.length&&m.push(n))});if(0<m.length){t=a.common.pile();g=0;for(d=m.length;g<d;g+=1){n=m[g];r=p=null;h=0;for(k=n.fromItems.length;h<k;h+=1)l=f.getItemPosition(n.fromItems[h]),p=null!=p?Math.min(p,l):l,r=null!=r?Math.max(r,l):l;t.add(p,r,n)}w.parentsStackSize=t.resolve(this,function(a,b,c,d,e){c.fromOffset=d+1;c.fromStackSize=e})}})};a.famdiagram.FamilyBalanceItem=
function(a,b,f){this.id=a;this.familyId=b;this.level=f;this.childIndex=0};a.famdiagram.FamilyMatrixesExtractor=function(c){this.parent=a.famdiagram.BaseTransformer.prototype;this.parent.constructor.apply(this,arguments)};a.famdiagram.FamilyMatrixesExtractor.prototype=new a.famdiagram.BaseTransformer;a.famdiagram.FamilyMatrixesExtractor.prototype.extract=function(c,b,f,e,g,d){0<b.hasNodes()&&c.enableMatrixLayout&&b.groupBy(this,Math.max(2,c.minimumMatrixSize),function(h,k,l,n){var m=d+=1,q=d+=1,p=
b.node(l[0]);p=new a.famdiagram.FamilyItem({id:m,level:p.level,isVisible:!1,isActive:!1,itemConfig:{title:"dummy #"+m,description:"This is item used as aggregator of matrixed nodes."},levelGravity:1,hideParentConnection:!0,hideChildrenConnection:!0});e[m]=q;for(var r=0,t=l.length;r<t;r+=1)b.removeNode(l[r]);null!=h?(b.add([h],m,p),p.hideParentConnection=!1,g.push(new a.common.MatrixConnectorBundle(!0,l,m,m,this.getMatrixWidth(c.maximumColumnsInMatrix,l.length)))):b.add(null,m,p);null!=k&&(b.adopt([m],
k),p.hideChildrenConnection=!1,g.push(new a.common.MatrixConnectorBundle(!1,l,m,q,this.getMatrixWidth(c.maximumColumnsInMatrix,l.length))));f[m]=n});return d};a.famdiagram.FamilyMatrixesExtractor.prototype.getMatrixWidth=function(a,b){return Math.min(a,Math.ceil(Math.sqrt(b)))};a.famdiagram.FamilyNormalizer=function(c){this.parent=a.famdiagram.BaseTransformer.prototype;this.parent.constructor.apply(this,arguments)};a.famdiagram.FamilyNormalizer.prototype=new a.famdiagram.BaseTransformer;a.famdiagram.FamilyNormalizer.prototype.normalize=
function(c,b,f){if(0<b.hasNodes()){b.loopLevels(this,1==c.groupByType,function(a,b,c){b.level=c});b.optimizeReferences(function(){f+=1;return new a.famdiagram.FamilyItem({id:f,isVisible:!1,isActive:!1,itemConfig:{title:"bundle #"+f,description:" This item was created by references optimizer."},levelGravity:2})});if(this.debug&&!b.validate())throw"References are broken in family structure!";if(this.debug&&b.hasLoops())throw"Structure has loops!";b.eliminateManyToMany(function(){f+=1;return new a.famdiagram.FamilyItem({id:f,
isVisible:!1,isActive:!1,itemConfig:{title:"dummy #"+f,description:"This is item used to eliminate M:M relations."},levelGravity:2,hideParentConnection:!1,hideChildrenConnection:!1})});if(this.debug&&!b.validate())throw"References are broken in family structure!";c.alignBylevels?this.resortItemsBylevels(b):b.loopLevels(this,1==c.groupByType,function(a,b,c){b.level=c});this.debug&&this.validate(b,!1);this.fillInItems(b,function(b){f+=1;return new a.famdiagram.FamilyItem({id:f,levelGravity:2,isVisible:!1,
isActive:!1,itemConfig:{title:"extension #"+f,description:"This is item used to fill gaps in levels."}})});this.debug&&this.validate(b,!0)}return f};a.famdiagram.FamilyNormalizer.prototype.resortItemsBylevels=function(a){var b=[],c=null,e=null,g;a.loop(this,function(a,d){d.originalLevel=d.level;d.level=null;null!=d.originalLevel&&(b[d.originalLevel]||(b[d.originalLevel]={}),b[d.originalLevel][a]=d,c=null!=c?Math.min(d.originalLevel,c):d.originalLevel,e=null!=e?Math.max(d.originalLevel,e):d.originalLevel)});
for(g=c;g<=e;g+=1){var d=b[g];this.setLevelsForItems(d,a)}a.loopTopo(this,function(b,c,d){if(1==c.levelGravity){var e=null;a.loopParents(this,b,function(b,c,d){e=null==e?c.level+1:Math.max(c.level+1,e);return a.SKIP});c.level=e?e:c.level}})};a.famdiagram.FamilyNormalizer.prototype.setLevelsForItems=function(c,b){var f=0,e;for(e in c)c.hasOwnProperty(e)&&b.loopParents(this,e,function(a,c,d){f=Math.max(c.level+1,f);return b.SKIP});for(e in c)if(c.hasOwnProperty(e)){var g=c[e];g.level=f}for(;!a.common.isEmptyObject(c);){var d=
{};for(e in c)c.hasOwnProperty(e)&&(g=c[e],b.loopChildren(this,e,function(a,c,e){if(null==c.originalLevel||c.isLevelNeutral)c.level=null==c.level?g.level+1:Math.max(c.level,g.level+1),d[a]=c;return b.SKIP}));c=d}};a.famdiagram.FamilyNormalizer.prototype.fillInItems=function(a,b){var c;a.loop(this,function(e,f){for(var d=!0,h;d;)d=!1,h=[],a.loopParents(this,e,function(b,c,d){f.level-1>c.level&&h.push(b);return a.SKIP}),1<h.length&&(c=b(f),c.level=f.level-1,c.hideParentConnection=!1,c.hideChildrenConnection=
!1,a.bundleParents(e,h,c.id,c),d=!0,e=c.id,f=c)});a.loop(this,function(e,f){for(var d=!0,h,g=!0;d;)d=!1,h=[],a.loopChildren(this,e,function(b,c,d){f.level+1<c.level?h.push(b):g=!1;return a.SKIP}),1<h.length&&(c=b(f),c.level=f.level+1,g&&(c.hideParentConnection=!1,c.hideChildrenConnection=!1),a.bundleChildren(e,h,c.id,c),d=!0,e=c.id,f=c)});a.loop(this,function(e,f){for(var d=!0,h;d;)d=!1,h=[],a.loopParents(this,e,function(b,c,d){f.level-1>c.level&&h.push(b);return a.SKIP}),0<h.length&&(c=b(f),c.level=
f.level-1,c.hideParentConnection=!1,c.hideChildrenConnection=!1,a.bundleParents(e,h,c.id,c),d=!0,e=c.id,f=c)})};a.famdiagram.UserDefinedNodesOrder=function(){};a.famdiagram.UserDefinedNodesOrder.prototype.getUserDefinedPositions=function(c){function b(a,b){this.position=a;this.items=b}var f,e=a.common.tree(),g={};var d=0;for(f=c.length;d<f;d+=1){var h=c[d];null!=h.relativeItem&&(g[h.relativeItem]=!0);null!=h.id&&(g[h.id]=!0)}d=0;for(f=c.length;d<f;d+=1)h=c[d],g.hasOwnProperty(h.id)&&e.add(h.relativeItem||
null,h.id,h);var k={},l={},n={};e.loopPostOrder(this,function(a,c,d,e){e=[];var f=l[a],h=n[a],g;if(null!=f)for(f.sort(function(a,b){return b.position-a.position}),g=0;g<f.length;g+=1)e=e.concat(f[g].items);e.push(a);if(null!=h)for(h.sort(function(a,b){return a.position-b.position}),g=0;g<h.length;g+=1)e=e.concat(h[g].items);null!=d?2==c.placementType?(l.hasOwnProperty(d)||(l[d]=[]),l[d].push(new b(c.position,e))):(n.hasOwnProperty(d)||(n[d]=[]),n[d].push(new b(c.position,e))):k[a]=e});h={};f={};for(var m in k)if(k.hasOwnProperty(m))for(c=
k[m],d=0;d<c.length;d+=1)e=c[d],h[e]=d,f[e]=m;return{position:h,group:f}};a.famdiagram.UserDefinedPrimaryParents=function(){};a.famdiagram.UserDefinedPrimaryParents.prototype.getUserDefinedPrimaryParents=function(a,b){var c={},e,g={};var d=0;for(e=a.length;d<e;d+=1){var h=a[d];null!=h.primaryParent&&(g[h.id]=h.primaryParent)}for(var k in g){var l=g[k],n={};for(a=[k];0<a.length;){var m=[];d=0;for(e=a.length;d<e;d+=1)k=a[d],b.loopParents(this,k,function(a,d){n[a]=k;if(a==l){for(;null!=n[a];)c[n[a]]=
a,a=n[a];m=[];return b.BREAK}0==d.isVisible&&m.push(a);return b.SKIP});a=m}}return c};a.common.BaseLayout=function(a,b){this._children={};if(null!=this.params)for(var c in this.params)this.params.hasOwnProperty(c)&&a.hasOwnProperty(c)&&(this.params[c]=a[c]);if(null!=this.options){for(c in this.options)this.options.hasOwnProperty(c)&&b.hasOwnProperty(c)&&(this.options[c]=b[c]);this.options.shifts=this.getShifts(this.options);this.options.intervals=this.getIntervals(this.options)}};a.common.BaseLayout.prototype.add=
function(a,b){this._children[a]=b};a.common.BaseLayout.prototype.getLayout=function(a){return this._children[a]||null};a.common.BaseLayout.prototype.getShifts=function(a){var b=[];b[1]=a.normalLevelShift;b[2]=a.dotLevelShift;b[3]=a.lineLevelShift;b[4]=a.lineLevelShift;return b};a.common.BaseLayout.prototype.getIntervals=function(a){var b=[];b[1]=a.normalItemsInterval;b[2]=a.dotItemsInterval;b[3]=a.lineItemsInterval;b[4]=a.lineItemsInterval;return b};a.common.BaseLayout.prototype.getItemSize=function(c,
b,f,e){switch(c){case 1:c=f.template.templateConfig;var g=new a.common.Size(c.itemSize);var d=new a.common.Rect(0,0,g.width,g.height);b&&(g.height+=c.cursorPadding.top+c.cursorPadding.bottom,g.width+=c.cursorPadding.left+c.cursorPadding.right,d.x=c.cursorPadding.left,d.y=c.cursorPadding.top);f.hasSelectorCheckbox&&(g.height+=e.checkBoxPanelSize);if(f.hasButtons)switch(g.width+=e.buttonsPanelSize,e.groupTitlePlacementType){case 3:d.x+=e.buttonsPanelSize}if(f.hasGroupTitle)switch(g.width+=e.groupTitlePanelSize,
e.groupTitlePlacementType){case 3:break;default:d.x+=e.groupTitlePanelSize}break;case 2:c=f.template.templateConfig;g=new a.common.Size(c.minimizedItemSize);break;case 3:case 4:g=new a.common.Size}switch(e.orientationType){case 2:case 3:g.invert()}return{actualSize:g,contentPosition:d}};a.famdiagram.FamilyLayout=function(c,b){this.params={logicalFamily:null,treeLevels:null,getConnectorsStacksSizes:null,isItemSelected:null,cursorItemId:null,getTemplateParams:null};this.options={verticalAlignment:1,
pageFitMode:0,minimalVisibility:2,orientationType:0,arrowsDirection:0,linesWidth:1,checkBoxPanelSize:24,buttonsPanelSize:28,groupTitlePanelSize:24,groupTitlePlacementType:2,normalLevelShift:20,dotLevelShift:20,lineLevelShift:20,normalItemsInterval:10,dotItemsInterval:1,lineItemsInterval:2};this.data={treeItemsPositions:{},treeLevelsPositions:[]};this.parent=a.common.BaseLayout.prototype;this.parent.constructor.apply(this,arguments)};a.famdiagram.FamilyLayout.prototype=new a.common.BaseLayout;a.famdiagram.FamilyLayout.prototype.measure=
function(c){var b=new a.common.Rect(0,0,0,0),f={treeItemsPositions:{},treeLevelsPositions:[]};switch(this.options.orientationType){case 2:case 3:c.invert()}if(!this.params.treeLevels.isEmpty())switch(this.options.pageFitMode){case 0:case a.common.PageFitMode.PrintPreview:case 5:var e=[new a.orgdiagram.LevelVisibility(0,1)];b=this.setTreeLevelsVisibilityAndPositionTreeItems(f,this.params,this.options,e,0);break;default:e=this.getLevelVisibilities(this.params.treeLevels,this.options.minimalVisibility);
var g=this.setTreeLevelsVisibilityAndPositionTreeItems(f,this.params,this.options,e,e.length-1);this.checkDiagramSize(g,c,this.options.pageFitMode)?(g.addRect(c),g.offset(0,0,5,5),this.findOptimalSize(this,e.length-1,function(a){b=this.setTreeLevelsVisibilityAndPositionTreeItems(f,this.params,this.options,e,a);return this.checkDiagramSize(b,g,this.options.pageFitMode)})):b=g}this.data=f;return b};a.famdiagram.FamilyLayout.prototype.getLevelVisibilities=function(c,b){var f=[new a.orgdiagram.LevelVisibility(0,
1)],e=[];switch(b){case 2:e.push(2);break;case 0:case 3:case 4:e.push(2),e.push(3)}c.loopLevelsReversed(this,function(b,c){for(c=0;c<e.length;c+=1)f.push(new a.orgdiagram.LevelVisibility(b,e[c]))});return f};a.famdiagram.FamilyLayout.prototype.findOptimalSize=function(a,b,f){var c=0,g;if(!f.call(a,c)){for(g=b;1<b-c;)g=Math.floor((b+c)/2),f.call(a,g)?b=g:c=g;b!==g&&f.call(a,b)}};a.famdiagram.FamilyLayout.prototype.setTreeLevelsVisibilityAndPositionTreeItems=function(c,b,f,e,g){var d;c.treeLevelsPositions=
[];b.treeLevels.loopLevels(this,function(b,d){b=new a.orgdiagram.TreeLevelPosition;b.currentvisibility=1;c.treeLevelsPositions.push(b)});for(d=0;d<=g;d+=1){var h=e[d];c.treeLevelsPositions[h.level].currentvisibility=h.currentvisibility}c.treeItemsPositions={};this.recalcItemsSize(b.treeLevels,c.treeItemsPositions,c.treeLevelsPositions,b.isItemSelected,b.cursorItemId,b.getTemplateParams,f);this.setOffsets(b.treeLevels,c.treeItemsPositions,c.treeLevelsPositions,b.logicalFamily,f.intervals);this.recalcLevelsDepth(b.treeLevels,
c.treeItemsPositions,c.treeLevelsPositions,f.verticalAlignment);this.shiftLevels(c.treeLevelsPositions,f.shifts[3],f.shifts,f.arrowsDirection,f.linesWidth,b.getConnectorsStacksSizes);return this.getLayoutSize(b.treeLevels,c.treeItemsPositions,c.treeLevelsPositions)};a.famdiagram.FamilyLayout.prototype.checkDiagramSize=function(a,b,f){var c=!1;switch(f){case 1:b.width>=a.width&&(c=!0);break;case 2:b.height>=a.height&&(c=!0);break;case 3:b.height>=a.height&&b.width>=a.width&&(c=!0)}return c};a.famdiagram.FamilyLayout.prototype.getLayoutSize=
function(c,b,f){return new a.common.Rect(0,0,Math.round(this.getLayoutWidth(c,b)),Math.round(this.getLayoutHeight(f)))};a.famdiagram.FamilyLayout.prototype.getLayoutWidth=function(a,b){var c=0;a.loopLevels(this,function(e,f){f=a.getLevelLength(e);0<f&&(e=a.getItemAtPosition(e,f-1),e=b[e],c=Math.max(c,e.offset+e.actualSize.width+e.rightPadding))});return c};a.famdiagram.FamilyLayout.prototype.getLayoutHeight=function(a){a=a[a.length-1];return a.shift+a.nextLevelShift};a.famdiagram.FamilyLayout.prototype.recalcItemsSize=
function(c,b,f,e,g,d,h){c.loopLevels(this,function(k,l){var n=f[k];c.loopLevelItems(this,k,function(c,f,k){k=new a.orgdiagram.TreeItemPosition;var m=this.getLayout(c);null==m?(m=e(c)?1:f.isVisible?0:4,f=d(c),m=0===m?n.currentvisibility:m,f=this.getItemSize(m,g==c,f,h),k.actualVisibility=m,k.actualSize=f.actualSize,k.contentPosition=f.contentPosition):(f=m.measure(n.currentvisibility),k.actualVisibility=4,k.actualSize=f);b[c]=k})})};a.famdiagram.FamilyLayout.prototype.recalcLevelsDepth=function(a,
b,f,e){var c,d;a.loopLevels(this,function(h,g){var k=f[h];k.shift=0;k.depth=0;k.actualVisibility=4;d=c=null;a.loopLevelItems(this,h,function(a,e,f){a=b[a];k.depth=Math.max(k.depth,a.actualSize.height);switch(a.actualVisibility){case 2:case 3:case 4:d=d?Math.min(d,a.actualSize.height):a.actualSize.height;break;default:c=c?Math.min(c,a.actualSize.height):a.actualSize.height}k.actualVisibility=Math.min(k.actualVisibility,a.actualVisibility)});null==c&&(c=k.depth);null!=d&&d>c&&(c=d);switch(e){case 0:k.horizontalConnectorsDepth=
c/2;break;case 1:k.horizontalConnectorsDepth=k.depth/2;break;case 2:k.horizontalConnectorsDepth=k.depth-c/2}})};a.famdiagram.FamilyLayout.prototype.shiftLevels=function(a,b,f,e,g,d){var c=0,k=0;g*=8;switch(e){case 1:c=g;k=0;break;case 2:c=0,k=g}e=0;for(g=a.length;e<g;e+=1){var l=a[e];var n=d(e);b+=l.setShift(b,f[l.actualVisibility],k,c,n.parentsStackSize)}};a.famdiagram.FamilyLayout.prototype.setOffsets=function(c,b,f,e,g){var d;var h=0;for(d=f.length;h<d;h+=1)f[h].currentOffset=0;f=e.getPlanarFamily(c);
var k=new a.common.FamilyAlignment(this,f,c,function(a,c){a=b[a];c=g[a.actualVisibility]/2;a.leftPadding=c;a.rightPadding=c;return a.leftPadding+a.actualSize.width+a.rightPadding}),l=null;c.loopLevels(this,function(a,d){a=c.getItemAtPosition(a,0);null!=a&&(d=b[a],a=k.getOffset(a)-d.leftPadding-d.actualSize.width/2,l=null==l?a:Math.min(l,a))});c.loopLevels(this,function(a,d){c.loopLevelItems(this,a,function(a,c,d){c=b[a];a=k.getOffset(a);c.offset=a-c.actualSize.width/2;c.offset-=l})})};a.famdiagram.FamilyLayout.prototype.arrange=
function(a,b){var c=null;null!=b&&this.params.treeLevels.loopLevels(this,function(e,f){var d=this.data.treeLevelsPositions[e];this.params.treeLevels.loopLevelItems(this,e,function(e,f,g){g=this.data.treeItemsPositions[e];f=this.getItemPosition(g.actualVisibility,g.offset,g.actualSize,c,d,this.options.verticalAlignment);g.actualPosition=f.position;g.horizontalConnectorsShift=f.horizontalConnectorsShift;g.topConnectorShift=f.topConnectorShift;g.topConnectorInterval=f.topConnectorInterval;g.bottomConnectorShift=
f.bottomConnectorShift;g.bottomConnectorInterval=f.bottomConnectorInterval;b.call(a,e,g);e=this.getLayout(e);null!=e&&e.arrange(a,f.position,b)});c=d})};a.famdiagram.FamilyLayout.prototype.getItemPosition=function(c,b,f,e,g,d){var h=0;switch(c){case 1:switch(d){case 0:h=0;break;case 1:h=(g.depth-f.height)/2;break;case 2:h=g.depth-f.height}break;case 2:case 3:case 4:h=g.horizontalConnectorsDepth-f.height/2}return{position:new a.common.Rect(b,g.shift+h,f.width,f.height),horizontalConnectorsShift:g.shift+
g.horizontalConnectorsDepth,topConnectorShift:null!=e?e.shift+e.connectorShift:null,topConnectorInterval:null!=e?e.levelSpace/2:null,bottomConnectorShift:g.shift+g.connectorShift,bottomConnectorInterval:g.levelSpace/2}};a.famdiagram.MatrixLayout=function(c,b){this.params={items:[],isItemSelected:null,cursorItemId:null,getTemplateParams:null,hideParentConnection:!1,hideChildrenConnection:!1};this.options={verticalAlignment:1,orientationType:0,arrowsDirection:0,linesWidth:1,checkBoxPanelSize:24,buttonsPanelSize:28,
groupTitlePanelSize:24,groupTitlePlacementType:2,normalLevelShift:20,dotLevelShift:20,lineLevelShift:20,normalItemsInterval:10,dotItemsInterval:1,lineItemsInterval:2,maximumColumnsInMatrix:6};this.data={treeItemsPositions:{},columns:[],rows:[]};this.parent=a.common.BaseLayout.prototype;this.parent.constructor.apply(this,arguments)};a.famdiagram.MatrixLayout.prototype=new a.common.BaseLayout;a.famdiagram.MatrixLayout.prototype.Column=function(){this.rightPadding=this.leftPadding=this.offset=this.depth=
0};a.famdiagram.MatrixLayout.prototype.Row=function(){this.horizontalConnectorsDepth=this.offset=this.depth=0;this.dotsDepth=this.minimalDepth=null};a.famdiagram.MatrixLayout.prototype.getMatrixWidth=function(a,b){return Math.min(a,Math.ceil(Math.sqrt(b)))};a.famdiagram.MatrixLayout.prototype.measure=function(a){var b={treeItemsPositions:{},columns:[],rows:[]};this.measureItems(b,this.params,this.options,a);this.measureColumns(b,this.params,this.options);this.measureRows(b,this.params,this.options);
this.data=b;return this.getLayoutSize(b)};a.famdiagram.MatrixLayout.prototype.measureItems=function(c,b,f,e){for(var g=0,d=b.items.length;g<d;g+=1){var h=b.items[g],k=h.id,l=new a.orgdiagram.TreeItemPosition,n=b.isItemSelected(k)?1:h.isVisible?0:4;h=b.getTemplateParams(k);n=0===n?e:n;h=this.getItemSize(n,b.cursorItemId==k,h,f);l.actualVisibility=n;l.actualSize=h.actualSize;l.contentPosition=h.contentPosition;c.treeItemsPositions[k]=l}};a.famdiagram.MatrixLayout.prototype.measureColumns=function(a,
b,f){var c,g=this.getMatrixWidth(f.maximumColumnsInMatrix,b.items.length);var d=0;for(c=b.items.length;d<c;d+=1){var h=a.treeItemsPositions[b.items[d].id];var k=f.intervals[h.actualVisibility]/2;h.leftPadding=k;h.rightPadding=k;var l=d%g;k=a.columns[l];null==k&&(k=new this.Column,a.columns[l]=k);k.depth=Math.max(k.depth,h.leftPadding+h.actualSize.width+h.rightPadding)}g=8*f.linesWidth;d=h=0;for(c=a.columns.length;d<c;d+=1){k=a.columns[d];if(0==d%2)switch(f.arrowsDirection){case 1:k.leftPadding=b.hideChildrenConnection?
0:g;k.rightPadding=0;break;case 2:k.leftPadding=0,k.rightPadding=b.hideParentConnection?0:g}else switch(f.arrowsDirection){case 1:k.leftPadding=0;k.rightPadding=b.hideChildrenConnection?0:g;break;case 2:k.leftPadding=b.hideParentConnection?0:g,k.rightPadding=0}k.offset=h+k.leftPadding+k.depth/2;h=k.offset+k.depth/2+k.rightPadding}};a.famdiagram.MatrixLayout.prototype.measureRows=function(a,b,f){var c,g=this.getMatrixWidth(f.maximumColumnsInMatrix,b.items.length);var d=0;for(c=b.items.length;d<c;d+=
1){var h=a.treeItemsPositions[b.items[d].id],k=Math.floor(d/g),l=f.shifts[h.actualVisibility]/2;var n=a.rows[k];null==n&&(n=new this.Row,a.rows[k]=n);n.depth=Math.max(n.depth,l+h.actualSize.height+l);switch(h.actualVisibility){case 2:case 3:case 4:n.dotsDepth=n.dotsDepth?Math.min(n.dotsDepth,h.actualSize.height):h.actualSize.height;break;default:n.minimalDepth=n.minimalDepth?Math.min(n.minimalDepth,h.actualSize.height):h.actualSize.height}}d=b=0;for(c=a.rows.length;d<c;d+=1)switch(n=a.rows[d],n.offset=
b+n.depth/2,b=n.offset+n.depth/2,null==n.minimalDepth&&(n.minimalDepth=n.depth),null!=n.dotsDepth&&n.dotsDepth>n.minimalDepth&&(n.minimalDepth=n.dotsDepth),f.verticalAlignment){case 0:n.horizontalConnectorsDepth=n.minimalDepth/2;break;case 1:n.horizontalConnectorsDepth=n.depth/2;break;case 2:n.horizontalConnectorsDepth=n.depth-n.minimalDepth/2}};a.famdiagram.MatrixLayout.prototype.getLayoutSize=function(c){return new a.common.Rect(0,0,Math.round(this.getLayoutWidth(c)),Math.round(this.getLayoutHeight(c)))};
a.famdiagram.MatrixLayout.prototype.getLayoutWidth=function(a){var b=0,c=a.columns.length;0<c&&(a=a.columns[c-1],b=a.offset+a.depth/2+a.rightPadding);return b};a.famdiagram.MatrixLayout.prototype.getLayoutHeight=function(a){var b=0,c=a.rows.length;0<c&&(a=a.rows[c-1],b=a.offset+a.depth/2);return b};a.famdiagram.MatrixLayout.prototype.arrange=function(a,b,f){if(null!=f)for(var c=this.getMatrixWidth(this.options.maximumColumnsInMatrix,this.params.items.length),g=0,d=this.params.items.length;g<d;g+=
1){var h=this.params.items[g].id,k=this.data.columns[g%c],l=this.data.rows[Math.floor(g/c)],n=this.data.treeItemsPositions[h],m=this.getItemPosition(n.actualVisibility,k,l,n.actualSize,this.options);m.translate(b.x,b.y);n.actualPosition=m;n.horizontalConnectorsShift=b.y+l.offset-l.depth/2+l.horizontalConnectorsDepth;n.leftMedianOffset=k.depth/2+k.leftPadding;n.rightMedianOffset=k.depth/2+k.rightPadding;n.topConnectorShift=l.depth/2;n.bottomConnectorShift=l.depth/2;f.call(a,h,n)}};a.famdiagram.MatrixLayout.prototype.getItemPosition=
function(c,b,f,e,g){var d=0;switch(c){case 1:switch(g.verticalAlignment){case 0:d=0;break;case 1:d=(f.depth-e.height)/2;break;case 2:d=f.depth-e.height}break;case 2:case 3:case 4:d=f.horizontalConnectorsDepth-e.height/2}return new a.common.Rect(b.offset-e.width/2,f.offset-f.depth/2+d,e.width,e.height)};a.famdiagram.CursorNeighboursTask=function(c,b,f,e){function g(a,b,c,d){var e=[],f={};if(null!==a)switch(b){case 0:c.loopParents(this,a,function(a,b){b.isVisible&&!f.hasOwnProperty(a)&&(f[a]=!0,e.push(a));
if(d.hasOwnProperty(a))return c.SKIP});c.loopChildren(this,a,function(a,b){b.isVisible&&!f.hasOwnProperty(a)&&(f[a]=!0,e.push(a));if(d.hasOwnProperty(a))return c.SKIP});break;case 1:c.loopNeighbours(this,a,function(a,b){b.isVisible&&!f.hasOwnProperty(a)&&(f[a]=!0,e.push(a));if(d.hasOwnProperty(a))return!0})}return e}var d=[],h={},k=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,hash:h},n=c.getCursorTreeItem(),m=f.getLogicalFamily(),
q=b.getNeighboursSelectionMode(),p=e.getActiveItems();d=k.read(d,g(n,q,m,p),"items",a);return a.isChanged},getItems:function(){return d}}};a.famdiagram.SelectionPathItemsTask=function(a,b,f,e){function c(a,b,c){var d=[],e={},f;var h=0;for(f=a.length;h<f;h+=1){var g=a[h];switch(c){case 1:b.loopParents(this,g,function(a,c){if(null!=e[a])return b.SKIP;c.isVisible&&d.push(a);e[a]=!0})}}return d}var d=[];return{process:function(){var h=e.getSelectionPathMode(),g=a.getLogicalFamily(),l=b.getCursorTreeItem(),
n=f.getItems().slice(0);n.push(l);d=c(n,g,h);return!0},getItems:function(){return d}}};a.famdiagram.AddLabelAnnotationsTask=function(c,b){function f(b,c){var d=a.common.graph(),f={},h,g;if(0<c.length){var k=0;for(g=c.length;k<g;k+=1){var r=c[k];f.hasOwnProperty(r.fromItem)?f[r.fromItem].push(r):(f[r.fromItem]=[r],b.loopChildren(this,r.fromItem,function(c,e,f){d.addEdge(r.fromItem,c,new a.famdiagram.EdgeItem(r.fromItem,r.fromItem,c,c));return b.SKIP}),b.loopParents(this,r.fromItem,function(c,e,f){d.addEdge(c,
r.fromItem,new a.famdiagram.EdgeItem(c,c,r.fromItem,r.fromItem));return b.SKIP}))}for(h in f)if(f.hasOwnProperty(h))for(c=f[h],c.sort(function(a,b){return b.toItems.length-a.toItems.length}),k=0;k<c.length;k+=1)r=c[k],e(b,d,r.fromItem,r.toItems,function(){return new a.famdiagram.FamilyItem({id:r.id,isVisible:!0,isLevelNeutral:!0,isActive:!1,itemConfig:r})})}}function e(a,b,c,d,e){var f=!0,h=null,g,m=[];var k=0;for(g=d.length;k<g;k+=1){var l=d[k];var n=b.edge(c,l);if(null!=n){if(null==h)h=n.getFar(l);
else if(h!=n.getFar(l)){f=!1;break}m.push(n.getNear(l))}else{f=!1;break}}if(f&&(e=e(),a.bundleParents(h,m,e.id,e)?(e.levelGravity=2,f=!0):a.bundleChildren(h,m,e.id,e)?(e.levelGravity=1,f=!0):a.bundleParents(h,d,e.id,e)?(e.levelGravity=2,f=!0):a.bundleParents(h,d,e.id,e)&&(e.levelGravity=1,f=!0),f))for(k=0,g=d.length;k<g;k+=1)l=d[k],n=b.edge(c,l),n.setFar(l,e.id)}var g=null,d=null;return{process:function(a){var e=b.getLogicalFamily(),h=c.getAnnotations();e=e.clone();f(e,h);g=e;d=c.getMaximumId();if(a&&
!e.validate())throw"References are broken in family structure!";return!0},getLogicalFamily:function(){return g},getMaximumId:function(){return d}}};a.famdiagram.AddSpousesTask=function(c,b){var f=null,e=null;return{process:function(g){var d=b.getLogicalFamily(),h=b.getMaximumId(),k=c.getItems(),l=d=d.clone(),n,m;var q=0;for(n=k.length;q<n;q+=1){var p=k[q];var r=p.spouses.slice(0);var t=0;for(m=r.length;t<m;t+=1){var u=[p.id,r[t]];if(!l.hasCommonChild(u)){h+=1;var w=new a.famdiagram.FamilyItem({id:h,
isVisible:!1,isActive:!1,isLevelNeutral:!0,hideParentConnection:!0,hideChildrenConnection:!0,itemConfig:{title:"fake child #"+h,description:"This is fake child keeps spouses together."},levelGravity:1});l.add(u,w.id,w)}}}f=d;e=h;if(g&&!d.validate())throw"References are broken in family structure!";return!0},getLogicalFamily:function(){return f},getMaximumId:function(){return e}}};a.famdiagram.HideGrandParentsConnectorsTask=function(a,b){var c=null,e=null;return{process:function(f){f=b.getLogicalFamily();
var d=b.getMaximumId();e=f=1==a.getOptions().hideGrandParentsConnectors?f.getFamilyWithoutGrandParentsRelations():f.clone();c=d;return!0},getLogicalFamily:function(){return e},getMaximumId:function(){return c}}};a.famdiagram.ItemsPositionsTask=function(c,b,f,e,g,d,h,k,l,n){var m={},q=null;return{process:function(){var p=e.getOptions(),r=g.getOptions(),t=d.getOptions(),u={logicalFamily:h.getLogicalFamily(),treeLevels:h.getTreeLevels(),getConnectorsStacksSizes:h.getConnectorsStacksSizes,isItemSelected:n.isItemSelected,
cursorItemId:l.getCursorTreeItem(),getTemplateParams:k.getTemplateParams};p={verticalAlignment:p.verticalAlignment,pageFitMode:p.pageFitMode,minimalVisibility:p.minimalVisibility,normalLevelShift:p.normalLevelShift,dotLevelShift:p.dotLevelShift,lineLevelShift:p.lineLevelShift,normalItemsInterval:p.normalItemsInterval,dotItemsInterval:p.dotItemsInterval,lineItemsInterval:p.lineItemsInterval,orientationType:f.getOptions().orientationType,arrowsDirection:r.arrowsDirection,linesWidth:r.linesWidth,checkBoxPanelSize:p.checkBoxPanelSize,
buttonsPanelSize:p.buttonsPanelSize,groupTitlePanelSize:p.groupTitlePanelSize,groupTitlePlacementType:p.groupTitlePlacementType,maximumColumnsInMatrix:t.maximumColumnsInMatrix};r=c.getOptimalPanelSize();t=b.getOptions().scale;r.scale(1/t);r=new a.common.Rect(0,0,r.width,r.height);t=new a.famdiagram.FamilyLayout(u,p);var w=h.getMatrixes(),v;for(v in w)if(w.hasOwnProperty(v)){var x=u.logicalFamily.node(v);t.add(v,new a.famdiagram.MatrixLayout({items:w[v],isItemSelected:u.isItemSelected,cursorItemId:u.cursorItemId,
getTemplateParams:u.getTemplateParams,hideParentConnection:x.hideParentConnection,hideChildrenConnection:x.hideChildrenConnection},p))}q=t.measure(r);m={};t.arrange(this,function(a,b){m[a]=b});return!0},getItemsPositions:function(){return m},getItemPosition:function(a){return m[a]},getContentSize:function(){return q}}};a.famdiagram.LogicalFamilyTask=function(c){var b=null,f=null;return{process:function(e){var g,d=c.getItems(),h=a.common.family(),k=0;if(0<d.length){var l=0;for(g=d.length;l<g;l+=1){var n=
d[l];if(null!=n){var m=new a.famdiagram.FamilyItem({id:n.id,itemConfig:n,isActive:n.isActive});h.add(n.parents,m.id,m);n=parseInt(n.id,10);k=Math.max(isNaN(n)?0:n,k)}}}b=h;f=k;if(e&&!h.validate())throw"References are broken in family structure!";return!0},getLogicalFamily:function(){return b},getMaximumId:function(){return f}}};a.famdiagram.NormalizeLogicalFamilyTask=function(c,b){var f=null,e=null,g=new a.famdiagram.FamilyNormalizer(!1);return{process:function(a){a=b.getLogicalFamily();var d=b.getMaximumId(),
k=c.getOptions();k={groupByType:k.groupByType,alignBylevels:k.alignBylevels};a=a.clone();d=g.normalize(k,a,d);e=a;f=d;return!0},getLogicalFamily:function(){return e},getMaximumId:function(){return f}}};a.famdiagram.OrderFamilyNodesTask=function(c,b,f){var e=null,g=null,d={},h={},k=null,l=null,n=null,m=new a.famdiagram.FamilyBalance,q=new a.famdiagram.FamilyMatrixesExtractor(!1),p=new a.famdiagram.UserDefinedPrimaryParents,r=new a.orgdiagram.TreeLevelConnectorStackSize;return{process:function(a){a=
f.getLogicalFamily();var r=f.getMaximumId(),t={},v={},x=[],E=c.getOptions(),A={enableMatrixLayout:E.enableMatrixLayout,minimumMatrixSize:E.minimumMatrixSize,maximumColumnsInMatrix:E.maximumColumnsInMatrix};a=a.clone();r=q.extract(A,a,t,v,x,r);g=a;d=t;h=v;l=x;a={logicalFamily:a,maximumId:r,itemsPositions:b.getPositions(),itemsGroups:b.getGroups(),primaryParents:p.getUserDefinedPrimaryParents(E.items,a)};a=m.balance(a);e=a.maximumId;k=a.treeLevels;l=l.concat(a.bundles);n=a.connectorStacks;return!0},
getLogicalFamily:function(){return g},getMatrixes:function(){return d},getNestedLayoutBottomConnectorIds:function(){return h},getMaximumId:function(){return e},getTreeLevels:function(){return k},getBundles:function(){return l},getConnectorsStacksSizes:function(a){return n[a]||r}}};a.famdiagram.RemoveLoopsTask=function(c,b,f){function e(b,c,d,e,f){var h,m=g(c,d);c=[];1<m.length&&0==b&&(m=a.common.getFamilyLoops(d,f));var k=[],q={};b=0;for(f=m.length;b<f;b+=1){var p=m[b];q.hasOwnProperty(p.to)?q[p.to].parents.push(p.from):
(q[p.to]={itemid:p.to,parents:[p.from]},k.push(q[p.to]))}m={};if(0<k.length)for(d=d.clone(),b=0,f=k.length;b<f;b+=1){var l=k[b];q=l.parents;var n=[];d.loopParents(this,l.itemid,function(a,b){n.push(a);return d.SKIP});var A=0;for(h=n.length;A<h;A+=1)d.removeChildRelation(n[A],l.itemid);e+=1;p=n.length<=q.length;p=new a.famdiagram.FamilyItem({id:e,isVisible:!1,isActive:!1,isLevelNeutral:!0,hideParentConnection:p,hideChildrenConnection:p,levelGravity:2,itemConfig:{title:"fake parent #"+e,description:"This is fake parent item was created by loops reversal."}});
d.add([],p.id,p);d.adopt([p.id],l.itemid);A=0;for(h=q.length;A<h;A+=1){var F=q[A];l=m[F];null==l&&(e+=1,l=new a.famdiagram.FamilyItem({id:e,isVisible:!1,isActive:!1,isLevelNeutral:!0,hideParentConnection:!0,hideChildrenConnection:!0,levelGravity:1,itemConfig:{title:"fake child #"+e,description:"This is fake child item was created by loops reversal."}}),m[F]=l,d.add([F],l.id,l));d.adopt([p.id],l.id);c.push({from:p.id,to:l.id})}l={};A=0;for(h=q.length;A<h;A+=1)l[q[A]]=!0;A=0;for(h=n.length;A<h;A+=1)l.hasOwnProperty(n[A])||
d.adopt([n[A]],p.id)}return{maximumId:e,logicalFamily:d,loops:c}}function g(a,b){var c,d,e=[];var f=b.clone();b.loopTopo(this,function(a,b,c){f.removeNode(a)});if(f.hasNodes())for(b=0,c=a.length;b<c;b+=1){var h=a[b];if(null!=f.node(h.id)){var g=[];f.loopParents(this,h.id,function(a,b,c){g.push(a);e.push({from:a,to:h.id});return f.SKIP});var k=0;for(d=g.length;k<d;k+=1)f.removeRelation(g[k],h.id);var l=[];f.loopTopo(this,function(a,b,c){l.push(a)});k=0;for(d=l.length;k<d;k+=1)f.removeNode(l[k])}}return e}
var d=null,h=null,k=[];return{process:function(a){var g=f.getLogicalFamily(),m=f.getMaximumId(),q=c.getItems(),p=b.getOptions().loopsLayoutMode;m=e(p,q,g,m,a);d=m.logicalFamily;h=m.maximumId;k=m.loops;if(a&&!g.validate())throw"References are broken in family structure!";return!0},getLogicalFamily:function(){return d},getMaximumId:function(){return h},getLoops:function(){return k}}};a.famdiagram.UserDefinedNodesOrderTask=function(c){var b=null,f=null,e=new a.famdiagram.UserDefinedNodesOrder;return{process:function(){var a=
c.getOptions();a=e.getUserDefinedPositions(a.items);b=a.position;f=a.group;return!0},getPositions:function(){return b},getGroups:function(){return f}}};a.famdiagram.Control=function(c,b){return a.orgdiagram.BaseControl(c,b,a.famdiagram.TaskManagerFactory,a.famdiagram.EventArgsFactory,{AnnotationLabelTemplate:a.common.AnnotationLabelTemplate,ButtonsTemplate:a.common.ButtonsTemplate,CheckBoxTemplate:a.common.CheckBoxTemplate,CursorTemplate:a.common.CursorTemplate,DotHighlightTemplate:a.common.DotHighlightTemplate,
GroupTitleTemplate:a.common.GroupTitleTemplate,HighlightTemplate:a.common.HighlightTemplate,ItemTemplate:a.common.ItemTemplate,UserTemplate:a.common.UserTemplate,LabelAnnotationTemplate:a.common.LabelAnnotationTemplate})};a.famdiagram.EventArgsFactory=function(c,b,f,e){var g=new a.famdiagram.EventArgs,d=c.tasks.getTask("CombinedContextsTask"),h=c.tasks.getTask("AlignDiagramTask"),k=c.tasks.getTask("LogicalFamilyTask");b=d.getConfig(b);var l=d.getConfig(f),n=k.getLogicalFamily();b&&null!=b.id&&(g.oldContext=
b);l&&null!=l.id&&(g.context=l,n.loopParents(this,l.id,function(a,b,c){if(0<c)return n.BREAK;g.parentItems.push(d.getConfig(a))}),n.loopChildren(this,l.id,function(a,b,c){if(0<c)return n.BREAK;g.childrenItems.push(d.getConfig(a))}),k=a.common.getElementOffset(c.layout.mousePanel),c=a.common.getElementOffset(c.layout.element),f=h.getItemPosition(f),g.position=(new a.common.Rect(f.actualPosition)).translate(k.left,k.top).translate(-c.left,-c.top));null!=e&&(g.name=e);return g};a.famdiagram.getProcessDiagramConfig=
function(){var c=function(){};return a.famdiagram.TaskManagerFactory(c,c,c).getProcessDiagramConfig()};a.famdiagram.TaskManagerFactory=function(c,b,f,e,g){var d=new a.common.TaskManager;d.addDependency("options",c);d.addDependency("graphics",b);d.addDependency("getLayout",f);d.addDependency("setLayout",e);d.addDependency("templates",g);d.addDependency("defaultConfig",new a.famdiagram.Config);d.addDependency("defaultItemConfig",new a.famdiagram.ItemConfig);d.addDependency("defaultTemplateConfig",new a.famdiagram.TemplateConfig);
d.addDependency("defaultButtonConfig",new a.famdiagram.ButtonConfig);d.addDependency("defaultPaletteItemConfig",new a.famdiagram.PaletteItemConfig);d.addDependency("defaultBackgroundAnnotationConfig",new a.famdiagram.BackgroundAnnotationConfig);d.addDependency("defaultConnectorAnnotationConfig",new a.famdiagram.ConnectorAnnotationConfig);d.addDependency("defaultHighlightPathAnnotationConfig",new a.famdiagram.HighlightPathAnnotationConfig);d.addDependency("defaultShapeAnnotationConfig",new a.famdiagram.ShapeAnnotationConfig);
d.addDependency("defaultLabelAnnotationConfig",new a.famdiagram.LabelAnnotationConfig);d.addDependency("isFamilyChartMode",!0);d.addDependency("showElbowDots",!0);d.addDependency("null",null);d.addDependency("foreground",2);d.addDependency("background",1);d.addTask("OptionsTask",["options"],a.famdiagram.OptionsTask,"#000000");d.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.CalloutOptionTask,"#000080");d.addTask("ConnectorsOptionTask",["OptionsTask","defaultConfig"],
a.orgdiagram.ConnectorsOptionTask,"#000080");d.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],a.famdiagram.ItemsOptionTask,"#000080");d.addTask("ItemsContentOptionTask",["OptionsTask","defaultItemConfig"],a.orgdiagram.ItemsContentOptionTask,"#000080");d.addTask("RemoveLoopsOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.RemoveLoopsOptionTask,"#000080");d.addTask("SpousesOptionTask",["OptionsTask","defaultItemConfig"],a.famdiagram.SpousesOptionTask,"#000080");d.addTask("ItemsSizesOptionTask",
["OptionsTask","defaultConfig","defaultItemConfig","defaultButtonConfig"],a.orgdiagram.ItemsSizesOptionTask,"#000080");d.addTask("LabelsOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.LabelsOptionTask,"#000080");d.addTask("TemplatesOptionTask",["OptionsTask","defaultConfig","defaultButtonConfig","defaultTemplateConfig"],a.orgdiagram.TemplatesOptionTask,"#000080");d.addTask("OrientationOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.OrientationOptionTask,"#000080");
d.addTask("VisualTreeOptionTask",["OptionsTask"],a.famdiagram.VisualTreeOptionTask,"#000080");d.addTask("MinimizedItemsOptionTask",["OptionsTask"],a.orgdiagram.MinimizedItemsOptionTask,"#000080");d.addTask("HideGrandParentsConnectorsOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.HideGrandParentsConnectorsOptionTask,"#000080");d.addTask("NormalizeOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.NormalizeOptionTask,"#000080");d.addTask("OrderFamilyNodesOptionTask",["OptionsTask","defaultConfig",
"defaultItemConfig"],a.famdiagram.OrderFamilyNodesOptionTask,"#000080");d.addTask("LinePaletteOptionTask",["OptionsTask","defaultPaletteItemConfig"],a.famdiagram.LinePaletteOptionTask,"#000080");d.addTask("CursorItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorItemOptionTask,"#000080");d.addTask("HighlightItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.HighlightItemOptionTask,"#000080");d.addTask("SelectedItemsOptionTask",["OptionsTask"],a.orgdiagram.SelectedItemsOptionTask,
"#000080");d.addTask("CursorSelectionPathModeOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorSelectionPathModeOptionTask,"#000080");d.addTask("NeighboursSelectionModeOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.NeighboursSelectionModeOptionTask,"#000080");d.addTask("SplitAnnotationsOptionTask",["OptionsTask"],a.orgdiagram.SplitAnnotationsOptionTask,"#00ffff");d.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],
a.orgdiagram.ShapeAnnotationOptionTask,"#000080");d.addTask("BackgroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","background"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");d.addTask("ForegroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","foreground"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");d.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask",
"defaultHighlightPathAnnotationConfig","background"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");d.addTask("ForegroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");d.addTask("BackgroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");d.addTask("BackgroundAnnotationOptionTask",
["SplitAnnotationsOptionTask","defaultBackgroundAnnotationConfig"],a.orgdiagram.BackgroundAnnotationOptionTask,"#000080");d.addTask("ScaleOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ScaleOptionTask,"#000080");d.addTask("FrameOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.FrameOptionTask,"#000080");d.addTask("UserDefinedNodesOrderTask",["OrderFamilyNodesOptionTask","defaultItemConfig"],a.famdiagram.UserDefinedNodesOrderTask,"#ff0000");d.addTask("LogicalFamilyTask",["ItemsOptionTask"],
a.famdiagram.LogicalFamilyTask,"#00ffff");d.addTask("RemoveLoopsTask",["ItemsOptionTask","RemoveLoopsOptionTask","LogicalFamilyTask"],a.famdiagram.RemoveLoopsTask,"#ff0000");d.addTask("LabelAnnotationOptionTask",["SplitAnnotationsOptionTask","RemoveLoopsTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationOptionTask,"#000080");d.addTask("LabelAnnotationTemplateOptionTask",["LabelAnnotationOptionTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationTemplateOptionTask,"#000080");
d.addTask("LabelAnnotationPlacementOptionTask",["LabelAnnotationOptionTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationPlacementOptionTask,"#000080");d.addTask("CombinedContextsTask",["ItemsContentOptionTask","LabelAnnotationOptionTask"],a.orgdiagram.CombinedContextsTask,"#00ffff");d.addTask("AddLabelAnnotationsTask",["LabelAnnotationPlacementOptionTask","RemoveLoopsTask"],a.famdiagram.AddLabelAnnotationsTask,"#ff0000");d.addTask("AddSpousesTask",["SpousesOptionTask","AddLabelAnnotationsTask"],
a.famdiagram.AddSpousesTask,"#ff0000");d.addTask("HideGrandParentsConnectorsTask",["HideGrandParentsConnectorsOptionTask","AddSpousesTask"],a.famdiagram.HideGrandParentsConnectorsTask,"#ff0000");d.addTask("NormalizeLogicalFamilyTask",["NormalizeOptionTask","HideGrandParentsConnectorsTask"],a.famdiagram.NormalizeLogicalFamilyTask,"#ff0000");d.addTask("OrderFamilyNodesTask",["OrderFamilyNodesOptionTask","UserDefinedNodesOrderTask","NormalizeLogicalFamilyTask"],a.famdiagram.OrderFamilyNodesTask,"#ff0000");
d.addTask("ReadTemplatesTask",["TemplatesOptionTask","templates"],a.orgdiagram.ReadTemplatesTask,"#00ffff");d.addTask("ActiveItemsTask",["ItemsSizesOptionTask","ReadTemplatesTask"],a.orgdiagram.ActiveItemsTask,"#00ffff");d.addTask("ItemTemplateParamsTask",["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],a.orgdiagram.ItemTemplateParamsTask,"#00ffff");d.addTask("LabelAnnotationTemplateParamsTask",["ItemsSizesOptionTask","LabelAnnotationTemplateOptionTask","ReadTemplatesTask"],a.famdiagram.LabelAnnotationTemplateParamsTask,
"#00ffff");d.addTask("CombinedTemplateParamsTask",["ItemTemplateParamsTask","LabelAnnotationTemplateParamsTask"],a.famdiagram.CombinedTemplateParamsTask,"#00ffff");d.addTask("GroupTitleTemplateTask",["TemplatesOptionTask","templates"],a.orgdiagram.GroupTitleTemplateTask,"#00ffff");d.addTask("CheckBoxTemplateTask",["ItemsSizesOptionTask","templates"],a.orgdiagram.CheckBoxTemplateTask,"#00ffff");d.addTask("ButtonsTemplateTask",["ItemsSizesOptionTask","templates"],a.orgdiagram.ButtonsTemplateTask,"#00ffff");
d.addTask("AnnotationLabelTemplateTask",["ItemsOptionTask","templates"],a.orgdiagram.AnnotationLabelTemplateTask,"#00ffff");d.addTask("ConnectionsGraphTask","graphics CreateTransformTask ConnectorsOptionTask OrderFamilyNodesTask AlignDiagramTask RemoveLoopsTask".split(" "),a.orgdiagram.ConnectionsGraphTask,"#00ffff");d.addTask("HighlightItemTask",["HighlightItemOptionTask","ActiveItemsTask"],a.orgdiagram.HighlightItemTask,"#00ffff");d.addTask("CursorItemTask",["CursorItemOptionTask","ActiveItemsTask"],
a.orgdiagram.CursorItemTask,"#00ffff");d.addTask("CursorNeighboursTask",["CursorItemTask","NeighboursSelectionModeOptionTask","AddSpousesTask","ActiveItemsTask"],a.famdiagram.CursorNeighboursTask,"#00ffff");d.addTask("SelectedItemsTask",["SelectedItemsOptionTask","ItemsOptionTask"],a.orgdiagram.SelectedItemsTask,"#00ffff");d.addTask("SelectionPathItemsTask",["AddSpousesTask","CursorItemTask","SelectedItemsTask","CursorSelectionPathModeOptionTask"],a.famdiagram.SelectionPathItemsTask,"#00ffff");d.addTask("NormalVisibilityItemsByForegroundShapeAnnotationTask",
["ForegroundShapeAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");d.addTask("NormalVisibilityItemsByBackgroundShapeAnnotationTask",["BackgroundShapeAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");d.addTask("NormalVisibilityItemsByBackgroundAnnotationTask",["BackgroundAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");d.addTask("NormalVisibilityItemsByForegroundHighlightPathAnnotationTask",["ForegroundHighlightPathAnnotationOptionTask"],
a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");d.addTask("NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask",["BackgroundHighlightPathAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");d.addTask("NormalVisibilityItemsByForegroundConnectorAnnotationTask",["ForegroundConnectorAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,"#00ffff");d.addTask("NormalVisibilityItemsByBackgroundConnectorAnnotationTask",["BackgroundConnectorAnnotationOptionTask"],
a.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,"#00ffff");d.addTask("CombinedNormalVisibilityItemsTask","ItemsSizesOptionTask CursorItemTask CursorNeighboursTask SelectedItemsTask SelectionPathItemsTask NormalVisibilityItemsByForegroundShapeAnnotationTask NormalVisibilityItemsByBackgroundShapeAnnotationTask NormalVisibilityItemsByBackgroundAnnotationTask NormalVisibilityItemsByForegroundHighlightPathAnnotationTask NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask NormalVisibilityItemsByForegroundConnectorAnnotationTask NormalVisibilityItemsByBackgroundConnectorAnnotationTask".split(" "),
a.orgdiagram.CombinedNormalVisibilityItemsTask,"#00ffff");d.addTask("FrameSizeTask",["FrameOptionTask","ReadTemplatesTask","ScaleOptionTask"],a.orgdiagram.FrameSizeTask,"#000080");d.addTask("LayoutOptionsTask",["getLayout","OptionsTask"],a.orgdiagram.LayoutOptionsTask,"#000000");d.addTask("CurrentControlSizeTask",["LayoutOptionsTask","ItemsSizesOptionTask","FrameSizeTask"],a.orgdiagram.CurrentControlSizeTask,"#000000");d.addTask("CurrentScrollPositionTask",["LayoutOptionsTask"],a.orgdiagram.CurrentScrollPositionTask,
"#000000");d.addTask("ItemsPositionsTask","CurrentControlSizeTask ScaleOptionTask OrientationOptionTask ItemsSizesOptionTask ConnectorsOptionTask OrderFamilyNodesOptionTask OrderFamilyNodesTask CombinedTemplateParamsTask CursorItemTask CombinedNormalVisibilityItemsTask".split(" "),a.famdiagram.ItemsPositionsTask,"#ff0000");d.addTask("AlignDiagramTask","OrientationOptionTask ItemsSizesOptionTask VisualTreeOptionTask ScaleOptionTask CurrentControlSizeTask ActiveItemsTask ItemsPositionsTask isFamilyChartMode".split(" "),
a.orgdiagram.AlignDiagramTask,"#ff0000");d.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],a.orgdiagram.CreateTransformTask,"#00ffff");d.addTask("PaletteManagerTask",["ConnectorsOptionTask","LinePaletteOptionTask"],a.orgdiagram.PaletteManagerTask,"#00ffff");d.addTask("ApplyLayoutChangesTask","graphics setLayout ItemsSizesOptionTask CurrentControlSizeTask ScaleOptionTask AlignDiagramTask FrameSizeTask".split(" "),a.orgdiagram.ApplyLayoutChangesTask,"#00ffff");d.addTask("CenterOnCursorTask",
"LayoutOptionsTask ApplyLayoutChangesTask CurrentScrollPositionTask CursorItemTask AlignDiagramTask CreateTransformTask ScaleOptionTask".split(" "),a.orgdiagram.CenterOnCursorTask,"#00ffff");d.addTask("ProjectItemsToFrameTask","CreateTransformTask FrameSizeTask ApplyLayoutChangesTask ScaleOptionTask AlignDiagramTask CenterOnCursorTask ItemTemplateParamsTask SelectedItemsTask".split(" "),a.orgdiagram.ProjectItemsToFrameTask,"#00ffff");d.addTask("DrawBackgroundHighlightPathAnnotationTask",["graphics",
"ConnectorsOptionTask","ForegroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","foreground"],a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");d.addTask("DrawForegroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","BackgroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","background"],a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");d.addTask("DrawBackgroundAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask BackgroundAnnotationOptionTask LogicalFamilyTask AlignDiagramTask".split(" "),
a.orgdiagram.DrawBackgroundAnnotationTask,"#008000");d.addTask("DrawForegroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground".split(" "),a.orgdiagram.DrawConnectorAnnotationTask,"#008000");d.addTask("DrawBackgroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background".split(" "),
a.orgdiagram.DrawConnectorAnnotationTask,"#008000");d.addTask("DrawForegroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground".split(" "),a.orgdiagram.DrawShapeAnnotationTask,"#008000");d.addTask("DrawBackgroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background".split(" "),
a.orgdiagram.DrawShapeAnnotationTask,"#008000");d.addTask("DrawCursorTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask CombinedTemplateParamsTask CursorItemTask SelectedItemsTask".split(" "),a.orgdiagram.DrawCursorTask,"#008000");d.addTask("DrawHighlightTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask CombinedTemplateParamsTask HighlightItemTask CursorItemTask SelectedItemsTask".split(" "),a.orgdiagram.DrawHighlightTask,
"#008000");d.addTask("DrawHighlightAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask ScaleOptionTask CombinedContextsTask CalloutOptionTask ReadTemplatesTask AlignDiagramTask CenterOnCursorTask HighlightItemTask CursorItemTask SelectedItemsTask FrameSizeTask".split(" "),a.orgdiagram.DrawHighlightAnnotationTask,"#008000");d.addTask("DrawTreeItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask ScaleOptionTask ItemsSizesOptionTask CombinedContextsTask AlignDiagramTask CenterOnCursorTask CombinedTemplateParamsTask CursorItemTask SelectedItemsTask GroupTitleTemplateTask CheckBoxTemplateTask ButtonsTemplateTask".split(" "),
a.orgdiagram.DrawTreeItemsTask,"#008000");d.addTask("DrawMinimizedItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask MinimizedItemsOptionTask CombinedTemplateParamsTask AlignDiagramTask".split(" "),a.orgdiagram.DrawMinimizedItemsTask,"#008000");d.addTask("DrawConnectorsTask",["graphics","ConnectionsGraphTask","ConnectorsOptionTask","showElbowDots","PaletteManagerTask"],a.orgdiagram.DrawConnectorsTask,"#008000");d.addTask("DrawItemLabelsTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask",
"LabelsOptionTask","AlignDiagramTask"],a.orgdiagram.DrawItemLabelsTask,"#008000");d.addTask("DrawFrameItemsTask",["graphics","ApplyLayoutChangesTask","ProjectItemsToFrameTask","ItemTemplateParamsTask","MinimizedItemsOptionTask"],a.orgdiagram.DrawFrameItemsTask,"#008000");d.addTask("DrawFrameHighlightTask","graphics ProjectItemsToFrameTask CombinedContextsTask ItemTemplateParamsTask HighlightItemTask CursorItemTask".split(" "),a.orgdiagram.DrawFrameHighlightTask,"#008000");return d};a.orgdiagram.TemplateConfig=
function(){this.name=null;this.isActive=!0;this.itemSize=new a.common.Size(120,100);this.itemBorderWidth=1;this.minimizedItemShapeType=this.itemTemplate=null;this.minimizedItemSize=new a.common.Size(4,4);this.minimizedItemCornerRadius=null;this.minimizedItemLineWidth=1;this.minimizedItemBorderColor=null;this.minimizedItemLineType=0;this.minimizedItemFillColor=null;this.minimizedItemOpacity=1;this.highlightPadding=new a.common.Thickness(2,2,2,2);this.highlightBorderWidth=1;this.highlightTemplate=null;
this.cursorPadding=new a.common.Thickness(3,3,3,3);this.cursorBorderWidth=2;this.onButtonsRender=this.buttons=this.cursorTemplate=null};a.orgdiagram.BackgroundAnnotationConfig=function(c){var b;this.annotationType=4;this.items=[];this.includeChildren=!1;this.zOrderType=0;this.offset=new a.common.Thickness(18,18,18,18);this.lineWidth=2;this.opacity=1;this.fillColor=this.borderColor=null;this.lineType=0;this.selectItems=!1;switch(arguments.length){case 1:if(null!==c)if(c instanceof Array)this.items=
c;else if("object"==typeof c)for(b in c)c.hasOwnProperty(b)&&(this[b]=c[b])}};a.orgdiagram.ButtonConfig=function(c,b,f){this.name=c;this.icon=b;this.text=!1;this.label=null;this.tooltip=f;this.size=new a.common.Size(16,16)};a.orgdiagram.Config=function(c){this.name=void 0!==c?c:"OrgDiagram";this.classPrefix="orgdiagram";this.graphicsType=this.navigationMode=0;this.pageFitMode=3;this.minimalVisibility=2;this.horizontalAlignment=this.orientationType=0;this.verticalAlignment=1;this.arrowsDirection=0;
this.showExtraArrows=!1;this.extraArrowsMinimumSpace=30;this.connectorType=0;this.bevelSize=4;this.elbowType=0;this.elbowDotSize=4;this.emptyDiagramMessage="Diagram is empty.";this.items=[];this.annotations=[];this.highlightItem=this.cursorItem=null;this.highlightGravityRadius=40;this.selectedItems=[];this.hasSelectorCheckbox=0;this.selectCheckBoxLabel="Selected";this.selectionPathMode=1;this.showFrame=!1;this.frameInnerPadding=new a.common.Thickness(2,2,2,2);this.frameOuterPadding=new a.common.Thickness(2,
2,2,2);this.templates=[];this.defaultTemplateName=null;this.hasButtons=0;this.buttons=[];this.onCursorRender=this.onHighlightRender=this.onItemRender=this.onMouseDblClick=this.onMouseClick=this.onButtonClick=this.onSelectionChanged=this.onSelectionChanging=this.onCursorChanged=this.onCursorChanging=this.onHighlightChanged=this.onHighlightChanging=this.onButtonsRender=null;this.dotLevelShift=this.normalLevelShift=20;this.normalItemsInterval=this.lineLevelShift=10;this.dotItemsInterval=1;this.lineItemsInterval=
2;this.cousinsIntervalMultiplier=5;this.itemTitleFirstFontColor="#ffffff";this.itemTitleSecondFontColor="#000080";this.minimizedItemShapeType=6;this.linesColor="#c0c0c0";this.linesWidth=1;this.linesType=0;this.highlightLinesColor="#ff0000";this.highlightLinesWidth=1;this.highlightLinesType=0;this.showCallout=!0;this.calloutMaximumVisibility=2;this.calloutPlacementOffset=100;this.defaultCalloutTemplateName=null;this.calloutfillColor="#000000";this.calloutBorderColor=null;this.calloutCornerRadius=this.calloutOffset=
4;this.calloutPointerWidth="10%";this.calloutLineWidth=1;this.calloutOpacity=.2;this.leavesPlacementType=this.childrenPlacementType=2;this.placeAdvisersAboveChildren=this.placeAssistantsAboveChildren=!0;this.maximumColumnsInMatrix=6;this.buttonsPanelSize=28;this.checkBoxPanelSize=this.groupTitlePanelSize=24;this.groupTitleOrientation=this.groupTitlePlacementType=2;this.groupTitleVerticalAlignment=1;this.groupTitleHorizontalAlignment=0;this.groupTitleFontSize="12px";this.groupTitleFontFamily="Arial";
this.groupTitleColor="#4169e1";this.groupTitleFontStyle=this.groupTitleFontWeight="normal";this.distance=3;this.scale=1;this.minimumScale=.5;this.maximumScale=2;this.showLabels=0;this.labelSize=new a.common.Size(80,24);this.labelOffset=1;this.labelOrientation=0;this.labelPlacement=1;this.labelFontSize="10px";this.labelFontFamily="Arial";this.labelColor="#000000";this.labelFontStyle=this.labelFontWeight="normal";this.enablePanning=!0;this.autoSizeMinimum=new a.common.Size(800,600);this.autoSizeMaximum=
new a.common.Size(1024,768)};a.orgdiagram.ConnectorAnnotationConfig=function(c,b){var f;this.annotationType=0;this.zOrderType=2;this.toItem=this.fromItem=null;this.connectorPlacementType=this.connectorShapeType=0;this.labelPlacementType=1;this.offset=new a.common.Thickness(0,0,0,0);this.lineWidth=2;this.color="#000000";this.lineType=0;this.selectItems=!0;this.label=null;this.labelSize=new a.common.Size(60,30);switch(arguments.length){case 1:for(f in c)c.hasOwnProperty(f)&&(this[f]=c[f]);break;case 2:this.fromItem=
c,this.toItem=b}};a.orgdiagram.HighlightPathAnnotationConfig=function(a){var b;this.zOrderType=this.annotationType=2;this.items=[];this.lineWidth=2;this.color="#ff0000";this.lineType=0;this.opacity=1;this.showArrows=!0;this.selectItems=!1;switch(arguments.length){case 1:if(null!==a)if(a instanceof Array)this.items=a;else if("object"==typeof a)for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}};a.orgdiagram.ItemConfig=function(a,b,f,e,g){var c;this.context=this.image=this.description=this.title=this.parent=
this.id=null;this.itemTitleColor="#4169e1";this.groupTitle=this.minimizedItemShapeType=null;this.groupTitleColor="#4169e1";this.isActive=this.isVisible=!0;this.itemType=this.hasButtons=this.hasSelectorCheckbox=0;this.levelOffset=null;this.placeAdvisersAboveChildren=this.placeAssistantsAboveChildren=this.childrenPlacementType=this.adviserPlacementType=0;this.templateName=null;this.showCallout=0;this.label=this.calloutTemplateName=null;this.showLabel=0;this.labelSize=null;this.labelOrientation=3;this.labelPlacement=
0;switch(arguments.length){case 1:for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);break;case 5:this.id=a,this.parent=b,this.title=f,this.description=e,this.image=g}};a.orgdiagram.ShapeAnnotationConfig=function(c){var b;this.annotationType=1;this.zOrderType=0;this.items=[];this.shapeType=0;this.offset=new a.common.Thickness(0,0,0,0);this.lineWidth=2;this.cornerRadius="10%";this.opacity=1;this.fillColor=this.borderColor=null;this.lineType=0;this.selectItems=!1;this.label=null;this.labelSize=new a.common.Size(60,
30);this.labelPlacement=0;this.labelOffset=4;switch(arguments.length){case 1:if(null!==c)if(c instanceof Array)this.items=c;else if("object"==typeof c)for(b in c)c.hasOwnProperty(b)&&(this[b]=c[b])}};a.orgdiagram.EventArgs=function(){this.name=this.position=this.parentItem=this.context=this.oldContext=null;this.cancel=!1};a.common.BaseConnectorBundle=function(){this.NORMAL_ITEM_WEIGHT=10010;this.LINE_ITEM_WEIGHT=1E4};a.common.BaseConnectorBundle.prototype.trace=function(a,b,f){};a.common.BaseConnectorBundle.prototype.getId=
function(a){var b="_"+a.nodeid;a.nodeid+=1;return b};a.common.BaseConnectorBundle.prototype.ConnectorEdge=function(a,b,f,e,g,d,h,k,l,n,m){this.polyline=f;this.from=a;this.to=b;this.weight=h||0;this.fromOffset=k||0;this.hasArrow=m||!1;this.parentsArrowId=e;this.childrenArrowId=g;this.dotId=d;this.hasMiddle=l;this.middleParent=n;this.isOppositeFlow=!1};a.common.BaseConnectorBundle.prototype.ConnectorDestination=function(a){this.bundleid=this.y=this.x=this.id=null;this.hasElbow=!1;this.visibility=this.elbowPoint2=
this.elbowPoint1=null;this.isSquared=!0;for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])};a.common.BaseConnectorBundle.prototype.traceFork=function(c,b,f,e,g,d,h,k,l){var n,m,q=[];if(d){q=[];d=0;for(m=g.length;d<m;d+=1){var p=g[d];if(p.x<e.x&&!p.isSquared)q.push(p);else break}m=q.length;0<m&&(p=q[m-1],p=p.x==e.x?e:new this.ConnectorDestination({id:p.bundleid,x:p.x,y:e.y}),this.traceAngularSegments(c,b,f,p,q,!1));q=[];for(n=g.length-1;n>=d;--n)if(p=g[n],p.x>e.x&&!p.isSquared)q.push(p);else break;
m=q.length;0<m&&(p=q[m-1],p=p.x==e.x?e:new this.ConnectorDestination({id:p.bundleid,x:p.x,y:e.y}),this.traceAngularSegments(c,b,f,p,q,!1));for(q=d;q<=n;q+=1){p=g[q];m=f.bevelSize;2>m&&(m=0);if(b.hasGraphics)switch(f.elbowType){case 2:case 3:0<m&&Math.abs(e.x-p.x)>m&&Math.abs(e.y-p.y)>m&&(p.hasElbow=!0,p.elbowPoint1=new a.common.Point(p.x,e.y+(e.y>p.y?-m:m)),p.elbowPoint2=new a.common.Point(p.x+(e.x>p.x?m:-m),e.y))}var r=new a.common.Polyline;p.hasElbow?(b.transform.transform3Points(p.elbowPoint2.x,
p.elbowPoint2.y,p.elbowPoint1.x,p.elbowPoint2.y,p.elbowPoint1.x,p.elbowPoint1.y,!0,this,function(b,c,d,e,h,g){switch(f.elbowType){case 2:r.addSegment(new a.common.MoveSegment(b,c));r.addSegment(new a.common.LineSegment(h,g));break;case 3:r.addSegment(new a.common.MoveSegment(b,c)),r.addSegment(new a.common.CubicArcSegment(b,c,d,e,h,g))}}),b.transform.transformPoints(p.elbowPoint1.x,p.elbowPoint1.y,p.x,p.y,!0,this,function(b,c,d,e){r.addSegment(new a.common.LineSegment(d,e))})):b.transform.transformPoints(p.x,
e.y,p.x,p.y,!0,this,function(b,c,d,e){r.addSegment(new a.common.MoveSegment(b,c));r.addSegment(new a.common.LineSegment(d,e))});m=p.x==e.x?e.id:p.bundleid;var t=4!==p.visibility;c.graph.addEdge(m,p.id,new this.ConnectorEdge(m,p.id,r,h?p.id:null,h?null:p.id,null,t?this.NORMAL_ITEM_WEIGHT:this.LINE_ITEM_WEIGHT,k,null,null,t))}d=Math.max(d-1,0);n=Math.min(n+1,g.length-1);p=e;m=e.id;for(q=d;q<=n;q+=1){t=g[q];var u=t.bundleid;t.x>p.x&&(r=new a.common.Polyline,b.transform.transformPoints(p.x,e.y,null!=
t.elbowPoint2?t.elbowPoint2.x:t.x,e.y,!0,this,function(b,c,d,e){r.addSegment(new a.common.MoveSegment(b,c));r.addSegment(new a.common.LineSegment(d,e))}),c.graph.addEdge(m,u,new this.ConnectorEdge(m,u,r,null,null,m,Math.abs(t.x-p.x)/1E4,k,l,h?u:m)),p=t.elbowPoint2||t,m=u)}p=e;m=e.id;for(q=n;q>=d;--q)t=g[q],u=t.bundleid,t.x<p.x&&(r=new a.common.Polyline,b.transform.transformPoints(p.x,e.y,null!=t.elbowPoint2?t.elbowPoint2.x:t.x,e.y,!0,this,function(b,c,d,e){r.addSegment(new a.common.MoveSegment(b,
c));r.addSegment(new a.common.LineSegment(d,e))}),c.graph.addEdge(m,u,new this.ConnectorEdge(m,u,r,null,null,m,Math.abs(t.x-p.x)/1E4,k,l,h?u:m)),p=t.elbowPoint2||t,m=u)}else this.traceAngularSegments(c,b,f,e,g,!0)};a.common.BaseConnectorBundle.prototype.traceAngularSegments=function(c,b,f,e,g,d){var h;var k=0;for(h=g.length;k<h;k+=1){var l=g[k];var n=new a.common.Polyline;b.transform.transformPoint(e.x,e.y,!0,this,function(b,c){n.addSegment(new a.common.MoveSegment(b,c))});switch(f.connectorType){case 1:b.transform.transformPoint(l.x,
l.y,!0,this,function(b,c){n.addSegment(new a.common.LineSegment(b,c))});break;case 2:var m=new a.common.Rect(e,l);d?e.x>m.x?b.transform.transform3Points(m.right(),m.verticalCenter(),m.x,m.verticalCenter(),m.x,m.bottom(),!0,this,function(b,c,d,e,f,h){n.addSegment(new a.common.CubicArcSegment(b,c,d,e,f,h))}):b.transform.transform3Points(m.x,m.verticalCenter(),m.right(),m.verticalCenter(),m.right(),m.bottom(),!0,this,function(b,c,d,e,f,h){n.addSegment(new a.common.CubicArcSegment(b,c,d,e,f,h))}):e.x>
m.x?b.transform.transformPoints(m.x,m.y,m.x,m.bottom(),!0,this,function(b,c,d,e){n.addSegment(new a.common.QuadraticArcSegment(b,c,d,e))}):b.transform.transformPoints(m.right(),m.y,m.right(),m.bottom(),!0,this,function(b,c,d,e){n.addSegment(new a.common.QuadraticArcSegment(b,c,d,e))})}m=4!==l.visibility;c.graph.addEdge(e.id,l.id,new this.ConnectorEdge(e.id,l.id,n,null,m?l.id:null,m?this.NORMAL_ITEM_WEIGHT:this.LINE_ITEM_WEIGHT,null,null,null,!0))}};a.common.HorizontalConnectorBundle=function(a,b){this.fromItem=
a;this.toItem=b};a.common.HorizontalConnectorBundle.prototype=new a.common.BaseConnectorBundle;a.common.HorizontalConnectorBundle.prototype.trace=function(c,b,f){f=this.fromItem;var e=this.toItem,g=b.treeItemsPositions[f],d=b.treeItemsPositions[e],h=new a.common.Polyline;g.actualPosition.x<d.actualPosition.x?b.transform.transformPoints(g.actualPosition.right(),g.horizontalConnectorsShift,d.actualPosition.x,d.horizontalConnectorsShift,!0,this,function(b,c,d,e){h.addSegment(new a.common.MoveSegment(b,
c));h.addSegment(new a.common.LineSegment(d,e))}):b.transform.transformPoints(g.actualPosition.x,g.horizontalConnectorsShift,d.actualPosition.right(),g.horizontalConnectorsShift,!0,this,function(b,c,d,e){h.addSegment(new a.common.MoveSegment(b,c));h.addSegment(new a.common.LineSegment(d,e))});b=4!==d.actualVisibility;g=4!==g.actualVisibility;c.graph.addEdge(f,e,new this.ConnectorEdge(f,e,h,b?e:null,g?f:null,b||g?this.NORMAL_ITEM_WEIGHT:this.LINE_ITEM_WEIGHT),null,null,null,!0)};a.common.MatrixConnectorBundle=
function(a,b,f,e,g){this.isChildren=a;this.items=b;this.len=b.length;this.matrixNodeId=f;this.connectionId=e;this.matrixWidth=g;this.blocksCount=Math.ceil(this.matrixWidth/2);this.rowsCount=Math.ceil(this.len/this.matrixWidth)};a.common.MatrixConnectorBundle.prototype=new a.common.BaseConnectorBundle;a.common.MatrixConnectorBundle.prototype.trace=function(a,b,f){this.isChildren?this.traceChildrenLayout(a,b,f):this.traceParentsLayout(a,b,f)};a.common.MatrixConnectorBundle.prototype.traceChildrenLayout=
function(c,b,f){for(var e,g=[],d=0;d<this.blocksCount;d+=1){for(var h=null,k=this.rowsCount-1;0<=k;--k){var l=this.getNodeIndex(d,k,!0,!0),n=null;e=null;l<this.len&&(n=this.items[l],e=b.treeItemsPositions[n]);var m=this.getNodeIndex(d,k,!1,!0),q=null;l=null;m<this.len&&(q=this.items[m],l=b.treeItemsPositions[q]);var p=null;null==p&&null!=e&&(p=new this.ConnectorDestination({id:this.getId(c),x:e.actualPosition.horizontalCenter()+e.rightMedianOffset,y:e.horizontalConnectorsShift}));null==p&&null!=l&&
(p=new this.ConnectorDestination({id:this.getId(c),x:l.actualPosition.horizontalCenter()-l.leftMedianOffset,y:l.horizontalConnectorsShift}));null!=e&&(e=e.actualPosition,b.transform.transformPoints(e.right(),e.verticalCenter(),p.x,p.y,!0,this,function(b,d,e,f){var h=new a.common.Polyline;h.addSegment(new a.common.MoveSegment(b,d));h.addSegment(new a.common.LineSegment(e,f));c.graph.addEdge(n,p.id,new this.ConnectorEdge(n,p.id,h,null,n,null,10,null,null,null,!0))}));null!=l&&(e=l.actualPosition,b.transform.transformPoints(e.left(),
e.verticalCenter(),p.x,p.y,!0,this,function(b,d,e,f){var h=new a.common.Polyline;h.addSegment(new a.common.MoveSegment(b,d));h.addSegment(new a.common.LineSegment(e,f));c.graph.addEdge(q,p.id,new this.ConnectorEdge(q,p.id,h,null,q,null,10,null,null,null,!0))}));null!=h&&null!=p&&b.transform.transformPoints(h.x,h.y,p.x,p.y,!0,this,function(b,d,e,f){var g=new a.common.Polyline;g.addSegment(new a.common.MoveSegment(b,d));g.addSegment(new a.common.LineSegment(e,f));c.graph.addEdge(h.id,p.id,new this.ConnectorEdge(h.id,
p.id,g,null,null,null,0))});null!=p&&(h=p)}null!=h&&g.push(new this.ConnectorDestination({id:h.id,bundleid:this.getId(c),x:h.x,y:h.y,isSquared:!0,visibility:4}))}e=b.treeItemsPositions[this.matrixNodeId].actualPosition;d=new this.ConnectorDestination({id:this.matrixNodeId,x:e.horizontalCenter(),y:e.top()});this.traceFork(c,b,f,d,g,!0,!1,0,f.showExtraArrows)};a.common.MatrixConnectorBundle.prototype.traceParentsLayout=function(c,b,f){for(var e,g=[],d=0;d<=this.blocksCount;d+=1){for(var h=null,k=0;k<
this.rowsCount;k+=1){var l=this.getNodeIndex(d,k,!0,!1),n=null;e=null;l<this.len&&(n=this.items[l],e=b.treeItemsPositions[n]);var m=this.getNodeIndex(d,k,!1,!1),q=null;l=null;m<this.len&&(q=this.items[m],l=b.treeItemsPositions[q]);var p=null;null==p&&null!=e&&(p=new this.ConnectorDestination({id:this.getId(c),x:e.actualPosition.horizontalCenter()+e.rightMedianOffset,y:e.horizontalConnectorsShift}));null==p&&null!=l&&(p=new this.ConnectorDestination({id:this.getId(c),x:l.actualPosition.horizontalCenter()-
l.leftMedianOffset,y:l.horizontalConnectorsShift}));null!=e&&(e=e.actualPosition,b.transform.transformPoints(e.right(),e.verticalCenter(),p.x,p.y,!0,this,function(b,d,e,f){var h=new a.common.Polyline;h.addSegment(new a.common.MoveSegment(b,d));h.addSegment(new a.common.LineSegment(e,f));c.graph.addEdge(n,p.id,new this.ConnectorEdge(n,p.id,h,n,null,null,10,null,null,null,!0))}));null!=l&&(e=l.actualPosition,b.transform.transformPoints(e.left(),e.verticalCenter(),p.x,p.y,!0,this,function(b,d,e,f){var h=
new a.common.Polyline;h.addSegment(new a.common.MoveSegment(b,d));h.addSegment(new a.common.LineSegment(e,f));c.graph.addEdge(q,p.id,new this.ConnectorEdge(q,p.id,h,q,null,null,10,null,null,null,!0))}));null!=h&&null!=p&&b.transform.transformPoints(h.x,h.y,p.x,p.y,!0,this,function(b,d,e,f){var g=new a.common.Polyline;g.addSegment(new a.common.MoveSegment(b,d));g.addSegment(new a.common.LineSegment(e,f));c.graph.addEdge(h.id,p.id,new this.ConnectorEdge(h.id,p.id,g,null,null,null,0,null,null,null,!0))});
null!=p&&(h=p)}null!=h&&g.push(new this.ConnectorDestination({id:h.id,bundleid:this.getId(c),x:h.x,y:h.y,isSquared:!0,visibility:4}))}e=b.treeItemsPositions[this.matrixNodeId].actualPosition;d=new this.ConnectorDestination({id:this.connectionId,x:e.horizontalCenter(),y:e.bottom()});this.traceFork(c,b,f,d,g,!0,!0,0,f.showExtraArrows)};a.common.MatrixConnectorBundle.prototype.getNodeIndex=function(a,b,f,e){var c=null;e?(a=2*a+(f?0:1),this.matrixWidth>a&&(c=b*this.matrixWidth+a)):(a=2*a+(f?-1:0),0<=
a&&a<this.matrixWidth&&(c=b*this.matrixWidth+a));return c};a.common.VerticalConnectorBundle=function(a,b,f){this.fromItems=a;this.toItems=b;this.dotId=f||null;this.fromStackSize=this.fromOffset=0};a.common.VerticalConnectorBundle.prototype=new a.common.BaseConnectorBundle;a.common.VerticalConnectorBundle.prototype.trace=function(c,b,f){var e,g=0===f.connectorType;var d=[];if(0<this.fromItems.length){var h=this.fromItems;var k=0;for(e=h.length;k<e;k+=1){var l=h[k];var n=b.treeItemsPositions[l];l=new this.ConnectorDestination({id:b.nestedLayoutBottomConnectorIds.hasOwnProperty(l)?
b.nestedLayoutBottomConnectorIds[l]:l,bundleid:this.getId(c),x:n.actualPosition.horizontalCenter(),y:n.actualPosition.bottom(),isSquared:!0,visibility:n.actualVisibility});d.push(l)}d.sort(function(a,b){return a.x-b.x});var m=n.bottomConnectorShift-n.bottomConnectorInterval*(this.fromStackSize-this.fromOffset+1)}e=[];if(0<this.toItems.length){var q=!1;h=this.toItems;for(k=0;k<h.length;k+=1){l=h[k];n=b.treeItemsPositions[l];var p=!0;if(b.hasGraphics)switch(n.actualVisibility){case 2:case 3:p=g}l=new this.ConnectorDestination({id:l,
bundleid:this.getId(c),x:n.actualPosition.horizontalCenter()+0,y:n.actualPosition.top(),isSquared:p,visibility:n.actualVisibility});e.push(l);q=q||l.isSquared}e.sort(function(a,b){return a.x-b.x});p=n.topConnectorShift}h=1==e.length?e[0].x:1==d.length?d[0].x:0<e.length&&0<d.length?(d[0].x+d[d.length-1].x+e[0].x+e[e.length-1].x)/4:0<e.length?(e[0].x+e[e.length-1].x)/2:(d[0].x+d[d.length-1].x)/2;var r=null;0<d.length&&(r=new this.ConnectorDestination({id:0==e.length?this.dotId:this.getId(c),x:h,y:m}),
this.traceFork(c,b,f,r,d,!0,!0,this.fromOffset,f.showExtraArrows));var t=null;0<e.length&&(t=new this.ConnectorDestination({id:0==d.length?this.dotId:this.getId(c),x:h,y:p}),null!=r&&t.y==r.y&&(t=r),this.traceFork(c,b,f,t,e,q,!1,0,f.showExtraArrows));null!=r&&null!=t&&r.id!=t.id&&b.transform.transformPoints(r.x,r.y,t.x,t.y,!0,this,function(b,d,e,f){var h=new a.common.Polyline;h.addSegment(new a.common.MoveSegment(b,d));h.addSegment(new a.common.LineSegment(e,f));c.graph.addEdge(r.id,t.id,new this.ConnectorEdge(r.id,
t.id,h,null,null,null,0))})};a.orgdiagram.LevelVisibility=function(a,b){this.level=a;this.currentvisibility=b};a.orgdiagram.OrgItem=function(a){var b;this.id=null;this.isActive=this.isVisible=!0;this.hasVisibleChildren=!1;this.placeAssistantsAboveChildren=this.placeAdvisersAboveChildren=this.childrenPlacementType=this.adviserPlacementType=this.itemType=0;this.level=this.levelOffset=null;this.hideChildrenConnection=this.hideParentConnection=!1;this.childIndex=null;var c="id parent isVisible isActive itemType adviserPlacementType childrenPlacementType placeAdvisersAboveChildren placeAssistantsAboveChildren levelOffset".split(" ");
var e=0;for(b=c.length;e<b;e+=1){var g=c[e];a.hasOwnProperty(g)&&(this[g]=a[g])}};a.orgdiagram.Template=function(a,b,f,e,g){this.templateConfig=a;this.itemTemplate=b;this.highlightTemplate=f;this.dotHighlightTemplate=e;this.cursorTemplate=g};a.orgdiagram.TemplateParams=function(){this.template=null;this.hasGroupTitle=this.hasButtons=this.hasSelectorCheckbox=this.isActive=!1;this.buttons=[];this.onButtonsRender=null};a.orgdiagram.TreeItem=function(){this.visualAggregatorId=this.id=null;this.visualDepth=
1;this.partners=[];this.visibility=1;this.actualItemType=null;this.relationDegree=this.gravity=this.connectorPlacement=0};a.orgdiagram.TreeItemPosition=function(c){this.partnerConnectorOffset=0;this.levelPosition=this.level=null;this.rightPadding=this.leftPadding=this.offset=0;this.actualVisibility=1;this.topConnectorShift=this.horizontalConnectorsShift=this.contentPosition=this.actualPosition=this.actualSize=null;this.topConnectorInterval=0;this.bottomConnectorShift=null;this.bottomConnectorInterval=
0;this.rightMedianOffset=this.leftMedianOffset=null;if(null!=c)for(var b in c)if(c.hasOwnProperty(b))switch(b){case "actualPosition":this.actualPosition=new a.common.Rect(c.actualPosition);break;default:this[b]=c[b]}};a.orgdiagram.TreeLevelConnectorStackSize=function(){this.parentsStackSize=0};a.orgdiagram.TreeLevelPosition=function(a){this.actualVisibility=this.currentvisibility=1;this.currentOffset=this.levelSpace=this.connectorShift=this.topConnectorShift=this.horizontalConnectorsDepth=this.nextLevelShift=
this.depth=this.shift=0;this.labels=[];this.labelsRect=null;this.showLabels=!0;this.hasFixedLabels=!1;if(null!=a)for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])};a.orgdiagram.TreeLevelPosition.prototype.setShift=function(a,b,f,e,g){this.shift=a;this.levelSpace=b;this.topConnectorShift=-b/2-f;this.connectorShift=this.depth+e+b/2*(g+1);return this.nextLevelShift=f+this.depth+e+b+g*b/2};a.orgdiagram.TreeLevelPosition.prototype.shiftDown=function(a){this.shift+=a};a.orgdiagram.TreeLevelPosition.prototype.toString=
function(){return this.currentvisibility};a.orgdiagram.AlignDiagramTask=function(c,b,f,e,g,d,h,k){function l(){var a=[],b={},c;for(c in m.treeItemsPositions)if(m.treeItemsPositions.hasOwnProperty(c)){var d=m.treeItemsPositions[c];switch(d.actualVisibility){case 1:case 2:case 3:d=d.actualPosition,d=Math.max(d.width,d.height),b.hasOwnProperty(d)||(b[d]=!0,a.push(d))}}return a}function n(){if(null==v){v=a.common.SpatialIndex(l());for(var b in m.treeItemsPositions)if(m.treeItemsPositions.hasOwnProperty(b)){var c=
m.treeItemsPositions[b];if(q.hasOwnProperty(b))switch(c.actualVisibility){case 1:case 2:case 3:c=new a.common.Rect(c.actualPosition),c.context=b,v.addRect(c)}}}return v}var m={treeItemsPositions:{},panelSize:null},q,p,r,t,u,w,v,x;return{process:function(){var l=new a.common.Size(h.getContentSize()),n=new a.common.Size(g.getOptimalPanelSize());x=v=null;q=null!=d?d.getActiveItems():{};p=h.getItemsPositions();r=b.getOptions();t=c.getOptions();u=f.getOptions();w=e.getOptions();switch(t.orientationType){case 2:case 3:n.invert()}n.scale(1/
w.scale);m.panelSize=n;m.treeItemsPositions=p;switch(r.pageFitMode){case 5:m.panelSize=new a.common.Size(l);break;default:m.panelSize=new a.common.Size(l);if(l.width<n.width){m.treeItemsPositions={};var F=l.width,y=n.width;if(k)var B=(y-F)/2;else switch(u.horizontalAlignment){case 1:B=0;break;case 2:B=y-F;break;case 0:B=(y-F)/2}F=m.treeItemsPositions;for(var C in p)p.hasOwnProperty(C)&&(y=new a.orgdiagram.TreeItemPosition(p[C]),y.actualPosition.translate(B,0),F[C]=y);m.panelSize.width=n.width}l.height<
n.height&&(m.panelSize.height=n.height)}switch(t.orientationType){case 2:case 3:m.panelSize.invert()}return!0},getItemPosition:function(a){return m.treeItemsPositions[a]},getItemsPositions:function(){return m.treeItemsPositions},getContentSize:function(){return m.panelSize},getTreeItemForMousePosition:function(b,c,d){var e=null,f=null,h=w.scale,g=n();b/=h;c/=h;h=new a.common.Rect(b,c,0,0);var k=new a.common.Point(b,c);h.offset(d,d,d,d);g.loopArea(this,h,function(a){var d=a.context;if(a.contains(b,
c))return e=d,!0;switch(m.treeItemsPositions[d].actualVisibility){case 2:case 3:if(a=k.distanceTo(a.horizontalCenter(),a.verticalCenter()),null==f||a<f)f=a,e=d}});return e},getNextItem:function(b,c){if(null==x)for(e in x=a.common.KeyboardNavigationManager(),m.treeItemsPositions)if(m.treeItemsPositions.hasOwnProperty(e)){var d=m.treeItemsPositions[e];if(q.hasOwnProperty(e))switch(d.actualVisibility){case 1:d=new a.common.Rect(d.actualPosition),x.addRect(d,e)}}var e=x;switch(c){case 0:var f=e.getItemAbove(b);
break;case 1:f=e.getItemBelow(b);break;case 2:f=e.getItemOnLeft(b);break;case 3:f=e.getItemOnRight(b)}return f}}};a.orgdiagram.ApplyLayoutChangesTask=function(c,b,f,e,g,d,h){var k=null,l=null;return{process:function(){var n=c(),m=g.getOptions().scale,q=f.getOptions(),p=d.getContentSize(),r=e.getScrollPanelSize(),t=h.getThickness(),u=5==q.pageFitMode,w=new a.common.Size(p);w.scale(m);u&&(r=new a.common.Size(w.width+25,w.height+25),r.addThickness(t),r.cropBySize(q.autoSizeMaximum),r.maxSize(q.autoSizeMinimum),
q=new a.common.Size(r),q.removeThickness(t),r.space()<2*q.space()?r=q:t=new a.common.Thickness(0,0,0,0));q=new a.common.Size(r);q.addThickness(t);var v=new a.common.Size(q);v.scale(1/m);n.resize("placeholder",p.width,p.height);n.resize("frameplaceholder",v.width,v.height);b({scale:m,autoSize:u,contentSize:p,scaledContentSize:w,viewportSize:r,frameThickness:t,controlSize:q,framePlaceholderSize:v});k=r;l=t;return!0},getOptimalPanelSize:function(){return new a.common.Size(k.width-25,k.height-25)},getScrollPanelSize:function(){return new a.common.Size(k.width,
k.height)},getFrameThickness:function(){return new a.common.Thickness(l)}}};a.orgdiagram.CenterOnCursorTask=function(c,b,f,e,g,d,h){function k(b){var c=!1;n.transformRect(b.x,b.y,b.width,b.height,!0,this,function(b,d,e,f){c=new a.common.Rect(b,d,e,f)});return c}var l=null,n;return{process:function(){var m=c.getOptions();var q=e.getCursorTreeItem(),p=g.getItemPosition(q);q=new a.common.Size(g.getContentSize());var r=h.getOptions().scale;l=f.getPlaceholderOffset();m.forceCenterOnCursor&&(n=d.getTransform(),
null!=p&&(m=k(p.actualPosition),m.scale(r),q.scale(r),r=b.getScrollPanelSize(),l=new a.common.Point(Math.max(Math.min(m.horizontalCenter()-r.width/2,q.width-r.width),0),Math.max(Math.min(m.verticalCenter()-r.height/2,q.height-r.height),0))));return!0},getPlaceholderOffset:function(){return l}}};a.orgdiagram.CreateTransformTask=function(c,b){var f=null;return{process:function(){var e=c.getOptions(),g=new a.common.Size(b.getContentSize());f=new a.common.Transform;f.setOrientation(e.orientationType);
f.size=new a.common.Size(g);return!0},getTransform:function(){return f},getTreeItemForMousePosition:function(a,c,d){var e=null;f.transformPoint(a,c,!1,this,function(a,c){e=b.getTreeItemForMousePosition(a,c,d)});return e},description:"Create oordiante system tranfromation object."}};a.orgdiagram.CurrentControlSizeTask=function(c,b,f){var e={scrollPanelSize:null},g={},d=new a.common.ObjectReader({scrollPanelSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!0),height:new a.common.ValueReader(["number"],
!0)},!0)});return{process:function(){var h={isChanged:!1,hash:g},k=c.getOptions(),l=!1,n=b.getOptions().pageFitMode,m=f.getThickness(),q=new a.common.Size(k.scrollPanelSize);q.removeThickness(m);k.scrollPanelSize.space()<2*q.space()?(k.scrollPanelSize=q,k.frameThickness=m):k.frameThickness=new a.common.Thickness(0,0,0,0);e=d.read(e,k,"layout",h);switch(n){case 1:case 2:case 3:case 0:case 6:l=h.isChanged}return l},getScrollPanelSize:function(){return new a.common.Size(e.scrollPanelSize)},getOptimalPanelSize:function(){return new a.common.Size(e.scrollPanelSize.width-
25,e.scrollPanelSize.height-25)}}};a.orgdiagram.CurrentScrollPositionTask=function(c){var b={placeholderOffset:null},f={},e=new a.common.ObjectReader({placeholderOffset:new a.common.ObjectReader({x:new a.common.ValueReader(["number"],!0),y:new a.common.ValueReader(["number"],!0)},!0)});return{process:function(){var a={isChanged:!1,hash:f},d=c.getOptions();b=e.read(b,d,"layout",a);return a.isChanged},getPlaceholderOffset:function(){return b.placeholderOffset}}};a.orgdiagram.FrameSizeTask=function(c,
b,f){function e(){var d=c.getOptions(),e=d.showFrame,h=d.frameInnerPadding;d=d.frameOuterPadding;var g=f.getOptions().scale,q=new a.common.Thickness(0,0,0,0),p=new a.common.Thickness(0,0,0,0);if(e){e=new a.common.Size(0,0);p=new a.common.Thickness(0,0,0,0);var r,t=b.getItemTemplates();q=0;for(r=t.length;q<r;q+=1){var u=t[q].templateConfig,w=new a.common.Thickness(u.cursorPadding),v=new a.common.Thickness(u.highlightPadding);w.addThickness(u.cursorBorderWidth);v.addThickness(u.highlightBorderWidth);
e.maxSize(u.minimizedItemSize);p.maxThickness(u.cursorPadding);p.maxThickness(u.highlightPadding)}q=new a.common.Thickness(Math.ceil(e.width/2)+p.right,Math.ceil(e.height/2)+p.bottom,Math.ceil(e.width/2)+p.left,Math.ceil(e.height/2)+p.top);q.addThickness(h);q.scale(g);p=new a.common.Thickness(e.width+p.left+p.right,e.height+p.top+p.bottom,e.width+p.left+p.right,e.height+p.top+p.bottom);p.addThickness(h);p.addThickness(d);p.scale(g)}return{median:q,thickness:p}}var g={},d={},h=new a.common.ObjectReader({median:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],
!1,0),top:new a.common.ValueReader(["number"],!1,0),right:new a.common.ValueReader(["number"],!1,0),bottom:new a.common.ValueReader(["number"],!1,0)},!1,new a.common.Thickness(0,0,0,0)),thickness:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],!1,0),top:new a.common.ValueReader(["number"],!1,0),right:new a.common.ValueReader(["number"],!1,0),bottom:new a.common.ValueReader(["number"],!1,0)},!1,new a.common.Thickness(0,0,0,0))});return{process:function(){var a={isChanged:!1,hash:d};
g=h.read(g,e(),"options",a);return a.isChanged},getMedian:function(){return g.median},getThickness:function(){return g.thickness}}};a.orgdiagram.ProjectItemsToFrameTask=function(c,b,f,e,g,d,h,k){function l(){var c=null;if(null!=d){var e=p.scale,h=new a.common.Point(d.getPlaceholderOffset()),g=new a.common.Size(f.getScrollPanelSize()),m=new a.common.Thickness(f.getFrameThickness()),k=new a.common.Thickness(b.getMedian());m.isEmpty()||(h.scale(1/e),m.scale(1/e),g.scale(1/e),k.scale(1/e),c=new a.common.Point(h.x-
m.left,h.y-m.top),h=new a.common.Rect(h.x,h.y,g.width,g.height),h.offset(k),c={offset:c,rect:h})}return c}function n(){var a=[],b={},c;for(c in q.positions)if(q.positions.hasOwnProperty(c)){var d=q.positions[c];d=Math.max(d.width,d.height);b.hasOwnProperty(d)||(b[d]=!0,a.push(d))}return a}function m(){if(null==r){r=a.common.SpatialIndex(n());for(var b in q.positions)if(q.positions.hasOwnProperty(b)){var c=q.positions[b];c.context=b;r.addRect(c)}}return r}var q={positions:{}},p,r;return{getPositions:function(){return q.positions},
getTreeItemForMousePosition:function(b,c,d){var e=null,f=null,h=p.scale,g=m();b/=h;c/=h;h=new a.common.Rect(b,c,0,0);var k=new a.common.Point(b,c);h.offset(d,d,d,d);g.loopArea(this,h,function(a){var b=a.context;a=k.distanceTo(a.horizontalCenter(),a.verticalCenter());if(null==f||a<f)f=a,e=b});return e},process:function(){var b=g.getItemsPositions(),d=c.getTransform();p=e.getOptions();r=null;q.positions=[];var f=l(),m=k.getItems();if(null!=f)for(var n=0,E=m.length;n<E;n+=1){var A=m[n],F=b[A].actualPosition;
d.transformRect(F.x,F.y,F.width,F.height,!0,this,function(b,c,d,e){b=new a.common.Rect(b,c,d,e);f.rect.overlaps(b)||(b=f.rect.getProjectionPoint(b.centerPoint()),null!=b&&(c=h.getTemplateParams(A).template.templateConfig,c=new a.common.Size(c.minimizedItemSize),b=new a.common.Rect(b.x-c.width/2,b.y-c.height/2,c.width,c.height),b.translate(-f.offset.x,-f.offset.y),q.positions[A]=b))})}return!0}}};a.orgdiagram.BackgroundAnnotationOptionTask=function(c,b){var f=[],e={},g=new a.common.ArrayReader(new a.common.ObjectReader({items:new a.common.ArrayReader(new a.common.ValueReader(["string",
"number"],!0),!0),includeChildren:new a.common.ValueReader(["boolean"],!1,b.includeChildren),zOrderType:new a.common.EnumerationReader(a.common.ZOrderType,!1,b.zOrderType),offset:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],!1,b.offset.left),top:new a.common.ValueReader(["number"],!1,b.offset.top),right:new a.common.ValueReader(["number"],!1,b.offset.right),bottom:new a.common.ValueReader(["number"],!1,b.offset.bottom)},!1,b.offset),lineWidth:new a.common.ValueReader(["number"],
!1,b.lineWidth),opacity:new a.common.ValueReader(["number"],!1,b.opacity),borderColor:new a.common.ValueReader(["string"],!1,b.borderColor),fillColor:new a.common.ValueReader(["string"],!1,b.fillColor),lineType:new a.common.EnumerationReader(a.common.LineType,!1,b.lineType),selectItems:new a.common.ValueReader(["boolean"],!1,b.selectItems)}),!1);return{process:function(){var a={isChanged:!1,hash:e};f=g.read(f,c.getAnnotations(4,null),"annotations",a);return a.isChanged},getAnnotations:function(){return f}}};
a.orgdiagram.ConnectorAnnotationOptionTask=function(c,b,f){var e=[],g={},d=new a.common.ArrayReader(new a.common.ObjectReader({zOrderType:new a.common.EnumerationReader(a.common.ZOrderType,!1,b.zOrderType),fromItem:new a.common.ValueReader(["string","number"],!0),toItem:new a.common.ValueReader(["string","number"],!0),connectorShapeType:new a.common.EnumerationReader(a.common.ShapeType,!1,b.connectorShapeType),connectorPlacementType:new a.common.EnumerationReader(a.common.ConnectorPlacementType,!1,
b.connectorPlacementType),labelPlacementType:new a.common.EnumerationReader(a.common.ConnectorLabelPlacementType,!1,b.labelPlacementType),offset:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],!1,b.offset.left),top:new a.common.ValueReader(["number"],!1,b.offset.top),right:new a.common.ValueReader(["number"],!1,b.offset.right),bottom:new a.common.ValueReader(["number"],!1,b.offset.bottom)},!1,b.offset),lineWidth:new a.common.ValueReader(["number"],!1,b.lineWidth),color:new a.common.ValueReader(["string"],
!1,b.color),lineType:new a.common.EnumerationReader(a.common.LineType,!1,b.lineType),selectItems:new a.common.ValueReader(["boolean"],!1,b.selectItems),label:new a.common.ValueReader(["string","object"],!1,b.label),labelSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,b.labelSize.width),height:new a.common.ValueReader(["number"],!1,b.labelSize.height)},!1,b.labelSize)}),!1);return{process:function(){var a={isChanged:!1,hash:g};e=d.read(e,c.getAnnotations(0,f),"annotations",
a);return a.isChanged},getAnnotations:function(){return e}}};a.orgdiagram.HighlightPathAnnotationOptionTask=function(c,b,f){var e=[],g={},d=new a.common.ArrayReader(new a.common.ObjectReader({zOrderType:new a.common.EnumerationReader(a.common.ZOrderType,!1,b.zOrderType),lineWidth:new a.common.ValueReader(["number"],!1,b.lineWidth),opacity:new a.common.ValueReader(["number"],!1,b.opacity),color:new a.common.ValueReader(["string"],!1,b.color),lineType:new a.common.EnumerationReader(a.common.LineType,
!1,b.lineType),items:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!1),selectItems:new a.common.ValueReader(["boolean"],!1,b.selectItems),showArrows:new a.common.ValueReader(["boolean"],!1,b.showArrows)},!1));return{process:function(){var a={isChanged:!1,hash:g};e=d.read(e,c.getAnnotations(2,f),"annotations",a);return a.isChanged},getAnnotations:function(){return e}}};a.orgdiagram.ShapeAnnotationOptionTask=function(c,b,f){var e=[],g={},d=new a.common.ArrayReader(new a.common.ObjectReader({zOrderType:new a.common.EnumerationReader(a.common.ZOrderType,
!1,b.zOrderType),items:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0),shapeType:new a.common.EnumerationReader(a.common.ShapeType,!1,b.shapeType),offset:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],!1,b.offset.left),top:new a.common.ValueReader(["number"],!1,b.offset.top),right:new a.common.ValueReader(["number"],!1,b.offset.right),bottom:new a.common.ValueReader(["number"],!1,b.offset.bottom)},!1,b.offset),lineWidth:new a.common.ValueReader(["number"],
!1,b.lineWidth),cornerRadius:new a.common.ValueReader(["string"],!1,b.cornerRadius),opacity:new a.common.ValueReader(["number"],!1,b.opacity),borderColor:new a.common.ValueReader(["string"],!1,b.borderColor),fillColor:new a.common.ValueReader(["string"],!1,b.fillColor),lineType:new a.common.EnumerationReader(a.common.LineType,!1,b.lineType),selectItems:new a.common.ValueReader(["boolean"],!1,b.selectItems),label:new a.common.ValueReader(["string","object"],!1,b.label),labelSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],
!1,b.labelSize.width),height:new a.common.ValueReader(["number"],!1,b.labelSize.height)},!1,b.labelSize),labelPlacement:new a.common.EnumerationReader(a.common.PlacementType,!1,b.labelPlacement),labelOffset:new a.common.ValueReader(["number"],!1,b.labelOffset)},!1));return{process:function(){var a={isChanged:!1,hash:g};e=d.read(e,c.getAnnotations(1,f),"annotations",a);return a.isChanged},getAnnotations:function(){return e}}};a.orgdiagram.SplitAnnotationsOptionTask=function(c){var b={};return{process:function(){var f=
c.getOptions().annotations,e,g={};if(a.common.isArray(f)){var d=0;for(e=f.length;d<e;d+=1){var h=f[d];var k=h.annotationType;switch(k){case 1:case 0:case 2:switch(h.zOrderType){case 1:var l=1;break;default:l=2}break;default:l=null}null!=k&&(k=1E3*k+(l||0),g.hasOwnProperty(k)||(g[k]=[]),g[k].push(h))}}b=g;return!0},getAnnotations:function(a,c){return b[1E3*a+(c||0)]}}};a.orgdiagram.CursorItemOptionTask=function(c,b){var f={},e=new a.common.ObjectReader({cursorItem:new a.common.ValueReader(["string",
"number"],!0),navigationMode:new a.common.EnumerationReader(a.common.NavigationMode,!1,b.navigationMode)});return{process:function(){var a={isChanged:!1};f=e.read(f,c.getOptions(),"options",a);return a.isChanged},getCursorItem:function(){return f.cursorItem},hasCursorEnabled:function(){switch(f.navigationMode){case 0:case 1:return!0}return!1},description:"Checks currenct cursor item option."}};a.orgdiagram.CursorSelectionPathModeOptionTask=function(c,b){var f={},e=new a.common.ObjectReader({selectionPathMode:new a.common.EnumerationReader(a.common.SelectionPathMode,
!1,b.selectionPathMode)});return{process:function(){var a={isChanged:!1};f=e.read(f,c.getOptions(),"options",a);return a.isChanged},getSelectionPathMode:function(){return f.selectionPathMode},description:"Checks cursor selection path option."}};a.orgdiagram.HighlightItemOptionTask=function(c,b){var f={},e=new a.common.ObjectReader({highlightItem:new a.common.ValueReader(["string","number"],!0),navigationMode:new a.common.EnumerationReader(a.common.NavigationMode,!1,b.navigationMode),highlightGravityRadius:new a.common.ValueReader(["number"],
!1,b.highlightGravityRadius)});return{process:function(){var a={isChanged:!1};f=e.read(f,c.getOptions(),"options",a);return a.isChanged},getHighlightItem:function(){return f.highlightItem},hasHighlightEnabled:function(){switch(f.navigationMode){case 0:case 3:return!0}return!1},getGravityRadius:function(){return f.highlightGravityRadius},description:"Checks highlight item option."}};a.orgdiagram.SelectedItemsOptionTask=function(c){var b={},f={},e=new a.common.ObjectReader({selectedItems:new a.common.ArrayReader(new a.common.ValueReader(["string",
"number"],!0),!0)});return{process:function(){var a={isChanged:!1,hash:f},d=c.getOptions();b=e.read(b,d,"options",a);return a.isChanged},getSelectedItems:function(){return b.selectedItems},description:"Checks user selected items option."}};a.orgdiagram.CalloutOptionTask=function(c,b,f){var e={},g={},d=new a.common.ObjectReader({calloutMaximumVisibility:new a.common.EnumerationReader(a.common.Visibility,!1,b.calloutMaximumVisibility),showCallout:new a.common.ValueReader(["boolean"],!1,b.showCallout),
calloutPlacementOffset:new a.common.ValueReader(["number"],!1,b.calloutPlacementOffset),orientationType:new a.common.EnumerationReader(a.common.OrientationType,!1,b.orientationType),defaultTemplateName:new a.common.ValueReader(["string"],!0),defaultCalloutTemplateName:new a.common.ValueReader(["string"],!0),calloutfillColor:new a.common.ValueReader(["string"],!1,b.calloutfillColor),calloutBorderColor:new a.common.ValueReader(["string"],!0),calloutOffset:new a.common.ValueReader(["number"],!1,b.calloutOffset),
calloutCornerRadius:new a.common.ValueReader(["string"],!1,b.calloutCornerRadius),calloutPointerWidth:new a.common.ValueReader(["string"],!1,b.calloutPointerWidth),calloutLineWidth:new a.common.ValueReader(["number"],!1,b.calloutLineWidth),calloutOpacity:new a.common.ValueReader(["number"],!1,b.calloutOpacity),items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),showCallout:new a.common.EnumerationReader(a.common.Enabled,!1,b.showCallout),calloutTemplateName:new a.common.ValueReader(["string"],
!0),templateName:new a.common.ValueReader(["string"],!0)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:g};e=d.read(e,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return e},getItemOptions:function(a){return g["options-items"][a]},description:"Checks item callout options."}};a.orgdiagram.ConnectorsOptionTask=function(c,b){var f={},e={},g=new a.common.ObjectReader({arrowsDirection:new a.common.EnumerationReader(a.common.GroupByType,!1,b.arrowsDirection),showExtraArrows:new a.common.ValueReader(["boolean"],
!1,b.showExtraArrows),extraArrowsMinimumSpace:new a.common.ValueReader(["number"],!1,b.extraArrowsMinimumSpace),connectorType:new a.common.EnumerationReader(a.common.ConnectorType,!1,b.hasOwnProperty("connectorType")?b.connectorType:0),showNeigboursConnectorsHighlighted:new a.common.EnumerationReader(a.common.ConnectorType,!1,b.hasOwnProperty("showNeigboursConnectorsHighlighted")?b.showNeigboursConnectorsHighlighted:!1),elbowType:new a.common.EnumerationReader(a.common.ElbowType,!1,b.elbowType),bevelSize:new a.common.ValueReader(["number"],
!1,b.bevelSize),elbowDotSize:new a.common.ValueReader(["number"],!1,b.elbowDotSize),linesColor:new a.common.ValueReader(["string"],!1,b.linesColor),linesWidth:new a.common.ValueReader(["number"],!1,b.linesWidth),linesType:new a.common.EnumerationReader(a.common.LineType,!1,b.linesType),highlightLinesColor:new a.common.ValueReader(["string"],!1,b.highlightLinesColor),highlightLinesWidth:new a.common.ValueReader(["number"],!1,b.highlightLinesWidth),highlightLinesType:new a.common.EnumerationReader(a.common.LineType,
!1,b.highlightLinesType)});return{process:function(){var a={isChanged:!1,hash:e};f=g.read(f,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return f},description:"Checks connector lines drawing options."}};a.orgdiagram.FrameOptionTask=function(c,b){var f={},e={},g=new a.common.ObjectReader({showFrame:new a.common.ValueReader(["boolean"],!1,b.showFrame),frameInnerPadding:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],!1,b.frameInnerPadding.left),top:new a.common.ValueReader(["number"],
!1,b.frameInnerPadding.top),right:new a.common.ValueReader(["number"],!1,b.frameInnerPadding.right),bottom:new a.common.ValueReader(["number"],!1,b.frameInnerPadding.bottom)},!1,b.frameInnerPadding),frameOuterPadding:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],!1,b.frameOuterPadding.left),top:new a.common.ValueReader(["number"],!1,b.frameOuterPadding.top),right:new a.common.ValueReader(["number"],!1,b.frameOuterPadding.right),bottom:new a.common.ValueReader(["number"],!1,b.frameOuterPadding.bottom)},
!1,b.frameOuterPadding)});return{process:function(){var a={isChanged:!1,hash:e};f=g.read(f,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return f},description:"Checks control scale options."}};a.orgdiagram.ItemsContentOptionTask=function(c,b){var f={},e={},g={},d=new a.common.ObjectReader({items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),title:new a.common.ValueReader(["string"],!0),description:new a.common.ValueReader(["string"],
!0),image:new a.common.ValueReader(["string"],!0),context:new a.common.ValueReader(["string","number","object"],!0),itemTitleColor:new a.common.ValueReader(["string"],!1,b.itemTitleColor),groupTitle:new a.common.ValueReader(["string"],!1,b.groupTitle),groupTitleColor:new a.common.ValueReader(["string"],!1,b.groupTitleColor)}),!0,"id",!0,!0)});return{process:function(){var a={isChanged:!1,hash:e,sourceHash:g};f=d.read(f,c.getOptions(),"options",a);return a.isChanged},getItems:function(){return f.items},
getConfig:function(a){return g["options-items"][a]},description:"Checks items configuration options effecting their placement in layout."}};a.orgdiagram.ItemsOptionTask=function(c,b){var f={},e={},g={},d=new a.common.ObjectReader({items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),parent:new a.common.ValueReader(["string","number"],!0),itemType:new a.common.EnumerationReader(a.orgdiagram.ItemType,!1,b.itemType),adviserPlacementType:new a.common.EnumerationReader(a.common.AdviserPlacementType,
!1,b.adviserPlacementType),childrenPlacementType:new a.common.EnumerationReader(a.common.ChildrenPlacementType,!1,b.childrenPlacementType),placeAdvisersAboveChildren:new a.common.EnumerationReader(a.common.Enabled,!1,b.placeAdvisersAboveChildren),placeAssistantsAboveChildren:new a.common.EnumerationReader(a.common.Enabled,!1,b.placeAssistantsAboveChildren),isVisible:new a.common.ValueReader(["boolean"],!1,b.isVisible),isActive:new a.common.ValueReader(["boolean"],!1,b.isActive),levelOffset:new a.common.ValueReader(["number"],
!0)}),!0,"id",!0,!0)});return{process:function(){var a={isChanged:!1,hash:e,sourceHash:g};f=d.read(f,c.getOptions(),"options",a);return a.isChanged},getItems:function(){return f.items},getConfig:function(a){return g["options-items"][a]},description:"Checks items configuration options effecting their placement in layout."}};a.orgdiagram.ItemsSizesOptionTask=function(c,b,f,e){var g={},d={},h=new a.common.ObjectReader({defaultTemplateName:new a.common.ValueReader(["string"],!0),defaultLabelAnnotationTemplate:new a.common.ValueReader(["string"],
!0),hasSelectorCheckbox:new a.common.EnumerationReader(a.common.Enabled,!1,b.hasSelectorCheckbox),hasButtons:new a.common.EnumerationReader(a.common.Enabled,!1,b.hasButtons),buttonsPanelSize:new a.common.ValueReader(["number"],!1,b.buttonsPanelSize),groupTitlePanelSize:new a.common.ValueReader(["number"],!1,b.groupTitlePanelSize),groupTitlePlacementType:new a.common.EnumerationReader(a.common.AdviserPlacementType,!1,b.groupTitlePlacementType),checkBoxPanelSize:new a.common.ValueReader(["number"],
!1,b.checkBoxPanelSize),selectCheckBoxLabel:new a.common.ValueReader(["string"],!1,b.selectCheckBoxLabel),buttons:new a.common.ArrayReader(new a.common.ObjectReader({name:new a.common.ValueReader(["string"],!0),icon:new a.common.ValueReader(["string"],!0),text:new a.common.ValueReader(["boolean"],!1,!1),tooltip:new a.common.ValueReader(["string"],!0),size:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,e.size.width),height:new a.common.ValueReader(["number"],!1,e.size.height)},
!1,e.size)}),!0,"name"),onButtonsRender:new a.common.FunctionReader,pageFitMode:new a.common.EnumerationReader(a.common.PageFitMode,!1,b.pageFitMode),minimalVisibility:new a.common.EnumerationReader(a.common.Visibility,!1,b.minimalVisibility),selectionPathMode:new a.common.EnumerationReader(a.common.SelectionPathMode,!1,b.selectionPathMode),autoSizeMinimum:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,b.autoSizeMinimum.width),height:new a.common.ValueReader(["number"],!1,
b.autoSizeMinimum.height)},!1,b.autoSizeMinimum),autoSizeMaximum:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,b.autoSizeMaximum.width),height:new a.common.ValueReader(["number"],!1,b.autoSizeMaximum.height)},!1,b.autoSizeMaximum),scale:new a.common.ValueReader(["number"],!1,b.scale),maximumScale:new a.common.ValueReader(["number"],!1,b.maximumScale),minimumScale:new a.common.ValueReader(["number"],!1,b.minimumScale),normalLevelShift:new a.common.ValueReader(["number"],!1,
b.normalLevelShift),dotLevelShift:new a.common.ValueReader(["number"],!1,b.dotLevelShift),lineLevelShift:new a.common.ValueReader(["number"],!1,b.lineLevelShift),normalItemsInterval:new a.common.ValueReader(["number"],!1,b.normalItemsInterval),dotItemsInterval:new a.common.ValueReader(["number"],!1,b.dotItemsInterval),lineItemsInterval:new a.common.ValueReader(["number"],!1,b.lineItemsInterval),cousinsIntervalMultiplier:new a.common.ValueReader(["number"],!1,b.cousinsIntervalMultiplier),verticalAlignment:new a.common.EnumerationReader(a.common.VerticalAlignmentType,
!1,b.verticalAlignment),items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),groupTitle:new a.common.ValueReader(["string","number"],!0),isVisible:new a.common.ValueReader(["boolean","number"],!1,f.isVisible),isActive:new a.common.ValueReader(["boolean","number"],!1,f.isActive),hasSelectorCheckbox:new a.common.EnumerationReader(a.common.Enabled,!1,f.hasSelectorCheckbox),hasButtons:new a.common.EnumerationReader(a.common.Enabled,!1,f.hasButtons),
templateName:new a.common.ValueReader(["string"],!0)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:d};g=h.read(g,c.getOptions(),"options",a);return a.isChanged},getItemOptions:function(a){return d["options-items"][a]},getOptions:function(){return g},description:"Checks items size options."}};a.orgdiagram.LabelsOptionTask=function(c,b,f){var e={},g={},d=new a.common.ObjectReader({showLabels:new a.common.EnumerationReader(a.common.Enabled,!1,b.showLabels),labelOffset:new a.common.ValueReader(["number"],
!1,b.labelOffset),labelFontSize:new a.common.ValueReader(["string"],!1,b.labelFontSize),labelFontFamily:new a.common.ValueReader(["string"],!1,b.labelFontFamily),labelFontStyle:new a.common.ValueReader(["string"],!1,b.labelFontStyle),labelFontWeight:new a.common.ValueReader(["string"],!1,b.labelFontWeight),labelColor:new a.common.ValueReader(["string"],!1,b.labelColor),labelSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,b.labelSize.width),height:new a.common.ValueReader(["number"],
!1,b.labelSize.height)},!1,b.labelSize),labelOrientation:new a.common.EnumerationReader(a.text.TextOrientationType,!1,b.labelOrientation),labelPlacement:new a.common.EnumerationReader(a.common.PlacementType,!1,b.labelPlacement),arrowsDirection:new a.common.EnumerationReader(a.common.GroupByType,!1,b.arrowsDirection),items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),label:new a.common.ValueReader(["string","number","object"],!0),showLabel:new a.common.EnumerationReader(a.common.Enabled,
!1,f.showLabel),labelSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,0),height:new a.common.ValueReader(["number"],!1,0)},!0),labelOrientation:new a.common.EnumerationReader(a.text.TextOrientationType,!1,f.labelOrientation),labelPlacement:new a.common.EnumerationReader(a.common.PlacementType,!1,f.labelPlacement)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:g};e=d.read(e,c.getOptions(),"options",a);return a.isChanged},getItemOptions:function(a){return g["options-items"][a]},
getItemsOptions:function(){return g["options-items"]},getOptions:function(){return e},description:"Checks items labels options."}};a.orgdiagram.LayoutOptionsTask=function(a,b){var c={};return{process:function(){c=a();return!0},getOptions:function(){return c},description:"Raw layout options."}};a.orgdiagram.MinimizedItemsOptionTask=function(c){var b={},f={},e=new a.common.ObjectReader({minimizedItemShapeType:new a.common.EnumerationReader(a.common.ShapeType,!0),items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string",
"number"],!0),minimizedItemShapeType:new a.common.EnumerationReader(a.common.ShapeType,!0),itemTitleColor:new a.common.ValueReader(["string"],!0)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:f};b=e.read(b,c.getOptions(),"options",a);return a.isChanged},getItemOptions:function(a){return f["options-items"][a]},getOptions:function(){return b},description:"Checks minimized items drawing options."}};a.orgdiagram.OptionsTask=function(a){return{process:function(){return!0},getOptions:a,
description:"Raw options."}};a.orgdiagram.OrientationOptionTask=function(c,b){var f={},e={},g=new a.common.ObjectReader({orientationType:new a.common.EnumerationReader(a.common.OrientationType,!1,b.orientationType)});return{process:function(){var a={isChanged:!1,hash:e};f=g.read(f,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return f},description:"Checks diagram orientation options."}};a.orgdiagram.ScaleOptionTask=function(c,b){var f={},e={},g=new a.common.ObjectReader({scale:new a.common.ValueReader(["number"],
!1,b.scale),minimumScale:new a.common.ValueReader(["number"],!1,b.minimumScale),maximumScale:new a.common.ValueReader(["number"],!1,b.maximumScale)});return{process:function(){var a={isChanged:!1,hash:e};f=g.read(f,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return f},description:"Checks control scale options."}};a.orgdiagram.TemplatesOptionTask=function(c,b,f,e){var g={},d={},h=new a.common.ObjectReader({groupTitleVerticalAlignment:new a.common.EnumerationReader(a.common.VerticalAlignmentType,
!1,b.groupTitleVerticalAlignment),groupTitleHorizontalAlignment:new a.common.EnumerationReader(a.common.HorizontalAlignmentType,!1,b.groupTitleHorizontalAlignment),groupTitleOrientation:new a.common.EnumerationReader(a.text.TextOrientationType,!1,b.groupTitleOrientation),groupTitleFontSize:new a.common.ValueReader(["string"],!1,b.groupTitleFontSize),groupTitleFontFamily:new a.common.ValueReader(["string"],!1,b.groupTitleFontFamily),groupTitleColor:new a.common.ValueReader(["string"],!1,b.groupTitleColor),
groupTitleFontWeight:new a.common.ValueReader(["string"],!1,b.groupTitleFontWeight),groupTitleFontStyle:new a.common.ValueReader(["string"],!1,b.groupTitleFontStyle),itemTitleFirstFontColor:new a.common.ValueReader(["string"],!1,b.itemTitleFirstFontColor),itemTitleSecondFontColor:new a.common.ValueReader(["string"],!1,b.itemTitleSecondFontColor),selectCheckBoxLabel:new a.common.ValueReader(["string"],!1,b.selectCheckBoxLabel),onItemRender:new a.common.FunctionReader,onCursorRender:new a.common.FunctionReader,
onHighlightRender:new a.common.FunctionReader,templates:new a.common.ArrayReader(new a.common.ObjectReader({name:new a.common.ValueReader(["string"],!0),isActive:new a.common.ValueReader(["boolean"],!1,e.isActive),itemSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,e.itemSize.width),height:new a.common.ValueReader(["number"],!1,e.itemSize.height)},!1,e.itemSize),itemBorderWidth:new a.common.ValueReader(["number"],!1,e.itemBorderWidth),itemTemplate:new a.common.ValueReader(["string",
"object"],!0),minimizedItemShapeType:new a.common.EnumerationReader(a.common.ShapeType,!0),minimizedItemSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,e.minimizedItemSize.width),height:new a.common.ValueReader(["number"],!1,e.minimizedItemSize.height)},!1,e.minimizedItemSize),minimizedItemCornerRadius:new a.common.ValueReader(["number"],!0),minimizedItemLineWidth:new a.common.ValueReader(["number"],!1,e.minimizedItemLineWidth),minimizedItemBorderColor:new a.common.ValueReader(["string"],
!0),minimizedItemLineType:new a.common.EnumerationReader(a.common.LineType,!1,e.minimizedItemLineType),minimizedItemFillColor:new a.common.ValueReader(["string"],!0),minimizedItemOpacity:new a.common.ValueReader(["number"],!1,e.minimizedItemOpacity),highlightPadding:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],!1,e.highlightPadding.left),top:new a.common.ValueReader(["number"],!1,e.highlightPadding.top),right:new a.common.ValueReader(["number"],!1,e.highlightPadding.right),
bottom:new a.common.ValueReader(["number"],!1,e.highlightPadding.bottom)},!1,e.highlightPadding),highlightBorderWidth:new a.common.ValueReader(["number"],!1,e.highlightBorderWidth),highlightTemplate:new a.common.ValueReader(["string","object"],!0),cursorPadding:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],!1,e.cursorPadding.left),top:new a.common.ValueReader(["number"],!1,e.cursorPadding.top),right:new a.common.ValueReader(["number"],!1,e.cursorPadding.right),bottom:new a.common.ValueReader(["number"],
!1,e.cursorPadding.bottom)},!1,e.cursorPadding),cursorBorderWidth:new a.common.ValueReader(["number"],!1,e.cursorBorderWidth),cursorTemplate:new a.common.ValueReader(["string","object"],!0),buttons:new a.common.ArrayReader(new a.common.ObjectReader({name:new a.common.ValueReader(["string"],!0),icon:new a.common.ValueReader(["string"],!0),text:new a.common.ValueReader(["boolean"],!1,!1),tooltip:new a.common.ValueReader(["string"],!0),size:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],
!1,f.size.width),height:new a.common.ValueReader(["number"],!1,f.size.height)},!1,f.size)}),!0,"name"),onButtonsRender:new a.common.FunctionReader}),!0,"name")});return{process:function(){var a={isChanged:!1,hash:d};g=h.read(g,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return g},description:"Checks items template options."}};a.orgdiagram.VisualTreeOptionTask=function(c,b){var f={},e={},g=new a.common.ObjectReader({leavesPlacementType:new a.common.EnumerationReader(a.common.ChildrenPlacementType,
!1,b.leavesPlacementType),childrenPlacementType:new a.common.EnumerationReader(a.common.ChildrenPlacementType,!1,b.childrenPlacementType),placeAdvisersAboveChildren:new a.common.ValueReader(["boolean"],!1,b.placeAdvisersAboveChildren),placeAssistantsAboveChildren:new a.common.ValueReader(["boolean"],!1,b.placeAssistantsAboveChildren),maximumColumnsInMatrix:new a.common.ValueReader(["number"],!1,b.maximumColumnsInMatrix),horizontalAlignment:new a.common.EnumerationReader(a.common.HorizontalAlignmentType,
!1,b.horizontalAlignment)});return{process:function(){var a={isChanged:!1,hash:e};f=g.read(f,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return f},description:"Checks items layout options."}};a.orgdiagram.CollinearVectorBundle=function(){function c(a){var c;if(b.width>b.height){var h=0;for(c=f.length;h<c;h+=1){var g=f[h];a(g.from.x,g.to.x,e[h])}}else for(h=0,c=f.length;h<c;h+=1)g=f[h],a(g.from.y,g.to.y,e[h])}var b=new a.common.Rect,f=[],e=[];return{addVector:function(a,c){f.push(a);
e.push(c);b.addRect(a.from.x,a.from.y);b.addRect(a.to.x,a.to.y)},resolve:function(){if(1==f.length)e[0](0,1,1);else{var b=a.common.pile();c(function(a,c,e){b.add(a,c,e)});b.resolve(this,function(a,b,c,e,f,g){c(e,f,g)})}}}};a.orgdiagram.ConnectorAnnotationOffsetResolver=function(){var c={};return{getOffset:function(b,f){var e=b.getLineKey();c.hasOwnProperty(e)||(c[e]=new a.orgdiagram.CollinearVectorBundle);c[e].addVector(b,f)},resolve:function(){for(var a in c)c.hasOwnProperty(a)&&c[a].resolve()}}};
a.orgdiagram.DrawBackgroundAnnotationTask=function(c,b,f,e,g,d){function h(b,c,e){var f,h;c=0;for(f=b.length;c<f;c+=1){var g=b[c];if(null!=g.items&&0<g.items.length){var m=new a.common.MergedRectangles(k);m.transform=n;var q=new a.orgdiagram.BackgroundAnnotationConfig;var l=["opacity","lineWidth","borderColor","fillColor","lineType"];var p=0;for(h=l.length;p<h;p+=1){var A=l[p];m[A]=g.hasOwnProperty(A)?g[A]:q[A]}k.activate("placeholder",2);var F=[];var y={};p=0;for(h=g.items.length;p<h;p+=1){q=g.items[p];
var B=d.getItemPosition(q);if(null!=B){y[q]=!0;var C=new a.common.Rect(B.actualPosition);C.offset(g.offset);F.push(C);g.includeChildren&&e.loopChildren(this,q,function(b,c){y[b]||(y[b]=!0,B=d.getItemPosition(b),null!=B&&(C=new a.common.Rect(B.actualPosition),C.offset(g.offset),F.push(C)))})}}m.draw(F)}}}var k,l,n;return{process:function(){var a=e.getAnnotations();k=c();k.reset("placeholder",2);if(0<a.length){l=d.getItemsPositions();n=b.getTransform();var f=g.getLogicalFamily();h(a,l,f)}return!1}}};
a.orgdiagram.DrawConnectorAnnotationTask=function(c,b,f,e,g,d,h,k){function l(b,c){var d,e,f=new a.common.PolylinesBuffer,h=a.orgdiagram.ConnectorAnnotationOffsetResolver(),g=0;switch(k){case 1:n.activate("placeholder",4);break;case 2:n.activate("placeholder",14)}var l=0;for(d=b.length;l<d;l+=1){var r=b[l];g=Math.max(g,r.lineWidth)}l=0;for(d=b.length;l<d;l+=1)if(r=b[l],null!=r.fromItem&&null!=r.toItem){var t=c(r.fromItem);var B=c(r.toItem);if(null!=t&&null!=B){var C=t.actualPosition;var D=B.actualPosition;
switch(r.connectorPlacementType){case 0:var K=new a.common.ConnectorOffbeat;break;case 1:K=new a.common.ConnectorStraight}var G;m.transformRect(0,0,r.labelSize.width,r.labelSize.height,!1,this,function(b,c,d,e){G=new a.common.Size(d,e)});var z=null;m.transformRect(0,0,p.width,p.height,!1,this,function(b,c,d,e){z=new a.common.Size(d,e)});B=new a.common.PaletteItem({lineColor:r.color,lineWidth:r.lineWidth,lineType:r.lineType});t=!a.common.isNullOrEmpty(r.label);C=(new a.common.Rect(C)).offset(r.offset);
D=(new a.common.Rect(D)).offset(r.offset);K.draw(f,B,C,D,3*r.lineWidth,6*g,G,z,r.connectorShapeType,4,r.labelPlacementType,t,h,function(b,c){a.common.isNullOrEmpty(c.label)||null==b||(m.transformRect(b.x,b.y,b.width,b.height,!0,this,function(c,d,e,f){b=new a.common.Rect(c,d,e,f)}),e=new a.common.RenderEventArgs,e.context=c,n.template(b.x,b.y,0,0,0,0,b.width,b.height,q.template(),q.getHashCode(),q.render,e,null))},r)}}h.resolve();f.transform(m,!0);n.polylinesBuffer(f)}var n,m,q,p;return{process:function(){n=
c();m=b.getTransform();e.getOptions();q=h.getTemplate();p=new a.common.Size(d.getContentSize());switch(k){case 1:n.reset("placeholder",4);break;case 2:n.reset("placeholder",14)}l(g.getAnnotations(),d.getItemPosition);return!1}}};a.orgdiagram.DrawConnectorsTask=function(c,b,f,e,g){return{process:function(){var d=c(),h=b.getGraph(),k=f.getOptions(),l=g.getPaletteManager();d.reset("placeholder",6);d.activate("placeholder",6);var n=new a.common.PolylinesBuffer,m=Math.round(k.elbowDotSize/2),q={},p={};
h.loopNodes(this,null,function(b){h.loopNodeEdges(this,b,function(c,d){if(!q.hasOwnProperty(c)){c=null;1>=d.fromOffset?c=l.getPalette(1):(l.selectPalette(d.fromOffset),c=l.getPalette(0));var f=n.getPolyline(c);if(e&&null!=d.dotId&&0!=k.elbowType&&!p.hasOwnProperty(d.dotId)){c=n.getPolyline(f.arrowPaletteItem);var h=d.dotId==d.from?d.polyline.getStartPoint():d.polyline.getEndPoint();c.addSegment(new a.common.DotSegment(h.x-m,h.y-m,2*m,2*m,m));p[d.dotId]=!0}c=null;if(d.hasArrow)switch(k.arrowsDirection){case 1:c=
d.isOppositeFlow?d.childrenArrowId:d.parentsArrowId;break;case 2:c=d.isOppositeFlow?d.parentsArrowId:d.childrenArrowId}null==c?(c=d.polyline.clone(),d.hasMiddle&&0!=k.arrowsDirection&&(h=!0,h=d.from==d.middleParent?2==k.arrowsDirection:1==k.arrowsDirection,d.isOppositeFlow&&(h=!h),c.addOffsetArrow(h,k.linesWidth,.4,k.extraArrowsMinimumSpace,function(a){a.mergeTo(n.getPolyline(f.arrowPaletteItem))})),d.from==b?c.mergeTo(f):f.addInverted(c)):(c==d.to?d.polyline.clone().mergeTo(f):f.addInverted(d.polyline.clone()),
f.addArrow(k.linesWidth,function(a){a.mergeTo(n.getPolyline(a.paletteItem))}))}});q[b]=!0});d.polylinesBuffer(n);return!1}}};a.orgdiagram.DrawCursorTask=function(c,b,f,e,g,d,h,k){function l(b){n.activate("placeholder",11);var c=g.getItemPosition(b);if(null!=c){var f=c.actualPosition,h=new a.common.Rect(c.contentPosition),q=d.getTemplateParams(b).template,l=q.templateConfig;c=l.cursorPadding;h.offset(c.left,c.top,c.right,c.bottom);var v=new a.common.RenderEventArgs;v.context=e.getConfig(b);v.isCursor=
!0;v.isSelected=k.isSelected(b);v.templateName=l.name;m.transformRect(f.x,f.y,f.width,f.height,!0,this,function(a,b,c,d){n.template(a,b,c,d,h.x,h.y,h.width,h.height,q.cursorTemplate.template(),q.cursorTemplate.getHashCode(),q.cursorTemplate.render,v,{borderWidth:l.cursorBorderWidth})})}}var n,m;return{process:function(){var a=h.getCursorTreeItem();n=c();n.reset("placeholder",11);null!=a&&(m=b.getTransform(),l(a));return!1}}};a.orgdiagram.DrawFrameHighlightTask=function(c,b,f,e,g,d){var h;return{process:function(){var k=
g.getHighlightTreeItem();h=c();h.reset("frameplaceholder",8);if(null!=k){var l=b.getPositions()[k];if(null!=l){var n=e.getTemplateParams(k).template,m=n.templateConfig,q=m.highlightPadding;h.activate("frameplaceholder",8);var p=new a.common.RenderEventArgs;p.context=f.getConfig(k);p.isCursor=d.getCursorTreeItem()==k;p.isSelected=!0;p.templateName=m.name;k=new a.common.Rect(0,0,Math.round(l.width),Math.round(l.height));k.offset(q.left,q.top,q.right,q.bottom);h.template(Math.round(l.x),Math.round(l.y),
Math.round(l.width),Math.round(l.height),Math.round(k.x),Math.round(k.y),Math.round(k.width),Math.round(k.height),n.dotHighlightTemplate.template(),n.dotHighlightTemplate.getHashCode(),n.dotHighlightTemplate.render,p,{borderWidth:m.highlightBorderWidth})}}return!1}}};a.orgdiagram.DrawFrameItemsTask=function(c,b,f,e,g){var d;return{process:function(){var h=new a.common.Thickness(b.getFrameThickness());d=c();d.reset("frameplaceholder",9);if(!h.isEmpty()){h=new a.common.PolylinesBuffer;var k=f.getPositions(),
l=g.getOptions(),n=new a.common.Marker,m;for(m in k)if(k.hasOwnProperty(m)){var q=k[m];var p=e.getTemplateParams(m).template.templateConfig;var r=g.getItemOptions(m),t=null,u=null,w=null;null!=r&&(u=t=r.itemTitleColor,w=r.minimizedItemShapeType);t=t||p.minimizedItemBorderColor||"#000080";u=u||p.minimizedItemFillColor||"#000080";null==w&&(w=null!==p.minimizedItemShapeType?p.minimizedItemShapeType:l.minimizedItemShapeType);r=null===p.minimizedItemCornerRadius?p.minimizedItemSize.width:p.minimizedItemCornerRadius;
null==w||6==w?(p=h.getPolyline(new a.common.PaletteItem({lineColor:t,lineWidth:p.minimizedItemLineWidth,lineType:p.minimizedItemLineType,fillColor:u,opacity:p.minimizedItemOpacity})),p.addSegment(new a.common.DotSegment(q.x,q.y,q.width,q.height,r))):n.draw(h,w,q,new a.common.PaletteItem({lineColor:t,lineWidth:p.minimizedItemLineWidth,lineType:p.minimizedItemLineType,fillColor:u,opacity:p.minimizedItemOpacity}))}d.activate("frameplaceholder",9);d.polylinesBuffer(h)}return!1}}};a.orgdiagram.DrawHighlightAnnotationTask=
function(c,b,f,e,g,d,h,k,l,n,m,q,p){function r(b){var c,n,r,y,B,C=!0,D=k.getItemPosition(b),x=D.actualPosition;switch(D.actualVisibility){case 2:case 3:case 1:var G=d.getItemOptions(b);switch(G.showCallout){case 2:C=!1;break;case 1:C=!1;break;default:C=v.showCallout}C?(t.activate("placeholder",12),u.transformRect(x.x,x.y,x.width,x.height,!0,this,function(d,k,u,C){d=new a.common.Rect(d,k,u,C);k=new a.common.Point(d.centerPoint());C=e.getOptions().scale;var J=new a.common.Point(l.getPlaceholderOffset()),
L=new a.common.Size(f.getScrollPanelSize()),z=new a.common.Thickness(f.getFrameThickness());u=new a.common.Thickness(p.getMedian());J.scale(1/C);z.scale(1/C);L.scale(1/C);u.scale(1/C);C=new a.common.Rect(J.x,J.y,L.width,L.height);C.offset(u);u=C.getProjectionPoint(d.centerPoint());null==u&&(u=k);if(D.actualVisibility>=v.calloutMaximumVisibility&&4!=D.actualVisibility||!C.overlaps(d)){y=a.common.isNullOrEmpty(G.calloutTemplateName)?a.common.isNullOrEmpty(G.templateName)?a.common.isNullOrEmpty(v.defaultCalloutTemplateName)?
v.defaultTemplateName:v.defaultCalloutTemplateName:G.templateName:G.calloutTemplateName;B=h.getTemplate(y,h.DefaultWidgetTemplateName);d=u;k=B.templateConfig.itemSize;J=new a.common.Rect(d.x,d.y,k.width,k.height);switch(v.orientationType){case 0:case 1:J.y-=k.height/4;d.x<C.horizontalCenter()?J.x+=v.calloutPlacementOffset:J.x-=v.calloutPlacementOffset+k.width;break;default:J.x-=k.width/4,d.y<C.verticalCenter()?J.y+=v.calloutPlacementOffset:J.y-=v.calloutPlacementOffset+k.height}J.x<C.x?J.x=C.x+v.calloutPlacementOffset:
J.right()>C.right()&&(J.x-=J.right()-C.right()+v.calloutPlacementOffset);J.y<C.y?J.y=C.y+v.calloutPlacementOffset:J.bottom()>C.bottom()&&(J.y-=J.bottom()-C.bottom()+v.calloutPlacementOffset);n=J;c=new a.common.Rect(n);c.addRect(u.x,u.y);c.offset(50);u.x-=c.x;u.y-=c.y;n.x-=c.x;n.y-=c.y;r=new a.common.RenderEventArgs;r.context=g.getConfig(b);r.isCursor=m.getCursorTreeItem()==b;r.isSelected=q.isSelected(b);r.templateName=B.templateConfig.name;t.show("calloutplaceholder");t.activate("calloutplaceholder",
15);t.position("calloutplaceholder",c.x,c.y,c.width,c.height);t.template(n.x,n.y,n.width,n.height,0,0,n.width,n.height,B.itemTemplate.template(),B.itemTemplate.getHashCode(),B.itemTemplate.render,r,null);w.pointerPlacement=0;w.cornerRadius=v.calloutCornerRadius;w.offset=v.calloutOffset;w.opacity=v.calloutOpacity;w.lineWidth=v.calloutLineWidth;w.pointerWidth=v.calloutPointerWidth;w.borderColor=v.calloutBorderColor;w.fillColor=v.calloutfillColor;w.draw(u,n)}else t.hide("calloutplaceholder")})):t.hide("calloutplaceholder");
break;case 4:t.hide("calloutplaceholder")}}var t,u,w=new a.common.Callout(c()),v;return{process:function(){var a=n.getHighlightTreeItem();t=c();t.reset("calloutplaceholder",15);null!==a&&(u=b.getTransform(),v=d.getOptions(),r(a));return!1}}};a.orgdiagram.DrawHighlightPathAnnotationTask=function(c,b,f,e,g){function d(b,c,d,e){var f,h;if(0<d.length){var k=new a.common.PolylinesBuffer;switch(g){case 1:b.activate("placeholder",5);break;case 2:b.activate("placeholder",7)}var l={};var n=0;for(f=d.length;n<
f;n+=1){var u=d[n];if(null!=u.items&&0<u.items.length){var w=u.items.slice(0);var v=w[0];if(e.hasNode(v)){var x=1;for(h=w.length;x<h;x+=1){var E=w[x];e.hasNode(E)&&(l.hasOwnProperty(v)?l[v].push(E):l[v]=[E],v=E)}}}}var A={};for(y in l)A[y]={},l.hasOwnProperty(y)&&e.getShortestPath(this,y,l[y],function(a,b,c){return a.weight},function(a,b){A[y][b]=a});n=0;for(f=d.length;n<f;n+=1)if(u=d[n],x=new a.common.PaletteItem({lineColor:null!=u.color?u.color:c.highlightLinesColor,lineWidth:null!=u.lineWidth?
u.lineWidth:c.highlightLinesWidth,lineType:null!=u.lineType?u.lineType:c.highlightLinesType,fillColor:null,opacity:u.opacity}),l=k.getPolyline(x),null!=u.items&&0<u.items.length&&(w=u.items.slice(0),v=w[0],e.hasNode(v)))for(x=1,h=w.length;x<h;x+=1)if(E=w[x],e.hasNode(E)){var F=A[v][E]||[];for(v=F.length-2;0<=v;--v){var y=F[v+1];var B=F[v];var C=e.edge(y,B);C.from==y?C.polyline.clone().mergeTo(l):l.addInverted(C.polyline.clone());u.showArrows&&(B==C.parentsArrowId||B==C.childrenArrowId)&&l.addArrow(u.lineWidth,
function(a){a.mergeTo(k.getPolyline(a.paletteItem))})}v=E}b.polylinesBuffer(k)}}return{process:function(){var a=e.getGraph(),k=b.getOptions(),l=f.getAnnotations(),n=c();switch(g){case 1:n.reset("placeholder",5);break;case 2:n.reset("placeholder",7)}d(n,k,l,a);return!1}}};a.orgdiagram.DrawHighlightTask=function(c,b,f,e,g,d,h,k,l){function n(b){m.activate("placeholder",8);var c=g.getItemPosition(b),f=c.actualPosition,h=d.getTemplateParams(b).template,p=h.templateConfig,n=p.highlightPadding;var x=new a.common.RenderEventArgs;
x.context=e.getConfig(b);x.isCursor=k.getCursorTreeItem()==b;x.isSelected=l.isSelected(b);x.templateName=p.name;q.transformRect(f.x,f.y,f.width,f.height,!0,this,function(b,d,e,f){var g=new a.common.Rect(0,0,Math.round(e),Math.round(f));g.offset(n.left,n.top,n.right,n.bottom);1==c.actualVisibility?m.template(b,d,e,f,g.x,g.y,g.width,g.height,h.highlightTemplate.template(),h.highlightTemplate.getHashCode(),h.highlightTemplate.render,x,{borderWidth:p.highlightBorderWidth}):m.template(Math.round(b),Math.round(d),
Math.round(e),Math.round(f),Math.round(g.x),Math.round(g.y),Math.round(g.width),Math.round(g.height),h.dotHighlightTemplate.template(),h.dotHighlightTemplate.getHashCode(),h.dotHighlightTemplate.render,x,{borderWidth:p.highlightBorderWidth})})}var m,q;return{process:function(){var a=h.getHighlightTreeItem();m=c();m.reset("placeholder",8);null!=a&&(q=b.getTransform(),n(a));return!1}}};a.orgdiagram.DrawItemLabelsTask=function(c,b,f,e,g){function d(b,c){var d=[];if(0==c.showLabels||1==c.showLabels)for(var e in b.treeItemsPositions)if(b.treeItemsPositions.hasOwnProperty(e)){var f=
c.itemsOptions[e],h=b.treeItemsPositions[e],g=h.actualPosition;null!=f&&b.transform.transformRect(g.x,g.y,g.width,g.height,!0,this,function(b,e,g,m){switch(h.actualVisibility){case 1:if(0==c.showLabels){var k=new a.common.Label(b,e,g,m);k.weight=1E4;k.labelType=1;d.push(k)}break;case 2:case 3:k=f;var q=h,l=null;if(!a.common.isNullOrEmpty(k.label)){var p=3;switch(k.showLabel){case 0:switch(c.showLabels){case 0:switch(q.actualVisibility){case 3:case 2:p=0}break;case 1:p=2}break;case 1:p=2}switch(p){case 0:var n=
q.leftPadding+q.rightPadding;break;case 2:n=1E4;break;case 3:n=0}if(3!=p){var r=null!=k.labelSize?k.labelSize:c.labelSize;q=3!=k.labelOrientation?k.labelOrientation:3!=c.labelOrientation?c.labelOrientation:0;l=0!=k.labelPlacement?k.labelPlacement:0!=c.labelPlacement?c.labelPlacement:1;switch(q){case 0:var t=r.width;var u=r.height;break;case 1:case 2:u=r.width,t=r.height}r=c.labelOffset;switch(l){case 0:case 1:var w=new a.common.Rect(b+g/2-t/2,e-r-u,t,u);switch(q){case 0:var v=0;var x=2;break;case 1:x=
v=1;break;case 2:v=2,x=1}break;case 2:case 11:w=new a.common.Rect(b+g+r,e-r-u,t,u);switch(q){case 0:v=1;x=2;break;case 1:v=1;x=0;break;case 2:x=v=2}break;case 3:w=new a.common.Rect(b+g+r,e+m/2-u/2,t,u);switch(q){case 0:x=v=1;break;case 1:x=v=0;break;case 2:v=0,x=2}break;case 4:case 12:w=new a.common.Rect(b+g+r,e+m+r,t,u);switch(q){case 0:v=1;x=0;break;case 1:v=2;x=0;break;case 2:v=1,x=2}break;case 5:w=new a.common.Rect(b+g/2-t/2,e+m+r,t,u);switch(q){case 0:x=v=0;break;case 1:v=2;x=1;break;case 2:x=
v=1}break;case 6:case 10:w=new a.common.Rect(b-t-r,e+m+r,t,u);switch(q){case 0:v=2;x=0;break;case 1:x=v=2;break;case 2:v=1,x=0}break;case 7:w=new a.common.Rect(b-t-r,e+m/2-u/2,t,u);switch(q){case 0:v=2;x=1;break;case 1:v=0;x=2;break;case 2:x=v=0}break;case 8:case 9:switch(w=new a.common.Rect(b-t-r,e-r-u,t,u),q){case 0:x=v=2;break;case 1:v=1;x=2;break;case 2:v=2,x=0}}b=v;l=new a.common.Label(w);l.labelType=p;l.weight=n;l.text=k.label;l.labelOrientation=q;l.horizontalAlignmentType=b;l.verticalAlignmentType=
x}}k=l;null!=k&&d.push(k)}})}0==c.showLabels&&a.common.getCrossingRectangles(this,d,function(a,b){if(a.isActive&&b.isActive)switch(a.labelType){case 1:switch(b.labelType){case 0:b.isActive=!1;break;case 2:b.isActive=!1}break;case 2:switch(b.labelType){case 1:a.isActive=!1;break;case 0:b.isActive=!1}break;case 0:switch(b.labelType){case 1:a.isActive=!1;break;case 0:a.weight<=b.weight?a.isActive=!1:b.isActive=!1;break;case 2:a.isActive=!1}}});b.graphics.activate("placeholder",10);e={fontSize:c.labelFontSize,
fontFamily:c.labelFontFamily,fontStyle:c.labelFontStyle,fontWeight:c.labelFontWeight,fontColor:c.labelColor};g=0;for(var k=d.length;g<k;g+=1){var t=d[g];if(t.isActive)switch(t.labelType){case 0:case 2:b.graphics.text(t.x,t.y,t.width,t.height,t.text,t.labelOrientation,t.horizontalAlignmentType,t.verticalAlignmentType,e)}}}return{process:function(){var a=e.getOptions(),f={graphics:c(),transform:b.getTransform(),treeItemsPositions:g.getItemsPositions()};a={showLabels:a.showLabels,labelFontSize:a.labelFontSize,
labelFontFamily:a.labelFontFamily,labelFontStyle:a.labelFontStyle,labelFontWeight:a.labelFontWeight,labelColor:a.labelColor,itemsOptions:e.getItemsOptions(),labelSize:a.labelSize,labelOrientation:a.labelOrientation,labelPlacement:a.labelPlacement,labelOffset:a.labelOffset};f.graphics.reset("placeholder",10);d(f,a);return!1}}};a.orgdiagram.DrawMinimizedItemsTask=function(c,b,f,e,g,d){function h(){var b=new a.common.PolylinesBuffer,c,d=new a.common.Marker,f,h,w,v,x,E,A;for(A in m)if(m.hasOwnProperty(A)){var F=
m[A];var y=F.actualPosition;var B=e.getItemOptions(A);l.transformRect(y.x,y.y,y.width,y.height,!0,this,function(e,m,k,q){switch(F.actualVisibility){case 2:x=g.getTemplateParams(A),E=x.template.templateConfig,w=h=f=null,v=0,null!=B&&(h=f=B.itemTitleColor,w=B.minimizedItemShapeType),f=f||E.minimizedItemBorderColor||"#000080",h=h||E.minimizedItemFillColor||"#000080",null==w&&(w=null!==E.minimizedItemShapeType?E.minimizedItemShapeType:n.minimizedItemShapeType),v=null===E.minimizedItemCornerRadius?E.minimizedItemSize.width:
E.minimizedItemCornerRadius,null==w||6==w?(c=b.getPolyline(new a.common.PaletteItem({lineColor:f,lineWidth:E.minimizedItemLineWidth,lineType:E.minimizedItemLineType,fillColor:h,opacity:E.minimizedItemOpacity})),c.addSegment(new a.common.DotSegment(e,m,k,q,v))):d.draw(b,w,new a.common.Rect(e,m,k,q),new a.common.PaletteItem({lineColor:f,lineWidth:E.minimizedItemLineWidth,lineType:E.minimizedItemLineType,fillColor:h,opacity:E.minimizedItemOpacity}))}})}k.activate("placeholder",9);k.polylinesBuffer(b)}
var k,l,n,m;return{process:function(){k=c();l=b.getTransform();n=e.getOptions();m=d.getItemsPositions();k.reset("placeholder",9);h();return!1}}};a.orgdiagram.DrawShapeAnnotationTask=function(c,b,f,e,g,d,h,k){function l(b,c){var d,e;switch(k){case 1:var f=n.activate("placeholder",3);break;case 2:f=n.activate("placeholder",13)}var h=0;for(d=b.length;h<d;h+=1){var g=b[h];if(null!=g.items&&0<g.items.length){var l=new a.common.Rect;var r=0;for(e=g.items.length;r<e;r+=1){var t=c(g.items[r]);null!=t&&l.addRect(t.actualPosition)}if(!l.isEmpty()){var B=
new a.common.Shape(n);t=new a.orgdiagram.ShapeAnnotationConfig;var C="opacity cornerRadius shapeType offset lineWidth borderColor fillColor lineType labelSize labelOffset labelPlacement zOrderType".split(" ");r=0;for(e=C.length;r<e;r+=1){var D=C[r];B[D]=g.hasOwnProperty(D)?g[D]:t[D]}B.position=l;B.orientationType=q.orientationType;B.panelSize=f.size;B.labelTemplate=p;B.hasLabel=null!=g.templateName||null!=g.label;var K=new a.common.RenderEventArgs;K.context=g;K.templateName=B.labelTemplate;m.transformRect(l.x,
l.y,l.width,l.height,!0,this,function(b,c,d,e){b=new a.common.Rect(b,c,d,e);B.draw(b,K)})}}}}var n,m,q,p;return{process:function(){n=c();m=b.getTransform();q=e.getOptions();p=h.getTemplate();switch(k){case 1:n.reset("placeholder",3);break;case 2:n.reset("placeholder",13)}l(g.getAnnotations(),d.getItemPosition);return!1}}};a.orgdiagram.DrawTreeItemsTask=function(c,b,f,e,g,d,h,k,l,n,m,q,p,r){function t(){var b,c=n.getCursorTreeItem(),e=u(),f;for(f in w)if(w.hasOwnProperty(f)){var h=w[f];var g=h.actualPosition;
1==h.actualVisibility&&x.transformRect(g.x,g.y,g.width,g.height,!0,this,function(g,k,q,p){var n=new a.common.Rect(g,k,q,p);if(null==e||e.overlaps(n)){var r=l.getTemplateParams(f);n=r.template;b=new a.common.RenderEventArgs;b.id=f;b.context=d.getConfig(f);b.isCursor=f==c;b.isSelected=m.isSelected(f);b.templateName=n.templateConfig.name;b.template=r.template;b.isActive=r.isActive;b.hasSelectorCheckbox=r.hasSelectorCheckbox;b.hasButtons=r.hasButtons;b.hasGroupTitle=r.hasGroupTitle;b.buttons=r.buttons;
b.onButtonsRender=r.onButtonsRender;v.activate("placeholder",12);v.template(g,k,q,p,h.contentPosition.x,h.contentPosition.y,h.contentPosition.width,h.contentPosition.height,n.itemTemplate.template(),n.itemTemplate.getHashCode(),n.itemTemplate.render,b,{borderWidth:n.templateConfig.itemBorderWidth});if(r.hasGroupTitle){var t=0;switch(E.groupTitlePlacementType){case 2:case 0:t=2;break;case 3:t=q-(E.groupTitlePanelSize-4)}v.template(g,k,q,p,t,h.contentPosition.y,E.groupTitlePanelSize-4,h.contentPosition.height+
2,y.template(),y.getHashCode(),y.render,b,null)}r.hasSelectorCheckbox&&(v.activate("placeholder",16),v.template(g,k,q,p,h.contentPosition.x,p-(E.checkBoxPanelSize-4),h.contentPosition.width,E.checkBoxPanelSize-4,F.template(),F.getHashCode(),F.render,b,null));if(r.hasButtons){v.activate("placeholder",16);r=0;switch(E.groupTitlePlacementType){case 2:case 0:r=q-(E.buttonsPanelSize-4);break;case 3:r=2}v.template(g,k,q,p,r,h.contentPosition.y,E.buttonsPanelSize-4,Math.max(h.contentPosition.height,p-h.contentPosition.y),
A.template(),n.templateConfig.name+A.getHashCode(),A.render,b,null)}}})}}function u(){var b=null;if(null!=k){b=e.getOptions().scale;var c=new a.common.Point(k.getPlaceholderOffset()),d=new a.common.Rect(h.getContentSize()),g=new a.common.Size(f.getOptimalPanelSize());c.scale(1/b);g.scale(1/b);b=new a.common.Rect(c.x,c.y,Math.min(g.width,d.width),Math.min(g.height,d.height))}return b}var w,v,x,E,A,F,y;return{process:function(){v=c();E=g.getOptions();w=h.getItemsPositions();x=b.getTransform();A=r.getTemplate();
F=p.getTemplate();y=q.getTemplate();v.reset("placeholder",12);v.reset("placeholder",16);t();return!1}}};a.orgdiagram.ActiveItemsTask=function(c,b){function f(a,c){var d=[],e;var f=0;for(e=c.length;f<e;f+=1){var h=c[f],g=b.getTemplate(h.templateName,a.defaultTemplateName,b.DefaultWidgetTemplateName).templateConfig;h.isActive&&g.isActive&&d.push(h.id)}return d}var e=[],g={},d=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,
hash:g},b=c.getOptions();e=d.read(e,f(b,b.items),"items",a);return a.isChanged},getActiveItems:function(){return g.items}}};a.orgdiagram.AnnotationLabelTemplateTask=function(a,b){var c=null;return{process:function(){return!1},getTemplate:function(){null==c&&(c=new b.AnnotationLabelTemplate);return c}}};a.orgdiagram.ButtonsTemplateTask=function(a,b){var c=null;return{process:function(){return!1},getTemplate:function(){null==c&&(c=new b.ButtonsTemplate);return c}}};a.orgdiagram.CheckBoxTemplateTask=
function(a,b){var c=null;return{process:function(){c=null;return!0},getTemplate:function(){if(null==c){var e=a.getOptions();c=new b.CheckBoxTemplate(e.selectCheckBoxLabel)}return c}}};a.orgdiagram.GroupTitleTemplateTask=function(a,b){var c=null;return{process:function(){c=null;return!0},getTemplate:function(){if(null==c){var e=a.getOptions();c=new b.GroupTitleTemplate(e)}return c}}};a.orgdiagram.ItemTemplateParamsTask=function(c,b,f){function e(a,b,c){var d=!1;switch(b){case 0:switch(c){case 0:d=
a;break;case 1:d=!0;break;case 2:d=!1}break;case 1:d=!0;break;case 2:d=!1}return d}var g={};return{process:function(){var d=c.getOptions(),h=0<d.buttons.length||null!=d.onButtonsRender,k=b.getCursorItem(),l=d.items,n;g={};var m=0;for(n=l.length;m<n;m+=1){var q=l[m],p=new a.orgdiagram.TemplateParams,r=k==q.id,t=f.getTemplate(q.templateName,d.defaultTemplateName,f.DefaultWidgetTemplateName),u=t.templateConfig,w=null!=u.buttons&&0<u.buttons.length;w=w||null!=u.onButtonsRender;p.template=t;p.isActive=
q.isActive&&u.isActive;p.isActive&&(p.hasSelectorCheckbox=e(r,q.hasSelectorCheckbox,d.hasSelectorCheckbox),p.hasButtons=(h||w)&&e(r,q.hasButtons,d.hasButtons),p.hasButtons&&(p.buttons=w?u.buttons:d.buttons,p.onButtonsRender=u.onButtonsRender||d.onButtonsRender));p.hasGroupTitle=!a.common.isNullOrEmpty(q.groupTitle);g[q.id]=p}return!0},getTemplateParams:function(a){return g[a]}}};a.common.LabelAnnotationTemplate=function(){var a=["div",{"class":["bp-item","bp-label-annotation"]}];return{template:function(){return a},
getHashCode:function(){return"defaultLabelAnnotationTemplate"},render:function(a,c){c.element.innerHTML=c.context.title}}};a.orgdiagram.ReadTemplatesTask=function(c,b){var f={},e=[];return{process:function(){var g,d=c.getOptions(),h=d.templates;f={};e=[];var k=new a.orgdiagram.TemplateConfig;f.DefaultWidgetTemplate=new a.orgdiagram.Template(k,new b.ItemTemplate(d,k),new b.HighlightTemplate(d,k),new b.DotHighlightTemplate(d,k),new b.CursorTemplate(d,k));e.push(f.DefaultWidgetTemplate);var l=new a.orgdiagram.TemplateConfig;
l.name="DefaultWidgetLabelAnnotationTemplate";l.isActive=!1;l.itemSize=new a.common.Size(100,20);l.minimizedItemSize=new a.common.Size(0,0);l.minimizedItemCornerRadius=l.minimizedItemSize.width/2;k=l;f.DefaultWidgetLabelAnnotationTemplate=new a.orgdiagram.Template(k,new b.LabelAnnotationTemplate,null,new b.DotHighlightTemplate(d,k),null);l=0;for(g=h.length;l<g;l+=1)k=h[l],f[k.name]=new a.orgdiagram.Template(k,a.common.isNullOrEmpty(k.itemTemplate)?new b.ItemTemplate(d,k):new b.UserTemplate(d,k.itemTemplate,
d.onItemRender),a.common.isNullOrEmpty(k.highlightTemplate)?new b.HighlightTemplate(d,k):new b.UserTemplate(d,k.highlightTemplate,d.onHighlightRender),new b.DotHighlightTemplate(d,k),a.common.isNullOrEmpty(k.cursorTemplate)?new b.CursorTemplate(d,k):new b.UserTemplate(d,k.cursorTemplate,d.onCursorRender)),e.push(f[k.name]);return!0},getTemplate:function(a,b,c){return f[a]||f[b]||f[c]},getItemTemplates:function(){return e},DefaultWidgetTemplateName:"DefaultWidgetTemplate",DefaultWidgetLabelAnnotationTemplateName:"DefaultWidgetLabelAnnotationTemplate"}};
a.orgdiagram.CombinedNormalVisibilityItemsTask=function(c,b,f,e,g,d,h,k,l,n,m,q){function p(a,b){b=[];var c,d,e={};var f=0;for(c=a.length;f<c;f+=1){var h=a[f];var g=h.getItems();h=0;for(d=g.length;h<d;h+=1){var m=g[h];e.hasOwnProperty(m)||(b.push(m),e[m]=!0)}}return b}var r=[],t={},u=[b,f,e,g,d,h,k,l,n,m,q],w=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,hash:t},b=c.getOptions();r=w.read(r,p(u),"items",a);if(0==b.pageFitMode||
1==b.minimalVisibility)a.isChanged=!1;return a.isChanged},isItemSelected:function(a){return t.items.hasOwnProperty(a)}}};a.orgdiagram.CursorItemTask=function(a,b){var c=null;return{process:function(){var e=a.getCursorItem(),f=null!=b?b.getActiveItems():{};c=null!=e&&f.hasOwnProperty(e)?e:null;return!0},getCursorTreeItem:function(){return c},getItems:function(){return null!=c?[c]:[]}}};a.orgdiagram.CursorNeighboursTask=function(a,b){function c(a,b){var c=[];null!==a&&b.loopNeighbours(this,a,function(a,
b,d){0===b.visibility&&c.push(a);return!0});return c}var e=[];return{process:function(){var f=b.getLogicalFamily(),d=a.getCursorTreeItem();e=c(d,f);return!0},getItems:function(){return e}}};a.orgdiagram.HighlightItemTask=function(a,b){var c=null;return{process:function(){var e=a.getHighlightItem(),f=null!=b?b.getActiveItems():{};c=null!=e&&f.hasOwnProperty(e)?e:null;return!0},getHighlightTreeItem:function(){return c}}};a.orgdiagram.NormalVisibilityItemsByAnnotationTask=function(c){function b(a){var b=
[],c={},d,e;var f=0;for(d=a.length;f<d;f+=1){var g=a[f];if(g.selectItems){var p=g.items;g=0;for(e=p.length;g<e;g+=1){var r=p[g];null==r||c.hasOwnProperty(r)||(b.push(r),c[r]=!0)}}}return b}var f=[],e={},g=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,hash:e},h=c.getAnnotations();f=g.read(f,b(h),"items",a);return a.isChanged},getItems:function(){return f}}};a.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask=function(c){function b(a){var b=
[],c={},d;var e=0;for(d=a.length;e<d;e+=1){var f=a[e];f.selectItems&&(null==f.fromItem||c.hasOwnProperty(f.fromItem)||(b.push(f.fromItem),c[f.fromItem]=!0),null==f.toItem||c.hasOwnProperty(f.toItem)||(b.push(f.toItem),c[f.toItem]=!0))}return b}var f=[],e={},g=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,hash:e},h=c.getAnnotations();f=g.read(f,b(h),"items",a);return a.isChanged},getItems:function(){return f}}};a.orgdiagram.SelectedItemsTask=
function(c,b){function f(a){var c=[],d={},e;var f=0;for(e=a.length;f<e;f+=1){var h=a[f];null==h||d.hasOwnProperty(h)||(d[h]=!0,null!=b.getConfig(h)&&c.push(h))}return c}var e=[],g={},d=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,hash:g},b=c.getSelectedItems();e=d.read(e,f(b),"items",a);return a.isChanged},getItems:function(){return e},isSelected:function(a){return g.items.hasOwnProperty(a)}}};a.orgdiagram.SelectionPathItemsTask=
function(a,b,f,e){function c(a,b,c){var d=[],e={},f;var h=0;for(f=a.length;h<f;h+=1){var g=a[h];switch(c){case 1:b.loopParents(this,g,function(a,c){if(null!=e[a])return b.SKIP;4!=c.visibility&&d.push(a);e[a]=!0})}}return d}var d=[];return{process:function(){var h=e.getSelectionPathMode(),g=a.getLogicalFamily(),l=b.getCursorTreeItem(),n=f.getItems().slice(0);n.push(l);d=c(n,g,h);return!0},getItems:function(){return d}}};a.orgdiagram.CombinedContextsTask=function(a,b){return{process:function(){return!0},
getConfig:function(c){return a.getConfig(c)||null!=b&&b.getConfig(c)}}};a.orgdiagram.ConnectionsGraphTask=function(c,b,f,e,g,d){function h(a,b){for(var c=0,d=b.length;c<d;c+=1){var e=b[c];a.getShortestPath(this,e.from,[e.to],function(a,b,c){return a.weight},function(b,c){c=0;for(var d=b.length-1;c<d;c+=1){var e=a.edge(b[c],b[c+1]);e.isOppositeFlow=!0;e.hasArrow=!0}})}}var k={graph:null,nodeid:0};return{process:function(){var l=c().activate("placeholder",6),n=e.getBundles(),m=e.getNestedLayoutBottomConnectorIds(),
q=f.getOptions(),p=null!=d?d.getLoops():[],r={graph:a.common.graph(),nodeid:0};l={treeItemsPositions:g.getItemsPositions(),nestedLayoutBottomConnectorIds:m,transform:b.getTransform(),hasGraphics:l.hasGraphics};m={connectorType:q.connectorType,showExtraArrows:q.showExtraArrows,bevelSize:q.bevelSize,elbowType:q.elbowType};for(var t=0,u=n.length;t<u;t+=1)n[t].trace(r,l,m);h(r.graph,p,q.extraArrowsMinimumSpace);k=r;return!0},getGraph:function(){return k.graph}}};a.orgdiagram.ItemsPositionsTask=function(c,
b,f,e,g,d,h,k,l,n,m){function q(b){var c=new a.common.Rect(0,0,0,0),d;switch(N.orientationType){case 2:case 3:b.invert()}if(!G.isEmpty())switch(I.pageFitMode){case 0:case 5:var e=[new a.orgdiagram.LevelVisibility(0,1)];c=p(e,0);break;default:e=[new a.orgdiagram.LevelVisibility(0,1)];var f=[];switch(I.minimalVisibility){case 2:f.push(2);break;case 0:case 3:case 4:f.push(2),f.push(3)}G.loopLevelsReversed(this,function(b,c){for(c=0;c<f.length;c+=1)e.push(new a.orgdiagram.LevelVisibility(b,f[c]))});var h=
p(e,e.length-1);h.addRect(b);h.offset(0,0,5,5);var g=d=b=null;c=p(e,0);if(!r(c,h)&&(b=0,c=p(e,e.length-1),r(c,h))){for(g=d=e.length-1;1<d-b;)g=Math.floor((d+b)/2),c=p(e,g),r(c,h)?d=g:b=g;d!==g&&(c=p(e,d))}}return c}function p(b,c){var d;z=[];G.loopLevels(this,function(b,c){b=new a.orgdiagram.TreeLevelPosition;b.currentvisibility=1;z.push(b)});for(d=0;d<=c;d+=1){var e=b[d];z[e.level].currentvisibility=e.currentvisibility}w();A();v();x();return new a.common.Rect(0,0,Math.round(u()),Math.round(t()))}
function r(a,b){var c=!1;switch(I.pageFitMode){case 1:b.width>=a.width&&(c=!0);break;case 2:b.height>=a.height&&(c=!0);break;case 3:b.height>=a.height&&b.width>=a.width&&(c=!0)}return c}function t(){var a=z[z.length-1];return a.shift+a.nextLevelShift}function u(){var a=0,b;var c=0;for(b=z.length;c<b;c+=1)a=Math.max(a,z[c].currentOffset);return a+=I.normalItemsInterval}function w(){var b=n.getCursorTreeItem();D={};G.loopLevels(this,function(c,d){var e=z[c];G.loopLevelItems(this,c,function(c,d,f){f=
new a.orgdiagram.TreeItemPosition;var h=m.isItemSelected(c)?1:d.visibility;d=l.getTemplateParams(c);h=0===h?e.currentvisibility:h;var g=b==c,k=I,q=N.orientationType;switch(h){case 1:var p=d.template.templateConfig;var n=new a.common.Size(p.itemSize);var r=new a.common.Rect(0,0,n.width,n.height);g&&(n.height+=p.cursorPadding.top+p.cursorPadding.bottom,n.width+=p.cursorPadding.left+p.cursorPadding.right,r.x=p.cursorPadding.left,r.y=p.cursorPadding.top);d.hasSelectorCheckbox&&(n.height+=k.checkBoxPanelSize);
if(d.hasButtons)switch(n.width+=k.buttonsPanelSize,k.groupTitlePlacementType){case 3:r.x+=k.buttonsPanelSize}if(d.hasGroupTitle)switch(n.width+=k.groupTitlePanelSize,k.groupTitlePlacementType){case 3:break;default:r.x+=k.groupTitlePanelSize}break;case 2:p=d.template.templateConfig;n=new a.common.Size(p.minimizedItemSize);break;case 3:case 4:n=new a.common.Size}switch(q){case 2:case 3:n.invert()}f.actualVisibility=h;f.actualSize=n;f.contentPosition=r;D[c]=f})})}function v(){var a,b;G.loopLevels(this,
function(c,d){var e=z[c];e.shift=0;e.depth=0;e.actualVisibility=4;b=a=null;G.loopLevelItems(this,c,function(c,d,f){c=D[c];e.depth=Math.max(e.depth,c.actualSize.height);switch(c.actualVisibility){case 2:case 3:case 4:b=b?Math.min(b,c.actualSize.height):c.actualSize.height;break;default:a=a?Math.min(a,c.actualSize.height):c.actualSize.height}e.actualVisibility=Math.min(e.actualVisibility,c.actualVisibility)});null==a&&(a=e.depth);null!=b&&b>a&&(a=b);switch(I.verticalAlignment){case 0:e.horizontalConnectorsDepth=
a/2;break;case 1:e.horizontalConnectorsDepth=e.depth/2;break;case 2:e.horizontalConnectorsDepth=e.depth-a/2}})}function x(){var a=I.lineLevelShift,b,c=0,d=0;var e=8*M.linesWidth;switch(M.arrowsDirection){case 1:c=e;d=0;break;case 2:c=0,d=e}e=0;for(b=z.length;e<b;e+=1){var f=z[e];var h=k.getConnectorsStacksSizes(e);a+=f.setShift(a,E(f.actualVisibility),d,c,h.parentsStackSize)}}function E(a){var b=0;switch(a){case 1:b=I.normalLevelShift;break;case 2:b=I.dotLevelShift;break;case 3:case 4:b=I.lineLevelShift}return b}
function A(){var a;var b=0;for(a=z.length;b<a;b+=1)z[b].currentOffset=0;H.loopPostOrder(this,function(a,b,c,d){c=D[a];var e=c.actualVisibility;d=G.getLevelIndex(a);d=z[d];e=O[0===e?d.currentvisibility:e]/2;var f=8*M.linesWidth;c.leftPadding=e+(0<d.currentOffset?e*b.relationDegree*I.cousinsIntervalMultiplier:0);c.rightPadding=e;0!=M.arrowsDirection&&(b.connectorPlacement&8&&(c.leftPadding+=f),b.connectorPlacement&2&&(c.rightPadding+=f));c.offset=d.currentOffset+c.leftPadding;d.currentOffset=c.offset+
c.actualSize.width+c.rightPadding;if(H.hasChildren(a))if(a=F(b),0<a)B(b,a);else if(0>a){a=-a;y(b,a);var h=null;var g={};var m=null;c=H.parent(b.id);if(null!==c&&(H.loopChildrenReversed(this,c.id,function(a,c,d){if(c===b)h=[];else if(null!==h){a=null;d=[];var e;var f=J[c.id];void 0===f&&(f=[]);f=f.slice();f.splice(0,0,c.id);var k=0;for(e=f.length;k<e;k+=1){var q=D[f[k]];d[k]=q.offset+q.actualSize.width+q.rightPadding}f=[];k=L[b.id];void 0===k&&(k=[]);k=k.slice();k.splice(0,0,b.id);e=0;for(q=k.length;e<
q;e+=1){var p=D[k[e]];f[e]=p.offset-p.leftPadding}k=Math.min(d.length,f.length);for(e=0;e<k&&!(q=f[e]-d[e],a=null!==a?Math.min(a,q):q,0>=q);e+=1);l=Math.floor(a);g[c.id]=l;if(0<l)h.splice(0,0,c);else return m=c,!0}}),0<h.length)){d=null;if(null!==m)for(f=[m],f=f.concat(h),f.push(b),d=[[m]],c=1,e=f.length;c<e;c+=1){var k=f[c-1];var q=f[c];2==k.gravity||1==q.gravity?d[d.length-1].push(q):d.push([q])}else d=[h.slice(0)],d[d.length-1].push(b);if(0<d.length)for(h=d[d.length-1],c=h.length-2;0<=c;--c){q=
h[c];var l=g[q.id];a=Math.min(l,a);y(q,a);B(q,a)}f=a/(d.length-1);for(e=d.length-2;0<e;--e)for(k=d[e],c=k.length-1;0<=c;--c)q=k[c],l=g[q.id],a=Math.min(e*f,Math.min(l,a)),y(q,a),B(q,a)}}})}function F(a){var b=D[a.id];b=b.offset+b.actualSize.width/2;var c=null;if(null===a.visualAggregatorId){var d=null;H.loopChildren(this,a.id,function(a,b,c){d=b;if(d.connectorPlacement&1)return!0});var e=D[d.id];var f=null;H.loopChildrenReversed(this,a.id,function(a,b,c){f=b;if(f.connectorPlacement&1)return!0});a=
D[f.id];switch(P.horizontalAlignment){case 1:c=e.offset+e.actualSize.width/2;break;case 2:c=a.offset+a.actualSize.width/2;break;case 0:c=(e.offset+a.offset+a.actualSize.width)/2}}else a=D[a.visualAggregatorId],c=a.offset+a.actualSize.width/2;return b-c}function y(a,b){var c=D[a.id];c.offset+=b;a=z[G.getLevelIndex(a.id)];a.currentOffset=Math.max(a.currentOffset,c.offset+c.actualSize.width+c.rightPadding)}function B(a,b){var c,d;H.loopLevels(this,a.id,function(a,e,f){c=D[a];c.offset+=b;d=z[G.getLevelIndex(a)];
d.currentOffset=Math.max(d.currentOffset,c.offset+c.actualSize.width);return!0})}function C(){var b=null;G.loopLevels(this,function(c,d){var e=z[c];G.loopLevelItems(this,c,function(c,d,f){c=D[c];d=c.actualSize;var h=b;f=0;switch(c.actualVisibility){case 1:switch(I.verticalAlignment){case 0:f=0;break;case 1:f=(e.depth-d.height)/2;break;case 2:f=e.depth-d.height}break;case 2:case 3:case 4:f=e.horizontalConnectorsDepth-d.height/2}d=new a.common.Rect(c.offset,e.shift+f,d.width,d.height);f=e.shift+e.horizontalConnectorsDepth;
var g=null!=h?h.shift+h.connectorShift:null;h=null!=h?h.levelSpace/2:null;var m=e.shift+e.connectorShift;var k=e.levelSpace/2;c.actualPosition=d;c.horizontalConnectorsShift=f;c.topConnectorShift=g;c.topConnectorInterval=h;c.bottomConnectorShift=m;c.bottomConnectorInterval=k});b=e})}var D={};var K=null;var G,z,H,L,J,N,M,P,I,Q,O;return{process:function(){var m=I=e.getOptions();var l=[];l[1]=m.normalItemsInterval;l[2]=m.dotItemsInterval;l[3]=m.lineItemsInterval;l[4]=m.lineItemsInterval;O=l;N=f.getOptions();
M=g.getOptions();P=d.getOptions();G=k.getTreeLevels();H=h.getVisualTree();L=h.getLeftMargins();J=h.getRightMargins();z=[];D={};m=c.getOptimalPanelSize();Q=b.getOptions();m.scale(1/Q.scale);m=new a.common.Rect(0,0,m.width,m.height);K=q(m);C();return!0},getItemsPositions:function(){return D},getItemPosition:function(a){return D[a]},getContentSize:function(){return K}}};a.orgdiagram.OrgTreeTask=function(c){var b;function f(c){var d,f=0,l=a.common.tree();var n=0;for(d=c.length;n<d;n+=1){var m=c[n];if(null!=
m.id){var q=new a.orgdiagram.OrgItem(m);var p=parseInt(m.id,10);f=Math.max(isNaN(p)?0:p,f);l.add(m.parent,q.id,q)}}f+=1;c=new a.orgdiagram.ItemConfig;c.id=f;c.title="internal root";c.isVisible=!1;c.isActive=!1;var r=new a.orgdiagram.OrgItem(c);r.hideParentConnection=!0;r.hideChildrenConnection=!0;l.add(null,r.id,r);l.loopLevels(this,function(a,b,c){if(0<c)return l.BREAK;r.id!=a&&(l.adopt(r.id,a),b.itemType=0)});e(l);b=l;g=f;return!0}function e(a){a.loopLevels(this,function(b,c,d){var e=!0;if(c.isVisible)return a.SKIP;
a.loopChildren(this,b,function(a,b,c){if(0!=b.itemType)return e=!1,!0});if(e)c.hideChildrenConnection=!0,a.loopChildren(this,b,function(a,b,c){b.hideParentConnection=!0});else return a.SKIP})}var g=b=null;return{process:function(){f(c.getItems());return!0},getOrgTree:function(){return b},getMaximumId:function(){return g}}};a.orgdiagram.PaletteManagerTask=function(c,b){var f;return{process:function(){var e=[];null!=b&&(e=b.getOptions().linesPalette);f=new a.common.PaletteManager(c.getOptions(),e);
return!0},getPaletteManager:function(){return f}}};a.orgdiagram.VisualTreeLevelsTask=function(c,b){function f(b,c,d,e,f){var h,g,m,k,q,l,n,E={},A,F,y;d.loopLevels(this,function(f,p){p=new a.orgdiagram.TreeLevelConnectorStackSize;c[f]=p;n=[];d.loopLevelItems(this,f,function(c,f,h){h=[];if(!E.hasOwnProperty(c)&&(f.connectorPlacement&4&&h.push(c),h=h.concat(f.partners),0<h.length)){l=new a.common.VerticalConnectorBundle(h,[]);for(var g=0,m=h.length;g<m;g+=1)E[h[g]]=l;e.loopChildren(this,c,function(a,
b,c){b.connectorPlacement&1&&l.toItems.push(a)});1<h.length&&n.push(l);(1<l.fromItems.length||0<l.toItems.length)&&b.push(l)}f.connectorPlacement&8&&(l=new a.common.HorizontalConnectorBundle(c,d.getPrevItem(c)),b.push(l));f.connectorPlacement&2&&(l=new a.common.HorizontalConnectorBundle(c,d.getNextItem(c)),b.push(l))});if(0<n.length){y=a.common.pile();h=0;for(g=n.length;h<g;h+=1){l=n[h];F=A=null;m=0;for(k=l.fromItems.length;m<k;m+=1)q=d.getItemPosition(l.fromItems[m]),A=null!=A?Math.min(A,q):q,F=
null!=F?Math.max(F,q):q;y.add(A,F,l)}p.parentsStackSize=y.resolve(this,function(a,b,c,d,e){c.fromOffset=d+1;c.fromStackSize=e})}})}var e=null,g=null,d=null,h=new a.orgdiagram.TreeLevelConnectorStackSize;return{process:function(){var b=c.getVisualTree();e=a.common.TreeLevels();b.loopLevels(this,function(a,b,c){e.addItem(c,a,b)});g=[];d=[];f(g,d,e,b);return!0},getTreeLevels:function(){return e},getBundles:function(){return g},getConnectorsStacksSizes:function(a){return d[a]||h},getNestedLayoutBottomConnectorIds:function(){return{}}}};
a.orgdiagram.VisualTreeTask=function(c,b,f,e){function g(a,b,c){var f,g,m,q,v,y,L,J,B,F,A,I,Q,O={},E,R={},W,S,T,V={},U;a.loopPostOrder(this,function(a,b,c,d){b.hasVisibleChildren=b.isVisible||b.hasVisibleChildren;null!=d&&(d.hasVisibleChildren=d.hasVisibleChildren||b.hasVisibleChildren)});a.loopLevels(this,function(d,m,k){var l;if(!e&&!m.hasVisibleChildren)return a.SKIP;var I=c.node(d);I||(I=u({visibility:4,connectorPlacement:0,parentId:null,actualItemType:0},m),c.add(null,d,I));T=S=0;null!=(y=c.indexOf(d))&&
(S=y,T=c.countSiblings(d)-y-1);var L=[];a.loopChildren(this,d,function(a,b,h){if(e||b.hasVisibleChildren){f=u({parentId:d,actualItemType:b.itemType},b);switch(I.actualItemType){case 7:case 8:case 6:switch(f.actualItemType){case 7:case 8:case 6:f.actualItemType=2;break;case 0:f.actualItemType=1}}switch(f.actualItemType){case 5:w(I,f),f.connectorPlacement=5,l=u({visibility:4}),c.add(l.id,f.id,f),f=l;case 8:case 2:g=c.parent(d);if(I.connectorPlacement&2)q=p(c,x.navigationFamily,I),c.add(g.id,f.id,f,
q+1),f.connectorPlacement=6,f.gravity=2;else if(I.connectorPlacement&8)v=r(c,x.navigationFamily,I),c.add(g.id,f.id,f,v),f.connectorPlacement=12,f.gravity=1;else switch(b.adviserPlacementType){case 2:q=p(c,x.navigationFamily,I);c.add(g.id,f.id,f,q+1);f.connectorPlacement=6;f.gravity=2;break;default:v=r(c,x.navigationFamily,I),c.add(g.id,f.id,f,v),f.connectorPlacement=12,f.gravity=1}switch(f.actualItemType){case 8:null!=I.parentId?w(c.node(I.parentId),f):w(I,f,!0);break;case 2:w(I,f)}break;case 4:w(I,
f),f.connectorPlacement=5,l=u({visibility:4}),c.add(l.id,f.id,f),f=l;case 1:a=I;var m=b.levelOffset||0,k=null;h=!1;for(var n=0;n<=m;){k=null==k?a:c.node(k.visualAggregatorId);if(null==k.visualAggregatorId){var t=u({visibility:4,visualAggregatorId:null,connectorPlacement:h?0:5});c.insert(k.id,t.id,t);k.visualAggregatorId=t.id}n+=1}a=k;switch(b.adviserPlacementType){case 2:c.add(a.id,f.id,f,0);f.connectorPlacement=6;f.gravity=2;break;default:c.add(a.id,f.id,f),f.connectorPlacement=12,f.gravity=1}1==
f.actualItemType&&w(I,f);break;case 0:b=b.levelOffset||0;null==L[b]?L[b]=[f]:L[b].push(f);w(I,f);break;case 7:case 6:g=c.parent(d);if(I.connectorPlacement&2)c.add(g.id,f.id,f,S),f.connectorPlacement=6,f.gravity=2;else if(I.connectorPlacement&8)c.add(g.id,f.id,f,c.countChildren(g.id)-T),f.connectorPlacement=12,f.gravity=1;else{switch(b.adviserPlacementType){case 2:c.add(g.id,f.id,f,S);f.gravity=2;break;default:c.add(g.id,f.id,f,c.countChildren(g.id)-T),f.gravity=1}switch(f.actualItemType){case 6:f.connectorPlacement=
5;break;case 7:f.connectorPlacement=4}}null!=I.parentId?w(c.node(I.parentId),f):w(I,f,!0)}}});switch(I.actualItemType){case 7:case 8:case 6:break;default:U=[],null!=(g=c.parent(d))&&c.loopChildrenRange(this,g.id,S,c.countChildren(g.id)-T,function(b,c,e){if(c.id==d)U.push(c);else switch(c.actualItemType){case 7:case 8:case 6:a.parentid(c.id)==d&&U.push(c)}}),1<U.length&&(V[d]=U)}O[d]=[];R[d]=[];k=[];if(0<L.length){g=h(c,I);for(var C=0;C<L.length-1;C+=1){var B=L[C];if(null!=B){var z=t(c,g,4==I.visibility&&
0===I.connectorPlacement);k.push([z]);var F=0;switch(b.horizontalAlignment){case 0:F=Math.ceil(B.length/2)-1;break;case 1:F=-1;break;case 2:F=B.length-1}for(y=F;0<=y;--y)J=B[y],c.add(g.id,J.id,J,0),J.connectorPlacement=5,J.gravity=2;for(y=F+1;y<B.length;y+=1)J=B[y],c.add(g.id,J.id,J),J.connectorPlacement=5,J.gravity=1;g=z}}n(a,c,b,I,L[L.length-1],m.childrenPlacementType,O[d],R[d]);O[d]=O[d].concat(k);R[d]=R[d].concat(L.slice(0,L.length-1))}});a.loopPostOrder(this,function(a,e,f,h){e=c.node(a);var g=
null!=V[f];if(null!=e){f=R[a];var q=O[a];if(null!=h){var p=g;switch(h.placeAssistantsAboveChildren){case 0:b.placeAssistantsAboveChildren&&(p=!0);break;case 1:p=!0}if(p&&(A=k(c,e),0<A&&(e.visualDepth=A+1,null!==e.visualAggregatorId)))for(m=c.node(e.visualAggregatorId),p=c.hasChildren(m.id),y=0;y<A-1;y+=1)m=t(c,m,!p)}if(null!=h){p=g;switch(h.placeAdvisersAboveChildren){case 0:b.placeAdvisersAboveChildren&&(p=!0);break;case 1:p=!0}if(p){h=0;g=c.parent(e.id);var n,r;if(null!==g){p=c.indexOf(e.id);for(n=
1;null!=(r=c.getChild(g.id,p+n));)if(r.connectorPlacement&8)h=Math.max(h,l(c,r)),n+=1;else break;for(n=1;null!=(r=c.getChild(g.id,p-n));)if(r.connectorPlacement&2)h=Math.max(h,l(c,r)),n+=1;else break}A=h;if(1<A)for(e.visualDepth+=A-1,p=c.hasChildren(a),m=e,y=0;y<A-1;y+=1)m=t(c,m,!p)}}I=[];y=0;for(L=f.length;y<L;y+=1)for(W=f[y],B=I[y]=0,F=W.length;B<F;B+=1)I[y]=Math.max(I[y],l(c,W[B]));y=0;for(L=I.length;y<L;y+=1)if(Q=I[y],1<Q)for(B=0,F=q[y].length;B<F;B+=1)if(E=q[y][B],c.hasChildren(E.id))for(A=Q;1<
A;)E=t(c,E,!1),--A;null!=V[a]&&d(c,e,V[a])}})}function d(a,b,c){var d,e=0,f=[],g;var m=0;for(d=c.length;m<d;m+=1){var k=c[m];e=Math.max(e,k.visualDepth)}m=0;for(d=c.length;m<d;m+=1){k=c[m];var q=h(a,k);var l=1;for(g=k;null!=g.visualAggregatorId;)g=a.node(g.visualAggregatorId),g.connectorPlacement=5,l+=1;for(;l<e;)q=t(a,q,!1),l+=1;f.push(h(a,q).id)}g=h(a,b);if(a.hasChildren(g.id)){q=c[Math.floor(c.length/2)];if(1<c.length&&0===c.length%2)for(m=a.parent(q.id),d=p(a,x.navigationFamily,q),l=a.getChild(m.id,
d).gravity||a.getChild(m.id,d+1).gravity,q=u({visibility:4,connectorPlacement:q.connectorPlacement&10,gravity:l}),a.add(m.id,q.id,q,d+1),l=1;l<e;)q=t(a,q,!1),q.connectorPlacement=0,l+=1;m=0;for(d=c.length;m<d;m+=1)k=c[m],x.navigationFamily.loopChildren(this,b.id,function(a,c,d){switch(c.actualItemType){case 5:case 2:case 4:case 1:break;default:b.id!=k.id&&w(k,c)}return x.navigationFamily.SKIP});q=h(a,q);a.moveChildren(g.id,q.id)}q.partners=f}function h(a,b){for(;null!=b.visualAggregatorId;)b=a.node(b.visualAggregatorId);
return b}function k(a,b){var c=0;null!=b.visualAggregatorId&&a.loopLevels(this,b.id,function(d,e,f){if(b.visualAggregatorId==d)return a.SKIP;c=f+1});return c}function l(a,b){var c=0;a.loopLevels(this,b.id,function(a,b,d){c=d+1});return c+1}function n(a,b,c,d,e,f,g,k){var l,p,n,r=4==d.visibility&&0===d.connectorPlacement;switch(c.horizontalAlignment){case 0:case 1:var t=3;break;case 2:t=2}0===f&&(f=q(a,d)?0===c.leavesPlacementType?3:c.leavesPlacementType:0===c.childrenPlacementType?2:c.childrenPlacementType);
d=h(b,d);3==f&&3>e.length&&(f=2);switch(f){case 2:f=0;for(l=e.length;f<l;f+=1)c=e[f],g=a.node(c.id),b.add(d.id,c.id,c),c.connectorPlacement=(g.hideParentConnection?0:1)|(g.hideChildrenConnection?0:4),0===f&&(c.relationDegree=1);break;case 3:f=Math.min(c.maximumColumnsInMatrix,Math.ceil(Math.sqrt(e.length)));l=Math.ceil(e.length/f);var v=Math.ceil(f/2);for(p=0;p<v;p+=1)for(a=d,n=0;n<l;n+=1){t=m(e,2*p,n,f);c=m(e,2*p+1,n,f);void 0===g[n]&&(g[n]=[],k[n]=[]);null!==t&&(0===p&&(t.relationDegree=1),b.add(a.id,
t.id,t),t.connectorPlacement=(r?0:2)|4,t.gravity=2,k[n].push(t));if(null!==t||null!==c){var I=u({visibility:4,connectorPlacement:r?0:5});b.add(a.id,I.id,I);g[n].push(I)}null!==c&&(b.add(a.id,c.id,c),c.connectorPlacement=(r?0:8)|4,c.gravity=1,k[n].push(c));a=I}2<f&&(d.visualAggregatorId=null);break;case 1:f=0;for(l=e.length;f<l;f+=1){c=e[f];I=u({visibility:4,connectorPlacement:r?0:5});switch(t){case 2:b.add(d.id,c.id,c);b.add(d.id,I.id,I);c.connectorPlacement=(r?0:2)|4;c.gravity=2;break;case 3:b.add(d.id,
I.id,I),b.add(d.id,c.id,c),c.connectorPlacement=(r?0:8)|4,c.gravity=1}g[f]=[I];k[f]=[c];d=I}break;default:throw"Children placement is undefined!";}}function m(a,b,c,d){0<d%2&&(b===d-1?b=a.length:b===d&&(b=d-1));b=c*d+b;return b>a.length-1?null:a[b]}function q(a,b){var c=!1,d=!0;a.loopChildren(this,b.id,function(b,e,f){c=!0;if(0===e.itemType&&a.hasChildren(b))return d=!1,!0});return c&&d}function p(a,b,c){var d=null,e={},f=a.parent(c.id);a.loopChildrenReversed(this,f.id,function(a,f,h){if(null===d)a==
c.id&&(d=-1,e[c.id]=!0,b.loopChildren(this,c.id,function(a,c,d){if(0<d)return b.BREAK;e[a]=!0}));else if(e.hasOwnProperty(a))b.loopChildren(this,f.id,function(a,c,d){if(0<d)return b.BREAK;e[a]=!0});else return d=h,!0});return d}function r(a,b,c){var d=null,e={},f=a.parent(c.id);a.loopChildren(this,f.id,function(a,f,h,g){if(null===d)a==c.id&&(d=g+1,e[c.id]=!0,b.loopChildren(this,c.id,function(a,c,d){if(0<d)return b.BREAK;e[a]=!0}));else if(e.hasOwnProperty(a))b.loopChildren(this,a,function(a,c,d){if(0<
d)return b.BREAK;e[a]=!0});else return d=h,!0});return d}function t(a,b,c){c=u({visibility:4,visualAggregatorId:b.visualAggregatorId,connectorPlacement:4==b.visibility&&0===b.connectorPlacement||c?0:5});a.insert(b.id,c.id,c);b.visualAggregatorId=c.id;return c}function u(b,c){var d=new a.orgdiagram.TreeItem,e;for(e in b)b.hasOwnProperty(e)&&(d[e]=b[e]);null!=c?(d.id=c.id,d.visibility=c.isVisible?0:4):(E+=1,d.id=E);return d}function w(a,b,c){var d=[];c||4==a.visibility||!A.hasOwnProperty(a.id)?(c||
d.push(a.id),x.navigationFamily.loopParents(this,a.id,function(a,b,c){if(4!=b.visibility&&(d.push(a),A.hasOwnProperty(a)))return x.navigationFamily.SKIP})):d.push(a.id);null!=x.navigationFamily.node(b.id)?x.navigationFamily.adopt(d,b.id):x.navigationFamily.add(d,b.id,b)}function v(a,b,c){a.loop(this,function(a,d){b[a]=[];c[a]=[]});a.loopPostOrder(this,function(a,d,e,f){d=b[e];f=c[e];var h=b[a],g=c[a],m;if(null!=e){d[0]||(d[0]=a);e=0;for(m=h.length;e<m;e+=1)d[e+1]||(d[e+1]=h[e]);f[0]=a;e=0;for(m=g.length;e<
m;e+=1)f[e+1]=g[e]}})}var x={visualTree:null,leftMargins:{},rightMargins:{},navigationFamily:null},E,A;return{process:function(){var d=c.getOrgTree(),e=f.getOptions();A=null!=b?b.getActiveItems():{};x.visualTree=a.common.tree();x.navigationFamily=a.common.family();E=c.getMaximumId();d.hasNodes()&&g(d,e,x.visualTree);x.leftMargins={};x.rightMargins={};v(x.visualTree,x.leftMargins,x.rightMargins);return!0},getVisualTree:function(){return x.visualTree},getLogicalFamily:function(){return x.navigationFamily},
getConnectionsFamily:function(){return x.connectionsFamily},getLeftMargins:function(){return x.leftMargins},getRightMargins:function(){return x.rightMargins}}};a.common.AnnotationLabelTemplate=function(){var c=["div",{type:"checkbox",name:"checkbox","class":["bp-item","bp-corner-all","bp-connector-label"]}];return{template:function(){return c},getHashCode:function(){return"defaultAnnotationLabelTemplate"},render:function(b,c){b=c.context;a.common.isArray(b.label)?(c.element.innerHTML="",c.element.appendChild(a.common.JsonML.toHTML(b.label))):
c.element.innerHTML=b.label}}};a.common.ButtonsTemplate=function(c){var b=["div",{style:{position:"absolute"}}];return{template:function(){return b},getHashCode:function(){return"defaultButtonsTemplate"},render:function(b,c){b=0;var e=c.buttons,d;switch(c.renderingMode){case 0:for(d=0;d<e.length;d+=1){var f=e[d];var k=["button",{style:{position:"absolute",top:b+"px",left:"0px"},"class":["orgdiagrambutton","bp-button"],"data-buttonname":f.name},["span",{style:{width:f.size.width+"px",height:f.size.height+
"px"},"class":["bp-icon",f.icon]}]];c.element.appendChild(a.common.JsonML.toHTML(k));b+=10+f.size.height}}}}};a.common.CheckBoxTemplate=function(a){var b=["div",["label",["nobr",["input",{type:"checkbox",name:"checkbox","class":"bp-selectioncheckbox"}],"\u00a0",["span",{name:"selectiontext","class":"bp-selectiontext"},a]]]];return{template:function(){return b},getHashCode:function(){return"defaultCheckBoxTemplate"},render:function(a,b){a=b.element.firstChild.firstChild.firstChild;a.checked=b.isSelected;
a.setAttribute("data-id",b.id);b.element.firstChild.firstChild.childNodes[2].setAttribute("data-id",b.id)}}};a.common.CursorTemplate=function(a,b){var c=["div",{style:{width:b.itemSize.width+b.cursorPadding.left+b.cursorPadding.right+"px",height:b.itemSize.height+b.cursorPadding.top+b.cursorPadding.bottom+"px",borderWidth:b.cursorBorderWidth+"px"},"class":["bp-item","bp-corner-all","bp-cursor-frame"]}];return{template:function(){return c},getHashCode:function(){return"defaultCursorTemplate"},render:function(a,
b){}}};a.common.DotHighlightTemplate=function(a,b){var c=function(a){var b=a.minimizedItemCornerRadius;null==b&&(b=Math.max(a.highlightPadding.left+a.minimizedItemSize.width+a.highlightPadding.right,a.highlightPadding.top+a.minimizedItemSize.height+a.highlightPadding.bottom)+a.highlightBorderWidth);return["div",{style:{borderWidth:a.highlightBorderWidth+"px",MozBorderRadius:b+"px",WebkitBorderRadius:b+"px","-khtml-border-radius":b+"px",borderRadius:b+"px"},"class":["bp-item","bp-highlight-dot-frame"]}]}(b);
return{template:function(){return c},getHashCode:function(){return"defaultDotHighlightTemplate"},render:function(a,b){}}};a.common.GroupTitleTemplate=function(c){var b=["div",{style:{fontSize:c.groupTitleFontSize,fontFamily:c.groupTitleFontFamily,fontWeight:c.groupTitleFontWeight,fontStyle:c.groupTitleFontStyle},"class":["bp-item","bp-corner-all","bp-grouptitle-frame"]},function(a,b,g){var d="";switch(a){case 1:d="rotate(-90deg)";break;case 2:d="rotate(90deg)"}a=c.groupTitleFontSize;var e=c.groupTitleFontFamily,
f=c.groupTitleFontWeight,l=c.groupTitleFontStyle,n=null;switch(b){case 0:n="center";break;case 1:n="left";break;case 2:n="right"}b={fontSize:a,fontFamily:e,fontWeight:f,fontStyle:l,position:"absolute",padding:0,margin:0,textAlign:n,lineHeight:1,"-webkit-transform-origin":"center center","-moz-transform-origin":"center center","-o-transform-origin":"center center","-ms-transform-origin":"center center","-webkit-transform":d,"-moz-transform":d,"-o-transform":d,"-ms-transform":d,transform:d};switch(g){case 0:g=
["div",{style:b,"class":["bp-title-content","bp-item","bp-corner-all"]}];break;default:b.borderCollapse="collapse";d=null;switch(g){case 1:d="middle";break;case 0:d="top";break;case 2:d="bottom"}g=["table",{style:b},["tbody",["tr",["td",{style:{verticalAlign:d,padding:0},"class":"bp-title-content"}]]]]}return g}(c.groupTitleOrientation,c.groupTitleHorizontalAlignment,c.groupTitleVerticalAlignment)];return{template:function(){return b},getHashCode:function(){return"defaultGroupTitleTemplate"},render:function(b,
e){var f=e.context;b=f.groupTitleColor||c.groupTitleColor;var d={},h=e.width,k=e.height;d.left=Math.round(h/2-k/2)+"px";d.top=Math.round(k/2-h/2)+"px";d.width=k+"px";d.height=h+"px";d.maxWidth=d.width;d.maxHeight=d.height;a.common.JsonML.applyStyles(e.element.firstChild,d);f=f.groupTitle||"";f=f.replace(/\n/g,"<br/>");switch(c.groupTitleVerticalAlignment){case 0:d=e.element.firstChild;break;default:d=e.element.firstChild.firstChild.firstChild.firstChild,d.style.borderCollapse="collapse"}d.style.color=
a.common.highestContrast(b,c.itemTitleSecondFontColor,c.itemTitleFirstFontColor);d.textContent=f;a.common.JsonML.applyStyles(e.element,{backgroundColor:b})}}};a.common.HighlightTemplate=function(a,b){var c=["div",{style:{borderWidth:b.highlightBorderWidth+"px"},"class":["bp-item","bp-corner-all","bp-highlight-frame"]}];return{template:function(){return c},getHashCode:function(){return"defaultHighlightTemplate"},render:function(a,b){}}};a.common.ItemTemplate=function(c,b){var f=function(b){var c=new a.common.Size(b.itemSize);
c.width-=2*b.itemBorderWidth;c.height-=2*b.itemBorderWidth;return["div",{style:{borderWidth:b.itemBorderWidth+"px"},"class":["bp-item","bp-corner-all","bt-item-frame"]},["div",{name:"titleBackground",style:{top:"2px",left:"2px",width:c.width-4+"px",height:"18px"},"class":["bp-item","bp-corner-all","bp-title-frame"]},["div",{name:"title",style:{top:"1px",left:"4px",width:c.width-4-8+"px",height:"16px"},"class":["bp-item","bp-title"]}]],["div",{name:"photoBorder",style:{top:"24px",left:"2px",width:"50px",
height:"60px"},"class":["bp-item","bp-photo-frame"]},["img",{name:"photo",alt:"",style:{width:"50px",height:"60px"}}]],["div",{name:"description",style:{top:"24px",left:"56px",width:c.width-4-56+"px",height:"74px"},"class":["bp-item","bp-description"]}]]}(b);return{template:function(){return f},getHashCode:function(){return"defaultItemTemplate"},render:function(b,f){b=f.context;var d=null!=b.itemTitleColor?b.itemTitleColor:"#4169e1",e=a.common.highestContrast(d,c.itemTitleSecondFontColor,c.itemTitleFirstFontColor),
g=f.element;f=g.firstChild;var l=g.childNodes[1].firstChild,n=f.firstChild;g=g.childNodes[2];a.common.JsonML.applyStyles(f,{backgroundColor:d});l.src=b.image;l.alt=b.title;a.common.JsonML.applyStyles(n,{color:e});n.textContent=b.title;g.textContent=b.description}}};a.common.UserTemplate=function(c,b,f){var e=a.common.hashCode(JSON.stringify(b));return{template:function(){return b},getHashCode:function(){return e},render:function(b,d){if(null!=f)f(b,d);else{var e=d.context,g=null!=e.itemTitleColor?
e.itemTitleColor:"#4169e1",l=a.common.highestContrast(g,c.itemTitleSecondFontColor,c.itemTitleFirstFontColor);a.common.getElementsByName(this,d.element,"photo",function(a){a.src=e.image;a.alt=e.title});a.common.getElementsByName(this,d.element,"titleBackground",function(b){a.common.JsonML.applyStyles(b,{background:g})});a.common.getElementsByName(this,d.element,"title",function(b){a.common.JsonML.applyStyles(b,{color:l});b.textContent=e.title});a.common.getElementsByName(this,d.element,"description",
function(a){a.textContent=e.description})}}}};a.orgdiagram.BaseControl=function(c,b,f,e,g){function d(b,c){null==c&&(c=!0);switch(b){case 1:h(c,!1);break;case 2:z.layout.forceCenterOnCursor=!1;z.tasks.process("HighlightItemOptionTask",null,!1);z.graphics.end();break;default:t(z.layout),r(z.layout),p(z.layout,z.name),b=z.layout,b.mousePanel.addEventListener("mousemove",v),b.mousePanel.addEventListener("click",E),b.mousePanel.addEventListener("dblclick",A),b.mousePanel.addEventListener("change",x),
b.element.addEventListener("keydown",F),b.scrollPanel.addEventListener("scroll",k),z.options.enablePanning&&a.common.isChrome()&&(b.scrollPanel.draggable=!0,b.scrollPanel.addEventListener("dragstart",y),b.scrollPanel.addEventListener("drag",C),b.scrollPanel.addEventListener("dragend",C),b.scrollPanel.addEventListener("dragover",B)),b.frameMousePanel.addEventListener("mousemove",u),b.frameMousePanel.addEventListener("click",w),z.tasks=f(l,n,m,q,g),z.graphics=a.common.createGraphics(z.options.graphicsType,
z.layout.element),z.graphics.debug=!1,h(!0,!1)}}function h(b,c){z.layout.forceCenterOnCursor=b;z.tasks.process("OptionsTask",null,c);z.graphics.end();b&&(b=z.tasks.getTask("CenterOnCursorTask"),b=b.getPlaceholderOffset(),z.layout.scrollPanel.scrollLeft=b.x,z.layout.scrollPanel.scrollTop=b.y);b=a.common.getFixOfPixelALignment(z.layout.element);a.common.JsonML.applyStyles(z.layout.scrollPanel,{marginBottom:"0px",marginRight:"0px",marginLeft:b.width+"px",marginTop:b.height+"px"})}function k(a){null==
P&&(P=window.setTimeout(function(){z.layout.forceCenterOnCursor=!1;z.tasks.process("LayoutOptionsTask",null,!1);z.graphics.end();window.clearTimeout(P);P=null},200))}function l(){return z.options}function n(){return z.graphics}function m(){var b=z.layout,c=a.common.getInnerSize(b.controlPanel),d=new a.common.Point(b.scrollPanel.scrollLeft,b.scrollPanel.scrollTop);return{forceCenterOnCursor:b.forceCenterOnCursor,scrollPanelSize:c,placeholderOffset:d}}function q(b){var c=z.layout,d=a.common.getFixOfPixelALignment(c.element);
a.common.JsonML.applyStyles(c.controlPanel,{marginLeft:d.width+"px",marginTop:d.height+"px"});a.common.JsonML.applyStyles(c.mousePanel,b.scaledContentSize.getCSS());d="scale("+b.scale+","+b.scale+")";d={"transform-origin":"0 0",transform:d,"-ms-transform":d,"-webkit-transform":d,"-o-transform":d,"-moz-transform":d};a.common.JsonML.applyStyles(c.placeholder,a.common.mergeObjects(d,b.contentSize.getCSS()));b.autoSize&&a.common.JsonML.applyStyles(c.element,b.controlSize.getCSS());a.common.JsonML.applyStyles(c.framePlaceholder,
a.common.mergeObjects(d,b.framePlaceholderSize.getCSS()));a.common.JsonML.applyStyles(c.frameMousePanel,b.controlSize.getCSS());d=new a.common.Thickness(b.frameThickness);a.common.JsonML.applyStyles(c.scrollPanel,a.common.mergeObjects({left:d.left+"px",top:d.top+"px"},b.viewportSize.getCSS()));c.scrollPanel.setAttribute("class",d.isEmpty()?name:"bp-scrollframe "+name)}function p(b,d){var e=a.common.getInnerSize(b.element);e=new a.common.Rect(0,0,e.width,e.height);var f=a.common.getFixOfPixelALignment(c);
a.common.JsonML.appendDOM(b.element,a.common.JsonML.toHTML(["div",{tabindex:0,style:{position:"relative",overflow:"hidden",top:"0px",left:"0px",width:"100%",height:"100%",padding:"0px",marginBottom:"0px",marginRight:"0px",marginLeft:f.width+"px",marginTop:f.height+"px"},name:"controlPanel","class":d,$:function(a){b.controlPanel=a}},["div",{style:a.common.mergeObjects({position:"absolute",overflow:"hidden"},e.getCSS()),name:"frameMousePanel","class":d,$:function(a){b.frameMousePanel=a}},["div",{style:a.common.mergeObjects({position:"absolute",
overflow:"hidden"},e.getCSS()),name:"framePlaceholder","class":["frameplaceholder",d],$:function(a){b.framePlaceholder=a}}]],["div",{style:a.common.mergeObjects({position:"absolute",overflow:"auto","-webkit-overflow-scrolling":"touch",top:"0px",left:"0px",width:e.width+"px",height:e.height+"px"},e.getCSS()),name:"scrollPanel","class":d,$:function(a){b.scrollPanel=a}},["div",{style:a.common.mergeObjects({position:"absolute",overflow:"visible"},e.getCSS()),name:"mousePanel","class":d,$:function(a){b.mousePanel=
a}},["div",{style:a.common.mergeObjects({position:"absolute",overflow:"hidden"},e.getCSS()),name:"placeholder","class":["placeholder",d],$:function(a){b.placeholder=a}},["div",{style:{position:"absolute",overflow:"visible",top:"0px",left:"0px",width:"0px",height:"0px"},name:"calloutPlaceholder","class":["calloutplaceholder",d],$:function(a){b.calloutPlaceholder=a}}]]]]]))}function r(){var a=z.layout.controlPanel;if(null!=a){var b=a.parentNode;null!=b&&b.removeChild(a)}}function t(a){null!=a.mousePanel&&
(a.mousePanel.removeEventListener("mousemove",v),a.mousePanel.removeEventListener("click",E),a.mousePanel.removeEventListener("dblclick",A),a.mousePanel.removeEventListener("change",x));null!=a.element&&a.element.removeEventListener("keydown",F);null!=a.scrollPanel&&(a.scrollPanel.removeEventListener("scroll",k),a.scrollPanel.removeEventListener("dragstart",y),a.scrollPanel.removeEventListener("drag",C),a.scrollPanel.removeEventListener("dragend",C),a.scrollPanel.removeEventListener("dragover",B));
null!=a.frameMousePanel&&(a.frameMousePanel.removeEventListener("mousemove",u),a.frameMousePanel.removeEventListener("click",w))}function u(b){var c=a.common.getElementOffset(z.layout.frameMousePanel),d=b.pageX-c.left;c=b.pageY-c.top;var e=z.tasks.getTask("ProjectItemsToFrameTask"),f=z.tasks.getTask("HighlightItemOptionTask");f.hasHighlightEnabled()&&(d=e.getTreeItemForMousePosition(d,c,f.getGravityRadius()),D(b,d))}function w(b){var c=a.common.getElementOffset(z.layout.frameMousePanel),d=b.pageX-
c.left,f=b.pageY-c.top,h=z.tasks.getTask("ProjectItemsToFrameTask");c=z.tasks.getTask("CursorItemOptionTask");var g=z.tasks.getTask("HighlightItemOptionTask");d=h.getTreeItemForMousePosition(d,f,g.getGravityRadius());null!==d&&(f=e(z,null,d,void 0),G("onMouseClick",b,f),!f.cancel&&c.hasCursorEnabled()&&(K(b,d),z.layout.element.focus()))}function v(b){var c=a.common.getElementOffset(z.layout.mousePanel),d=b.pageX-c.left;c=b.pageY-c.top;var e=z.tasks.getTask("CreateTransformTask"),f=z.tasks.getTask("HighlightItemOptionTask");
f.hasHighlightEnabled()&&(d=e.getTreeItemForMousePosition(d,c,f.getGravityRadius()),D(b,d))}function x(b){var c=b.target,d=c.getAttribute("data-id");if(null!=d){var f=(z.options.selectedItems||[]).slice(),h=e(z,null,d,void 0),g=a.common.indexOf(f,d);G("onSelectionChanging",b,h);h.cancel||(0<=g?f.splice(g,1):f.push(d),z.options.selectedItems=f,0>g?c.setAttribute("checked","checked"):c.removeAttribute("checked"),G("onSelectionChanged",b,h))}}function E(b){var c=a.common.getElementOffset(z.layout.mousePanel),
d=b.pageX-c.left,f=b.pageY-c.top,h=z.tasks.getTask("CreateTransformTask");c=z.tasks.getTask("CursorItemOptionTask");var g=z.tasks.getTask("HighlightItemOptionTask");d=h.getTreeItemForMousePosition(d,f,g.getGravityRadius());f=b.target;null!==d&&(a.common.hasClass(f,z.name+"button")||a.common.hasClass(f.parentNode,z.name+"button")?(c=a.common.hasClass(f,z.name+"button")?f:f.parentNode,c=c.getAttribute("data-buttonname"),f=e(z,null,d,c),G("onButtonClick",b,f)):"checkbox"!==f.getAttribute("name")&&"selectiontext"!==
f.getAttribute("name")&&(f=e(z,null,d,void 0),G("onMouseClick",b,f),!f.cancel&&c.hasCursorEnabled()&&(K(b,d),z.layout.element.focus())))}function A(a){var b=z.tasks.getTask("HighlightItemTask").getHighlightTreeItem();null!==b&&(b=e(z,null,b,void 0),G("onMouseDblClick",a,b))}function F(a){var b=z.tasks.getTask("HighlightItemTask"),c=z.tasks.getTask("HighlightItemOptionTask"),d=z.tasks.getTask("CursorItemTask"),e=z.tasks.getTask("CursorItemOptionTask"),f=z.tasks.getTask("AlignDiagramTask"),h=z.tasks.getTask("CreateTransformTask").getTransform(),
g=null,m=null,k=z.layout;c.hasHighlightEnabled()&&e.hasCursorEnabled()?(g=b.getHighlightTreeItem(),null===g&&(g=d.getCursorTreeItem())):c.hasHighlightEnabled()?g=b.getHighlightTreeItem():e.hasCursorEnabled()&&(g=d.getCursorTreeItem());if(null!=g){switch(a.which){case 13:e.hasCursorEnabled()&&(K(a,g),a.preventDefault(),k.element.focus());break;case 40:m=1;break;case 38:m=0;break;case 37:m=2;break;case 39:m=3}if(null!=m){for(d=!1;!d;)d=!0,m=h.getOrientation(m),b=f.getNextItem(g,m),null!=b&&(a.preventDefault(),
c.hasHighlightEnabled()?D(a,b):e.hasCursorEnabled()&&K(a,b));k.element.focus()}}}function y(b){var c=z.layout.scrollPanel;H=new a.common.Point(b.clientX,b.clientY);L=new a.common.Point(c.scrollLeft,c.scrollTop);N=N||new Image;b.dataTransfer.setDragImage(N,0,0)}function B(a){a.preventDefault();a.dataTransfer.dropEffect="move"}function C(b){J=new a.common.Point(L.x-(b.clientX-H.x),L.y-(b.clientY-H.y));null==M&&(M=window.setTimeout(function(){var a=z.layout.scrollPanel;a.scrollLeft=J.x;a.scrollTop=J.y;
window.clearTimeout(M);M=null},50))}function D(a,b){var c=!0;if(null!==b){if(b!==z.options.highlightItem){var d=e(z,z.options.highlightItem,b,void 0);z.options.highlightItem=b;G("onHighlightChanging",a,d);d.cancel?c=!1:(h(!1,!1),G("onHighlightChanged",a,d))}}else null!==z.options.highlightItem&&(d=e(z,z.options.highlightItem,null,void 0),z.options.highlightItem=null,G("onHighlightChanging",a,d),d.cancel?c=!1:(h(!1,!1),G("onHighlightChanged",a,d)));return c}function K(a,b){if(b!==z.options.cursorItem){var c=
e(z,z.options.cursorItem,b,void 0);z.options.cursorItem=b;G("onCursorChanging",a,c);c.cancel||(h(!0,!1),G("onCursorChanged",a,c))}}function G(a,b,c){a=z.options[a];null!=a&&a(b,c)}var z={name:"orgdiagram",options:b,tasks:null,graphics:null,mouse:null,layout:{element:c,controlPanel:null,frameMousePanel:null,framePlaceholder:null,scrollPanel:null,mousePanel:null,placeholder:null,calloutPlaceholder:null,forceCenterOnCursor:!0}},H,L,J,N,M,P=null;d();return{destroy:function(){t(z.layout);r(z.layout);z.tasks=
null;z.graphics=null},setOptions:function(a){for(var b in a)a.hasOwnProperty(b)&&(z.options[b]=a[b])},getOptions:l,setOption:function(a,b){return z.options[a]=b},getOption:function(a){return z.options[a]},update:d}};a.orgdiagram.Control=function(c,b){return a.orgdiagram.BaseControl(c,b,a.orgdiagram.TaskManagerFactory,a.orgdiagram.EventArgsFactory,{AnnotationLabelTemplate:a.common.AnnotationLabelTemplate,ButtonsTemplate:a.common.ButtonsTemplate,CheckBoxTemplate:a.common.CheckBoxTemplate,CursorTemplate:a.common.CursorTemplate,
DotHighlightTemplate:a.common.DotHighlightTemplate,GroupTitleTemplate:a.common.GroupTitleTemplate,HighlightTemplate:a.common.HighlightTemplate,ItemTemplate:a.common.ItemTemplate,UserTemplate:a.common.UserTemplate,LabelAnnotationTemplate:a.common.LabelAnnotationTemplate})};a.orgdiagram.EventArgsFactory=function(c,b,f,e){var g=new a.orgdiagram.EventArgs,d=c.tasks.getTask("CombinedContextsTask"),h=c.tasks.getTask("AlignDiagramTask");b=d.getConfig(b);var k=d.getConfig(f);b&&null!=b.id&&(g.oldContext=
b);k&&null!=k.id&&(g.context=k,null!==k.parent&&(g.parentItem=d.getConfig(k.parent)),d=a.common.getElementOffset(c.layout.mousePanel),c=a.common.getElementOffset(c.layout.element),f=h.getItemPosition(f),g.position=(new a.common.Rect(f.actualPosition)).translate(d.left,d.top).translate(-c.left,-c.top));null!=e&&(g.name=e);return g};a.orgdiagram.getProcessDiagramConfig=function(){var c=function(){};return a.orgdiagram.TaskManagerFactory(c,c,c).getProcessDiagramConfig()};a.orgdiagram.TaskManagerFactory=
function(c,b,f,e,g){var d=new a.common.TaskManager;d.addDependency("options",c);d.addDependency("graphics",b);d.addDependency("getLayout",f);d.addDependency("setLayout",e);d.addDependency("templates",g);d.addDependency("defaultConfig",new a.orgdiagram.Config);d.addDependency("defaultItemConfig",new a.orgdiagram.ItemConfig);d.addDependency("defaultTemplateConfig",new a.orgdiagram.TemplateConfig);d.addDependency("defaultButtonConfig",new a.orgdiagram.ButtonConfig);d.addDependency("defaultBackgroundAnnotationConfig",
new a.orgdiagram.BackgroundAnnotationConfig);d.addDependency("defaultConnectorAnnotationConfig",new a.orgdiagram.ConnectorAnnotationConfig);d.addDependency("defaultHighlightPathAnnotationConfig",new a.orgdiagram.HighlightPathAnnotationConfig);d.addDependency("defaultShapeAnnotationConfig",new a.orgdiagram.ShapeAnnotationConfig);d.addDependency("isFamilyChartMode",!1);d.addDependency("showElbowDots",!1);d.addDependency("null",null);d.addDependency("foreground",2);d.addDependency("background",1);d.addTask("OptionsTask",
["options"],a.orgdiagram.OptionsTask,"#000000");d.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.CalloutOptionTask,"#000080");d.addTask("ConnectorsOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ConnectorsOptionTask,"#000080");d.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],a.orgdiagram.ItemsOptionTask,"#000080");d.addTask("ItemsContentOptionTask",["OptionsTask","defaultItemConfig"],a.orgdiagram.ItemsContentOptionTask,"#000080");
d.addTask("ItemsSizesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig","defaultButtonConfig"],a.orgdiagram.ItemsSizesOptionTask,"#000080");d.addTask("LabelsOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.LabelsOptionTask,"#000080");d.addTask("TemplatesOptionTask",["OptionsTask","defaultConfig","defaultButtonConfig","defaultTemplateConfig"],a.orgdiagram.TemplatesOptionTask,"#000080");d.addTask("OrientationOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.OrientationOptionTask,
"#000080");d.addTask("VisualTreeOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.VisualTreeOptionTask,"#000080");d.addTask("MinimizedItemsOptionTask",["OptionsTask"],a.orgdiagram.MinimizedItemsOptionTask,"#000080");d.addTask("CursorItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorItemOptionTask,"#000080");d.addTask("HighlightItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.HighlightItemOptionTask,"#000080");d.addTask("SelectedItemsOptionTask",["OptionsTask"],
a.orgdiagram.SelectedItemsOptionTask,"#000080");d.addTask("CursorSelectionPathModeOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorSelectionPathModeOptionTask,"#000080");d.addTask("SplitAnnotationsOptionTask",["OptionsTask"],a.orgdiagram.SplitAnnotationsOptionTask,"#00ffff");d.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");d.addTask("BackgroundShapeAnnotationOptionTask",
["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","background"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");d.addTask("ForegroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","foreground"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");d.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","background"],a.orgdiagram.HighlightPathAnnotationOptionTask,
"#000080");d.addTask("ForegroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");d.addTask("BackgroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");d.addTask("BackgroundAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultBackgroundAnnotationConfig"],a.orgdiagram.BackgroundAnnotationOptionTask,
"#000080");d.addTask("ScaleOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ScaleOptionTask,"#000080");d.addTask("FrameOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.FrameOptionTask,"#000080");d.addTask("CombinedContextsTask",["ItemsContentOptionTask"],a.orgdiagram.CombinedContextsTask,"#00ffff");d.addTask("OrgTreeTask",["ItemsOptionTask"],a.orgdiagram.OrgTreeTask,"#ff0000");d.addTask("ReadTemplatesTask",["TemplatesOptionTask","templates"],a.orgdiagram.ReadTemplatesTask,"#00ffff");
d.addTask("ActiveItemsTask",["ItemsSizesOptionTask","ReadTemplatesTask"],a.orgdiagram.ActiveItemsTask,"#00ffff");d.addTask("ItemTemplateParamsTask",["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],a.orgdiagram.ItemTemplateParamsTask,"#00ffff");d.addTask("GroupTitleTemplateTask",["TemplatesOptionTask","templates"],a.orgdiagram.GroupTitleTemplateTask,"#00ffff");d.addTask("CheckBoxTemplateTask",["ItemsSizesOptionTask","templates"],a.orgdiagram.CheckBoxTemplateTask,"#00ffff");d.addTask("ButtonsTemplateTask",
["ItemsSizesOptionTask","templates"],a.orgdiagram.ButtonsTemplateTask,"#00ffff");d.addTask("AnnotationLabelTemplateTask",["ItemsOptionTask","templates"],a.orgdiagram.AnnotationLabelTemplateTask,"#00ffff");d.addTask("VisualTreeTask",["OrgTreeTask","ActiveItemsTask","VisualTreeOptionTask","isFamilyChartMode"],a.orgdiagram.VisualTreeTask,"#ff0000");d.addTask("VisualTreeLevelsTask",["VisualTreeTask","ItemTemplateParamsTask"],a.orgdiagram.VisualTreeLevelsTask,"#ff0000");d.addTask("ConnectionsGraphTask",
["graphics","CreateTransformTask","ConnectorsOptionTask","VisualTreeLevelsTask","AlignDiagramTask"],a.orgdiagram.ConnectionsGraphTask,"#00ffff");d.addTask("HighlightItemTask",["HighlightItemOptionTask","ActiveItemsTask"],a.orgdiagram.HighlightItemTask,"#00ffff");d.addTask("CursorItemTask",["CursorItemOptionTask","ActiveItemsTask"],a.orgdiagram.CursorItemTask,"#00ffff");d.addTask("CursorNeighboursTask",["CursorItemTask","VisualTreeTask"],a.orgdiagram.CursorNeighboursTask,"#00ffff");d.addTask("SelectedItemsTask",
["SelectedItemsOptionTask","ItemsOptionTask"],a.orgdiagram.SelectedItemsTask,"#00ffff");d.addTask("SelectionPathItemsTask",["VisualTreeTask","CursorItemTask","SelectedItemsTask","CursorSelectionPathModeOptionTask"],a.orgdiagram.SelectionPathItemsTask,"#00ffff");d.addTask("NormalVisibilityItemsByForegroundShapeAnnotationTask",["ForegroundShapeAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");d.addTask("NormalVisibilityItemsByBackgroundShapeAnnotationTask",["BackgroundShapeAnnotationOptionTask"],
a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");d.addTask("NormalVisibilityItemsByBackgroundAnnotationTask",["BackgroundAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");d.addTask("NormalVisibilityItemsByForegroundHighlightPathAnnotationTask",["ForegroundHighlightPathAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");d.addTask("NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask",["BackgroundHighlightPathAnnotationOptionTask"],
a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");d.addTask("NormalVisibilityItemsByForegroundConnectorAnnotationTask",["ForegroundConnectorAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,"#00ffff");d.addTask("NormalVisibilityItemsByBackgroundConnectorAnnotationTask",["BackgroundConnectorAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,"#00ffff");d.addTask("CombinedNormalVisibilityItemsTask","ItemsSizesOptionTask CursorItemTask CursorNeighboursTask SelectedItemsTask SelectionPathItemsTask NormalVisibilityItemsByForegroundShapeAnnotationTask NormalVisibilityItemsByBackgroundShapeAnnotationTask NormalVisibilityItemsByBackgroundAnnotationTask NormalVisibilityItemsByForegroundHighlightPathAnnotationTask NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask NormalVisibilityItemsByForegroundConnectorAnnotationTask NormalVisibilityItemsByBackgroundConnectorAnnotationTask".split(" "),
a.orgdiagram.CombinedNormalVisibilityItemsTask,"#00ffff");d.addTask("FrameSizeTask",["FrameOptionTask","ReadTemplatesTask","ScaleOptionTask"],a.orgdiagram.FrameSizeTask,"#000080");d.addTask("LayoutOptionsTask",["getLayout","OptionsTask"],a.orgdiagram.LayoutOptionsTask,"#000000");d.addTask("CurrentControlSizeTask",["LayoutOptionsTask","ItemsSizesOptionTask","FrameSizeTask"],a.orgdiagram.CurrentControlSizeTask,"#000000");d.addTask("CurrentScrollPositionTask",["LayoutOptionsTask"],a.orgdiagram.CurrentScrollPositionTask,
"#000000");d.addTask("ItemsPositionsTask","CurrentControlSizeTask ScaleOptionTask OrientationOptionTask ItemsSizesOptionTask ConnectorsOptionTask VisualTreeOptionTask VisualTreeTask VisualTreeLevelsTask ItemTemplateParamsTask CursorItemTask CombinedNormalVisibilityItemsTask".split(" "),a.orgdiagram.ItemsPositionsTask,"#ff0000");d.addTask("AlignDiagramTask","OrientationOptionTask ItemsSizesOptionTask VisualTreeOptionTask ScaleOptionTask CurrentControlSizeTask ActiveItemsTask ItemsPositionsTask isFamilyChartMode".split(" "),
a.orgdiagram.AlignDiagramTask,"#ff0000");d.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],a.orgdiagram.CreateTransformTask,"#00ffff");d.addTask("PaletteManagerTask",["ConnectorsOptionTask","null"],a.orgdiagram.PaletteManagerTask,"#00ffff");d.addTask("ApplyLayoutChangesTask","graphics setLayout ItemsSizesOptionTask CurrentControlSizeTask ScaleOptionTask AlignDiagramTask FrameSizeTask".split(" "),a.orgdiagram.ApplyLayoutChangesTask,"#008000");d.addTask("CenterOnCursorTask",
"LayoutOptionsTask ApplyLayoutChangesTask CurrentScrollPositionTask CursorItemTask AlignDiagramTask CreateTransformTask ScaleOptionTask".split(" "),a.orgdiagram.CenterOnCursorTask,"#00ffff");d.addTask("ProjectItemsToFrameTask","CreateTransformTask FrameSizeTask ApplyLayoutChangesTask ScaleOptionTask AlignDiagramTask CenterOnCursorTask ItemTemplateParamsTask SelectedItemsTask".split(" "),a.orgdiagram.ProjectItemsToFrameTask,"#008000");d.addTask("DrawBackgroundAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask BackgroundAnnotationOptionTask VisualTreeTask AlignDiagramTask".split(" "),
a.orgdiagram.DrawBackgroundAnnotationTask,"#008000");d.addTask("DrawBackgroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","ForegroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","foreground"],a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");d.addTask("DrawForegroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","BackgroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","background"],a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");
d.addTask("DrawForegroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground".split(" "),a.orgdiagram.DrawConnectorAnnotationTask,"#008000");d.addTask("DrawBackgroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background".split(" "),
a.orgdiagram.DrawConnectorAnnotationTask,"#008000");d.addTask("DrawForegroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground".split(" "),a.orgdiagram.DrawShapeAnnotationTask,"#008000");d.addTask("DrawBackgroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background".split(" "),
a.orgdiagram.DrawShapeAnnotationTask,"#008000");d.addTask("DrawCursorTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask ItemTemplateParamsTask CursorItemTask SelectedItemsTask".split(" "),a.orgdiagram.DrawCursorTask,"#008000");d.addTask("DrawHighlightTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask ItemTemplateParamsTask HighlightItemTask CursorItemTask SelectedItemsTask".split(" "),a.orgdiagram.DrawHighlightTask,
"#008000");d.addTask("DrawHighlightAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask ScaleOptionTask CombinedContextsTask CalloutOptionTask ReadTemplatesTask AlignDiagramTask CenterOnCursorTask HighlightItemTask CursorItemTask SelectedItemsTask FrameSizeTask".split(" "),a.orgdiagram.DrawHighlightAnnotationTask,"#008000");d.addTask("DrawTreeItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask ScaleOptionTask ItemsSizesOptionTask CombinedContextsTask AlignDiagramTask CenterOnCursorTask ItemTemplateParamsTask CursorItemTask SelectedItemsTask GroupTitleTemplateTask CheckBoxTemplateTask ButtonsTemplateTask".split(" "),
a.orgdiagram.DrawTreeItemsTask,"#008000");d.addTask("DrawMinimizedItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask MinimizedItemsOptionTask ItemTemplateParamsTask AlignDiagramTask".split(" "),a.orgdiagram.DrawMinimizedItemsTask,"#008000");d.addTask("DrawConnectorsTask",["graphics","ConnectionsGraphTask","ConnectorsOptionTask","showElbowDots","PaletteManagerTask"],a.orgdiagram.DrawConnectorsTask,"#008000");d.addTask("DrawItemLabelsTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask",
"LabelsOptionTask","AlignDiagramTask"],a.orgdiagram.DrawItemLabelsTask,"#008000");d.addTask("DrawFrameItemsTask",["graphics","ApplyLayoutChangesTask","ProjectItemsToFrameTask","ItemTemplateParamsTask","MinimizedItemsOptionTask"],a.orgdiagram.DrawFrameItemsTask,"#008000");d.addTask("DrawFrameHighlightTask","graphics ProjectItemsToFrameTask CombinedContextsTask ItemTemplateParamsTask HighlightItemTask CursorItemTask".split(" "),a.orgdiagram.DrawFrameHighlightTask,"#008000");return d};a.common.binarySearch=
function(a,b,f,e){var c=null;f=f||0;var d=e||a.length-1;if(0<a.length){var h=a[f];c={index:f,item:h};e=b(h,f);if(0<e){var k=Math.abs(e);h=a[d];e=b(h,d);if(0<=e)c={index:d,item:h};else for(e=Math.abs(e),k>e&&(k=e,c={index:d,item:h});f+1<d;){var l=Math.round((f+d)/2);h=a[l];e=b(h,l);if(0===e){c={index:l,item:h};break}else 0<e?f=l:d=l,e=Math.abs(e),k>e&&(k=e,c={index:l,item:h})}}}return c};a.common.family=function(c){function b(a,b,c,d){var e;if(null!=d&&(b=b[c],null!=b))for(e in b)if(b.hasOwnProperty(e)&&
d.call(a,e,b[e]))break}function f(a,b){var c=!1;null!=D[a]&&null!=D[a][b]&&(delete D[a][b],--K[a],delete G[b][a],--z[b],K[a]||(delete D[a],delete K[a]),G[b]||(delete G[b],delete z[b],null==B[null]&&(B[null]={},C[null]=0),B[null][b]=!0,C[null]+=1),c=!0);return c}function e(a,b){var c;if(null!=b)for(c in H)if(H.hasOwnProperty(c)&&b.call(a,c,H[c]))break}function g(a,c,d,e){for(var f,h,g={},m=0,k=!0;k;){f={};k=!1;for(h in d)if(d.hasOwnProperty(h)&&!g[h])switch(g[h]=!0,e.call(a,h,H[h],m)){case 1:f={};
k=!1;break;case 2:break;default:b(this,c,h,function(a){g[a]||(k=f[a]=!0)})}d=f;m+=1}}function d(a,b,c){null!=c&&null!=b&&null!=H[b]&&null!=D[b]&&g(a,D,D[b],c)}function h(a,b,c){null!=c&&null!=b&&null!=H[b]&&null!=G[b]&&g(a,G,G[b],c)}function k(a,c,d,e,f,h){var g;if(null!=h){c=[];var m={};for(q in H)H.hasOwnProperty(q)&&(m[q]=d[q]||0,m[q]||c.push(q));for(g=0;0<c.length;){var k=[];d=0;for(f=c.length;d<f;d+=1){var q=c[d];if(h.call(a,q,H[q],g)){k=[];break}g+=1;b(this,e,q,function(a){--m[a];0===m[a]&&
k.push(a)})}c=k}}}function l(a,b){k(a,G,z,D,K,b)}function n(a,b){k(a,D,K,G,z,b)}function m(a,b,c,d,e,f,h,g,m){var k=!1,q;if(null!=H[a]&&null!=h[a]){k=!0;if(m)for(m=0,q=b.length;m<q;m+=1){var l=b[m];if(null==H[l]||null==h[a][l])k=!1}if(k&&(null!=d&&(H[c]=d),null!=H[c]))for(e[c]||(e[c]={},f[c]=0),h[c]||(h[c]={},g[c]=0),e[c][a]||(e[c][a]=!0,f[c]+=1),h[a][c]||(h[a][c]=!0,g[a]+=1),m=0,q=b.length;m<q;m+=1)l=b[m],c!=l&&(null!=h[a][l]&&(delete h[a][l],--g[a]),null!=e[l][a]&&(delete e[l][a],--f[l]),e[l][c]||
(e[l][c]=!0,f[l]+=1),h[c][l]||(h[c][l]=!0,g[c]+=1))}return k}function q(a,b,c,d){return m(a,b,c,d,G,z,D,K,!0)}function p(){this.key=this.id="";this.children=[];this.childrenHash={};this.processed=!1}function r(a){this.items=[];this.difference=this.weight=0;0<arguments.length&&(this.difference=a)}function t(c){var d=a.common.graph(),e,f,h,g,m,k,q,l,p={};for(e in c)c.hasOwnProperty(e)&&b(this,D,e,function(a){if(!p.hasOwnProperty(a))for(p[a]=!0,f=[],b(this,G,a,function(a){f.push(a)}),h=0,m=f.length;h<
m-1;h+=1)if(k=f[h],c.hasOwnProperty(k))for(g=h+1;g<m;g+=1)if(q=f[g],c.hasOwnProperty(q)){l=Math.abs(c[k].children.length-c[q].children.length);var e=d.edge(k,q);null==e&&(e=new r(l),d.addEdge(k,q,e));e.items.push(a);e.weight+=1}});return d}function u(a,b){this.parentid=a;this.childid=b;this.key=a+","+b}function w(a,b,c){this.from=a;this.to=b;this.distance=0}function v(a){return K[a]||0}function x(a){return z[a]||0}function E(a){var b=null;a=D[a]||{};for(b in a)if(a.hasOwnProperty(b))return b;return null}
function A(a){var b=null;a=G[a]||{};for(b in a)if(a.hasOwnProperty(b))return b;return null}function F(a,b){this.parentid=a;this.childid=b;this.ids=[];this.nodes=[]}function y(){return a.common.family({roots:B,rootsCount:C,children:D,childrenCount:K,parents:G,parentsCount:z,nodes:H})}var B={},C={},D={},K={},G={},z={},H={};(function(b){a.common.isObject(b)&&(B=a.common.cloneObject(b.roots,!1),C=a.common.cloneObject(b.rootsCount,!0),D=a.common.cloneObject(b.children,!1),K=a.common.cloneObject(b.childrenCount,
!0),G=a.common.cloneObject(b.parents,!1),z=a.common.cloneObject(b.parentsCount,!0),H=a.common.cloneObject(b.nodes,!0))})(c);return{add:function(a,c,d){var e,f={};a&&0!==a.length||(a=[null]);if(null==H[c]&&null!=d){H[c]=d;d=0;for(e=a.length;d<e;d+=1){var h=a[d];null==f[h]&&h!=c&&(f[h]=!0,null!=H[h]?(null==G[c]&&(G[c]={},z[c]=0),G[c][h]||(G[c][h]=!0,z[c]+=1),null==D[h]&&(D[h]={},K[h]=0),D[h][c]||(D[h][c]=!0,K[h]+=1)):(null==B[h]&&(B[h]={},C[h]=0),B[h][c]||(B[h][c]=!0,C[h]+=1)))}null!=B[c]&&(D[c]=B[c],
K[c]=C[c],delete B[c],delete C[c],b(this,D,c,function(a){null==G[a]&&(G[a]={},z[a]=0);G[a][c]||(G[a][c]=!0,z[a]+=1)}))}},adopt:function(a,b){var c;if(null!=H[b]){var d=0;for(c=a.length;d<c;d+=1){var e=a[d];null==G[b]&&(G[b]={},z[b]=0);if(e!=b&&null!=H[e])G[b][e]||(G[b][e]=!0,z[b]+=1),null==D[e]&&(D[e]={},K[e]=0),D[e][b]||(D[e][b]=!0,K[e]+=1);else throw"Item cannot be parent of itself and parent should exist in the structure!";}}else throw"Child should be in hierarchy!";},bundleChildren:q,bundleParents:function(a,
b,c,d){return m(a,b,c,d,D,K,G,z,!0)},optimizeReferences:function(c){var e={},f={},h={},g;var k=0;var q=10;if(null!=c){for(g in H)if(k+=1,H.hasOwnProperty(g)){var l=new p;b(this,D,g,function(a){l.children.push(a);l.childrenHash[a]=!0});l.children.sort();l.id=g;l.key=l.children.join(",");h[l.id]=l}for(q=Math.pow(10,k.toString().length);!a.common.isEmptyObject(h);){var n={};var r={};var u=t(h);for(g in h)if(h.hasOwnProperty(g)&&(k=h[g],!k.processed)){var v=u.getSpanningTree(g,function(a){return a.weight*
q+q-a.difference});v.loopLevels(this,function(a,b,g){h[a].processed=!0;v.loopChildren(this,a,function(g,k){var q=u.edge(a,g),l=null,t,v;h[g].processed=!0;if(1<q.weight){var w=q.items.join(",");if(e.hasOwnProperty(w))l=e[w];else{var x=c();H[x.id]=x;l=new p;l.id=x.id;l.key=w;w=0;for(t=q.items.length;w<t;w+=1){var y=q.items[w];l.children.push(y);l.childrenHash[y]=!0;r[y]=!0}l.children.sort();e[l.key]=l;f[l.id]=l;n[l.id]=l;r[l.id]=l;var A=l.children.slice(0);d(this,b.replacementItem||a,function(a,b,c){l.childrenHash[a]||
null==f[a]||(v=!0,d(this,a,function(a,b,c){if(!l.childrenHash[a])return v=!1,1;if(!r.hasOwnProperty(a))return 2}),v&&A.push(a));return 2});m(b.replacementItem||a,A,l.id,x,G,z,D,K,!1);1>=(K[a]||0)&&null==b.replacementItem&&(b.replacementItem=l.id)}l.id!=g&&(A=l.children.slice(0),d(this,k.replacementItem||g,function(a,b,c){null==f[a]||l.childrenHash[a]||(v=!0,d(this,a,function(a,b,c){return l.childrenHash[a]?(r.hasOwnProperty(a),2):(v=!1,1)}),v&&A.push(a));return 2}),m(k.replacementItem||g,A,l.id,null,
G,z,D,K,!1),1>=(K[g]||0)&&null==k.replacementItem&&(k.replacementItem=l.id))}})})}h=n}}},eliminateManyToMany:function(a){var c,d;for(c in D)D.hasOwnProperty(c)&&1<(K[c]||0)&&b(this,D,c,function(b){1<(z[b]||0)&&(d=a(),q(c,[b],d.id,d))})},groupBy:function(a,b,c){if(null!=c){var d={};for(g in H){var e=K[g]||0;if(1>=(z[g]||0)&&1>=e){e=A(g);var f=E(g),h=e+" * "+f;d.hasOwnProperty(h)||(d[h]=new F(e,f));d[h].ids.push(g);d[h].nodes.push(H[g])}}for(h in d)if(d.hasOwnProperty(h)){var g=d[h];if(g.ids.length>=
b&&c.call(a,g.parentid,g.childid,g.ids,g.nodes))break}}},getPlanarFamily:function(b){var c=new a.common.family,e,f;b.loopLevels(this,function(h,g){var m=new a.common.LinkedHashItems,k={},q={},l=[];b.loopLevelItems(this,h,function(a,c,e){d(this,a,function(c,d){var e=b.getItemPosition(c),f=new u(a,c);q[f.key]=f;var h=[];m.isEmpty()?m.add(e,[f]):(m.iterateBack(function(b,c){if(c<e)return m.insertAfter(c,e,[f]),!0;if(c==e)return b.push(f),!0;c=0;for(var d=b.length;c<d;c+=1){var g=b[c];g.parentid!=a&&
h.push(g)}}),m.startKey()>e&&m.unshift(e,[f]));k[f.key]=h;c=0;for(d=h.length;c<d;c+=1)k[h[c].key].push(f);return 2});1==v(a)&&(c=E(a),1==x(c)&&(c=new u(a,c),l.push(c.key)))});h=[];for(w in k){var p=k[w];g=p.length;null!=h[g]?h[g].push(w):h[g]=[w]}g={};h.unshift(l);for(var n=0,r=h.length;n<r;n+=1){var t=h[n];if(null!=t)for(e=0,f=t.length;e<f;e+=1){var w=t[e];if(!g.hasOwnProperty(w)){g[w]=!0;p=q[w];null==c.node(p.parentid)&&c.add(null,p.parentid,{});null==c.node(p.childid)?c.add([p.parentid],p.childid,
{}):c.adopt([p.parentid],p.childid);p=k[w];w=0;for(var A=p.length;w<A;w+=1)g[p[w].key]=!0}}}});return c},getFamilyWithoutGrandParentsRelations:function(){var c=new a.common.family,d={},f=[],h=0;for(l in G)G.hasOwnProperty(l)&&b(this,G,l,function(a){var b=d[l];null==b&&(b={},d[l]=b);b.hasOwnProperty(a)||(b=new w(l,a,h),f.push(b),d[l][a]=b)});for(;0<f.length;){var g=[];h+=1;for(var m=0,k=f.length;m<k;m+=1){var q=f[m];var l=q.to;G.hasOwnProperty(l)&&b(this,G,l,function(a){var b=d[q.from];null==b&&(b=
{},d[q.from]=b);if(b.hasOwnProperty(a))b[a].distance=h;else{var c=new w(l,a,h);g.push(c);b[a]=c}})}f=g}e(this,function(a,e){var f=[];b(this,G,a,function(b){0===d[a][b].distance&&f.push(b)});c.add(f,a,e)});return c},getGraph:function(c,d){var e=a.common.graph(),f;for(f in D)D.hasOwnProperty(f)&&b(this,D,f,function(a){var b=e.edge(f,a);null==b&&(b=null==d?new r({}):d.call(c,f,a),e.addEdge(f,a,b))});return e},removeNode:function(a){null!=H[a]&&(b(this,D,a,function(b){delete G[b][a];--z[b];z[b]||(delete G[b],
delete z[b],null==B[null]&&(B[null]={},C[null]=0),B[null][b]||(B[null][b]=!0,C[null]+=1))}),b(this,G,a,function(b){delete D[b][a];--K[b];K[b]||(delete D[b],delete K[b])}),null!=B[null]&&null!=B[null][a]&&(delete B[null][a],--C[null],C[null]||(delete B[null],delete C[null])),delete D[a],delete K[a],delete G[a],delete z[a],delete H[a])},removeRelation:function(a,b){var c=!1;null!=H[a]&&null!=H[b]&&(c=f(a,b)||f(b,a));return c},removeChildRelation:function(a,b){var c=!1;null!=H[a]&&null!=H[b]&&(c=f(a,
b));return c},node:function(a){return H[a]},loop:e,loopLevels:function(a,c,d){function e(){this.items={};this.minimumLevel=null}function f(a,b,c){var d=p[b];d||(d=new e,p[b]=d);d.addItemToLevel(a,c);u=null==u?c:Math.min(u,c);q[a]=c;m[a]=!0}var h=[],g={},m={},k=[],q={},p={},r,t,u=null;var v=c?l:n;var w,x,A;e.prototype.addItemToLevel=function(a,b){var c=this.items[b];c?c.push(a):(c=[a],this.items[b]=c);this.minimumLevel=null==this.minimumLevel?b:Math.min(this.minimumLevel,b)};if(null!=d){v(this,function(a,
b,c){h.push(a);g[a]=c});v=0;for(w=h.length;v<w;v+=1){var y=h[v];if(null==m[y])for(k.push(y),f(y,v,0);0<k.length;){var z=A=x=null;var E=!c;var C=[];y=0;for(t=k.length;y<t;y+=1){var B=k[y];var F=q[B];var J=!1;c?(b(this,G,B,function(a){if(!m[a]){J=!0;var b=g[a];if(null==x||!E||x<b||x==b&&z>F-1)x=b,A=a,z=F-1,E=!0}}),b(this,D,B,function(a){if(!m[a]){J=!0;var b=g[a];if(null==x||!E&&(x>b||x==b&&z<F+1))x=b,A=a,z=F+1,E=!1}})):(b(this,D,B,function(a){if(!m[a]){J=!0;var b=g[a];if(null==x||E||x<b||x==b&&z<F+
1)x=b,A=a,z=F+1,E=!1}}),b(this,G,B,function(a){if(!m[a]){J=!0;var b=g[a];if(null==x||E&&(x>b||x==b&&z>F-1))x=b,A=a,z=F-1,E=!0}}));J&&C.push(B)}null!=A&&(C.push(A),f(A,v,z));k=C}}k=!0;for(c=u;k;){y={};k=!1;for(r in p)if(p.hasOwnProperty(r)&&(v=p[r],t=v.items[v.minimumLevel-u+c],null!=t))for(y[r]=v,k=!0,v=0,w=t.length;v<w;v+=1)if(B=t[v],d.call(a,B,H[B],c-u))return k=!1,!0;p=y;c+=1}}},loopTopo:l,loopTopoReversed:n,loopChildren:d,loopParents:h,findLargestRoot:function(){var a=null,b={},c={},d;var e=null;
n(this,function(f,g,m){b.hasOwnProperty(f)||(b[f]={},c[f]=0);b[f][f]=!0;c[f]+=1;d=!0;h(this,g.id,function(a,e,h){var g;d=!1;b.hasOwnProperty(a)||(b[a]={},c[a]=0);if(c[a]||1!=z[f])for(g in e=b[f],e)e.hasOwnProperty(g)&&(b[a][g]=!0,c[a]+=1);else b[a]=b[f],c[a]=c[f];return 2});d&&(!e||c[f]>e)&&(e=c[f],a=f)});return a},loopRoots:function(a,b){var c=null,d=0,e={},f={},g,m={},k={},q,l,p;n(this,function(a,b,c){e.hasOwnProperty(a)||(e[a]={},f[a]=0);e[a][a]=!0;f[a]+=1;g=!0;h(this,b.id,function(b,c,d){var h;
g=!1;e.hasOwnProperty(b)||(e[b]={},f[b]=0);if(f[b]||1!=z[a])for(h in c=e[a],c)c.hasOwnProperty(h)&&!e[b][h]&&(e[b][h]=!0,f[b]+=1);else e[b]=e[a],f[b]=f[a];return 2});g&&(m[a]=!0,d+=1)});var r={};for(u in m)if(m.hasOwnProperty(u)){var t=e[u];for(l in t)t.hasOwnProperty(l)&&(r[l]||(r[l]=[]),r[l].push(u.toString()))}for(;0<d;){t=null;for(q in m)m.hasOwnProperty(q)&&(!t||f[q]<t)&&(t=f[q],c=q);if(null!=c){null!=b&&b.call(a,c,H[c]);t=e[c];for(l in t)if(t.hasOwnProperty(l)&&!k[l]){var u=r[l];var v=0;for(p=
u.length;v<p;v+=1){var w=u[v];--f[w]}k[l]=!0}delete m[c];--d}}},hasNodes:function(){return!a.common.isEmptyObject(H)},hasCommonChild:function(a){var c=!1,d,e,f;var h={};var g=d=0;for(e=a.length;g<e;g+=1){var m=a[g];null==H[m]||h[m]||(h[m]=!0,d+=1)}var k={};for(m in h)h.hasOwnProperty(m)&&b(this,D,m,function(a){k[a]=k[a]?k[a]+1:1});for(f in k)if(k.hasOwnProperty(f)&&null!=G[f]&&(z[f]||0)==k[f]&&k[f]==d){c=!0;break}return c},loopNeighbours:function(a,b,c){var e={};null!=c&&(d(this,b,function(b,d,f){e.hasOwnProperty(b)||
(e[b]=null,c.call(a,b,d,1)&&(e[b]=2),h(this,b,function(b,d,f){e.hasOwnProperty(b)||(e[b]=null,c.call(a,b,d,2)&&(e[b]=2));return e[b]}));return e[b]}),h(this,b,function(b,f,h){e.hasOwnProperty(b)||(e[b]=null,c.call(a,b,f,1)&&(e[b]=2),d(this,b,function(b,d,f){e.hasOwnProperty(b)||(e[b]=!0,c.call(a,b,d,2)&&(e[b]=2));return e[b]}));return e[b]}))},countChildren:v,countParents:x,firstParent:A,firstChild:E,validate:function(a){function c(a){var b=0,c;if(null!=a)for(c in a)a.hasOwnProperty(c)&&(b+=1);return b}
var d,f;e(this,function(c,d){b(this,D,c,function(b){if(!G.hasOwnProperty(b)||!G[b].hasOwnProperty(c))return null!=a&&(a.message="Child #"+b+" does not reference parent #"+c),!1});b(this,G,c,function(b){if(!D.hasOwnProperty(b)||!D[b].hasOwnProperty(c))return null!=a&&(a.message="Parent #"+b+" does not reference child #"+c),!1})});for(d in G)if(G.hasOwnProperty(d)){if((z[d]||0)!=c(G[d]))return null!=a&&(a.message="Parents count for item #"+d+" missmatch."),!1;if(G.hasOwnProperty(d)&&!H.hasOwnProperty(d))return null!=
a&&(a.message="Orphant parents for item #"+d),!1}for(f in D)if(D.hasOwnProperty(f)){if((K[f]||0)!=c(D[f]))return null!=a&&(a.message="Children count for item "+f+" missmatch."),!1;if(D.hasOwnProperty(f)&&!H.hasOwnProperty(f))return null!=a&&(a.message="Orphant children of item "+f),!1}for(f in B)if(B.hasOwnProperty(f)){if((C[f]||0)!=c(B[f]))return null!=a&&(a.message="Root children count for item @"+f+" missmatch."),!1;b(this,B,f,function(b){if(!H.hasOwnProperty(b))return null!=a&&(a.message="Child #"+
b+"of root #"+f+" does not exists."),!1})}return!0},hasLoops:function(){var a=y();l(this,function(b,c,d){a.removeNode(b)});return a.hasNodes()},clone:y,BREAK:1,SKIP:2}};a.common.FamilyAlignment=function(c,b,f,e){function g(b,c){var d=b[c];null==d&&(d=new a.common.FamilyMargins,b[c]=d);return d}function d(a,b,c,d,e,f,g,k){var m=f,l=f;c.loopSiblings(this,b,function(a){a=g.getItemPosition(a);m=Math.min(m,a);l=Math.max(l,a)});for(var q=f-1;q>=m;--q){var p=g.getItemAtPosition(d,q);if(!a.hasOwnProperty(p)){var n=
g.getItemAtPosition(d,q+1);a[p]=a[n]-(h[p]/2+(k[n]||0)+h[n]/2)}}for(q=f+1;q<=l;q+=1)p=g.getItemAtPosition(d,q),a.hasOwnProperty(p)||(n=g.getItemAtPosition(d,q-1),a[p]=a[n]+(h[n]/2+(k[p]||0)+h[p]/2));p=g.getItemAtPosition(d,m);n=a[p]-h[p]/2;p=g.getItemAtPosition(d,l);n+=a[p]+h[p]/2;n/=2;l=m=null;c.loopNonSiblings(this,b,function(a){a=g.getItemPosition(a);m=null!=m?Math.min(m,a):a;l=null!=l?Math.max(l,a):a});c=0;for(q=m;q<=l;q+=1)b=g.getItemAtPosition(e,q),c+=h[b],q>m&&(c+=k[b]||0);q=n-c/2;b=g.getItemAtPosition(e,
m);a.hasOwnProperty(b)||(a[b]=q+h[b]/2);for(q=m+1;q<=l;q+=1)b=g.getItemAtPosition(e,q),a.hasOwnProperty(b)||(n=g.getItemAtPosition(e,q-1),a[b]=a[n]+(h[n]/2+(k[b]||0)+h[b]/2))}var h={};null!=e&&f.loopItems(this,function(a,b,d,f,g){h[a]=e.call(c,a,b)});var k=function(b,c){var d={},e={},f=null;c.loopLevelsReversed(this,function(m,k){k=new a.common.FamilyMargins;null!=f&&(f.add(0,Number.MAX_VALUE),k.merge(f,0));var l=f=k;c.loopLevelItems(this,m,function(a,f,m){var k=g(e,a);k.add(h[a],m);switch(b.countParents(a)){case 0:null!=
l&&(d[a]=l.attach(k));break;case 1:b.loopParents(this,a,function(c,f,h){c=g(e,c);d[a]=c.merge(k);l=c;return b.BREAK});break;default:var q=0,p=null,n=null,r={};b.loopParents(this,a,function(a,d,e){if(0<e)return b.BREAK;q+=h[a];d=c.getItemPosition(a);p=null==p?d:Math.min(p,d);n=null==n?d:Math.max(n,d);r[d]=a});f=-q/2;for(m=p;m<=n;m+=1){var t=r[m];f+=h[t]/2;var u=g(e,t);u.attach(k,-f);l=u;f+=h[t]/2}}})});return d}(b,f);var l=function(b,c,e){var f={},g=a.common.getFamilyUnits(b),m={};c.loopLevels(this,
function(a,b){c.loopLevelItems(this,a,function(b,k,l){if(!f.hasOwnProperty(b)){k=0;if(0===l)null!=e[b]&&(k+=e[b]+h[b]/2);else{var q=c.getItemAtPosition(a,l-1);k+=f[q]+h[q]/2+(e[b]||0)+h[b]/2}f[b]=k}k=g[b];if(null!=k)for(q=0;q<k.length;q+=1){var p=k[q];m.hasOwnProperty(p.id)||(m[p.id]=!0,d(f,b,p,a,a+1,l,c,e))}})});return f}(b,f,k);return{getOffset:function(a){return l[a]}}};a.common.FamilyMargins=function(){function a(a,c,e,g){this.left=a;this.right=c;this.leftIndex=e;this.rightIndex=g}this.items=
[];this.add=function(b,c,e,g){switch(arguments.length){case 2:this.items.push(new a(-b/2,b/2,c,c));break;case 4:this.items.push(new a(b,c,e,g))}};this.merge=function(b,c){for(var e=this.getDistanceTo(b),f=0,d=0,h=this.items.length,k=b.items.length,l=Math.min(h,k),n=Math.max(h,k),m=0;m<l;m+=1){var q=this.items[h-1-m],p=b.items[k-1-m];0===m&&(d=q.right-q.left+(e||0)+(c||0)+p.right-p.left,f=d/2+q.left,d=d/2-p.right);q.left-=f;q.right=p.right+d;q.rightIndex=p.rightIndex;this.items[n-1-m]=q}for(m=l;m<
n;m+=1)q=this.items[h-1-m],p=b.items[k-1-m],null==q?this.items[n-1-m]=new a(p.left+d,p.right+d,p.leftIndex,p.rightIndex):(q.left-=f,q.right-=f);return e};this.attach=function(b,c){for(var e=this.getDistanceTo(b),f=c||0,d=this.items.length,h=b.items.length,k=Math.min(d,h),l=Math.max(d,h),n=0;n<k;n+=1){var m=this.items[d-1-n],q=b.items[h-1-n];0===n&&(f=m.right+(e||0)+(c||0)-q.left);m.right=q.right+f;m.rightIndex=q.rightIndex;this.items[l-1-n]=m}for(n=k;n<l;n+=1)m=this.items[d-1-n],null==m&&(q=b.items[h-
1-n],this.items[l-1-n]=new a(q.left+f,q.right+f,q.leftIndex,q.rightIndex));return e};this.getDistanceTo=function(a){var b=null,c=0,g=this.items.length,d=a.items.length,h=Math.min(g,d);if(0<h){for(var k=0;k<h;k+=1){var l=this.items[g-1-k],n=a.items[d-1-k];0===k?b=c=l.right-n.left:l.rightIndex<n.leftIndex&&(b=Math.max(b,l.right-n.left))}b-=c}return b};this.loop=function(a,c){if(null!=c)for(var b=0,f=this.items.length;b<f;b+=1){var d=this.items[f-1-b];if(c.call(a,b,d.left,d.right,d.leftIndex,d.rightIndex))break}};
this.getLeft=function(a){var b=this.items.length-1;if(b>=a)return this.items[b-a].left}};a.common.HeapResult=function(a){this.key=a.key;this.priority=a.priority;this.item=a.item};a.common.FibonacciHeap=function(c){function b(a,b,c){this.key=a;this.priority=b;this.item=c;this.degree=0;this.marked=!1;this.right=this.left=this.child=this.parent=null}function f(a,b){var c=p[a.right];b.right=a.right;b.left=a.key;a.right=b.key;c.left=b.key}function e(a){var b=p[a.left],c=p[a.right];b.right=c.key;c.left=
b.key;a.right=a.key;a.left=a.key}function g(){var b=null;null!=q&&(b=new a.common.HeapResult(p[q]));return b}function d(){var a=g();if(null!=a){var b=p[q],c=p[b.right];if(null!=b.child){var d=p[b.child],f=p[d.left];b.right=d.key;c.left=f.key;d.left=b.key;f.right=c.key;e(b);delete p[b.key];q=null;h(d.key)}else e(b),delete p[b.key],q=null,c.key!=b.key&&h(c.key)}return a}function h(a){var b=[],d,e={};for(d=a;!e.hasOwnProperty(d);){a=p[d];var f=a.right;e[d]=!0;for(a.parent=null;null!=(d=b[a.degree]);)(c?
a.priority>d.priority:a.priority<d.priority)?k(a,d):(k(d,a),a=d),b[a.degree-1]=null;b[a.degree]=a;if(null==q||null==p[q]||(c?p[q].priority<=a.priority:p[q].priority>=a.priority))q=a.key;d=f}}function k(a,b){a.degree+=1;e(b);var d=p[a.child];if(null!=d){if(f(d,b),c?d.priority<b.priority:d.priority>b.priority)a.child=b.key}else a.child=b.key;b.parent=a.key}function l(a,b){a=p[a];if(c?a.priority>b:a.priority<b)throw"Priority increase is not supported";a.priority=b;null!=a.parent&&(b=p[a.parent],c?b.priority<
a.priority:b.priority>a.priority)&&(n(b,a),m(b));if(c?p[q].priority<a.priority:p[q].priority>a.priority)q=a.key}function n(a,b){b.marked=!1;b.parent=null;b.right==b.key?a.child=null:(a.child=b.right,e(b));--a.degree;f(p[q],b)}function m(a){if(null!=a.parent)if(a.marked){var b=p[a.parent];n(b,a);m(b)}else a.marked=!0}var q=null,p={};return{add:function(a,d,e){if(p.hasOwnProperty(a))throw"Duplicate keys are not supported!";d=new b(a,d,e);p[a]=d;if(null==q)d.left=a,q=d.right=a;else if(e=p[q],f(e,d),
c?e.priority<d.priority:e.priority>d.priority)q=a},getPriority:function(a){var b=null;p.hasOwnProperty(a)&&(b=p[a].priority);return b},setPriority:l,heapRoot:g,extractRoot:d,deleteKey:function(a){l(a,c?Infinity:-1);d()},validate:function(){var a=0;for(d in p)if(p.hasOwnProperty(d)){var b=p[d];a+=1;if(null!=b.child){if(!p.hasOwnProperty(b.child))throw"Child does not exists";var c=p[b.child];if(c.parent!=b.key)throw"Child references wrong parent";}if(null!=b.parent&&!p.hasOwnProperty(b.parent))throw"Parent does not exists";
if(null!=b.left){if(!p.hasOwnProperty(b.left))throw"Left does not exists";c=p[b.left];if(c.right!=b.key)throw"Left references wrong right";}if(null!=b.right){if(!p.hasOwnProperty(b.right))throw"Right does not exists";c=p[b.right];if(c.left!=b.key)throw"Right references wrong left";}}if(null==q&&0<a)throw"Orphans";if(null!=q){if(!p.hasOwnProperty(q))throw"Root node does not exists";b=p[q];if(null!=b.parent)throw"Root node has parent reference";var d=[q];b={};for(c=0;0<d.length;){for(var e=[],f=0,h=
d.length;f<h;f+=1)for(var g=p[d[f]];!b.hasOwnProperty(g.key);)b[g.key]=!0,c+=1,null!=g.child&&e.push(g.child),g=p[g.right];d=e}if(a!=c)throw"Tree has loops or orpants";}}}};a.common.getCrossingRectangles=function(c,b,f){function e(a,b,c,d){this.isStart=a;this.index=b;this.x=c;this.rect=d}function g(){this.count=0;this.rectangles={};this.add=function(a){this.count+=1;this.rectangles[a]=!0};this.remove=function(a){--this.count;delete this.rectangles[a];return 0==this.count}}function d(a,d,e,h,g){a.loopForward(this,
d,function(a,d){if(a>e)return!0;for(var k in d.rectangles)d.rectangles.hasOwnProperty(k)&&(a=h>k?h+"-"+k:k+"-"+h,m.hasOwnProperty(a)||(m[a]=!0,f.call(c,g,b[k])))})}if(null!=f){for(var h=[],k=0;k<b.length;k+=1){var l=b[k];h.push(new e(1,k,l.x,l));h.push(new e(0,k,l.right(),l))}h.sort(function(a,b){return a.x==b.x?b.isStart-a.isStart:a.x-b.x});l=a.common.SortedList();var n={},m={};for(k=0;k<h.length;k+=1){var q=h[k],p=[q.rect.y,q.rect.bottom()];if(1==q.isStart){d(l,p[0],p[1],q.index,q.rect);for(var r=
0,t=p.length;r<t;r+=1){var u=p[r],w=n[u];null==w&&(w=new g,n[u]=w,l.add(u,w));w.add(q.index)}}else{r=0;for(t=p.length;r<t;r+=1)u=p[r],w=n[u],w.remove(q.index)&&(delete n[u],l.remove(u));d(l,p[0],p[1],q.index,q.rect)}}}};a.common.Edge=function(a,b){this.from=a;this.to=b};a.common.getFamilyLoops=function(c,b){var f=[],e,g=c.clone();c.loopTopo(this,function(a){g.removeNode(a)});c.loopTopoReversed(this,function(a){g.removeNode(a)});var d=g.clone();d.loop(this,function(b){if(null!=g.node(b)){d.loopParents(this,
b,function(c){f.push(new a.common.Edge(c,b));g.removeChildRelation(c,b);return d.SKIP});var c=[];g.loopTopo(this,function(a){c.push(a)});g.loopTopoReversed(this,function(a){c.push(a)});for(var e=0;e<c.length;e+=1)g.removeNode(c[e])}});c=0;for(e=f.length;c<e;c+=1){var h=f[c];if(!d.removeChildRelation(h.from,h.to))throw"Relation does not exists";}if(b&&d.hasLoops())throw"Failed to clean loops in family";var k=d.getGraph(this,function(a,b){return{from:a,to:b,capacity:1,flow:0}});var l=f.length;c=0;for(e=
f.length;c<e;c+=1)h=f[c],b=k.edge(h.from,"__2000__"),null==b?k.addEdge(h.from,"__2000__",{from:h.from,to:"__2000__",capacity:1,flow:0,tos:[h.to]}):(b.capacity+=1,b.tos.push(h.to)),b=k.edge("__1000__",h.to),null==b?k.addEdge("__1000__",h.to,{from:"__1000__",to:h.to,capacity:1,flow:0,froms:[h.from]}):(b.capacity+=1,b.froms.push(h.from));h=0;for(c=null;;){c=k.getLevelGraph(this,"__1000__",function(a,b,c){return a==c.from?c.capacity>c.flow:0<c.flow});if(!c.hasNode("__2000__"))break;for(;;){var n=k.dfsPath(this,
"__1000__","__2000__",function(a,b,c){return a==c.from?c.capacity>c.flow:0<c.flow});if(0==n.length)break;var m=Infinity;c=0;for(e=n.length;c<e-1;c+=1){var q=n[c];b=n[c+1];b=k.edge(q,b);var p=0;p=b.from==q?b.capacity-b.flow:b.flow;if(0==p)throw"Broken flow path";m=Math.min(m,p)}c=0;for(e=n.length;c<e-1;c+=1)q=n[c],b=n[c+1],b=k.edge(q,b),b.flow=b.from==q?b.flow+m:b.flow-m;h+=m}}if(h<l){var r=k.getLevelGraph(this,"__1000__",function(a,b,c){return a==c.from?c.capacity>c.flow:!1}),t=[];r.loopNodes(this,
"__1000__",function(b){k.loopNodeEdges(this,b,function(c,d){if(d.to==c&&!r.hasNode(c)){var e=!0;k.dfsLoop(this,c,function(a,b,c){return c.from==a?0<c.capacity:!1},function(a){return r.hasNode(a)?(e=!1,!0):!1});e&&t.push(new a.common.Edge(b,c))}})});n=[];c=m=0;for(e=t.length;c<e;c+=1)if(p=t[c],"__1000__"==p.from)for(b=k.edge(p.from,p.to),l=0,q=b.froms.length;l<q;l+=1)n.push(new a.common.Edge(b.froms[l],p.to)),m+=1;else if("__2000__"==p.to)for(b=k.edge(p.from,p.to),l=0,q=b.tos.length;l<q;l+=1)n.push(new a.common.Edge(p.from,
b.tos[l])),m+=1;else n.push(p),m+=1;if(m!=h)throw"Failed to properly collect edges cutting maximum flow";f=n}return f};a.common.getFamilyUnits=function(a){function b(){this.toIndex=this.fromIndex=0;this.items=[];this.hash={}}function c(a){this.id=a;this.parents=new b;this.children=new b;this.loopSiblings=function(a,b,c){this._loop(a,this.parents.hash.hasOwnProperty(b)?this.parents.items:this.children.items,c)};this.loopNonSiblings=function(a,b,c){this._loop(a,this.parents.hash.hasOwnProperty(b)?this.children.items:
this.parents.items,c)};this.loop=function(a,b){this._loop(a,this.parents.items,b);this._loop(a,this.children.items,b)};this._loop=function(a,b,c){if(null!=c)for(var d=0,e=b.length;d<e;d+=1)c.call(a,b[d])};this.addParent=function(a){this._add(a,this.parents)};this.addChild=function(a){this._add(a,this.children)};this._add=function(a,b){b.hash.hasOwnProperty(a)||(b.items.push(a),b.hash[a]=!0)}}var e=[],g={},d;var h=0;a.loop(this,function(b,d){var f=a.countChildren(b);if(0<f&&!g.hasOwnProperty(b)){var k=
new c(h);h+=1;k.addParent(b);a.loopChildren(this,b,function(b,c){k.addChild(b);1==f&&a.loopParents(this,b,function(b){k.addParent(b);g[b]=k;return a.SKIP});return a.SKIP});e.push(k);g[b]=k}});var k={};h=0;for(d=e.length;h<d;h+=1){var l=e[h];l.loop(this,function(a){k.hasOwnProperty(a)?k[a].push(l):k[a]=[l]})}return k};a.common.getLiniarBreaks=function(c){function b(b,d){var f=0,h=(e[d]-e[b]+c[b])/(d-b+1),g=a.common.binarySearch(c,function(a){return h-a},b,d);g.item<=h?(f+=h*(g.index+1-b)-(e[g.index]-
e[b]+c[b]),f+=e[d]-e[g.index]-h*(d-g.index)):(f+=h*(g.index-b)-(e[g.index]-e[b]-c[g.index]+c[b]),f+=e[d]-e[g.index]+c[g.index]-h*(d-g.index+1));return f}function f(a,c){var d=0+b(0,a);c>a+1&&(d+=b(a+1,c-1));return d+=b(c,g-1)}for(var e=[],g=c.length,d=0,h=0;h<g;h+=1)d+=c[h],e[h]=d;d=0;h=g-1;for(var k=f(d,h);d<h+1;){var l=f(d+1,h),n=f(d,h-1);if(l<n){if(l>=k)break;d+=1;k=l}else{if(n>=k)break;--h;k=n}}return[d,h-1,g-1]};a.common.getMergedRectangles=function(c,b,f){function e(a,b){this.start=a;this.startHead=
null;this.end=b;this.endHead=null;this.overlap=function(a){return!(this.end<a.start||this.start>a.end)}}function g(a,b){this.x=a;this.ranges=b}function d(a,b){this.isHead=a;this.list=b;y.hasOwnProperty(b)||(y[b]=[]);y[b].push(this);this.add=function(a){a.from.equalTo(a.to)||(this.isHead?F[this.list].add(B,a):F[this.list].unshift(B,a),B+=1)};this.getTail=function(){return new d(!this.isHead,this.list)};this.attach=function(a){if(this.list!=a.list){F[this.list].attach(F[a.list]);var b=y[a.list];delete y[a.list];
if(null!=b)for(var c=0,d=b.length;c<d;c+=1){var e=b[c];e!=a&&(e.list=this.list,y[this.list].push(e))}}}}function h(b){F.push(new a.common.LinkedHashItems);return new d(b,F.length-1)}var k;b.sort(function(a,b){return a.x==b.x?a.y-b.y:a.x-b.x});var l=[],n={};var m=0;for(k=b.length;m<k;m+=1){var q=b[m];var p=[q.x,q.right()];for(var r=0;r<p.length;r+=1){var t=p[r];var u=n[t];null==u&&(u={x:t,add:[],remove:[]},n[t]=u,l.push(u));t==q.x?u.add.push(m):u.remove.push(m)}}l.sort(function(a,b){return a.x-b.x});
r={};n=[];n.push(new g(null,[]));m=0;for(k=l.length;m<k;m+=1){u=l[m];q=0;for(p=u.add.length;q<p;q+=1)r[u.add[q]]=!0;q=0;for(p=u.remove.length;q<p;q+=1)delete r[u.remove[q]];t=[];for(var w in r)r.hasOwnProperty(w)&&t.push(b[w]);t.sort(function(a,b){return a.y-b.y});var v=[],x=null,E=null;q=0;for(p=t.length;q<p;q+=1){var A=t[q];null==x?(x=A.y,E=A.bottom()):E<A.y?(v.push(new e(x,E)),x=A.y,E=A.bottom()):E=Math.max(E,A.bottom())}null!=x&&v.push(new e(x,E));n.push(new g(u.x,v))}var F=[],y={},B=1;m=1;for(k=
n.length;m<k;m+=1)for(b=n[m-1],u=n[m],q=w=0;w<b.ranges.length||q<u.ranges.length;)if(p=w<b.ranges.length?b.ranges[w]:null,r=q<u.ranges.length?u.ranges[q]:null,null==r){l=[new a.common.Point(b.x,p.end),new a.common.Point(u.x,p.end),new a.common.Point(u.x,p.start),new a.common.Point(b.x,p.start)];for(v=1;v<l.length;v+=1)p.endHead.add(new a.common.Vector(l[v-1],l[v]));p.endHead.attach(p.startHead);w+=1}else if(null==p)r.endHead=h(!0),r.endHead.add(new a.common.Vector(new a.common.Point(u.x,r.start),
new a.common.Point(u.x,r.end))),r.startHead=r.endHead.getTail(),q+=1;else if(r.overlap(p)){l=[new a.common.Point(b.x,p.start),new a.common.Point(u.x,p.start),new a.common.Point(u.x,r.start)];for(v=1;v<l.length;v+=1)p.startHead.add(new a.common.Vector(l[v],l[v-1]));r.startHead=p.startHead;for(v=!0;v;)if(v=!1,p.end>r.end)t=q+1<u.ranges.length?u.ranges[q+1]:null,null!=t&&t.overlap(p)&&(v=new a.common.Point(u.x,t.start),x=new a.common.Point(u.x,r.end),r.endHead=h(!0),r.endHead.add(new a.common.Vector(v,
x)),t.startHead=r.endHead.getTail(),q+=1,r=t,v=!0);else if(t=w+1<b.ranges.length?b.ranges[w+1]:null,null!=t&&t.overlap(r)){l=[new a.common.Point(b.x,p.end),new a.common.Point(u.x,p.end),new a.common.Point(u.x,t.start),new a.common.Point(b.x,t.start)];for(v=1;v<l.length;v+=1)p.endHead.add(new a.common.Vector(l[v-1],l[v]));p.endHead.attach(t.startHead);w+=1;p=t;v=!0}l=[new a.common.Point(b.x,p.end),new a.common.Point(u.x,p.end),new a.common.Point(u.x,r.end)];for(v=1;v<l.length;v+=1)p.endHead.add(new a.common.Vector(l[v-
1],l[v]));r.endHead=p.endHead;w+=1;q+=1}else if(p.start<r.start){l=[new a.common.Point(b.x,p.end),new a.common.Point(u.x,p.end),new a.common.Point(u.x,p.start),new a.common.Point(b.x,p.start)];for(v=1;v<l.length;v+=1)p.endHead.add(new a.common.Vector(l[v-1],l[v]));p.endHead.attach(p.startHead);w+=1}else r.endHead=h(!0),r.endHead.add(new a.common.Vector(new a.common.Point(u.x,r.start),new a.common.Point(u.x,r.end))),r.startHead=r.endHead.getTail(),q+=1;if(null!=f)for(m=0;m<F.length;m+=1)y.hasOwnProperty(m)&&
(k=F[m],l=[],k.iterate(function(a,b){0==l.length&&l.push(a.from);l.push(a.to)}),f.call(c,l))};a.common.getMinimumCrossingRows=function(a,b,f){var c=null,g=null;if(null!=f){b.sort(function(a,b){return a.y-b.y});for(var d=0;d<b.length;d+=1){var h=b[d],k=h.bottom();null===c?(c=h.y,g=k):h.y>=g?(f.call(a,c),c=h.y,g=k):(h.y>c&&(c=h.y),k<g&&(g=k))}null!==c&&f.call(a,c)}};a.common.graph=function(){function c(a,b,c,f){var d=[],h,g;d.push(b);c[b]=!0;if(null!=f)for(;0<d.length;){b=[];var k=0;for(h=d.length;k<
h;k+=1){var p=d[k];if(f.call(a,p))return;p=e[p];for(g in p)p.hasOwnProperty(g)&&!c.hasOwnProperty(g)&&(c[g]=!0,b.push(g))}d=b}}function b(a,b){var c=null,d,f,g=null;for(d in e)if(e.hasOwnProperty(d)){var m=e[d];var q=0;for(f in m)m.hasOwnProperty(f)&&(q+=b.call(a,m[f],d,f));if(q>g||null==g)c=d,g=q}return c}function f(a,c,f,k,l){var d={},h,g={},p=0,r,t;if(null!=f&&null!=k&&(null==c&&(c=b(a,f)),null!=c))for(k.call(a,c),d[c]=!0,p+=1,g[c]=null;0<p;){c=[];var u=r=null;var w={};for(h in d)if(d.hasOwnProperty(h)){var v=
e[h];var x=!1;for(t in v)if(v.hasOwnProperty(t)&&!g.hasOwnProperty(t)){var E=f.call(a,v[t],h,t);x=!0;switch(l){case 1:null==w[t]&&(w[t]=0);w[t]+=E;if(!u||w[t]>u)r=t,u=w[t];break;case 2:if(w[t]=null==w[t]?E:Math.min(w[t],E),!u||w[t]<u)r=t,u=w[t]}}x||c.push(h)}if(null==r)break;else d[r]=!0,p+=1,g[r]=!0,k.call(a,r);x=0;for(r=c.length;x<r;x+=1)delete d[c[x]],--p}}var e={};return{addEdge:function(a,b,c){null!=e[a]&&null!=e[a][b]||null==c||(null==e[a]&&(e[a]={}),e[a][b]=c,null==e[b]&&(e[b]={}),e[b][a]=
c)},edge:function(a,b){var c=null;null!=e[a]&&e[a][b]&&(c=e[a][b]);return c},hasNode:function(a){return e.hasOwnProperty(a)},loopNodes:function(a,b,f){var d={};if(null==b)for(b in e)e.hasOwnProperty(b)&&(d.hasOwnProperty[b]||c(a,b,d,f));else c(a,b,d,f)},loopNodeEdges:function(a,b,c){var d;if(null!=c&&(b=e[b],null!=b))for(d in b)b.hasOwnProperty(d)&&c.call(a,d,b[d])},getSpanningTree:function(b,c){var d=a.common.tree(),f=a.common.FibonacciHeap(!0),g={},n;f.add(b,0,null);for(g[b]=null;null!=(b=f.extractRoot());){var m=
e[b.key];for(n in m)if(m.hasOwnProperty(n)&&!d.node(n)){var q=null!=c?c(m[n]):m[n];var p=f.getPriority(n);null==p?(f.add(n,q,null),g[n]=b.key.toString()):p<=q&&(f.setPriority(n,q),g[n]=b.key.toString())}d.add(g[b.key],b.key.toString(),{})}return d},getTotalWeightGrowthSequence:function(a,c,e){var d=b(a,c);f(a,d,c,e,1)},getMinimumWeightGrowthSequence:function(a,b,c,e){f(a,b,c,e,2)},getShortestPath:function(b,c,f,k,l){var d=a.common.FibonacciHeap(!1),h,g={},p={},r=0,t=0;var u=0;for(h=f.length;u<h;u+=
1){var w=f[u];p.hasOwnProperty(w)||(r+=1,p[w]=!0)}d.add(c,0,null);for(g[c]=null;null!=(c=d.extractRoot());){f=e[c.key];for(w in f)f.hasOwnProperty(w)&&(h=1,null!=k?(h=k.call(b,f[w],c,w),u=c.priority+h):u=c.priority+1,0<=h&&(h=d.getPriority(w),null!=h?h>u&&(d.setPriority(w,u),g[w]=c.key):g.hasOwnProperty(w)||(d.add(w,u,null),g[w]=c.key)));if(p.hasOwnProperty(c.key)){f=[];for(u=c.key;null!=u;)f.push(u),u=g[u];l.call(b,f,c.key);t+=1;if(t>=r)break}}},dfsPath:function(a,b,c,f){var d=[],h={};d.push(b);
h[b]=null;if(b!=c)for(;0<d.length&&!h.hasOwnProperty(c);){b=d[d.length-1];--d.length;var g=e[b],k;for(k in g)if(g.hasOwnProperty(k)&&!h.hasOwnProperty(k)&&f.call(a,b,k,g[k])&&(d.push(k),h[k]=b,k==c))break}b=c;for(a=[];h.hasOwnProperty(b);)a.push(b),b=h[b];h=[];if(0<a.length)for(c=a.length-1;0<=c;--c)h.push(a[c]);return h},getLevelGraph:function(b,c,f){var d={},h=[];h.push(c);for(d[c]=1;0<h.length;){for(var g=[],m=0,q=h.length;m<q;m+=1){var p=h[m];c=d[p];var r=e[p];for(var t in r)r.hasOwnProperty(t)&&
!d.hasOwnProperty(t)&&f.call(b,p,t,r[t])&&(g.push(t),d[t]=c+1)}h=g}b=a.common.graph();for(p in e)if(d.hasOwnProperty(p))for(t in c=d[p],r=e[p],r)d.hasOwnProperty(t)&&c+1==d[t]&&b.addEdge(p,t,r[t]);return b},dfsLoop:function(a,b,c,f){var d=[],h={};d.push(b);for(h[b]=!0;0<d.length;){b=d[d.length-1];--d.length;var g=e[b],k;for(k in g)if(g.hasOwnProperty(k)&&!h.hasOwnProperty(k)&&c.call(a,b,k,g[k])&&(d.push(k),h[k]=!0,f.call(a,k)))return}}}};a.common.LCA=function(c){var b=[],f=[],e={},g;(function(){var d=
0;c.loopEulerWalk(this,function(a,c,g){b.push(a);f.push(g);e.hasOwnProperty(a)||(e[a]=d);d+=1});g=a.common.RMQ(f)})();return{getLowestCommonAncestor:function(a,c){a=e[a];c=e[c];c=a<c?g.getRangeMinimumIndex(a,c):g.getRangeMinimumIndex(c,a);return b[c]}}};a.common.LinkedHashItems=function(){function a(a,b){if(d.hasOwnProperty(a))throw"Duplicate segments are not supported!";d[a]=b;h[a]=null;null==n?(l=a,k[a]=null):(h[n]=a,k[a]=n);n=a}function b(a,b){if(d.hasOwnProperty(a))throw"Duplicate segments are not supported!";
d[a]=b;k[a]=null;null==l?(n=a,h[a]=null):(k[l]=a,h[a]=l);l=a}function f(c,e,f){if(d.hasOwnProperty(e))throw"Duplicate segments are not supported!";if(null==c)b(e,f);else{var g=h[c];null==g?a(e,f):(d[e]=f,h[c]=e,h[e]=g,k[g]=e,k[e]=c)}}function e(a,b,c,e){null==c&&(c=a?l:n);if(null!=b)for(;null!=c;){var f=d[c];if(null!=f&&b(f,c))break;c=c==e?null:a?h[c]:k[c]}}function g(a,b,c){e(!0,a,b,c)}var d={},h={},k={},l=null,n=null;return{add:a,item:function(a){return d[a]},nextKey:function(a){return h[a]},prevKey:function(a){return k[a]},
startKey:function(){return l},endKey:function(){return n},unshift:b,insertAfter:f,insertBefore:function(a,c,e){if(d.hasOwnProperty(c))throw"Duplicate segments are not supported!";if(null==a||!d.hasOwnProperty(a))throw"Before key should be defined!";a=k[a];null==a?b(c,e):f(a,c,e)},remove:function(a){var b=k[a],c=h[a];null!=b?h[b]=c:l=c;null!=c?k[c]=b:n=b;delete d[a];delete h[a];delete k[a]},isEmpty:function(){return null==l},attach:function(b){b.iterate(function(b,c){a(c,b)})},iterate:g,iterateBack:function(a,
b,c){e(!1,a,b,c)},empty:function(){d={};h={};k={};n=l=null},toArray:function(){var a=[];g(function(b){a.push(b)});return a},validate:function(a){var b,c;for(b in d)if(d.hasOwnProperty(b)&&(!h.hasOwnProperty(b)||!k.hasOwnProperty(b)))return null!=a&&(a.message="Orphant key found!"),!1;if(!d.hasOwnProperty(l)||!d.hasOwnProperty(n))return null!=a&&(a.message="Start or end values are missing!"),!1;for(b in h)if(h.hasOwnProperty(b)){if(!d.hasOwnProperty(b)||!k.hasOwnProperty(b))return null!=a&&(a.message=
"Orphant key found!"),!1;if((c=h[b])&&!h.hasOwnProperty(c))return null!=a&&(a.message="Next key not found!"),!1}for(b in k)if(k.hasOwnProperty(b)){if(!d.hasOwnProperty(b)||!h.hasOwnProperty(b))return null!=a&&(a.message="Orphant key found!"),!1;if((c=k[b])&&!k.hasOwnProperty(c))return null!=a&&(a.message="Prev key not found!"),!1}return!0}}};a.common.mergeSort=function(a,b,f){var c,g,d,h,k,l;switch(a.length){case 0:a=[];break;default:var n=[];for(c=0;c<a.length;c+=1){var m=a[c];var q=[];var p=n.length;
var r=m.length;var t=g=0;var u=h=k=d=null;0<p&&(d=n[g],k=b?b(d):d);0<r&&(h=m[t],u=b?b(h):h);for(l=null;g<p||t<r;)g>=p?(f&&l==h||(q.push(h),l=h),t+=1,t<r&&(h=m[t],u=b?b(h):h)):t>=r?(f&&l==d||(q.push(d),l=d),g+=1,g<p&&(d=n[g],k=b?b(d):d)):k<u?(f&&l==d||(q.push(d),l=d),g+=1,g<p&&(d=n[g],k=b?b(d):d)):(f&&l==h||(q.push(h),l=h),t+=1,t<r&&(h=m[t],u=b?b(h):h));n=q}a=n}return a};a.common.pile=function(){function a(a,b,c,f){this.context=c;this.from=a;this.to=b;this.offset=null;this.direction=f}function b(a,
c,d,f,k){if(a>=c.length)return 0;if(d.hasOwnProperty(a))return d[a];for(var e=c[a],h=b(a+1,c,d,f,k),g=a+1;g<c.length&&!(c[g].from>=e.to);)g+=1;c=1+b(g,c,d,f,k);c>h?(d[a]=c,f[a]=g,k[a]=!0):(d[a]=h,f[a]=a+1,k[a]=!1);return d[a]}var f=[];return{add:function(b,c,d){b<c?f.push(new a(b,c,d,1)):f.push(new a(c,b,d,-1))},resolve:function(a,c){var d,e,g=0;if(null!=c){var l=f.slice(0);l.sort(function(a,b){return a.from-b.from});for(d=[];0<l.length;){var n={};var m={};var q={};b(0,l,n,m,q);n=[];d[g]=[];for(e=
0;m.hasOwnProperty(e);)q[e]&&(n.push(e),d[g].push(l[e])),e=m[e];for(e=n.length-1;0<=e;--e)l.splice(n[e],1);g+=1}for(q=0;q<g;q+=1)for(n=d[q],e=0;e<n.length;e+=1)if(m=n[e],c.call(a,m.from,m.to,m.context,q,g,m.direction))return g}return g}}};a.common.QuadTree=function(c){function b(a,b,c,d){this.x=a;this.y=b;this.scale=c;this.size=d;this.quadrants=[];this.points=[]}function f(a){var c=a.size/2;a.quadrants=[new b(a.x,a.y,a.scale-1,c),new b(a.x+c,a.y,a.scale-1,c),new b(a.x,a.y+c,a.scale-1,c),new b(a.x+
c,a.y+c,a.scale-1,c)];c=0;for(var d=a.points.length;c<d;c+=1){var e=a.points[c];a.quadrants[a.getQuadrantIndex(Math.floor(e.x),Math.floor(e.y))].points.push(e)}a.points=null}var e=Math.max(1,Math.floor(Math.log(c)/Math.log(2))),g=8,d=256,h=null;h=new b(0,0,g,d);b.prototype.notEnclosed=function(a){return this.x<a.x||this.x+this.size>a.x+a.width||this.y<a.y||this.y+this.size>a.y+a.height?!0:!1};b.prototype.overlaps=function(a){return this.x+this.size<a.x||a.x+a.width<this.x||this.y+this.size<a.y||a.y+
a.height<this.y?!1:!0};b.prototype.getQuadrantIndex=function(a,b){var c=this.scale-1;return a>>c&1|(b>>c&1)<<1};return{addPoint:function(a){for(var c=Math.max(Math.floor(a.x),Math.floor(a.y));d<=c;){g+=1;d*=2;var k=new b(0,0,g,d);f(k);k.quadrants[0]=h;h=k}c=Math.floor(a.x);k=Math.floor(a.y);var m=h;if(0>c||0>k)throw"Negative values are not supported in the quad tree.";for(;(null==m.points||0<m.points.length)&&(m.scale!=e||null==m.points);)null!=m.points&&0<m.points.length&&f(m),m=m.quadrants[m.getQuadrantIndex(c,
k)];m.points.push(a)},loopArea:function(a,b,c){var d;if(null!=c)for(var e=[h],f=[];0<e.length||0<f.length;){var g=[],k=[];var l=0;for(d=e.length;l<d;l+=1){var n=e[l];if(n.overlaps(b))if(n.notEnclosed(b))if(null==n.points)for(var v=0;4>v;v+=1)g.push(n.quadrants[v]);else{v=0;for(var x=n.points.length;v<x;v+=1){var E=n.points[v];if(b.contains(E)&&c.call(a,E))return}}else f.push(n)}l=0;for(d=f.length;l<d;l+=1)if(n=f[l],null==n.points)for(v=0;4>v;v+=1)k.push(n.quadrants[v]);else for(v=0,x=n.points.length;v<
x;v+=1)if(c.call(a,n.points[v]))return;e=g;f=k}},validate:function(){for(var b=[h];0<b.length;){for(var c=[],d=0,e=b.length;d<e;d+=1){var f=b[d],g=new a.common.Rect(f.x,f.y,f.size,f.size);if(null!=f.points&&0<f.quadrants.length)return!1;if(null==f.points)for(g=0;4>g;g+=1)c.push(f.quadrants[g]);else for(var r=0,t=f.points.length;r<t;r+=1)if(!g.contains(f.points[r]))return!1}b=c}return!0},getPositions:function(b){for(var c=[],d=[h];0<d.length;){for(var e=[],f=0,g=d.length;f<g;f+=1){var k=d[f],t=new a.common.Rect(k.x,
k.y,k.size,k.size);t.context={isHighlighted:!1};null!=b&&b.overlaps(t)&&null!=k.points&&0<k.points.length&&(t.context.isHighlighted=!0);c.push(t);for(t=0;4>t;t+=1){var u=k.quadrants[t];null!=u&&e.push(u)}}d=e}return c}}};a.common.RMQ=function(a){function b(b,d){var f=Math.floor(Math.log(d-b+1)/e);return a[c[b][f]]<=a[c[d-(1<<f)+1][f]]?c[b][f]:c[d-(1<<f)+1][f]}var c=[],e=Math.log(2);(function(){for(var b,d=0,e=a.length;d<e;d+=1)c[d]=[d];b=1;for(e=a.length;1<<b<e;b+=1)for(d=0;d+(1<<b)-1<e;d+=1)c[d][b]=
a[c[d][b-1]]<a[c[d+(1<<b-1)][b-1]]?c[d][b-1]:c[d+(1<<b-1)][b-1]})();return{getRangeMinimumIndex:b,getRangeMinimum:function(c,d){return a[b(c,d)]}}};a.common.SortedList=function(){function a(a,b){this.value=a;this.context=b;this.right=this.left=null;this.balance=0}function b(a){if(2==a.balance){var b=a.right;var c=b.balance;if(0<=c)f(b,a),1==b.balance?(a.balance=0,b.balance=0):(a.balance=-1,b.balance=1);else{var d=b.left;e(d,b);f(b,a);a.balance=0;switch(d.balance){case 1:b.balance=-1;d.balance=0;break;
case 0:d.balance=0;b.balance=0;break;default:d.balance=1,b.balance=0}}}else if(-2==a.balance)if(c=a.left.balance,0>=c)b=a.left,e(b,a),-1==b.balance?(a.balance=0,b.balance=0):(a.balance=1,b.balance=-1);else switch(b=a.left,d=b.right,f(d,b),e(b,a),a.balance=0,d.balance){case -1:d.balance=0;b.balance=1;break;case 0:d.balance=0;b.balance=0;break;default:d.balance=-1,b.balance=0}return c}function f(a,b){d(a,b);b.right=a.right;a.right=a.left;a.left=b.left;b.left=a}function e(a,b){d(a,b);b.left=a.left;a.left=
a.right;a.right=b.right;b.right=a}function g(a,b){var c=null!=a.right?a.right:a.left;null!=b?b.value>a.value?b.left=c:b.right=c:n=c}function d(a,b){var c=a.value;a.value=b.value;b.value=c;c=a.context;a.context=b.context;b.context=c}function h(a,b,c){if(null!=c){var d=[],e;for(e=n;null!=e;)e.value>=b||null==b?(d.push(e),e=e.left):e=e.right;for(;null!=(e=d.pop())&&!c.call(a,e.value,e.context);)for(e=e.right;null!=e;)if(null!=e.left)d.push(e),e=e.left;else{if(c.call(a,e.value,e.context))return;e=e.right}}}
function k(a,b,c){if(null!=c){var d=[],e;for(e=n;null!=e;)e.value<=b||null==b?(d.push(e),e=e.right):e=e.left;for(;null!=(e=d.pop())&&!c.call(a,e.value,e.context);)for(e=e.left;null!=e;)if(null!=e.right)d.push(e),e=e.right;else{if(c.call(a,e.value,e.context))return;e=e.left}}}function l(a){var b=[],c=0;if(null!=a)for(b.push(a);0<b.length;){for(var d=[],e=0;e<b.length;e+=1)a=b[e],null!=a.left&&d.push(a.left),null!=a.right&&d.push(a.right);b=d;c+=1}return c}var n=null;return{add:function(c,d,e,f){if(null==
n)n=new a(c,d);else{for(var g=[],h=null,k=n;null!=k;)if(null!=h&&g.push(h),h=k,h.value==c)if(null!=f)f.call(e,h.context);else throw"Structure does not support duplicates.";else k=h.value>c?h.left:h.right;g.push(h);d=new a(c,d);h.value>c?h.left=d:h.right=d;for(h=d;null!=(k=g.pop());){if(h.value<k.value)if(0>k.balance){--k.balance;b(k);break}else{if(0<k.balance){--k.balance;break}--k.balance}else if(0<k.balance){k.balance+=1;b(k);break}else{if(0>k.balance){k.balance+=1;break}k.balance+=1}h=k}}},remove:function(a){for(var c=
[],d=n;null!=d;)if(d.value==a){if(null!=d.right&&null!=d.left){c.push(d);for(a=d.right;null!=a.left;)c.push(a),a=a.left;var e=a;d.value=e.value;d.context=e.context;g(a,c[c.length-1]);c.push(a)}else g(d,c[c.length-1]),c.push(d);for(a=c.length-2;0<=a;--a)if(e=c[a],d=c[a+1],e.value>d.value)if(0<e.balance){if(e.balance+=1,0===b(e))break}else{if(0===e.balance){e.balance+=1;break}e.balance+=1}else if(0>e.balance){if(--e.balance,0===b(e))break}else{if(0===e.balance){--e.balance;break}--e.balance}break}else c.push(d),
d=d.value>a?d.left:d.right},loopForward:h,loopBackward:k,nextContext:function(a){var b=null;h(this,a,function(a,c){b=c;return!0});return b},previousContext:function(a){var b=null;k(this,a,function(a,c){b=c;return!0});return b},validate:function(){if(null!=n)for(var a=[n];0<a.length;){for(var b=[],c=0;c<a.length;c+=1){var d=a[c];if(null==d.value||null!=d.left&&(b.push(d.left),d.left.value>=d.value)||null!=d.right&&(b.push(d.right),d.right.value<=d.value))return!1;if(d.balance!=l(d.right)-l(d.left))return console.log("Disbalanced node: "+
d.value+" - "+JSON.stringify(n)),!1}a=b}return!0}}};a.common.SpatialIndex=function(c){function b(b,c){this.minimum=b;this.maximum=c;this.quadTree=a.common.QuadTree(2*c)}var f=[];c.sort(function(a,b){return a-b});switch(c.length){case 0:f.push(new b(0,1E6));break;case 1:var e=c[0];f.push(new b(0,e));break;case 2:e=c[0];c=c[1];c>2*e?(f.push(new b(0,e)),f.push(new b(e,c))):f.push(new b(0,c));break;default:e=a.common.getLiniarBreaks(c);for(var g=0,d=0;d<e.length;d+=1){var h=c[e[d]];f.push(new b(g,h));
g=h}}return{addRect:function(a){for(var b=Math.max(a.width,a.height),c=a.centerPoint(),d=0,e=f.length;d<e;d+=1){var h=f[d];if(b<=h.maximum||d==e-1){c.context=a;h.quadTree.addPoint(c);break}}},loopArea:function(b,c,d){if(null!=d)for(var e=0,h=f.length;e<h;e+=1){var g=f[e],k=new a.common.Rect(c);k.offset(g.maximum/2);g.quadTree.loopArea(this,k,function(a){a=a.context;if(c.overlaps(a))return d.call(b,a)})}},validate:function(){for(var a=!0,b=0,c=f.length;b<c;b+=1){var d=f[b];a=a&&d.quadTree.validate()}return a},
getPositions:function(a){for(var b=[],c=0,d=f.length;c<d;c+=1)b=b.concat(f[c].quadTree.getPositions(a));return b}}};a.common.tree=function(c){function b(a,b,c){var e;if(null!=d[b]&&(b=k[b],null!=b)){var f=0;for(e=b.length;f<e;f+=1){var h=b[f];if(c.call(a,h,d[h],f,e-1))break}}}function f(a){var b=null;null!=h[a]&&(b=h[a]);return b}function e(a,b){var c,d=a.length;for(c=0;c<d;c+=1)if(a[c]==b)return a.splice(c,1),d-1;return d}function g(a,c,e){if(null!=e&&d.hasOwnProperty(c)){var h=f(c);null!=h&&e.call(a,
h,d[h])||(b(a,h,function(b,d){b!=c&&e.call(a,b,d)}),b(a,c,function(b,c){e.call(a,b,c)}))}}var d={},h={},k={},l={},n={};(function(b){a.common.isObject(b)&&(d=a.common.cloneObject(b.nodes,!0),h=a.common.cloneObject(b.parents,!0),k=a.common.cloneObject(b.children,!1),l=a.common.cloneObject(b.roots,!1),n=a.common.cloneObject(b.rootChildren,!0))})(c);return{loop:function(a,b){var c;if(null!=b)for(c in d)if(d.hasOwnProperty(c)&&b.call(a,c,d[c]))break},loopLevels:function(a,b,c){var e=0,f=[],h;switch(arguments.length){case 2:var g=
b;break;case 3:var l=b;g=c}if(null!=g){if(null==l)for(m in n)n.hasOwnProperty(m)&&(f=f.concat(n[m]));else null!=k[l]&&(f=f.concat(k[l]));for(;0<f.length;){var m=[];var q=0;for(h=f.length;q<h;q+=1)switch(l=f[q],g.call(a,l,d[l],e)){case 1:m=[];break;case 2:break;default:null!=k[l]&&(m=m.concat(k[l]))}f=m;e+=1}}},loopParents:function(a,b,c,e){if(null!=d[b]&&null!=c&&(!0!==e||!c.call(a,b,d[b])))for(;null!=(b=h[b])&&!c.call(a,b,d[b]););},loopChildren:b,loopChildrenRange:function(a,b,c,e,f){var h;if(null!=
d[b]&&(b=k[b],null!=b))if(c<e)for(c=Math.max(c,0),e=Math.min(e,b.length-1),h=c;h<=e&&(c=b[h],!f.call(a,c,d[c],h,NaN));h+=1);else for(c=Math.min(c,b.length-1),e=Math.max(0,e),h=c;h>=e&&(c=b[h],!f.call(a,c,d[c],h,NaN));--h);},loopChildrenReversed:function(a,b,c){var e;if(null!=d[b]){b=k[b];var f=b.length-1;if(null!=b)for(e=f;0<=e;--e){var h=b[e];if(c.call(a,h,d[h],e,f))break}}},loopPostOrder:function(a,b){var c=[],e;if(null!=b){for(f in n)n.hasOwnProperty(f)&&(c=c.concat(n[f]));for(;0<c.length;){var f=
c[c.length-1];if(f!=g&&null!=(e=k[f]))for(f=e.length-1;0<=f;--f)c.push(e[f]);else{c.pop();var g=h[f];if(b.call(a,f,d[f],g,d[g]))break}}}},loopPreOrder:function(a,b){var c=[],e;if(null!=b){for(f in n)n.hasOwnProperty(f)&&(c=c.concat(n[f]));for(;0<c.length;){var f=c[c.length-1];if(f!=l){var g=h[f];if(b.call(a,f,d[f],g,d[g]))break}if(f!=l&&null!=(e=k[f]))for(f=e.length-1;0<=f;--f)c.push(e[f]);else{c.pop();var l=h[f]}}}},loopEulerWalk:function(a,b){var c=[],e=[],f;if(null!=b){for(m in n)if(n.hasOwnProperty(m)){var g=
n[m];var l=0;for(f=g.length;l<f;l+=1)c.push(g[l]),e.push(0)}for(;0<c.length;){l=c.length-1;var m=c[l];f=e[l];if(b.call(a,m,d[m],f))break;if(m!=q&&null!=(g=k[m]))for(l=g.length-1;0<=l;--l)c.push(g[l]),e.push(f+1),0<l&&(c.push(m),e.push(f));else{c.pop();e.pop();var q=h[m]}}}},loopNeighbours:function(a,b,c,e){var f={},h=[b],k=0;if(null!=e&&d.hasOwnProperty(b))for(f[b]=!0;0<h.length;){var l=[];b=0;for(var m=h.length;b<m;b+=1){var n=h[b];if(0<k&&e.call(a,n,d[n],k))return;k<c&&g(this,n,function(a,b){f.hasOwnProperty(a)||
(l.push(a),f[a]=!0)})}h=l;k+=1}},zipUp:function(a,b,c,d){if(null!=d)for(;null!=b&&null!=c&&b!=c;){var e=h[b];var f=h[c];if(d.call(a,b,e,c,f))break;b=e;c=f}},parentid:f,parent:function(a){var b=null;null!=h[a]&&(b=d[h[a]]);return b},adopt:function(a,b){if(null!=d[a]&&null!=d[b])if(a!=b)l.hasOwnProperty(b)&&(e(n[l[b]],b)||delete n[l[b]],delete l[b]),h.hasOwnProperty(b)&&(e(k[h[b]],b)||delete k[h[b]]),h[b]=a,null!=k[a]?k[a].push(b):k[a]=[b];else throw"Item cannot be parent of itself!";else throw"Both parent and child should be in hierarchy!";
},moveChildren:function(a,c){null!=d[a]&&null!=d[c]&&a!=c&&null!=k[a]&&(b(this,a,function(a,b,d){h[a]=c}),k[c]=null!=k[c]?k[c].concat(k[a]):k[a],delete k[a])},node:function(a){return d[a]},add:function(a,b,c,e){if(null!=d[b])throw"Node already exists";if(null!=b&&null!=c&&null==d[b]&&(null!=d[a]?(h[b]=a,null!=k[a]?null==e?k[a].push(b):k[a].splice(e,0,b):k[a]=[b]):(l[b]=a,null!=n[a]?null==e?n[a].push(b):n[a].splice(e,0,b):n[a]=[b]),d[b]=c,null!=n[b]))for(k[b]=n[b],delete n[b],e=k[b],a=0,c=e.length;a<
c;a+=1){var f=e[a];delete l[f];h[f]=b}},insert:function(a,c,e){null!=d[a]&&null!=c&&null==d[c]&&null!=e&&(d[c]=e,null!=k[a]&&(k[c]=k[a]),k[a]=[c],b(this,c,function(a,b,d){h[a]=c}),h[c]=a)},hasNodes:function(){return!a.common.isEmptyObject(n)},hasChildren:function(a){return null!=k[a]},countChildren:function(a){return null!=k[a]?k[a].length:0},countSiblings:function(a){a=f(a);return null!=a?k[a].length:0},indexOf:function(b){var c=f(b);return null!=c?a.common.indexOf(k[c],b):null},getChild:function(a,
b){var c=null,e;null!=(e=k[a])&&(c=d[e[b]]);return c},arrangeChildren:function(a,b){var c;b=b.slice(0);if(null!=d[a])if(null!=k[a])if(k[a].length==b.length){var e=0;for(c=b.length;e<c;e+=1){var f=b[e];if(h[f]!=a)throw"Child "+f+" does not belong to given node!";}k[a]=b}else throw"Collections of children don't match each other!";else if(0<b.length)throw"Collections of children don't match each other!";},validate:function(){var a=!0,b;for(b in l)if(l.hasOwnProperty(b)&&null!=l[b]){a=!1;break}return a},
clone:function(){return a.common.tree({nodes:d,parents:h,children:k,roots:l,rootChildren:n})},BREAK:1,SKIP:2}};a.common.TreeLevels=function(c){function b(a){this.context=a;this.items=[]}function f(a,b,c){this.context=a;this.positions={};this.positions[c]=b;this.endLevel=this.startLevel=c}function e(a){null==g[a]&&(g[a]=new b(null),h=null===h?a:Math.min(h,a),k=null===k?a:Math.max(k,a));return g[a]}var g=[],d={},h=null,k=null;(function(b){a.common.isObject(b)&&(g=a.common.cloneObject(b.levels,!0),d=
a.common.cloneObject(b.items,!0),h=a.common.cloneObject(b.minimum,!0),k=a.common.cloneObject(b.maximum,!0))})(c);return{addlevel:function(a,b){e(a).context=b},hasLevel:function(a){return null!=g[a]},hasItem:function(a){return d.hasOwnProperty(a)},addItem:function(a,b,c){if(d.hasOwnProperty(b)){var h=e(a);h.items.push(b);b=d[b];b.positions[a]=h.items.length-1;b.startLevel=Math.min(b.startLevel,a);b.endLevel=Math.max(b.endLevel,a)}else h=e(a),h.items.push(b),d[b]=new f(c,h.items.length-1,a)},getItemContext:function(a){var b=
null;d.hasOwnProperty(a)&&(b=d[a].context);return b},getLevelIndex:function(a){return d.hasOwnProperty(a)?d[a].startLevel:null},getEndLevelIndex:function(a){return d.hasOwnProperty(a)?d[a].endLevel:null},getItemPosition:function(a,b){a=d[a];return null!=a?null!=b?a.positions[b]:a.positions[a.startLevel]:null},getItemAtPosition:function(a,b){a=g[a];var c=null;null!=a&&(c=a.items[b]);return c},loopLevels:function(a,b){var c;if(null!=b)for(c=h;c<=k;c+=1){var d=g[c];if(null!=d&&b.call(a,c,d.context))break}},
loopLevelsReversed:function(a,b){var c;if(null!=b)for(c=k;c>=h;--c){var d=g[c];if(null!=d&&b.call(a,c,d.context))break}},loopLevelItems:function(a,b,c){var e;if(null!=c){var f=g[b];if(null!=f)for(b=0,e=f.items.length;b<e;b+=1){var h=f.items[b];if(c.call(a,h,d[h].context,b))break}}},getLevelLength:function(a){var b=0;a=g[a];null!=a&&(b=a.items.length);return b},loopItems:function(a,b){var c,e,f={};if(null!=b)for(e=h;e<=k;e+=1){var l=g[e];if(null!=l){var n=l.items;var u=0;for(c=n.length;u<c;u+=1){var w=
n[u];if(!f.hasOwnProperty(w)&&(f[w]=!0,b.call(a,w,d[w].context,u,e,l.context)))return}}}},binarySearch:function(b,c,e){var f=null;null!=e&&(c=g[c],null!=c&&(f=a.common.binarySearch(c.items,function(a){return e.call(b,a,d[a].context)})));return f.item},loopMerged:function(b,c,e){var f,h=[];var k=0;for(f=g.length;k<f;k+=1){var l=g[k];null!=l&&h.push(l.items)}l=a.common.mergeSort(h,c,!0);if(null!=e)for(k=0,f=l.length;k<f&&(c=l[k],!e.call(b,c,d[c].context));k+=1);},loopFromItem:function(a,b,c,e,f){if(d.hasOwnProperty(b)){b=
d[b];var h=f||b.startLevel;f=g[h].items;b=b.positions[h];if(null!=e)if(c)for(c=b-1;0<=c&&(h=f[c],!e.call(a,h,d[h].context));--c);else for(c=b+1,b=f.length;c<b&&(h=f[c],!e.call(a,h,d[h].context));c+=1);}},loopLevelsFromItem:function(a,b,c,e){if(d.hasOwnProperty(b)&&(b=d[b],null!=e))if(c)for(c=b.endLevel+1;c<=k&&(b=g[c],!e.call(a,c,null!=b?b.context:null));c+=1);else for(c=b.startLevel-1;c>=h&&(b=g[c],!e.call(a,c,null!=b?b.context:null));--c);},getPrevItem:function(a,b){var c=null;d.hasOwnProperty(a)&&
(a=d[a],b=b||a.startLevel,c=g[b].items[a.positions[b]-1]);return c},getNextItem:function(a,b){var c=null;d.hasOwnProperty(a)&&(a=d[a],b=b||a.startLevel,c=g[b].items[a.positions[b]+1]);return c},length:function(){return g.length},isEmpty:function(){return!g.length},clone:function(){return a.common.TreeLevels({levels:g,items:d,minimum:h,maximum:k})}}};a.common.DependencyManager=function(){var a={};return{register:function(b,c){return a[b]=c},resolve:function(b,c,e){var f=[],d=e||{};return function(){for(var e=
Array.prototype.slice.call(arguments,0),g=0;g<b.length;g+=1){var l=b[g];f.push(a.hasOwnProperty(l)&&""!==l?a[l]:e.shift())}f=f.concat(e);return c.apply(d||{},f)}}}};a.common.KeyboardNavigationManager=function(){function c(a,b){this.itemid=a;this.row=b}function b(){if(null==h){var b=0;d=a.common.SortedList();a.common.getMinimumCrossingRows(this,g,function(a){d.add(a,b);b+=1});h=a.common.TreeLevels();g.sort(function(a,b){return a.horizontalCenter()-b.horizontalCenter()});for(var c=0,e=g.length;c<e;c+=
1){var f=g[c];d.loopForward(this,f.y,function(a,b){if(a>f.bottom())return!0;h.addItem(b,f.context,f)})}}}function f(a){b();if(null==k||k.itemid!=a)k=new c(a,h.getLevelIndex(a));return k}function e(a){var b=h.getItemContext(k.itemid).horizontalCenter(),c=k.itemid;h.loopLevelsFromItem(this,k.itemid,a,function(a){k.row=a;k.itemid=h.binarySearch(this,a,function(a,c){return b-c.horizontalCenter()});return!0});c==k.itemid&&(k.row=a?h.getEndLevelIndex(k.itemid):h.getLevelIndex(k.itemid))}var g=[],d,h,k=
null;return{addRect:function(b,c){b=new a.common.Rect(b);b.context=c;g.push(b)},prepair:b,getItemAbove:function(a){k=f(a);e(!1);return k.itemid},getItemBelow:function(a){k=f(a);e(!0);return k.itemid},getItemOnLeft:function(a){k=f(a);a=h.getPrevItem(k.itemid,k.row);null!=a&&(k.itemid=a);return k.itemid},getItemOnRight:function(a){k=f(a);a=h.getNextItem(k.itemid,k.row);null!=a&&(k.itemid=a);return k.itemid},getNavigationLevels:function(){b();var a=[];h.loopLevels(this,function(b,c){var d=[];h.loopLevelItems(this,
b,function(a,b,c){d.push(a)});a.push(d)});return a}}};a.common.TaskManager=function(){function c(a,b,c,e){this.name=a;this.dependencies=b;this.factory=c;this.task=null;this.color=e}var b=new a.common.family,f=new a.common.DependencyManager,e=[];return{addTask:function(a,d,f,k){if(0<e.length)throw"Task Manager is already initialized";b.add(d,a,new c(a,d,f,k))},addDependency:function(a,b){if(0<e.length)throw"Task Manager is already initialized";f.register(a,b)},getTask:function(a){return(a=b.node(a))&&
a.task},process:function(a,c,h){var d=!1;0===e.length&&b.loopTopo(this,function(a,b){b.task=f.register(a,f.resolve(b.dependencies,b.factory)());e.push(b)});h&&console.log("-- process --");for(var g={},n=0,m=e.length;n<m;n+=1){var q=e[n],p=[];if(q.name==a||g.hasOwnProperty(q.name)){if(h)var r=performance.now();(d=q.task.process(h))&&b.loopChildren(this,q.name,function(a,c){g[a]=!0;h&&p.push(a);return b.SKIP});if(h)var t=performance.now();h&&console.log(n+". "+q.name+(", "+Math.round(t-r,2)+" ms. ")+
(d?" - forces: "+p.toString():""))}if(q.name==c)break}},getProcessDiagramConfig:function(){var c=new a.famdiagram.Config;0===e.length&&b.loopTopo(this,function(a,b){b.task=f.register(a,f.resolve(b.dependencies,b.factory)());e.push(b)});for(var d=0,h=e.length;d<h;d+=1){var k=e[d],l=new a.famdiagram.ItemConfig;l.id=k.name;l.title=a.common.splitCamelCaseName(k.name).join(" ");l.description=k.task.description||"";l.itemTitleColor=k.color;l.parents=[];b.loopParents(this,k.name,function(a,c){l.parents.push(a);
return b.SKIP});c.items.push(l)}return c}}};a.pdf.graphics=function(c){this._context=this._doc=c;this._dummyPlaceholder=new a.common.Placeholder};a.pdf.graphics.prototype.clean=function(){};a.pdf.graphics.prototype.resize=function(a,b,f){};a.pdf.graphics.prototype.begin=function(){};a.pdf.graphics.prototype.end=function(){};a.pdf.graphics.prototype.reset=function(a,b){};a.pdf.graphics.prototype.activate=function(a,b){return this._dummyPlaceholder};a.pdf.graphics.prototype.text=function(a,b,f,e,g,
d,h,k,l){};a.pdf.graphics.prototype.polylinesBuffer=function(a){a.loop(this,function(a){0<a.length()&&this.polyline(a)})};a.pdf.graphics.prototype.polyline=function(a){var b=a.paletteItem.toAttr(),c,e=this._doc;e.save();a.loop(this,function(a){switch(a.segmentType){case 1:e.moveTo(Math.round(a.x)+.5,Math.round(a.y)+.5);break;case 0:e.lineTo(Math.round(a.x)+.5,Math.round(a.y)+.5);break;case 4:a.width==a.height&&a.width/2<=a.cornerRadius?e.roundedRect(Math.round(a.x)+.5,Math.round(a.y)+.5,a.width,a.height,
Math.min(a.width,a.height)/2):0===a.cornerRadius?(e.moveTo(Math.round(a.x)+.5,Math.round(a.y)+.5),e.lineTo(Math.round(a.x+a.width)+.5,Math.round(a.y)+.5),e.lineTo(Math.round(a.x+a.width)+.5,Math.round(a.y+a.height)+.5),e.lineTo(Math.round(a.x)+.5,Math.round(a.y+a.height)+.5),e.lineTo(Math.round(a.x)+.5,Math.round(a.y)+.5)):(c=Math.min(a.cornerRadius,Math.min(a.width/2,a.height/2)),e.roundedRect(Math.round(a.x)+.5,Math.round(a.y)+.5,a.width,a.height,c));break;case 2:e.quadraticCurveTo(Math.round(a.cpX)+
.5,Math.round(a.cpY)+.5,Math.round(a.x)+.5,Math.round(a.y)+.5);break;case 3:e.bezierCurveTo(Math.round(a.cpX1)+.5,Math.round(a.cpY1)+.5,Math.round(a.cpX2)+.5,Math.round(a.cpY2)+.5,Math.round(a.x)+.5,Math.round(a.y)+.5)}});e.lineJoin("round");if(null!=b.lineType)switch(a=Math.round(b.lineWidth)||1,b.lineType){case 1:e.dash(a,2*a);break;case 2:e.dash(5*a,3*a)}void 0!==b.lineWidth&&void 0!==b.fillColor?e.lineWidth(b.lineWidth).fillOpacity(b.opacity).fillAndStroke(b.fillColor,b.borderColor):void 0!==
b.lineWidth?e.lineWidth(b.lineWidth).stroke(b.borderColor):void 0!==b.fillColor&&e.fillOpacity(b.opacity).fillColor(b.fillColor);e.restore()};a.pdf.graphics.prototype.rightAngleLine=function(a,b,f,e,g){};a.pdf.graphics.prototype.template=function(c,b,f,e,g,d,h,k,l,n,m,q,p){f=0;null!==p&&void 0!==p.borderWidth&&(f=this.getPxSize(p.borderWidth));c=new a.common.Rect(c+g,b+d,h-f,k-f);null==q&&(q=new a.common.RenderEventArgs);null!==m&&m(this._doc,c,q)};a.pdf.graphics.prototype.getPxSize=function(a,b){var c=
a;"string"===typeof a&&(c=0<a.indexOf("pt")?96*parseInt(a,10)/72:0<a.indexOf("%")?parseFloat(a)/100*b:parseInt(a,10));return c};a.pdf.famdiagram.Plugin=function(c){function b(){return d.options}function f(){return d.graphics}function e(){var c=new a.common.TaskManager;c.addDependency("options",b);c.addDependency("graphics",f);c.addDependency("defaultConfig",new a.famdiagram.Config);c.addDependency("defaultItemConfig",new a.famdiagram.ItemConfig);c.addDependency("defaultTemplateConfig",new a.famdiagram.TemplateConfig);
c.addDependency("defaultButtonConfig",new a.famdiagram.ButtonConfig);c.addDependency("defaultPaletteItemConfig",new a.famdiagram.PaletteItemConfig);c.addDependency("defaultBackgroundAnnotationConfig",new a.famdiagram.BackgroundAnnotationConfig);c.addDependency("defaultConnectorAnnotationConfig",new a.famdiagram.ConnectorAnnotationConfig);c.addDependency("defaultHighlightPathAnnotationConfig",new a.famdiagram.HighlightPathAnnotationConfig);c.addDependency("defaultShapeAnnotationConfig",new a.famdiagram.ShapeAnnotationConfig);
c.addDependency("defaultLabelAnnotationConfig",new a.famdiagram.LabelAnnotationConfig);c.addDependency("isFamilyChartMode",!0);c.addDependency("showElbowDots",!0);c.addDependency("null",null);c.addDependency("foreground",2);c.addDependency("background",1);c.addTask("OptionsTask",["options"],a.famdiagram.OptionsTask,"#000000");c.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.CalloutOptionTask,"#000080");c.addTask("ConnectorsOptionTask",["OptionsTask","defaultConfig"],
a.orgdiagram.ConnectorsOptionTask,"#000080");c.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],a.famdiagram.ItemsOptionTask,"#000080");c.addTask("RemoveLoopsOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.RemoveLoopsOptionTask,"#000080");c.addTask("SpousesOptionTask",["OptionsTask","defaultItemConfig"],a.famdiagram.SpousesOptionTask,"#000080");c.addTask("ItemsSizesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig","defaultButtonConfig"],a.orgdiagram.ItemsSizesOptionTask,
"#000080");c.addTask("TemplatesOptionTask",["OptionsTask","defaultConfig","defaultButtonConfig","defaultTemplateConfig"],a.orgdiagram.TemplatesOptionTask,"#000080");c.addTask("OrientationOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.OrientationOptionTask,"#000080");c.addTask("VisualTreeOptionTask",["OptionsTask"],a.famdiagram.VisualTreeOptionTask,"#000080");c.addTask("HideGrandParentsConnectorsOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.HideGrandParentsConnectorsOptionTask,
"#000080");c.addTask("NormalizeOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.NormalizeOptionTask,"#000080");c.addTask("OrderFamilyNodesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.famdiagram.OrderFamilyNodesOptionTask,"#000080");c.addTask("LinePaletteOptionTask",["OptionsTask","defaultPaletteItemConfig"],a.famdiagram.LinePaletteOptionTask,"#000080");c.addTask("CursorItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorItemOptionTask,"#000080");c.addTask("HighlightItemOptionTask",
["OptionsTask","defaultConfig"],a.orgdiagram.HighlightItemOptionTask,"#000080");c.addTask("SelectedItemsOptionTask",["OptionsTask"],a.orgdiagram.SelectedItemsOptionTask,"#000080");c.addTask("SplitAnnotationsOptionTask",["OptionsTask"],a.orgdiagram.SplitAnnotationsOptionTask,"#00ffff");c.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");c.addTask("BackgroundShapeAnnotationOptionTask",
["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","background"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");c.addTask("ForegroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","foreground"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");c.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","background"],a.orgdiagram.HighlightPathAnnotationOptionTask,
"#000080");c.addTask("ForegroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");c.addTask("BackgroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");c.addTask("BackgroundAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultBackgroundAnnotationConfig"],a.orgdiagram.BackgroundAnnotationOptionTask,
"#000080");c.addTask("ScaleOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ScaleOptionTask,"#000080");c.addTask("UserDefinedNodesOrderTask",["OrderFamilyNodesOptionTask","defaultItemConfig"],a.famdiagram.UserDefinedNodesOrderTask,"#ff0000");c.addTask("LogicalFamilyTask",["ItemsOptionTask"],a.famdiagram.LogicalFamilyTask,"#00ffff");c.addTask("RemoveLoopsTask",["ItemsOptionTask","RemoveLoopsOptionTask","LogicalFamilyTask"],a.famdiagram.RemoveLoopsTask,"#ff0000");c.addTask("LabelAnnotationOptionTask",
["SplitAnnotationsOptionTask","RemoveLoopsTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationOptionTask,"#000080");c.addTask("LabelAnnotationTemplateOptionTask",["LabelAnnotationOptionTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationTemplateOptionTask,"#000080");c.addTask("LabelAnnotationPlacementOptionTask",["LabelAnnotationOptionTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationPlacementOptionTask,"#000080");c.addTask("CombinedContextsTask",["ItemsOptionTask",
"LabelAnnotationOptionTask"],a.orgdiagram.CombinedContextsTask,"#00ffff");c.addTask("AddLabelAnnotationsTask",["LabelAnnotationPlacementOptionTask","RemoveLoopsTask"],a.famdiagram.AddLabelAnnotationsTask,"#ff0000");c.addTask("AddSpousesTask",["SpousesOptionTask","AddLabelAnnotationsTask"],a.famdiagram.AddSpousesTask,"#ff0000");c.addTask("HideGrandParentsConnectorsTask",["HideGrandParentsConnectorsOptionTask","AddSpousesTask"],a.famdiagram.HideGrandParentsConnectorsTask,"#ff0000");c.addTask("NormalizeLogicalFamilyTask",
["NormalizeOptionTask","HideGrandParentsConnectorsTask"],a.famdiagram.NormalizeLogicalFamilyTask,"#ff0000");c.addTask("OrderFamilyNodesTask",["OrderFamilyNodesOptionTask","UserDefinedNodesOrderTask","NormalizeLogicalFamilyTask"],a.famdiagram.OrderFamilyNodesTask,"#ff0000");c.addTask("ReadTemplatesTask",["TemplatesOptionTask"],a.pdf.orgdiagram.ReadTemplatesTask,"#00ffff");c.addTask("ItemTemplateParamsTask",["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],a.orgdiagram.ItemTemplateParamsTask,
"#00ffff");c.addTask("LabelAnnotationTemplateParamsTask",["ItemsSizesOptionTask","LabelAnnotationTemplateOptionTask","ReadTemplatesTask"],a.famdiagram.LabelAnnotationTemplateParamsTask,"#00ffff");c.addTask("CombinedTemplateParamsTask",["ItemTemplateParamsTask","LabelAnnotationTemplateParamsTask"],a.famdiagram.CombinedTemplateParamsTask,"#00ffff");c.addTask("GroupTitleTemplateTask",["TemplatesOptionTask"],a.pdf.orgdiagram.GroupTitleTemplateTask,"#00ffff");c.addTask("CheckBoxTemplateTask",["ItemsSizesOptionTask"],
a.pdf.orgdiagram.CheckBoxTemplateTask,"#00ffff");c.addTask("ButtonsTemplateTask",["ItemsSizesOptionTask"],a.pdf.orgdiagram.ButtonsTemplateTask,"#00ffff");c.addTask("AnnotationLabelTemplateTask",["ItemsOptionTask"],a.pdf.orgdiagram.AnnotationLabelTemplateTask,"#00ffff");c.addTask("ConnectionsGraphTask","graphics CreateTransformTask ConnectorsOptionTask OrderFamilyNodesTask AlignDiagramTask RemoveLoopsTask".split(" "),a.orgdiagram.ConnectionsGraphTask,"#00ffff");c.addTask("HighlightItemTask",["HighlightItemOptionTask",
"null"],a.orgdiagram.HighlightItemTask,"#00ffff");c.addTask("CursorItemTask",["CursorItemOptionTask","null"],a.orgdiagram.CursorItemTask,"#00ffff");c.addTask("SelectedItemsTask",["SelectedItemsOptionTask","ItemsOptionTask"],a.orgdiagram.SelectedItemsTask,"#00ffff");c.addTask("CombinedNormalVisibilityItemsTask",["OptionsTask"],a.pdf.orgdiagram.DummyCombinedNormalVisibilityItemsTask,"#00ffff");c.addTask("CurrentControlSizeTask",["OptionsTask"],a.pdf.orgdiagram.DummyCurrentControlSizeTask,"#00ffff");
c.addTask("ItemsPositionsTask","CurrentControlSizeTask ScaleOptionTask OrientationOptionTask ItemsSizesOptionTask ConnectorsOptionTask OrderFamilyNodesOptionTask OrderFamilyNodesTask CombinedTemplateParamsTask CursorItemTask CombinedNormalVisibilityItemsTask".split(" "),a.famdiagram.ItemsPositionsTask,"#ff0000");c.addTask("AlignDiagramTask","OrientationOptionTask ItemsSizesOptionTask VisualTreeOptionTask ScaleOptionTask CurrentControlSizeTask null ItemsPositionsTask isFamilyChartMode".split(" "),
a.orgdiagram.AlignDiagramTask,"#ff0000");c.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],a.orgdiagram.CreateTransformTask,"#00ffff");c.addTask("PaletteManagerTask",["ConnectorsOptionTask","LinePaletteOptionTask"],a.orgdiagram.PaletteManagerTask,"#00ffff");c.addTask("DrawBackgroundAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask BackgroundAnnotationOptionTask LogicalFamilyTask AlignDiagramTask".split(" "),a.orgdiagram.DrawBackgroundAnnotationTask,"#008000");
c.addTask("DrawBackgroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background DrawBackgroundAnnotationTask".split(" "),a.orgdiagram.DrawShapeAnnotationTask,"#008000");c.addTask("DrawBackgroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background DrawBackgroundShapeAnnotationTask".split(" "),
a.orgdiagram.DrawConnectorAnnotationTask,"#008000");c.addTask("DrawBackgroundHighlightPathAnnotationTask","graphics ConnectorsOptionTask ForegroundHighlightPathAnnotationOptionTask ConnectionsGraphTask foreground DrawBackgroundConnectorAnnotationTask".split(" "),a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");c.addTask("DrawConnectorsTask","graphics ConnectionsGraphTask ConnectorsOptionTask showElbowDots PaletteManagerTask DrawBackgroundHighlightPathAnnotationTask".split(" "),a.orgdiagram.DrawConnectorsTask,
"#008000");c.addTask("DrawForegroundHighlightPathAnnotationTask","graphics ConnectorsOptionTask BackgroundHighlightPathAnnotationOptionTask ConnectionsGraphTask background DrawConnectorsTask".split(" "),a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");c.addTask("DrawTreeItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask null ItemsSizesOptionTask CombinedContextsTask AlignDiagramTask null CombinedTemplateParamsTask CursorItemTask SelectedItemsTask GroupTitleTemplateTask CheckBoxTemplateTask ButtonsTemplateTask DrawForegroundHighlightPathAnnotationTask".split(" "),
a.orgdiagram.DrawTreeItemsTask,"#008000");c.addTask("DrawCursorTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask CombinedTemplateParamsTask CursorItemTask SelectedItemsTask DrawTreeItemsTask".split(" "),a.orgdiagram.DrawCursorTask,"#008000");c.addTask("DrawHighlightTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask CombinedTemplateParamsTask HighlightItemTask CursorItemTask SelectedItemsTask DrawCursorTask".split(" "),
a.orgdiagram.DrawHighlightTask,"#008000");c.addTask("DrawForegroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground DrawHighlightTask".split(" "),a.orgdiagram.DrawShapeAnnotationTask,"#008000");c.addTask("DrawForegroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground DrawForegroundShapeAnnotationTask".split(" "),
a.orgdiagram.DrawConnectorAnnotationTask,"#008000");return c}function g(){d.options.hasButtons=2;d.options.pageFitMode=5;d.options.autoSizeMaximum=new a.common.Size(1E5,1E5)}var d={name:"famdiagram",doc:null,options:c,tasks:null,graphics:null};return{draw:function(c,k,l){d.doc=c;d.tasks=e(b,f);d.graphics=new a.pdf.graphics(d.doc);d.graphics.debug=!1;g();d.doc.save();d.doc.translate(k,l);d.tasks.process("OptionsTask",null,!1);d.doc.restore();c=d.tasks.getTask("AlignDiagramTask");return new a.common.Size(c.getContentSize())},
getSize:function(){d.tasks=e(b,f);g();d.tasks.process("OptionsTask","AlignDiagramTask",!1);var c=d.tasks.getTask("AlignDiagramTask");return new a.common.Size(c.getContentSize())}}};a.pdf.Template=function(c,b){this.cursorTemplate=this.dotHighlightTemplate=this.highlightTemplate=this.itemTemplate=this.templateConfig=null;null!=b&&(this.templateConfig=b,this.itemTemplate=a.common.isNullOrEmpty(b.itemTemplate)?new a.pdf.ItemTemplate(c,b):new a.pdf.UserTemplate(c,b,c.onItemRender),this.highlightTemplate=
a.common.isNullOrEmpty(b.highlightTemplate)?new a.pdf.HighlightTemplate(c,b):new a.pdf.UserTemplate(c,b,c.onHighlightRender),this.dotHighlightTemplate=new a.pdf.DummyTemplate(c,b),this.cursorTemplate=a.common.isNullOrEmpty(b.cursorTemplate)?new a.pdf.CursorTemplate(c,b):new a.pdf.UserTemplate(c,b,c.onCursorRender))};a.pdf.orgdiagram.DummyCurrentControlSizeTask=function(c){return{process:function(){return!0},getScrollPanelSize:function(){return new a.common.Size(800,600)},getOptimalPanelSize:function(){return new a.common.Size(775,
575)}}};a.pdf.orgdiagram.AnnotationLabelTemplateTask=function(c){var b=null;return{process:function(){return!1},getTemplate:function(){null==b&&(b=new a.pdf.AnnotationLabelTemplate);return b}}};a.pdf.orgdiagram.ButtonsTemplateTask=function(c){var b=null;return{process:function(){return!1},getTemplate:function(){null==b&&(b=new a.pdf.DummyTemplate);return b}}};a.pdf.orgdiagram.CheckBoxTemplateTask=function(c){var b=null;return{process:function(){b=null;return!0},getTemplate:function(){if(null==b){var f=
c.getOptions();b=new a.pdf.CheckBoxTemplate(f.selectCheckBoxLabel)}return b}}};a.pdf.orgdiagram.GroupTitleTemplateTask=function(c){var b=null;return{process:function(){b=null;return!0},getTemplate:function(){if(null==b){var f=c.getOptions();b=new a.pdf.GroupTitleTemplate(f.itemTitleFirstFontColor,f.itemTitleSecondFontColor)}return b}}};a.pdf.orgdiagram.ReadTemplatesTask=function(c){var b={};return{process:function(){var f=c.getOptions(),e=f.templates;b={};b.DefaultWidgetTemplate=new a.pdf.Template(f,
new a.orgdiagram.TemplateConfig);var g=new a.orgdiagram.TemplateConfig;g.name="DefaultWidgetLabelAnnotationTemplate";g.isActive=!1;g.itemSize=new a.common.Size(100,20);g.minimizedItemSize=new a.common.Size(0,0);var d=new a.pdf.Template;d.templateConfig=g;d.minimizedItemCornerRadius=g.minimizedItemSize.width/2;d.itemTemplate=new a.pdf.LabelAnnotationTemplate;d.dotHighlightTemplate=new a.pdf.DummyTemplate;b.DefaultWidgetLabelAnnotationTemplate=d;g=0;for(d=e.length;g<d;g+=1){var h=e[g];b[h.name]=new a.pdf.Template(f,
h)}return!0},getTemplate:function(a,c,g){return b[a]||b[c]||b[g]},DefaultWidgetTemplateName:"DefaultWidgetTemplate",DefaultWidgetLabelAnnotationTemplateName:"DefaultWidgetLabelAnnotationTemplate"}};a.pdf.orgdiagram.DummyCombinedNormalVisibilityItemsTask=function(a){return{process:function(){return!0},isItemSelected:function(a){return!1}}};a.pdf.orgdiagram.Plugin=function(c){function b(){return d.options}function f(){return d.graphics}function e(){var c=new a.common.TaskManager;c.addDependency("options",
b);c.addDependency("graphics",f);c.addDependency("defaultConfig",new a.orgdiagram.Config);c.addDependency("defaultItemConfig",new a.orgdiagram.ItemConfig);c.addDependency("defaultTemplateConfig",new a.orgdiagram.TemplateConfig);c.addDependency("defaultButtonConfig",new a.orgdiagram.ButtonConfig);c.addDependency("defaultBackgroundAnnotationConfig",new a.orgdiagram.BackgroundAnnotationConfig);c.addDependency("defaultConnectorAnnotationConfig",new a.orgdiagram.ConnectorAnnotationConfig);c.addDependency("defaultHighlightPathAnnotationConfig",
new a.orgdiagram.HighlightPathAnnotationConfig);c.addDependency("defaultShapeAnnotationConfig",new a.orgdiagram.ShapeAnnotationConfig);c.addDependency("isFamilyChartMode",!1);c.addDependency("showElbowDots",!1);c.addDependency("null",null);c.addDependency("foreground",2);c.addDependency("background",1);c.addTask("OptionsTask",["options"],a.orgdiagram.OptionsTask,"#000000");c.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.CalloutOptionTask,"#000080");c.addTask("ConnectorsOptionTask",
["OptionsTask","defaultConfig"],a.orgdiagram.ConnectorsOptionTask,"#000080");c.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],a.orgdiagram.ItemsOptionTask,"#000080");c.addTask("ItemsSizesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig","defaultButtonConfig"],a.orgdiagram.ItemsSizesOptionTask,"#000080");c.addTask("TemplatesOptionTask",["OptionsTask","defaultConfig","defaultButtonConfig","defaultTemplateConfig"],a.orgdiagram.TemplatesOptionTask,"#000080");c.addTask("OrientationOptionTask",
["OptionsTask","defaultConfig"],a.orgdiagram.OrientationOptionTask,"#000080");c.addTask("VisualTreeOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.VisualTreeOptionTask,"#000080");c.addTask("CursorItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorItemOptionTask,"#000080");c.addTask("HighlightItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.HighlightItemOptionTask,"#000080");c.addTask("SelectedItemsOptionTask",["OptionsTask"],a.orgdiagram.SelectedItemsOptionTask,
"#000080");c.addTask("SplitAnnotationsOptionTask",["OptionsTask"],a.orgdiagram.SplitAnnotationsOptionTask,"#00ffff");c.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");c.addTask("BackgroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","background"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");c.addTask("ForegroundHighlightPathAnnotationOptionTask",
["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","foreground"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");c.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","background"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");c.addTask("ForegroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],a.orgdiagram.ConnectorAnnotationOptionTask,
"#000080");c.addTask("BackgroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");c.addTask("BackgroundAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultBackgroundAnnotationConfig"],a.orgdiagram.BackgroundAnnotationOptionTask,"#000080");c.addTask("ScaleOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ScaleOptionTask,"#000080");c.addTask("CombinedContextsTask",["ItemsOptionTask"],
a.orgdiagram.CombinedContextsTask,"#00ffff");c.addTask("OrgTreeTask",["ItemsOptionTask"],a.orgdiagram.OrgTreeTask,"#ff0000");c.addTask("ReadTemplatesTask",["TemplatesOptionTask"],a.pdf.orgdiagram.ReadTemplatesTask,"#00ffff");c.addTask("ItemTemplateParamsTask",["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],a.orgdiagram.ItemTemplateParamsTask,"#00ffff");c.addTask("GroupTitleTemplateTask",["TemplatesOptionTask"],a.pdf.orgdiagram.GroupTitleTemplateTask,"#00ffff");c.addTask("CheckBoxTemplateTask",
["ItemsSizesOptionTask"],a.pdf.orgdiagram.CheckBoxTemplateTask,"#00ffff");c.addTask("ButtonsTemplateTask",["ItemsSizesOptionTask"],a.pdf.orgdiagram.ButtonsTemplateTask,"#00ffff");c.addTask("AnnotationLabelTemplateTask",["ItemsOptionTask"],a.pdf.orgdiagram.AnnotationLabelTemplateTask,"#00ffff");c.addTask("VisualTreeTask",["OrgTreeTask","null","VisualTreeOptionTask","isFamilyChartMode"],a.orgdiagram.VisualTreeTask,"#ff0000");c.addTask("VisualTreeLevelsTask",["VisualTreeTask","ItemTemplateParamsTask"],
a.orgdiagram.VisualTreeLevelsTask,"#ff0000");c.addTask("ConnectionsGraphTask",["graphics","CreateTransformTask","ConnectorsOptionTask","VisualTreeLevelsTask","AlignDiagramTask"],a.orgdiagram.ConnectionsGraphTask,"#00ffff");c.addTask("HighlightItemTask",["HighlightItemOptionTask","null"],a.orgdiagram.HighlightItemTask,"#00ffff");c.addTask("CursorItemTask",["CursorItemOptionTask","null"],a.orgdiagram.CursorItemTask,"#00ffff");c.addTask("SelectedItemsTask",["SelectedItemsOptionTask","ItemsOptionTask"],
a.orgdiagram.SelectedItemsTask,"#00ffff");c.addTask("CombinedNormalVisibilityItemsTask",["OptionsTask"],a.pdf.orgdiagram.DummyCombinedNormalVisibilityItemsTask,"#00ffff");c.addTask("CurrentControlSizeTask",["OptionsTask"],a.pdf.orgdiagram.DummyCurrentControlSizeTask,"#00ffff");c.addTask("ItemsPositionsTask","CurrentControlSizeTask ScaleOptionTask OrientationOptionTask ItemsSizesOptionTask ConnectorsOptionTask VisualTreeOptionTask VisualTreeTask VisualTreeLevelsTask ItemTemplateParamsTask CursorItemTask CombinedNormalVisibilityItemsTask".split(" "),
a.orgdiagram.ItemsPositionsTask,"#ff0000");c.addTask("AlignDiagramTask","OrientationOptionTask ItemsSizesOptionTask VisualTreeOptionTask ScaleOptionTask CurrentControlSizeTask null ItemsPositionsTask isFamilyChartMode".split(" "),a.orgdiagram.AlignDiagramTask,"#ff0000");c.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],a.orgdiagram.CreateTransformTask,"#00ffff");c.addTask("PaletteManagerTask",["ConnectorsOptionTask","null"],a.orgdiagram.PaletteManagerTask,"#00ffff");c.addTask("DrawBackgroundAnnotationTask",
"graphics CreateTransformTask ApplyLayoutChangesTask BackgroundAnnotationOptionTask VisualTreeTask AlignDiagramTask".split(" "),a.orgdiagram.DrawBackgroundAnnotationTask,"#008000");c.addTask("DrawBackgroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background DrawBackgroundAnnotationTask".split(" "),a.orgdiagram.DrawShapeAnnotationTask,"#008000");c.addTask("DrawBackgroundConnectorAnnotationTask",
"graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background DrawBackgroundShapeAnnotationTask".split(" "),a.orgdiagram.DrawConnectorAnnotationTask,"#008000");c.addTask("DrawTreeItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask null ItemsSizesOptionTask CombinedContextsTask AlignDiagramTask null ItemTemplateParamsTask CursorItemTask SelectedItemsTask GroupTitleTemplateTask CheckBoxTemplateTask ButtonsTemplateTask DrawBackgroundConnectorAnnotationTask".split(" "),
a.orgdiagram.DrawTreeItemsTask,"#008000");c.addTask("DrawBackgroundHighlightPathAnnotationTask","graphics ConnectorsOptionTask ForegroundHighlightPathAnnotationOptionTask ConnectionsGraphTask foreground DrawTreeItemsTask".split(" "),a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");c.addTask("DrawConnectorsTask","graphics ConnectionsGraphTask ConnectorsOptionTask showElbowDots PaletteManagerTask DrawBackgroundHighlightPathAnnotationTask".split(" "),a.orgdiagram.DrawConnectorsTask,"#008000");
c.addTask("DrawForegroundHighlightPathAnnotationTask","graphics ConnectorsOptionTask BackgroundHighlightPathAnnotationOptionTask ConnectionsGraphTask background DrawConnectorsTask".split(" "),a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");c.addTask("DrawForegroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground DrawForegroundHighlightPathAnnotationTask".split(" "),
a.orgdiagram.DrawShapeAnnotationTask,"#008000");c.addTask("DrawForegroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground DrawForegroundShapeAnnotationTask".split(" "),a.orgdiagram.DrawConnectorAnnotationTask,"#008000");c.addTask("DrawCursorTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask ItemTemplateParamsTask CursorItemTask SelectedItemsTask DrawForegroundConnectorAnnotationTask".split(" "),
a.orgdiagram.DrawCursorTask,"#008000");c.addTask("DrawHighlightTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask ItemTemplateParamsTask HighlightItemTask CursorItemTask SelectedItemsTask DrawCursorTask".split(" "),a.orgdiagram.DrawHighlightTask,"#008000");return c}function g(){d.options.hasButtons=2;d.options.pageFitMode=5;d.options.autoSizeMaximum=new a.common.Size(1E5,1E5)}var d={name:"orgdiagram",doc:null,options:c,tasks:null,graphics:null};return{draw:function(c,
k,l){d.doc=c;d.tasks=e(b,f);d.graphics=new a.pdf.graphics(d.doc);d.graphics.debug=!1;g();d.doc.save();d.doc.translate(k,l);d.tasks.process("OptionsTask",null,!1);d.doc.restore();c=d.tasks.getTask("AlignDiagramTask");return new a.common.Size(c.getContentSize())},getSize:function(){d.tasks=e(b,f);g();d.tasks.process("OptionsTask","AlignDiagramTask",!1);var c=d.tasks.getTask("AlignDiagramTask");return new a.common.Size(c.getContentSize())}}};a.pdf.AnnotationLabelTemplate=function(){return{template:function(){return{}},
getHashCode:function(){return 0},render:function(a,b,f){f=f.context;a.save();a.font("Helvetica",12).text(f.label,b.x,b.y,{width:b.width,height:b.height,align:"center"});a.restore()}}};a.pdf.CheckBoxTemplate=function(a){return{template:function(){return{}},getHashCode:function(){return 0},render:function(b,c,e){e=e.isSelected?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAF/SURBVDhPpZM7rwFREMf/u4hEY5vVkigoSERiKwq1QqOh28R30QnFRqnSKHwFn0C37Sbi0SCE2KzE41wzd/feG48g91ftmdn5zznzkLLZrNhutzidTvgEv98PRVEgxeNx0e12EYvFcDweXfdjZFmGEIKDx+MxdF0HotGomEwmV/tnUAzFyqT8KrNHLpdDJpPBZrPh81UHLPAO7XYb6/Ua8/kcpmnC5/NBkqT3BJbLJRqNBgKBACqVCgqFAg6HA/veEiiVSlBVFZfLBZ1Ox7V+81KAMtPVV6sV+v2+a/2FBeg9RDqdhqZp/E1Mp1O0Wi32V6tVLuAtLEBvGw6HmM1m2O/3yOfz7CyXy4hEItz3ZrPJtr/8dIEKUiwWYRgGX3e32yGZTOJ8PnMBB4MBB9xy14VarcaZFosFQqEQHMdBvV5HIpFw/3gATZNlWTxdHr1eT4TDYZFKpVzLPRRDsU9HeTQaCdu23dM91wKzwNNlCgaDXINHW0pF95bpn+us4AsY2TIOZFyZ9AAAAABJRU5ErkJggg==":
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAACjSURBVDhPrZNNCsQgDEY/f2q33sCCN+iNPJlXE2/gTtDiVBln1TJo+zZBJS+YELLvewkhIOeMETjnkFKCaK2LtRbbtiGl9H2+hlKKUkpLds7BGAMopYr3/rwfo+bUXFrN/yrfcXrQBDMwxkAImRfEGFucFnTeEdT/zNIEy7K0wyi/KfSGjPJoCp13BDM9EEK0eLtM67riOI7LLa0F+zI9XGeJDyTldfBA9FNyAAAAAElFTkSuQmCC";b.save();b.image(e,c.x,c.y);b.font("Helvetica",11).text(a,c.x+20,c.y+4,{ellipsis:!0,width:c.width-4,height:c.height,
align:"left"});b.restore()}}};a.pdf.CursorTemplate=function(a,b){return{template:function(){return{}},getHashCode:function(){return 0},render:function(a,c,g){a.save();a.roundedRect(c.x,c.y,c.width,c.height,4).lineWidth(b.cursorBorderWidth).stroke("#fbd850");a.restore()}}};a.pdf.DummyTemplate=function(){return{template:function(){return{}},getHashCode:function(){return 0},render:function(){}}};a.pdf.GroupTitleTemplate=function(c,b){return{template:function(){return{}},getHashCode:function(){return 0},
render:function(f,e,g){g=g.context;var d=g.groupTitleColor||"#4169e1",h=a.common.highestContrast(d,b,c);f.save();f.translate(e.width,0).rotate(90,{origin:[e.x,e.y]});f.fillColor(d).roundedRect(e.x,e.y,e.height-2,e.width,4).fill();f.fillColor(h).font("Helvetica",12).text(g.groupTitle,e.x+4,e.y+6,{ellipsis:!0,width:e.height-4,height:e.width-4,align:"center"});f.restore()}}};a.pdf.HighlightTemplate=function(a,b){return{template:function(){return{}},getHashCode:function(){return 0},render:function(a,
c,g){a.save();a.roundedRect(c.x,c.y,c.width,c.height,4).lineWidth(b.highlightBorderWidth).stroke("#fbcb09");a.restore()}}};a.pdf.ItemTemplate=function(c,b){return{template:function(){return{}},getHashCode:function(){return 0},render:function(f,e,g){g=g.context;var d=null!=g.itemTitleColor?g.itemTitleColor:"#4169e1",h=a.common.highestContrast(d,c.itemTitleSecondFontColor,c.itemTitleFirstFontColor),k=new a.common.Size(b.itemSize);k.width-=2*b.itemBorderWidth;k.height-=2*b.itemBorderWidth;f.save();f.roundedRect(e.x,
e.y,e.width,e.height,4).lineWidth(b.itemBorderWidth).stroke("#dddddd");f.fillColor(d).roundedRect(e.x+2,e.y+2,k.width-4,18,2).fill();f.fillColor(h).font("Helvetica",12).text(g.title,e.x+4,e.y+7,{ellipsis:!0,width:k.width-4-8,height:16,align:"left"});null!=g.image&&f.image(g.image,e.x+3,e.y+24);f.rect(e.x+3,e.y+24,50,60).stroke("#cccccc");f.fillColor("black").font("Helvetica",10).text(g.description,e.x+56,e.y+24,{ellipsis:!0,width:k.width-4-56,height:74,align:"left"});f.restore()}}};a.pdf.LabelAnnotationTemplate=
function(){return{template:function(){return{}},getHashCode:function(){return 0},render:function(a,b,f){f=f.context;a.save();a.font("Helvetica",12).text(f.title,b.x,b.y,{width:b.width,height:b.height,align:"center"});a.restore()}}};a.pdf.UserTemplate=function(c,b,f){return{template:function(){return{}},getHashCode:function(){return 0},render:function(e,g,d){null!=f?f(e,g,d):a.pdf.ItemTemplate(c,b).render(e,g,d)}}};return a});
