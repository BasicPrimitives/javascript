/*
 jQuery Widgets for Basic Primitives Diagram v5.2.4
 Copyright (c) 2013 - 2019 Basic Primitives Inc

 Non-commercial - Free
 http://creativecommons.org/licenses/by-nc/3.0/

 Commercial and government licenses:
 http://www.basicprimitives.com/pdf/license.pdf

*/
primitives.common.jQueryButtonsTemplate=function(){var a,b=jQuery("<ul></ul>");b.css({position:"absolute"}).addClass("ui-widget ui-helper-clearfix");a=b.wrap("<div>").parent().html();var c=primitives.common.hashCode(a);return{template:function(){return a},getHashCode:function(){return c},render:function(a,c){var b=jQuery(c.element),h=0,e,g=c.buttons,f,i,j;switch(c.renderingMode){case primitives.common.RenderingMode.Create:for(j=0;j<g.length;j+=1)e=g[j],i=jQuery('<li data-buttonname="'+e.name+'"></li>').css({position:"absolute",
top:h+"px",left:"0px",width:e.size.width+"px",height:e.size.height+"px",padding:"3px"}).addClass("orgdiagrambutton"),b.append(i),f={icons:{primary:e.icon},label:e.label},""!=e.text&&(f.text=e.text),i.button(f),primitives.common.isNullOrEmpty(e.tooltip)||null!=i.tooltip&&i.tooltip({content:e.tooltip}),h+=10+e.size.height}}}};
primitives.orgdiagram.Widget=function(a,b,c,d){this.widgetEventPrefix="orgdiagram";this.options=new a;this.control=null;this.taskManagerFactory=b;this.eventArgsFactory=c;this.templates=d};primitives.orgdiagram.Widget.prototype._create=function(){this.element.addClass("ui-widget");this.control=primitives.orgdiagram.BaseControl(this.element[0],this._readOptions(this.options),this.taskManagerFactory,this.eventArgsFactory,this.templates)};primitives.orgdiagram.Widget.prototype.destroy=function(){this.control.destroy()};
primitives.orgdiagram.Widget.prototype.update=function(a,b){this.control.update(a,b)};primitives.orgdiagram.Widget.prototype._setOption=function(a,b){jQuery.Widget.prototype._setOption.apply(this,arguments);switch(a){case "disabled":var c=jQuery([]);b?(c.filter(".ui-state-focus").blur(),c.removeClass("ui-state-hover"),c.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(c.propAttr("disabled",!1),this.element.removeClass("ui-disabled"))}this.control.setOptions(this._readOptions(this.options))};
primitives.orgdiagram.Widget.prototype._readOptions=function(a){var b={},c=this,d;for(d in a)if(a.hasOwnProperty(d))switch(d){case "onHighlightChanged":case "onCursorChanged":case "onSelectionChanging":case "onButtonClick":case "onMouseClick":case "onMouseDblClick":b[d]=function(a){return function(b,d){c._trigger(a,b,d)}}(d);break;case "onItemRender":case "onCursorRender":case "onHighlightRender":b[d]=function(a){return function(b,d){d.element=jQuery(d.element);c._trigger(a,b,d)}}(d);break;case "onHighlightChanging":b[d]=
function(a,b){var d=c.control.getOptions();c.options.highlightItem=d.highlightItem;c._trigger("onHighlightChanging",a,b)};break;case "onCursorChanging":b[d]=function(a,b){var d=c.control.getOptions();c.options.cursorItem=d.cursorItem;c._trigger("onCursorChanging",a,b)};break;case "onSelectionChanged":b[d]=function(a,b){var d=c.control.getOptions();c.options.selectedItems=d.selectedItems;c._trigger("onSelectionChanged",a,b)};break;default:b[d]=a[d]}return b};
"undefined"!=typeof jQuery&&function(a){a.widget("ui.orgDiagram",new primitives.orgdiagram.Widget(primitives.orgdiagram.Config,primitives.orgdiagram.TaskManagerFactory,primitives.orgdiagram.EventArgsFactory,{AnnotationLabelTemplate:primitives.common.AnnotationLabelTemplate,ButtonsTemplate:primitives.common.jQueryButtonsTemplate,CheckBoxTemplate:primitives.common.CheckBoxTemplate,CursorTemplate:primitives.common.CursorTemplate,DotHighlightTemplate:primitives.common.DotHighlightTemplate,GroupTitleTemplate:primitives.common.GroupTitleTemplate,
HighlightTemplate:primitives.common.HighlightTemplate,ItemTemplate:primitives.common.ItemTemplate,UserTemplate:primitives.common.UserTemplate}))}(jQuery);
primitives.callout.Config=function(){this.classPrefix="bpcallout";this.graphicsType=primitives.common.GraphicsType.Canvas;this.pointerPlacement=primitives.common.PlacementType.Auto;this.snapPoint=this.position=null;this.cornerRadius="10%";this.offset=0;this.lineWidth=this.opacity=1;this.lineType=primitives.common.LineType.Solid;this.pointerWidth="10%";this.borderColor=primitives.common.Colors.Black;this.fillColor=primitives.common.Colors.LightGray};
primitives.callout.Controller=function(){this.widgetEventPrefix="bpcallout";this.options=new primitives.callout.Config;this.m_shape=this.m_graphics=this.m_panelSize=this.m_placeholder=null};primitives.callout.Controller.prototype._create=function(){this.element.addClass("ui-widget");this._createLayout();this._redraw()};primitives.callout.Controller.prototype.destroy=function(){this._cleanLayout()};
primitives.callout.Controller.prototype._createLayout=function(){this.m_panelSize=new primitives.common.Rect(0,0,this.element.outerWidth(),this.element.outerHeight());this.m_placeholder=jQuery("<div></div>");this.m_placeholder.css({position:"relative",overflow:"hidden",top:"0px",left:"0px",padding:"0px",margin:"0px"});this.m_placeholder.css(this.m_panelSize.getCSS());this.m_placeholder.addClass("placeholder");this.m_placeholder.addClass(this.widgetEventPrefix);this.element.append(this.m_placeholder);
this.m_graphics=primitives.common.createGraphics(this.options.graphicsType,this.element[0]);this.m_shape=new primitives.common.Callout(this.m_graphics)};primitives.callout.Controller.prototype._cleanLayout=function(){null!==this.m_graphics&&this.m_graphics.clean();this.m_graphics=null;this.element.find("."+this.widgetEventPrefix).remove()};
primitives.callout.Controller.prototype._updateLayout=function(){this.m_panelSize=new primitives.common.Rect(0,0,this.element.innerWidth(),this.element.innerHeight());this.m_placeholder.css(this.m_panelSize.getCSS())};primitives.callout.Controller.prototype.update=function(a){a?(this._cleanLayout(),this._createLayout(),this._redraw()):(this._updateLayout(),this.m_graphics.resize("placeholder",this.m_panelSize.width,this.m_panelSize.height),this.m_graphics.begin(),this._redraw(),this.m_graphics.end())};
primitives.callout.Controller.prototype._redraw=function(){var a="pointerPlacement cornerRadius offset opacity lineWidth lineType pointerWidth borderColor fillColor".split(" "),b,c;this.m_graphics.activate("placeholder");for(b=0;b<a.length;b+=1)c=a[b],this.m_shape[c]=this.options[c];this.m_shape.draw(this.options.snapPoint,this.options.position)};
primitives.callout.Controller.prototype._setOption=function(a,b){jQuery.Widget.prototype._setOption.apply(this,arguments);switch(a){case "disabled":var c=jQuery([]);b?(c.filter(".ui-state-focus").blur(),c.removeClass("ui-state-hover"),c.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(c.propAttr("disabled",!1),this.element.removeClass("ui-disabled"))}};"undefined"!=typeof jQuery&&function(a){a.widget("ui.bpCallout",new primitives.callout.Controller)}(jQuery);
primitives.connector.Config=function(){this.classPrefix="bpconnector";this.graphicsType=primitives.common.GraphicsType.Canvas;this.orientationType=primitives.common.OrientationType.Top;this.connectorPlacementType=primitives.common.ConnectorPlacementType.Offbeat;this.connectorShapeType=primitives.common.ConnectorShapeType.OneWay;this.toRectangle=this.fromRectangle=null;this.offset=new primitives.common.Thickness(0,0,0,0);this.lineWidth=3;this.color=primitives.common.Colors.Black;this.lineType=primitives.common.LineType.Solid;
this.label=null;this.labelSize=new primitives.common.Size(60,30);this.labelPlacementType=primitives.common.ConnectorLabelPlacementType.Between};primitives.connector.AnnotationLabelTemplate=function(a){var b=["div",{"class":["bp-item","bp-corner-all","bp-connector-label"]}];return{template:function(){return b},getHashCode:function(){return"defaultAnnotationLabelTemplate"},render:function(c,b){b.element.innerHTML=a.label}}};
primitives.connector.Controller=function(){this.widgetEventPrefix="bpconnector";this.options=new primitives.connector.Config;this._labelTemplate=this._graphics=this._panelSize=this._placeholder=null};primitives.connector.Controller.prototype._create=function(){this.element.addClass("ui-widget");this._labelTemplate=primitives.connector.AnnotationLabelTemplate(this.options);this._createLayout();this._redraw()};primitives.connector.Controller.prototype.destroy=function(){this._cleanLayout()};
primitives.connector.Controller.prototype._createLayout=function(){this._panelSize=new primitives.common.Rect(0,0,this.element.outerWidth(),this.element.outerHeight());this._placeholder=jQuery("<div></div>");this._placeholder.css({position:"relative",overflow:"hidden",top:"0px",left:"0px",padding:"0px",margin:"0px"});this._placeholder.css(this._panelSize.getCSS());this._placeholder.addClass("placeholder");this._placeholder.addClass(this.widgetEventPrefix);this.element.append(this._placeholder);this._graphics=
primitives.common.createGraphics(this.options.graphicsType,this.element[0])};primitives.connector.Controller.prototype._cleanLayout=function(){null!==this._graphics&&this._graphics.clean();this._graphics=null;this.element.find("."+this.widgetEventPrefix).remove()};primitives.connector.Controller.prototype._updateLayout=function(){this._panelSize=new primitives.common.Rect(0,0,this.element.innerWidth(),this.element.innerHeight());this._placeholder.css(this._panelSize.getCSS())};
primitives.connector.Controller.prototype.update=function(a){a?(this._cleanLayout(),this._createLayout(),this._redraw()):(this._updateLayout(),this._graphics.resize("placeholder",this._panelSize.width,this._panelSize.height),this._graphics.begin(),this._redraw(),this._graphics.end())};
primitives.connector.Controller.prototype._redraw=function(){var a=this.options,b,c,d=new primitives.common.Transform,k=this._graphics.activate("placeholder"),l=new primitives.common.PolylinesBuffer,h=this,e=primitives.orgdiagram.ConnectorAnnotationOffsetResolver();d.size=new primitives.common.Size(this._panelSize.width,this._panelSize.height);d.setOrientation(a.orientationType);if(null!=a.fromRectangle&&null!=a.toRectangle){var g=a.fromRectangle,f=a.toRectangle;d.transformRect(g.x,g.y,g.width,g.height,
!1,this,function(a,b,c,d){g=new primitives.common.Rect(a,b,c,d)});d.transformRect(f.x,f.y,f.width,f.height,!1,this,function(a,b,c,d){f=new primitives.common.Rect(a,b,c,d)});switch(a.connectorPlacementType){case primitives.common.ConnectorPlacementType.Offbeat:b=new primitives.common.ConnectorOffbeat;break;case primitives.common.ConnectorPlacementType.Straight:b=new primitives.common.ConnectorStraight}var i;d.transformRect(0,0,a.labelSize.width,a.labelSize.height,!1,this,function(a,b,c,d){i=new primitives.common.Size(c,
d)});var j=null;d.transformRect(0,0,k.size.width,k.size.height,!1,this,function(a,c,b,d){j=new primitives.common.Size(b,d)});var k=new primitives.common.PaletteItem({lineColor:a.color,lineWidth:a.lineWidth,lineType:a.lineType}),m=!primitives.common.isNullOrEmpty(a.label),g=(new primitives.common.Rect(g)).offset(a.offset),f=(new primitives.common.Rect(f)).offset(a.offset);b.draw(l,k,g,f,6*a.lineWidth,0,i,j,a.connectorShapeType,4,a.labelPlacementType,m,e,function(a,b){!primitives.common.isNullOrEmpty(b.label)&&
null!=a&&(d.transformRect(a.x,a.y,a.width,a.height,!0,h,function(b,c,d,e){a=new primitives.common.Rect(b,c,d,e)}),c=new primitives.common.RenderEventArgs,c.context=b,h._graphics.template(a.x,a.y,0,0,0,0,a.width,a.height,h._labelTemplate.template(),h._labelTemplate.getHashCode(),h._labelTemplate.render,c,null))},a);e.resolve()}l.transform(d,!0);this._graphics.polylinesBuffer(l)};
primitives.connector.Controller.prototype._setOption=function(a,b){jQuery.Widget.prototype._setOption.apply(this,arguments);switch(a){case "disabled":var c=jQuery([]);b?(c.filter(".ui-state-focus").blur(),c.removeClass("ui-state-hover"),c.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(c.propAttr("disabled",!1),this.element.removeClass("ui-disabled"))}};"undefined"!=typeof jQuery&&function(a){a.widget("ui.bpConnector",new primitives.connector.Controller)}(jQuery);
"undefined"!=typeof jQuery&&function(a){a.widget("ui.famDiagram",new primitives.orgdiagram.Widget(primitives.famdiagram.Config,primitives.famdiagram.TaskManagerFactory,primitives.famdiagram.EventArgsFactory,{AnnotationLabelTemplate:primitives.common.AnnotationLabelTemplate,ButtonsTemplate:primitives.common.jQueryButtonsTemplate,CheckBoxTemplate:primitives.common.CheckBoxTemplate,CursorTemplate:primitives.common.CursorTemplate,DotHighlightTemplate:primitives.common.DotHighlightTemplate,GroupTitleTemplate:primitives.common.GroupTitleTemplate,
HighlightTemplate:primitives.common.HighlightTemplate,ItemTemplate:primitives.common.ItemTemplate,UserTemplate:primitives.common.UserTemplate,LabelAnnotationTemplate:primitives.common.LabelAnnotationTemplate}))}(jQuery);
primitives.shape.Config=function(){this.classPrefix="bpconnector";this.graphicsType=primitives.common.GraphicsType.Canvas;this.orientationType=primitives.common.OrientationType.Top;this.shapeType=primitives.common.ShapeType.Rectangle;this.position=null;this.offset=new primitives.common.Thickness(0,0,0,0);this.lineWidth=2;this.cornerRadius="10%";this.opacity=1;this.fillColor=this.borderColor=null;this.lineType=primitives.common.LineType.Solid;this.label=null;this.labelSize=new primitives.common.Size(60,
30);this.labelPlacement=primitives.common.PlacementType.Auto;this.labelOffset=4};primitives.shape.AnnotationLabelTemplate=function(a){var b=["div",{"class":["bp-item","bp-corner-all","bp-connector-label"]}];return{template:function(){return b},getHashCode:function(){return"defaultAnnotationLabelTemplate"},render:function(b,d){d.element.innerHTML=a.label}}};
primitives.shape.Controller=function(){this.widgetEventPrefix="bpshape";this.options=new primitives.shape.Config;this._labelTemplate=this.m_shape=this.m_graphics=this.m_panelSize=this.m_placeholder=null};primitives.shape.Controller.prototype._create=function(){this.element.addClass("ui-widget");this._labelTemplate=primitives.shape.AnnotationLabelTemplate(this.options);this._createLayout();this._redraw()};primitives.shape.Controller.prototype.destroy=function(){this._cleanLayout()};
primitives.shape.Controller.prototype._createLayout=function(){this.m_panelSize=new primitives.common.Rect(0,0,this.element.outerWidth(),this.element.outerHeight());this.m_placeholder=jQuery("<div></div>");this.m_placeholder.css({position:"relative",overflow:"hidden",top:"0px",left:"0px",padding:"0px",margin:"0px"});this.m_placeholder.css(this.m_panelSize.getCSS());this.m_placeholder.addClass("placeholder");this.m_placeholder.addClass(this.widgetEventPrefix);this.element.append(this.m_placeholder);
this.m_graphics=primitives.common.createGraphics(this.options.graphicsType,this.element[0])};primitives.shape.Controller.prototype._cleanLayout=function(){null!==this.m_graphics&&this.m_graphics.clean();this.m_graphics=null;this.element.find("."+this.widgetEventPrefix).remove()};primitives.shape.Controller.prototype._updateLayout=function(){this.m_panelSize=new primitives.common.Rect(0,0,this.element.innerWidth(),this.element.innerHeight());this.m_placeholder.css(this.m_panelSize.getCSS())};
primitives.shape.Controller.prototype.update=function(a){a?(this._cleanLayout(),this._createLayout(),this._redraw()):(this._updateLayout(),this.m_graphics.resize("placeholder",this.m_panelSize.width,this.m_panelSize.height),this.m_graphics.begin(),this._redraw(),this.m_graphics.end())};
primitives.shape.Controller.prototype._redraw=function(){var a="orientationType shapeType offset lineWidth borderColor lineType labelSize labelOffset labelPlacement cornerRadius opacity fillColor".split(" "),b,c;this.m_graphics.activate("placeholder");this.m_shape=new primitives.common.Shape(this.m_graphics);for(b=0;b<a.length;b+=1)c=a[b],this.m_shape[c]=this.options[c];this.m_shape.hasLabel=!primitives.common.isNullOrEmpty(this.options.label);this.m_shape.labelTemplate=this._labelTemplate;this.m_shape.panelSize=
new primitives.common.Size(this.m_panelSize.width,this.m_panelSize.height);this.m_shape.draw(this.options.position)};primitives.shape.Controller.prototype._setOption=function(a,b){jQuery.Widget.prototype._setOption.apply(this,arguments);switch(a){case "disabled":var c=jQuery([]);b?(c.filter(".ui-state-focus").blur(),c.removeClass("ui-state-hover"),c.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(c.propAttr("disabled",!1),this.element.removeClass("ui-disabled"))}};
"undefined"!=typeof jQuery&&function(a){a.widget("ui.bpShape",new primitives.shape.Controller)}(jQuery);
primitives.text.Config=function(){this.classPrefix="bptext";this.graphicsType=primitives.common.GraphicsType.SVG;this.orientation=primitives.text.TextOrientationType.Horizontal;this.text="";this.verticalAlignment=primitives.common.VerticalAlignmentType.Middle;this.horizontalAlignment=primitives.common.HorizontalAlignmentType.Center;this.fontSize="16px";this.fontFamily="Arial";this.color=primitives.common.Colors.Black;this.fontStyle=this.fontWeight="normal"};
primitives.text.Controller=function(){this.widgetEventPrefix="bptext";this.options=new primitives.text.Config;this.m_graphics=this.m_panelSize=this.m_placeholder=null};primitives.text.Controller.prototype._create=function(){this.element.addClass("ui-widget");this._createLayout();this._redraw()};primitives.text.Controller.prototype.destroy=function(){this._cleanLayout()};
primitives.text.Controller.prototype._createLayout=function(){this.m_panelSize=new primitives.common.Rect(0,0,this.element.outerWidth(),this.element.outerHeight());this.m_placeholder=jQuery("<div></div>");this.m_placeholder.css({position:"relative",overflow:"hidden",top:"0px",left:"0px",padding:"0px",margin:"0px"});this.m_placeholder.css(this.m_panelSize.getCSS());this.m_placeholder.addClass("placeholder");this.m_placeholder.addClass(this.widgetEventPrefix);this.element.append(this.m_placeholder);
this.m_graphics=primitives.common.createGraphics(this.options.graphicsType,this.element[0])};primitives.text.Controller.prototype._cleanLayout=function(){null!==this.m_graphics&&this.m_graphics.clean();this.m_graphics=null;this.element.find("."+this.widgetEventPrefix).remove()};primitives.text.Controller.prototype._updateLayout=function(){this.m_panelSize=new primitives.common.Rect(0,0,this.element.innerWidth(),this.element.innerHeight());this.m_placeholder.css(this.m_panelSize.getCSS())};
primitives.text.Controller.prototype.update=function(a){a?(this._cleanLayout(),this._createLayout(),this._redraw()):(this._updateLayout(),this.m_graphics.resize("placeholder",this.m_panelSize.width,this.m_panelSize.height),this.m_graphics.begin(),this._redraw(),this.m_graphics.end())};
primitives.text.Controller.prototype._redraw=function(){var a=this.m_graphics.activate("placeholder");this.m_graphics.text(a.rect.x,a.rect.y,a.rect.width,a.rect.height,this.options.text,this.options.orientation,this.options.horizontalAlignment,this.options.verticalAlignment,{fontSize:this.options.fontSize,fontFamily:this.options.fontFamily,fontStyle:this.options.fontStyle,fontWeight:this.options.fontWeight,fontColor:this.options.color})};
primitives.text.Controller.prototype._setOption=function(a,b){jQuery.Widget.prototype._setOption.apply(this,arguments);switch(a){case "disabled":var c=jQuery([]);b?(c.filter(".ui-state-focus").blur(),c.removeClass("ui-state-hover"),c.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(c.propAttr("disabled",!1),this.element.removeClass("ui-disabled"))}};"undefined"!=typeof jQuery&&function(a){a.widget("ui.bpText",new primitives.text.Controller)}(jQuery);
