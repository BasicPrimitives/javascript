/*
 Basic Primitives Diagrams v5.8.2
 Copyright (c) 2013 - 2020 Basic Primitives Inc

 Non-commercial - Free
 http://creativecommons.org/licenses/by-nc/3.0/

 Commercial and government licenses:
 http://www.basicprimitives.com/pdf/license.pdf

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};
$jscomp.getGlobal=function(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var c=0;c<a.length;++c){var b=a[c];if(b&&b.Math==Math)return b}return globalThis};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,b,e){if(c){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];d in b||(b[d]={});b=b[d]}a=a[a.length-1];e=b[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,b,e){var c=this.length||0;0>b&&(b=Math.max(0,c+b));if(null==e||e>c)e=c;e=Number(e);0>e&&(e=Math.max(0,c+e));for(b=Number(b||0);b<e;b++)this[b]=a;return this}},"es6","es3");$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(a,c){this.$jscomp$symbol$id_=a;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:c})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function a(b){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(b||"")+"_"+c++,b)}var c=0;return a}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var b=0,e={next:function(){if(b<a.length){var d=b++;return{value:c(d,a[d]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a,b){return b})}},"es8","es3");
(function(a,c){"function"===typeof define&&define.amd?define([],function(){return a.primitives=c()}):"object"===typeof module&&module.exports?module.exports=a.primitives=c():a.primitives=c()})(this,function(){var a={common:{version:"5.8.2"},orgdiagram:{},famdiagram:{},text:{},callout:{},connector:{},shape:{},pdf:{orgdiagram:{},famdiagram:{}}};a.common.getElementsByName=function(a,b,e,d){b=b.getElementsByTagName("*");for(var c=0;c<b.length;c+=1){var f=b[c];f.name==e&&d.call(a,f)}};a.common.getFixOfPixelALignment=
function(c){var b=c.getBoundingClientRect();c=b.top+document.body.scrollTop;b=b.left+document.body.scrollLeft;return new a.common.Size(-b+Math.floor(b),-c+Math.floor(c))};a.common.getElementOffset=function(a){var c=a.getBoundingClientRect();a=a.ownerDocument.documentElement;return{top:c.top+window.pageYOffset-a.clientTop,left:c.left+window.pageXOffset-a.clientLeft}};a.common.hasClass=function(a,b){a=a.className;if(null!=a&&"string"==typeof a){a=a.split(" ");for(var c=0;c<a.length;c+=1)if(a[c]==b)return!0}return!1};
a.common.stopPropagation=function(a){void 0!==a.stopPropagation?a.stopPropagation():void 0!==a.cancelBubble?a.cancelBubble=!0:void 0!==a.preventDefault&&a.preventDefault()};a.common.getInnerSize=function(c){c=window.getComputedStyle(c);return new a.common.Size(parseInt(c.width,10),parseInt(c.height,10))};a.common.isEven=function(a){return 0==a%2};a.common.isNullOrEmpty=function(a){var c=!0;void 0!==a&&null!==a&&(a=a.toString(),0<a.length&&(c=!1));return c};a.common.isArray=Array.isArray||function(a){return a instanceof
Array};a.common.loop=function(c,b,e){var d;if(null!=e)if(a.common.isArray(b)){var g=0;for(d=b.length;g<d&&!e.call(c,g,b[g]);g+=1);}else for(g in b)if(b.hasOwnProperty(g)&&e.call(c,g,b[g]))break};a.common.splitCamelCaseName=function(a){for(var c=[],e="",d=0;d<a.length;d+=1){var g=a[d];"A"<=g&&"Z">=g?(""!==e&&c.push(e),e=g):e+=g}""!==e&&c.push(e);return c};a.common.isObject=function(a){return null!==a&&"object"==typeof a};a.common.isEmptyObject=function(a){for(var c in a)if(a.hasOwnProperty(c))return!1;
return!0};a.common.cloneObject=function(c,b){if(null===c)var e=null;else if(c instanceof Array)if(b)e=c.slice(0);else{e=[];for(var d=0,g=c.length;d<g;d+=1)e.push(a.common.cloneObject(c[d],b))}else switch(typeof c){case "object":e={};for(d in c)c.hasOwnProperty(d)&&(e[d]=b?c[d]:a.common.cloneObject(c[d],b));break;default:e=c}return e};a.common.mergeObjects=function(a,b){for(var c=1;c<arguments.length;c+=1){var d=arguments[c];if(null!=d)for(var g in d)d.hasOwnProperty(g)&&(a[g]=d[g])}return a};a.common.hashCode=
function(a){var c=0,e;if(0<a.length)for(e=0;e<a.length;e+=1){var d=a.charCodeAt(e);c=(c<<5)-c+d;c&=c}return c};a.common.indexOf=function(a,b,e){var c;for(c=0;c<a.length;c+=1){var g=a[c];if(null!=e?e(g,b):g==b)return c}return-1};a.common._supportsSVG=null;a.common.supportsSVG=function(){null===a.common._supportsSVG&&(a.common._supportsSVG=document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape",
"1.0"));return a.common._supportsSVG};a.common._supportsCanvas=null;a.common.supportsCanvas=function(){null===a.common._supportsCanvas&&(a.common._supportsCanvas=!!window.HTMLCanvasElement);return a.common._supportsCanvas};a.common.createGraphics=function(c,b){var e=null,d;c=[c];for(d in a.common.GraphicsType)a.common.GraphicsType.hasOwnProperty(d)&&c.push(a.common.GraphicsType[d]);for(d=0;null===e&&d<c.length;d+=1)switch(c[d]){case 0:a.common.supportsSVG()&&(e=new a.common.SvgGraphics(b));break;
case 1:a.common.supportsCanvas()&&(e=new a.common.CanvasGraphics(b))}return e};a.common.isChrome=function(){return null!=navigator?/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor):!1};a.common.getColorHexValue=function(c){if("#"===c.substr(0,1))return c;var b=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(c);if(null!==b&&0<b.length){c=parseInt(b[2],10);var e=parseInt(b[3],10);var d=parseInt(b[4],10);c=(c<<16|e<<8|d).toString(16);return b[1]+"000000".substr(0,6-c.length)+c}if(void 0===
a.common.ColorHexs)for(e in a.common.ColorHexs={},a.common.Colors)a.common.Colors.hasOwnProperty(e)&&(a.common.ColorHexs[e.toUpperCase()]=a.common.Colors[e]);return a.common.ColorHexs[c.toUpperCase()]};a.common.getColorName=function(c){var b;c=a.common.getColorHexValue(c);if(void 0===a.common.ColorNames)for(b in a.common.ColorNames={},a.common.Colors)a.common.Colors.hasOwnProperty(b)&&(a.common.ColorNames[a.common.Colors[b]]=b);return a.common.ColorNames[c]};a.common.getRed=function(a){return"#"===
a.substr(0,1)&&7===a.length?parseInt(a.substr(1,2),16):null};a.common.getGreen=function(a){return"#"===a.substr(0,1)&&7===a.length?parseInt(a.substr(3,2),16):null};a.common.getBlue=function(a){return"#"===a.substr(0,1)&&7===a.length?parseInt(a.substr(5,2),16):null};a.common.beforeOpacity=function(c,b){var e=a.common;c=e.getColorHexValue(c);var d=Math.ceil((e.getRed(c)-255*(1-b))/b);var g=Math.ceil((e.getGreen(c)-255*(1-b))/b);c=Math.ceil((e.getBlue(c)-255*(1-b))/b);d=(d<<16|g<<8|c).toString(16);return"#"+
"000000".substr(0,6-d.length)+d};a.common.highestContrast=function(c,b,e){var d=b,g=a.common,f=c+","+b+","+e;void 0===g.highestContrasts&&(g.highestContrasts={});g.highestContrasts.hasOwnProperty(f)?d=g.highestContrasts[f]:(g.luminosity(b,c)<g.luminosity(e,c)&&(d=e),g.highestContrasts[f]=d);return d};a.common.luminosity=function(c,b){var e=a.common;c=e.getColorHexValue(c);b=e.getColorHexValue(b);c=.2126*Math.pow(e.getRed(c)/255,2.2)+.7152*Math.pow(e.getRed(c)/255,2.2)+.0722*Math.pow(e.getRed(c)/255,
2.2);e=.2126*Math.pow(e.getRed(b)/255,2.2)+.7152*Math.pow(e.getRed(b)/255,2.2)+.0722*Math.pow(e.getRed(b)/255,2.2);return c>e?(c+.05)/(e+.05):(e+.05)/(c+.05)};a.common.compareArrays=function(a,b,e){var c=!0,g;if(a.length!=b.length)c=!1;else{var f={};var h=0;for(g=a.length;h<g;h+=1){var k=null!=e?e(a[h]):a[h];f.hasOwnProperty(k)?f[k]+=1:f[k]=1}h=0;for(g=b.length;h<g;h+=1)if(k=null!=e?e(b[h]):b[h],f.hasOwnProperty(k)){if(--f[k],0>f[k]){c=!1;break}}else{c=!1;break}}return c};a.common.JsonML={};"undefined"!==
typeof document&&function(a,b){function c(a){this.value=a}function d(a){return"function"===typeof a}function g(a){switch(typeof a){case "object":return a?p(a)?2:q(a)?5:a instanceof Date?4:3:0;case "function":return 1;case "undefined":return 0;default:return 4}}var f={accesskey:"accessKey",bgcolor:"bgColor",cellpadding:"cellPadding",cellspacing:"cellSpacing",checked:"defaultChecked","class":"className",colspan:"colSpan",contenteditable:"contentEditable",defaultchecked:"defaultChecked","for":"htmlFor",
formnovalidate:"formNoValidate",hidefocus:"hideFocus",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",readonly:"readOnly",rowspan:"rowSpan",spellcheck:"spellCheck",tabindex:"tabIndex",usemap:"useMap",willvalidate:"willValidate"},h={enctype:"encoding",onscroll:"DOMMouseScroll"},k={autocapitalize:1,autocomplete:1,autocorrect:1},l={async:1,autofocus:1,checked:1,defaultchecked:1,defer:1,disabled:1,formnovalidate:1,hidden:1,indeterminate:1,ismap:1,multiple:1,novalidate:1,readonly:1,required:1,
spellcheck:1,willvalidate:1},n=/^[\r\n]+/,m=/[\r\n]+$/;c.prototype.toString=function(){return this.value};a.raw=function(a){return new c(a)};var q=a.isRaw=function(a){return a instanceof c},p=Array.isArray||function(a){return a instanceof Array},r=function(a){if(!a){if(b.createDocumentFragment)return b.createDocumentFragment();a=""}else if("!"===a.charAt(0))return b.createComment("!"===a?"":a.substr(1)+" ");return"style"===a.toLowerCase()&&b.createStyleSheet?b.createStyleSheet():b.createElement(a)},
t=function(a,c,b){"on"===c.substr(0,2)&&(c=c.substr(2));switch(typeof b){case "function":if(a.addEventListener)a.addEventListener(c,b,!1);else if(a.attachEvent&&0!==g(a[c]))a.attachEvent("on"+c,b);else{var e=a["on"+c]||a[c];a["on"+c]=a[c]=d(e)?function(a){return!1!==e.call(this,a)&&!1!==b.call(this,a)}:b}break;case "string":a["on"+c]=new Function("event",b)}},u=a.applyStyles=function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a.style[b]=c[b]);return a},v=a.appendDOM=function(a,c){if(c){var e=(a.tagName||
"").toLowerCase();if(8===a.nodeType)3===c.nodeType&&(a.nodeValue+=c.nodeValue);else if("table"===e&&a.tBodies)if(c.tagName)if((e=c.tagName.toLowerCase())&&"tbody"!==e&&"thead"!==e){var f=0<a.tBodies.length?a.tBodies[a.tBodies.length-1]:null;f||(f=r("th"===e?"thead":"tbody"),a.appendChild(f));f.appendChild(c)}else!1!==a.canHaveChildren&&a.appendChild(c);else{if(11===c.nodeType)for(;c.firstChild;)v(a,c.removeChild(c.firstChild))}else if("style"===e&&b.createStyleSheet)a.cssText=c;else if(!1!==a.canHaveChildren)a.appendChild(c);
else if("object"===e&&c.tagName&&"param"===c.tagName.toLowerCase()){try{a.appendChild(c)}catch(J){}try{a.object&&(a.object[c.name]=c.value)}catch(J){}}}},w=function(a){return!!a&&3===a.nodeType&&(!a.nodeValue||!/\S/.exec(a.nodeValue))},y=function(a,c){a&&3===a.nodeType&&c.exec(a.nodeValue)&&(a.nodeValue=a.nodeValue.replace(c,""))},D=function(a){if(a){for(;w(a.firstChild);)a.removeChild(a.firstChild);for(y(a.firstChild,n);w(a.lastChild);)a.removeChild(a.lastChild);y(a.lastChild,m)}},B=function(a){var c=
r("div");c.innerHTML=""+a;D(c);if(1===c.childNodes.length)return c.firstChild;for(a=r("");c.firstChild;)a.appendChild(c.firstChild);return a},F=function(a){return b.createTextNode("["+a+"]")};a.onerror=null;var x=a.patch=function(a,c,e){for(var d=1;d<c.length;d+=1)if(p(c[d])||"string"===typeof c[d])v(a,A(c[d],e));else if(q(c[d]))v(a,B(c[d].value));else if("object"===typeof c[d]&&null!==c[d]&&1===a.nodeType){var m=void 0,n=c[d];if(n.name&&b.attachEvent&&!a.parentNode)try{var w=r("<"+a.tagName+' name="'+
n.name+'">');a.tagName===w.tagName&&(a=w)}catch(K){}for(m in n)if(n.hasOwnProperty(m)){var E=n[m],z=g(E);if(m)if(0===z&&(E="",z=4),m=f[m.toLowerCase()]||m,"$"===m)E(a);else if("className"==m)if(p(E))for(z=0;z<E.length;z+=1)a.className+=" "+E[z];else a.className+=" "+E;else"style"===m?0!==g(a.style.cssText)?"string"==typeof E?a.style.cssText=E:u(a,E):a.style=E:"on"===m.substr(0,2)?(t(a,m,E),(m=h[m])&&t(a,m,E)):k[m.toLowerCase()]||4===z&&"$"!==m.charAt(0)&&0===g(a[m])&&0===g(a[h[m]])?l[m.toLowerCase()]?
E&&(a.setAttribute(m,m),(m=h[m])&&a.setAttribute(m,m)):(a.setAttribute(m,E),(m=h[m])&&a.setAttribute(m,E)):(a[m]=E,(m=h[m])&&(a[m]=E))}}return a},A=a.toHTML=function(c,e){try{if(!c)return null;if("string"===typeof c)return b.createTextNode(c);if(q(c))return B(c.value);if(!p(c)||"string"!==typeof c[0])throw new SyntaxError("invalid JsonML");var f=c[0];if(!f){var h=r("");for(f=1;f<c.length;f+=1)v(h,A(c[f],e));D(h);return 1===h.childNodes.length?h.firstChild:h}if("style"===f.toLowerCase()&&b.createStyleSheet)return x(b.createStyleSheet(),
c,e),null;var g=x(r(f),c,e);D(g);return g&&d(e)?e(g):g}catch(H){try{return(d(a.onerror)?a.onerror:F)(H,c,e)}catch(I){return b.createTextNode("["+I+"]")}}};a.toHTMLText=function(a,c){a=A(a,c);if(a.outerHTML)return a.outerHTML;c=r("div");c.appendChild(a);var b=c.innerHTML;c.removeChild(a);return b}}(a.common.JsonML,document);a.common.AdviserPlacementType={Auto:0,Left:2,Right:3};a.orgdiagram.AdviserPlacementType=a.common.AdviserPlacementType;a.common.AnnotationType={Connector:0,Shape:1,HighlightPath:2,
Label:3,Background:4};a.common.ChildrenPlacementType={Auto:0,Vertical:1,Horizontal:2,Matrix:3};a.orgdiagram.ChildrenPlacementType=a.common.ChildrenPlacementType;a.common.Colors={AliceBlue:"#f0f8ff",AntiqueWhite:"#faebd7",Aqua:"#00ffff",Aquamarine:"#7fffd4",Azure:"#f0ffff",Beige:"#f5f5dc",Bisque:"#ffe4c4",Black:"#000000",BlanchedAlmond:"#ffebcd",Blue:"#0000ff",BlueViolet:"#8a2be2",Brown:"#a52a2a",BurlyWood:"#deb887",Bronze:"#cd7f32",CadetBlue:"#5f9ea0",ChartReuse:"#7fff00",Chocolate:"#d2691e",Coral:"#ff7f50",
CornflowerBlue:"#6495ed",Cornsilk:"#fff8dc",Crimson:"#dc143c",Cyan:"#00ffff",DarkBlue:"#00008b",DarkCyan:"#008b8b",DarkGoldenrod:"#b8860b",DarkGray:"#a9a9a9",DarkGreen:"#006400",DarkKhaki:"#bdb76b",DarkMagenta:"#8b008b",DarkOliveGreen:"#556b2f",Darkorange:"#ff8c00",DarkOrchid:"#9932cc",DarkRed:"#8b0000",DarkSalmon:"#e9967a",DarkSeaGreen:"#8fbc8f",DarkSlateBlue:"#483d8b",DarkSlateGray:"#2f4f4f",DarkTurquoise:"#00ced1",DarkViolet:"#9400d3",DeepPink:"#ff1493",DeepSkyBlue:"#00bfff",DimGray:"#696969",
DodgerBlue:"#1e90ff",FireBrick:"#b22222",FloralWhite:"#fffaf0",ForestGreen:"#228b22",Fuchsia:"#ff00ff",Gainsboro:"#dcdcdc",GhostWhite:"#f8f8ff",Gold:"#ffd700",Goldenrod:"#daa520",Gray:"#808080",Green:"#008000",GreenYellow:"#adff2f",Honeydew:"#f0fff0",Hotpink:"#ff69b4",IndianRed:"#cd5c5c",Indigo:"#4b0082",Ivory:"#fffff0",Khaki:"#f0e68c",Lavender:"#e6e6fa",LavenderBlush:"#fff0f5",Lawngreen:"#7cfc00",Lemonchiffon:"#fffacd",LightBlue:"#add8e6",LightCoral:"#f08080",LightCyan:"#e0ffff",LightGoldenrodYellow:"#fafad2",
LightGray:"#d3d3d3",LightGreen:"#90ee90",LightPink:"#ffb6c1",LightSalmon:"#ffa07a",LightSeaGreen:"#20b2aa",LightSkyBlue:"#87cefa",LightSlateGray:"#778899",LightSteelBlue:"#b0c4de",LightYellow:"#ffffe0",Lime:"#00ff00",Limegreen:"#32cd32",Linen:"#faf0e6",Magenta:"#ff00ff",Maroon:"#800000",MediumAquamarine:"#66cdaa",MediumBlue:"#0000cd",MediumOrchid:"#ba55d3",MediumPurple:"#9370d8",MediumSeaGreen:"#3cb371",MediumSlateBlue:"#7b68ee",MediumSpringGreen:"#00fa9a",MediumTurquoise:"#48d1cc",MediumVioletRed:"#c71585",
MidnightBlue:"#191970",MintCream:"#f5fffa",MistyRose:"#ffe4e1",Moccasin:"#ffe4b5",NavajoWhite:"#ffdead",Navy:"#000080",Oldlace:"#fdf5e6",Olive:"#808000",Olivedrab:"#6b8e23",Orange:"#ffa500",OrangeRed:"#ff4500",Orchid:"#da70d6",PaleGoldenRod:"#eee8aa",PaleGreen:"#98fb98",PaleTurquoise:"#afeeee",PaleVioletRed:"#d87093",Papayawhip:"#ffefd5",Peachpuff:"#ffdab9",Peru:"#cd853f",Pink:"#ffc0cb",Plum:"#dda0dd",PowderBlue:"#b0e0e6",Purple:"#800080",Red:"#ff0000",RosyBrown:"#bc8f8f",RoyalBlue:"#4169e1",SaddleBrown:"#8b4513",
Salmon:"#fa8072",SandyBrown:"#f4a460",SeaGreen:"#2e8b57",Seashell:"#fff5ee",Sienna:"#a0522d",Silver:"#c0c0c0",SkyBlue:"#87ceeb",SlateBlue:"#6a5acd",SlateGray:"#708090",Snow:"#fffafa",SpringGreen:"#00ff7f",SteelBlue:"#4682b4",Tan:"#d2b48c",Teal:"#008080",Thistle:"#d8bfd8",Tomato:"#ff6347",Turquoise:"#40e0d0",Violet:"#ee82ee",Wheat:"#f5deb3",White:"#ffffff",WhiteSmoke:"#f5f5f5",Yellow:"#ffff00",YellowGreen:"#9acd32"};a.common.ConnectorLabelPlacementType={From:0,Between:1,To:2};a.common.ConnectorPlacementType=
{Offbeat:0,Straight:1};a.common.ConnectorShapeType={OneWay:0,TwoWay:1,BothWay:2};a.common.ConnectorStyleType={Extra:0,Regular:1,Highlight:2};a.common.ConnectorType={Squared:0,Angular:1,Curved:2};a.orgdiagram.ConnectorType=a.common.ConnectorType;a.common.ElbowType={None:0,Dot:1,Bevel:2,Round:3};a.common.Enabled={Auto:0,True:1,False:2};a.common.GraphicsType={SVG:0,Canvas:1};a.common.GroupByType={None:0,Parents:1,Children:2};a.common.HorizontalAlignmentType={Center:0,Left:1,Right:2};a.orgdiagram.ItemType=
{Regular:0,Adviser:2,Assistant:1,SubAssistant:4,SubAdviser:5,GeneralPartner:6,LimitedPartner:7,AdviserPartner:8};a.common.LabelType={Regular:0,Dummy:1,Fixed:2,None:3};a.common.Layers={BackgroundAnnotation:2,BackgroundAnnotations:3,BackgroundConnectorAnnotation:4,BackgroundHighlightPathAnnotations:5,Connector:6,ForegroundHighlightPathAnnotations:7,Highlight:8,Marker:9,Label:10,Cursor:11,Item:12,ForegroundAnnotations:13,ForegroundConnectorAnnotation:14,Annotation:15,Controls:16};a.common.LineType={Solid:0,
Dotted:1,Dashed:2};a.common.LoopsLayoutMode={Optimized:0,KeepItemsOrder:1};a.common.NavigationMode={Default:0,CursorOnly:1,HighlightOnly:3,Inactive:2};a.common.NeighboursSelectionMode={ParentsAndChildren:0,ParentsChildrenSiblingsAndSpouses:1};a.common.OrientationType={Top:0,Bottom:1,Left:2,Right:3,None:4};a.orgdiagram.OrientationType=a.common.OrientationType;a.common.PageFitMode={None:0,PageWidth:1,PageHeight:2,FitToPage:3,AutoSize:5,SelectionOnly:6};a.orgdiagram.PageFitMode=a.common.PageFitMode;
a.common.PlacementType={Auto:0,TopLeft:8,Top:1,TopRight:2,RightTop:11,Right:3,RightBottom:12,BottomRight:4,Bottom:5,BottomLeft:6,LeftBottom:10,Left:7,LeftTop:9};a.common.RenderingMode={Create:0,Update:1};a.common.SegmentType={Line:0,Move:1,QuadraticArc:2,CubicArc:3,Dot:4};a.common.SelectionPathMode={None:0,FullStack:1};a.orgdiagram.SelectionPathMode=a.common.SelectionPathMode;a.common.ShapeType={Rectangle:0,Oval:1,Triangle:2,CrossOut:3,Circle:4,Rhombus:5,Wedge:7,FramedOval:8,FramedTriangle:9,FramedWedge:10,
FramedRhombus:11,None:6};a.common.SideFlag={Top:1,Right:2,Bottom:4,Left:8};a.text.TextOrientationType={Horizontal:0,RotateLeft:1,RotateRight:2,Auto:3};a.common.UpdateMode={Recreate:0,Refresh:1,PositonHighlight:2};a.orgdiagram.UpdateMode=a.common.UpdateMode;a.common.VectorRelationType={None:0,Null:1,Collinear:2,Opposite:3};a.common.VerticalAlignmentType={Top:0,Middle:1,Bottom:2};a.common.Visibility={Auto:0,Normal:1,Dot:2,Line:3,Invisible:4};a.common.ZOrderType={Auto:0,Background:1,Foreground:2};a.common.RenderEventArgs=
function(){this.renderingMode=this.templateName=this.context=this.element=this.id=null;this.isSelected=this.isCursor=!1};a.common.BaseShape=function(){};a.common.BaseShape.prototype._getLabelPosition=function(c,b,e,d,g,f,h,k){switch(k){case 1:c=new a.common.Rect(c+e/2-g/2,b-h-f,g,f);break;case 2:c=new a.common.Rect(c+e-g,b-h-f,g,f);break;case 8:c=new a.common.Rect(c,b-h-f,g,f);break;case 3:c=new a.common.Rect(c+e+h,b+d/2-f/2,g,f);break;case 11:c=new a.common.Rect(c+e+h,b,g,f);break;case 12:c=new a.common.Rect(c+
e+h,b+d-f,g,f);break;case 4:c=new a.common.Rect(c+e-g,b+d+h,g,f);break;case 6:c=new a.common.Rect(c,b+d+h,g,f);break;case 7:c=new a.common.Rect(c-g-h,b+d/2-f/2,g,f);break;case 9:c=new a.common.Rect(c-g-h,b,g,f);break;case 10:c=new a.common.Rect(c-g-h,b+d-f,g,f);break;default:c=new a.common.Rect(c+e/2-g/2,b+d+h,g,f)}return c};a.common.BaseShape.prototype._betweenPoint=function(c,b){return new a.common.Point((c.x+b.x)/2,(c.y+b.y)/2)};a.common.BaseShape.prototype._offsetPoint=function(c,b,e){var d=c.distanceTo(b);
return 0===d||0===e?new a.common.Point(c):new a.common.Point(c.x+(b.x-c.x)/d*e,c.y+(b.y-c.y)/d*e)};a.common.Callout=function(a){this.m_graphics=a;this.pointerPlacement=0;this.cornerRadius="10%";this.offset=0;this.lineWidth=this.opacity=1;this.pointerWidth="10%";this.borderColor="#000000";this.lineType=0;this.fillColor="#d3d3d3";this.m_map=[[8,7,6],[1,null,5],[2,3,4]]};a.common.Callout.prototype=new a.common.BaseShape;a.common.Callout.prototype.draw=function(c,b){b=(new a.common.Rect(b)).offset(this.offset);
var e=new a.common.Point(b.x,b.y),d=new a.common.Point(b.right(),b.y),g=new a.common.Point(b.right(),b.bottom()),f=new a.common.Point(b.left(),b.bottom());b=[null,null,null,null,null,null,null,null];f=[e,d,g,f];d=this.m_graphics.getPxSize(this.cornerRadius,Math.min(e.distanceTo(d),d.distanceTo(g)));var h={};null!==this.fillColor&&(h.fillColor=this.fillColor,h.opacity=this.opacity);null!==this.lineColor&&(h.lineColor=this.borderColor);h.lineWidth=this.lineWidth;h.lineType=this.lineType;var k=new a.common.PaletteItem(h);
h=new a.common.PolylinesBuffer;k=h.getPolyline(k);null!==c&&(e=0===this.pointerPlacement?this._getPlacement(c,e,g):this.pointerPlacement,null!==e&&(b[e]=c));for(e=0;e<f.length;e+=1)this._drawSegment(k,f[0],f[1],f[2],this.pointerWidth,d,b[1],b[2]),c=f.shift(),f.push(c),c=b.shift(),b.push(c),c=b.shift(),b.push(c);this.m_graphics.polylinesBuffer(h)};a.common.Callout.prototype._getPlacement=function(a,b,e){return this.m_map[a.x<b.x?0:a.x>e.x?2:1][a.y<b.y?0:a.y>e.y?2:1]};a.common.Callout.prototype._drawSegment=
function(c,b,e,d,g,f,h,k){var l=this._offsetPoint(b,e,f),n=this._offsetPoint(e,b,f);d=this._offsetPoint(e,d,f);g=this.m_graphics.getPxSize(g,b.distanceTo(e)/2);0===c.length()&&c.addSegment(new a.common.MoveSegment(l));null!==h&&(l=this._betweenPoint(b,e),b=this._offsetPoint(l,b,g),g=this._offsetPoint(l,e,g),c.addSegment(new a.common.LineSegment(b)),c.addSegment(new a.common.LineSegment(h)),c.addSegment(new a.common.LineSegment(g)));c.addSegment(new a.common.LineSegment(n));null!==k?(c.addSegment(new a.common.LineSegment(k)),
c.addSegment(new a.common.LineSegment(d))):c.addSegment(new a.common.QuadraticArcSegment(e,d))};a.common.ConnectorOffbeat=function(){};a.common.ConnectorOffbeat.prototype=new a.common.BaseShape;a.common.ConnectorOffbeat.prototype.draw=function(c,b,e,d,g,f,h,k,l,n,m,q,p,r,t){p=f=0;var u=null;var v=c.getPolyline(b);var w=[];switch(l){case 1:w=[-g/2,g/2];var y=!1;break;case 0:w=[0];y=!1;break;case 2:w=[0],y=!0}var D=Math.max(q?h.width:0,5*g);if(e.right()+D<d.left()||e.left()>d.right()+D){if(e.left()>
d.right()){var B=new a.common.Point(e.left(),e.verticalCenter());var F=new a.common.Point(d.right(),d.verticalCenter())}else B=new a.common.Point(e.right(),e.verticalCenter()),F=new a.common.Point(d.left(),d.verticalCenter());q&&(e.left()>d.right()?(f=7,p=3):(f=3,p=7));var x=new a.common.Rect(B,F);var A=B.y<=F.y;var E=B.x<F.x;if(x.height<x.width){x.height<2*g&&x.offset(0,A?2*g:0,0,A?0:2*g);k=0;for(D=w.length;k<D;k+=1){var C=w[k];c.addInverted(function(e){e=e.getPolyline(b);e.addSegment(new a.common.MoveSegment(B.x,
B.y+C));e.addSegment(new a.common.QuadraticArcSegment(x.horizontalCenter(),(A?x.top():x.bottom())+C,F.x,F.y+C));y&&e.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))})},k||0==l);v.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))})}q&&(l=h.width<x.width/5*2?a.common.QuadraticArcSegment.prototype.offsetPoint(B.x,B.y,x.horizontalCenter(),A?x.top():x.bottom(),F.x,F.y,.5):new a.common.Point(B.x,A?x.top():x.bottom()),u=new a.common.Rect(l.x+(E?g:-h.width-
g),A?l.y-h.height-g:l.y+g,h.width,h.height))}else{k=0;for(D=w.length;k<D;k+=1)C=w[k],c.addInverted(function(e){e=e.getPolyline(b);e.addSegment(new a.common.MoveSegment(B.x,B.y+C));e.addSegment(new a.common.QuadraticArcSegment(x.horizontalCenter()+C*(A!=E?1:-1),(A?x.top():x.bottom())+C,x.horizontalCenter()+C*(A!=E?1:-1),x.verticalCenter()+C));e.addSegment(new a.common.QuadraticArcSegment(x.horizontalCenter()+C*(A!=E?1:-1),(A?x.bottom():x.top())+C,F.x,F.y+C));y&&e.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))})},
k||0==l),v.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))});q&&(u=new a.common.Rect(x.horizontalCenter()+(A!=E?g:-(g+h.width)),x.verticalCenter()-h.height/2,h.width,h.height))}}else if(e.verticalCenter()<d.top()||e.verticalCenter()>d.bottom()){E=e.x<k.width/2;B=new a.common.Point(E?e.right():e.left(),e.verticalCenter());F=new a.common.Point(E?d.right():d.left(),d.verticalCenter());x=new a.common.Rect(B,F);x.offset(10*g,0,10*g,0);A=B.y<=F.y;k=0;for(D=w.length;k<D;k+=1)C=w[k],
c.addInverted(function(e){e=e.getPolyline(b);e.addSegment(new a.common.MoveSegment(B.x,B.y+C));e.addSegment(new a.common.QuadraticArcSegment(E?x.right()+C*(A?-1:1):x.left()-C*(A?-1:1),x.verticalCenter(),E?d.right():d.left(),d.verticalCenter()-C));y&&e.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))})},k||0==l),v.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))});q&&(p=f=E?3:7,l=a.common.QuadraticArcSegment.prototype.offsetPoint(B.x,B.y,E?x.right():
x.left(),x.verticalCenter(),F.x,F.y,.5),u=new a.common.Rect(l.x+(E?g/2:-g/2-h.width),l.y-h.height/2,h.width,h.height))}else{B=new a.common.Point(e.horizontalCenter(),e.top());F=new a.common.Point(d.horizontalCenter(),d.top());x=new a.common.Rect(B,F);x.offset(0,7*g,0,0);E=B.x<F.x;k=0;for(D=w.length;k<D;k+=1)C=w[k],c.addInverted(function(e){e=e.getPolyline(b);e.addSegment(new a.common.MoveSegment(B.x+C,B.y));e.addSegment(new a.common.QuadraticArcSegment(x.horizontalCenter(),x.top()-C*(E?-1:1),d.horizontalCenter()-
C,d.top()));y&&e.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))})},k||0==l),v.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))});q&&(p=f=1,l=a.common.QuadraticArcSegment.prototype.offsetPoint(B.x,B.y,x.horizontalCenter(),x.top(),F.x,F.y,.5),u=new a.common.Rect(l.x-h.width/2,l.y-(n+h.height),h.width,h.height))}if(q)switch(m){case 0:u=this._getLabelPosition(e.x,e.y,e.width,e.height,u.width,u.height,n,f);break;case 2:u=this._getLabelPosition(d.x,d.y,
d.width,d.height,u.width,u.height,n,p)}null!=r&&r(u,t)};a.common.ConnectorStraight=function(){};a.common.ConnectorStraight.prototype=new a.common.BaseShape;a.common.ConnectorStraight.prototype.draw=function(c,b,e,d,g,f,h,k,l,n,m,q,p,r,t){var u,v,w,y,D=g/2,B=null,F=0,x=0,A=this;var E=new a.common.Vector(e.centerPoint(),d.centerPoint());e.loopEdges(function(a,c){u=a.getIntersectionPoint(E,!0,1);F=c;return null!=u});d.loopEdges(function(a,c){v=a.getIntersectionPoint(E,!0,1);x=c;return null!=v});if(null!=
u&&null!=v){var C=new a.common.Vector(u,v);p.getOffset(C,function(e,d,g){C.offset((e*f-(d-1)*f/2)*g);u=C.from;v=C.to;switch(l){case 1:y=new a.common.Vector(v.clone(),u.clone());y.offset(D);A._drawLine(c,b,y.from,y.to,!1);y=new a.common.Vector(u.clone(),v.clone());y.offset(D);A._drawLine(c,b,y.from,y.to,!1);break;case 0:A._drawLine(c,b,u,v,!1);break;case 2:A._drawLine(c,b,u,v,!0)}if(q){switch(m){case 0:B=A._getLabelPositionBySnapPoint(u.x,u.y,h.width,h.height,n,F);break;case 1:w=A._betweenPoint(u,
v);B=A._getLabelPositionBySnapPoint(w.x,w.y,h.width,h.height,n,3);break;case 2:B=A._getLabelPositionBySnapPoint(v.x,v.y,h.width,h.height,n,x)}null!=r&&r.call(this,B,t)}})}};a.common.ConnectorStraight.prototype._drawLine=function(c,b,e,d,g){c.addInverted(function(h){f=h.getPolyline(b);f.addSegment(new a.common.MoveSegment(e));f.addSegment(new a.common.LineSegment(d));f.addArrow(b.lineWidth,function(a){a.mergeTo(c.getPolyline(a.paletteItem))})},!1);if(g){var f=c.getPolyline(b);f.addArrow(b.lineWidth,
function(a){a.mergeTo(c.getPolyline(a.paletteItem))})}};a.common.ConnectorStraight.prototype._getLabelPositionBySnapPoint=function(c,b,e,d,g,f){var h=null;switch(f){case 0:case 1:h=new a.common.Rect(c-e/2,b-g-d,e,d);break;case 3:h=new a.common.Rect(c+g,b-d/2,e,d);break;case 5:h=new a.common.Rect(c-e/2,b+g,e,d);break;case 7:h=new a.common.Rect(c-e-g,b-d/2,e,d)}return h};a.common.Marker=function(){};a.common.Marker.Markers={};a.common.Marker.DrawCircle=function(c,b){var e=Math.min(b.width/2,b.height/
2);b=new a.common.Rect(b.horizontalCenter()-e,b.verticalCenter()-e,2*e,2*e);a.common.Marker.DrawOval(c,b)};a.common.Marker.DrawRectangle=function(c,b){c.addSegment(new a.common.MoveSegment(b.x,b.verticalCenter()));c.addSegment(new a.common.LineSegment(b.x,b.y));c.addSegment(new a.common.LineSegment(b.right(),b.y));c.addSegment(new a.common.LineSegment(b.right(),b.bottom()));c.addSegment(new a.common.LineSegment(b.x,b.bottom()));c.addSegment(new a.common.LineSegment(b.x,b.verticalCenter()))};a.common.Marker.DrawOval=
function(c,b){var e=b.width/2*.5522848;var d=b.height/2*.5522848;c.addSegment(new a.common.MoveSegment(b.x,b.verticalCenter()));c.addSegment(new a.common.CubicArcSegment(b.x,b.verticalCenter()-d,b.horizontalCenter()-e,b.y,b.horizontalCenter(),b.y));c.addSegment(new a.common.CubicArcSegment(b.horizontalCenter()+e,b.y,b.right(),b.verticalCenter()-d,b.right(),b.verticalCenter()));c.addSegment(new a.common.CubicArcSegment(b.right(),b.verticalCenter()+d,b.horizontalCenter()+e,b.bottom(),b.horizontalCenter(),
b.bottom()));c.addSegment(new a.common.CubicArcSegment(b.horizontalCenter()-e,b.bottom(),b.x,b.verticalCenter()+d,b.x,b.verticalCenter()))};a.common.Marker.DrawTriangle=function(c,b){c.addSegment(new a.common.MoveSegment(b.left(),b.bottom()));c.addSegment(new a.common.LineSegment(b.horizontalCenter(),b.y));c.addSegment(new a.common.LineSegment(b.right(),b.bottom()));c.addSegment(new a.common.LineSegment(b.left(),b.bottom()))};a.common.Marker.DrawCrossOut=function(c,b){c.addSegment(new a.common.MoveSegment(b.horizontalCenter(),
b.verticalCenter()));c.addSegment(new a.common.LineSegment(b.x,b.y));c.addSegment(new a.common.MoveSegment(b.horizontalCenter(),b.verticalCenter()));c.addSegment(new a.common.LineSegment(b.right(),b.bottom()));c.addSegment(new a.common.MoveSegment(b.horizontalCenter(),b.verticalCenter()));c.addSegment(new a.common.LineSegment(b.right(),b.y));c.addSegment(new a.common.MoveSegment(b.horizontalCenter(),b.verticalCenter()));c.addSegment(new a.common.LineSegment(b.left(),b.bottom()))};a.common.Marker.DrawRhombus=
function(c,b){c.addSegment(new a.common.MoveSegment(b.horizontalCenter(),b.bottom()));c.addSegment(new a.common.LineSegment(b.left(),b.verticalCenter()));c.addSegment(new a.common.LineSegment(b.horizontalCenter(),b.y));c.addSegment(new a.common.LineSegment(b.right(),b.verticalCenter()));c.addSegment(new a.common.LineSegment(b.horizontalCenter(),b.bottom()))};a.common.Marker.DrawWedge=function(c,b){c.addSegment(new a.common.MoveSegment(b.horizontalCenter(),b.y));c.addSegment(new a.common.LineSegment(b.right(),
b.y));c.addSegment(new a.common.LineSegment(b.horizontalCenter(),b.bottom()));c.addSegment(new a.common.LineSegment(b.left(),b.y));c.addSegment(new a.common.LineSegment(b.horizontalCenter(),b.y))};a.common.Marker.DrawFramedOval=function(c,b){a.common.Marker.DrawRectangle(c,b);a.common.Marker.DrawOval(c,b)};a.common.Marker.DrawFramedTriangle=function(c,b){a.common.Marker.DrawRectangle(c,b);a.common.Marker.DrawTriangle(c,b)};a.common.Marker.DrawFramedWedge=function(c,b){a.common.Marker.DrawRectangle(c,
b);a.common.Marker.DrawWedge(c,b)};a.common.Marker.DrawFramedRhombus=function(c,b){a.common.Marker.DrawRectangle(c,b);a.common.Marker.DrawRhombus(c,b)};a.common.Marker.DrawNone=function(a,b){};a.common.Marker.Markers[4]=a.common.Marker.DrawCircle;a.common.Marker.Markers[0]=a.common.Marker.DrawRectangle;a.common.Marker.Markers[1]=a.common.Marker.DrawOval;a.common.Marker.Markers[2]=a.common.Marker.DrawTriangle;a.common.Marker.Markers[3]=a.common.Marker.DrawCrossOut;a.common.Marker.Markers[5]=a.common.Marker.DrawRhombus;
a.common.Marker.Markers[7]=a.common.Marker.DrawWedge;a.common.Marker.Markers[8]=a.common.Marker.DrawFramedOval;a.common.Marker.Markers[9]=a.common.Marker.DrawFramedTriangle;a.common.Marker.Markers[10]=a.common.Marker.DrawFramedWedge;a.common.Marker.Markers[11]=a.common.Marker.DrawFramedRhombus;a.common.Marker.Markers[6]=a.common.Marker.DrawNone;a.common.Marker.prototype.draw=function(c,b,e,d){c=c.getPolyline(d);a.common.Marker.Markers[b](c,e)};a.common.MergedRectangles=function(a){this.graphics=a;
this.transform=null;this.opacity=this.lineWidth=1;this.fillColor=null;this.lineType=0;this.borderColor=null};a.common.MergedRectangles.prototype=new a.common.BaseShape;a.common.MergedRectangles.prototype.draw=function(c){var b=new a.common.PaletteItem({lineColor:this.borderColor,lineWidth:this.lineWidth,fillColor:this.fillColor,lineType:this.lineType,opacity:this.opacity}),e=new a.common.Polyline(b);a.common.getMergedRectangles(this,c,function(c){for(var b=0,f=c.length;b<f;b+=1){var d=c[b];0==b?e.addSegment(new a.common.MoveSegment(d.x,
d.y)):e.addSegment(new a.common.LineSegment(d.x,d.y))}});e.transform(this.transform,!0);this.graphics.polyline(e)};a.common.Shape=function(c){this.m_graphics=c;this.transform=null;this.orientationType=0;this.panelSize=null;this.shapeType=0;this.offset=new a.common.Thickness(0,0,0,0);this.lineWidth=1;this.labelOffset=4;this.cornerRadius="10%";this.opacity=1;this.fillColor=null;this.labelSize=new a.common.Size(60,30);this.lineType=0;this.borderColor=null;this.hasLabel=!1;this.labelTemplate=null;this.labelPlacement=
0};a.common.Shape.prototype=new a.common.BaseShape;a.common.Shape.prototype.draw=function(c,b){var e;c=(new a.common.Rect(c)).offset(this.offset);this.transform=new a.common.Transform;this.transform.size=this.panelSize;this.transform.setOrientation(this.orientationType);this.hasLabel&&(e=this._getLabelPosition(c.x,c.y,c.width,c.height,this.labelSize.width,this.labelSize.height,this.labelOffset,this.labelPlacement));switch(this.shapeType){case 0:var d=new a.common.Callout(this.m_graphics);d.cornerRadius=
this.cornerRadius;d.opacity=this.opacity;d.lineWidth=this.lineWidth;d.lineType=this.lineType;d.borderColor=this.borderColor;d.fillColor=this.fillColor;d.draw(null,c);break;default:d=new a.common.PaletteItem({lineColor:this.borderColor,lineWidth:this.lineWidth,lineType:this.lineType,fillColor:this.fillColor,opacity:this.opacity});this.transform.transformRect(c.x,c.y,c.width,c.height,!1,this,function(b,e,f,d){c=new a.common.Rect(b,e,f,d)});var g=new a.common.Marker;var f=new a.common.PolylinesBuffer;
g.draw(f,this.shapeType,c,d);f.transform(this.transform,!0);this.m_graphics.polylinesBuffer(f)}this.hasLabel&&this.m_graphics.template(e.x,e.y,0,0,0,0,e.width,e.height,this.labelTemplate.template(),this.labelTemplate.getHashCode(),this.labelTemplate.render,b,null)};a.common.Point=function(a,b){this.context=this.y=this.x=null;switch(arguments.length){case 1:this.x=a.x;this.y=a.y;this.context=a.context;break;case 2:this.x=a,this.y=b}};a.common.Point.prototype.scale=function(a){this.x*=a;this.y*=a;return this};
a.common.Point.prototype.distanceTo=function(a,b){var c=0,d=0;switch(arguments.length){case 1:c=a.x;d=a.y;break;case 2:c=a,d=b}c=this.x-c;d=this.y-d;return Math.sqrt(c*c+d*d)};a.common.Point.prototype.equalTo=function(a){return this.x==a.x&&this.y==a.y};a.common.Point.prototype.swap=function(a){var c=a.x,e=a.y;a.x=this.x;a.y=this.y;this.x=c;this.y=e};a.common.Point.prototype.clone=function(){return new a.common.Point(this)};a.common.Point.prototype.toString=function(a){a=void 0!==a?a:"px";var c="left:"+
this.x+a+";";return c+="top:"+this.y+a+";"};a.common.Point.prototype.getCSS=function(a){a=void 0!==a?a:"px";return{left:this.x+a,top:this.y+a}};a.common.Rect=function(a,b,e,d){this.context=this.height=this.width=this.y=this.x=null;switch(arguments.length){case 1:this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;break;case 2:this.x=Math.min(a.x,b.x);this.y=Math.min(a.y,b.y);this.width=Math.abs(b.x-a.x);this.height=Math.abs(b.y-a.y);break;case 4:this.x=a,this.y=b,this.width=e,this.height=
d}};a.common.Rect.prototype.left=function(){return this.x};a.common.Rect.prototype.top=function(){return this.y};a.common.Rect.prototype.right=function(){return this.x+this.width};a.common.Rect.prototype.bottom=function(){return this.y+this.height};a.common.Rect.prototype.verticalCenter=function(){return this.y+this.height/2};a.common.Rect.prototype.horizontalCenter=function(){return this.x+this.width/2};a.common.Rect.prototype.centerPoint=function(){return new a.common.Point(this.horizontalCenter(),
this.verticalCenter())};a.common.Rect.prototype.isEmpty=function(){return null===this.x||null===this.y||null===this.width||null===this.height||0>this.width||0>this.height};a.common.Rect.prototype.offset=function(a,b,e,d){switch(arguments.length){case 1:null!==a&&"object"==typeof a?(this.x-=a.left,this.y-=a.top,this.width=this.width+a.left+a.right,this.height=this.height+a.top+a.bottom):(this.x-=a,this.y-=a,this.width+=2*a,this.height+=2*a);break;case 4:this.x-=a,this.y-=b,this.width=this.width+a+
e,this.height=this.height+b+d}return this};a.common.Rect.prototype.scale=function(a){this.x*=a;this.y*=a;this.width*=a;this.height*=a;return this};a.common.Rect.prototype.translate=function(a,b){this.x+=a;this.y+=b;return this};a.common.Rect.prototype.invert=function(){var a=this.width,b=this.x;this.width=this.height;this.height=a;this.x=this.y;this.y=b;return this};a.common.Rect.prototype.loopEdges=function(c){var b=[new a.common.Point(this.left(),this.top()),new a.common.Point(this.right(),this.top()),
new a.common.Point(this.right(),this.bottom()),new a.common.Point(this.left(),this.bottom())],e=[1,3,5,7];b.push(b[0]);if(null!=c)for(var d=1,g=b.length;d<g&&!c(new a.common.Vector(b[d-1],b[d]),e[d-1]);d+=1);return this};a.common.Rect.prototype.contains=function(a,b){switch(arguments.length){case 1:return this.x<=a.x&&a.x<=this.x+this.width&&this.y<=a.y&&a.y<=this.y+this.height;case 2:return this.x<=a&&a<=this.x+this.width&&this.y<=b&&b<=this.y+this.height;default:return!1}};a.common.Rect.prototype.cropByRect=
function(a){this.x<a.x&&(this.width-=a.x-this.x,this.x=a.x);this.right()>a.right()&&(this.width-=this.right()-a.right());this.y<a.y&&(this.height-=a.y-this.y,this.y=a.y);this.bottom()>a.bottom()&&(this.height-=this.bottom()-a.bottom());this.isEmpty()&&(this.height=this.width=this.y=this.x=null);return this};a.common.Rect.prototype.overlaps=function(a){var b=!0;if(this.x+this.width<a.x||a.x+a.width<this.x||this.y+this.height<a.y||a.y+a.height<this.y)b=!1;return b};a.common.Rect.prototype.addRect=function(a,
b,e,d){switch(arguments.length){case 1:if(!a.isEmpty())if(this.isEmpty())this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height;else{var c=Math.max(this.right(),a.right());var f=Math.max(this.bottom(),a.bottom());this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.width=c-this.x;this.height=f-this.y}break;case 2:this.isEmpty()?(this.x=a,this.y=b,this.height=this.width=0):(c=Math.max(this.right(),a),f=Math.max(this.bottom(),b),this.x=Math.min(this.x,a),this.y=Math.min(this.y,b),this.width=
c-this.x,this.height=f-this.y);break;case 4:this.isEmpty()?(this.x=a,this.y=b,this.width=e,this.height=d):(c=Math.max(this.right(),a+e),f=Math.max(this.bottom(),b+d),this.x=Math.min(this.x,a),this.y=Math.min(this.y,b),this.width=c-this.x,this.height=f-this.y)}return this};a.common.Rect.prototype.getCSS=function(a){a=void 0!==a?a:"px";return{left:this.x+a,top:this.y+a,width:this.width+a,height:this.height+a}};a.common.Rect.prototype.toString=function(a){a=void 0!==a?a:"px";var b="left:"+this.x+a+";";
b+="top:"+this.y+a+";";b+="width:"+this.width+a+";";return b+="height:"+this.height+a+";"};a.common.Rect.prototype.validate=function(){if(isNaN(this.x)||isNaN(this.y)||isNaN(this.width)||isNaN(this.height))throw"Invalid rect position.";};a.common.Rect.prototype.equalTo=function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height};a.common.MoveSegment=function(){this.parent=a.common.Point.prototype;this.parent.constructor.apply(this,arguments);this.segmentType=1};a.common.MoveSegment.prototype=
new a.common.Point;a.common.MoveSegment.prototype.clone=function(){return new a.common.MoveSegment(this)};a.common.MoveSegment.prototype.loop=function(a,b){null!=b&&b.call(a,this.x,this.y,0)};a.common.MoveSegment.prototype.setPoint=function(a,b){this.x=a.x;this.y=a.y};a.common.MoveSegment.prototype.getEndPoint=function(){return this};a.common.MoveSegment.prototype.invert=function(a){this.x=a.x;this.y=a.y};a.common.MoveSegment.prototype.transform=function(a,b){var c=this;a.transformPoint(c.x,c.y,b,
c,function(a,b){c.x=a;c.y=b})};a.common.CubicArcSegment=function(c,b,e,d,g,f){this.parent=a.common.Point.prototype;this.cpY2=this.cpX2=this.cpY1=this.cpX1=this.y=this.x=null;switch(arguments.length){case 3:this.parent.constructor.apply(this,[e.x,e.y]);this.cpX1=c.x;this.cpY1=c.y;this.cpX2=b.x;this.cpY2=b.y;break;case 6:this.parent.constructor.apply(this,[g,f]),this.cpX1=c,this.cpY1=b,this.cpX2=e,this.cpY2=d}this.segmentType=3};a.common.CubicArcSegment.prototype=new a.common.Point;a.common.CubicArcSegment.prototype.clone=
function(){return new a.common.CubicArcSegment(this.cpX1,this.cpY1,this.cpX2,this.cpY2,this.x,this.y)};a.common.CubicArcSegment.prototype.loop=function(a,b){null!=b&&(b.call(a,this.cpX1,this.cpY1,0),b.call(a,this.cpX2,this.cpY2,1),b.call(a,this.x,this.y,2))};a.common.CubicArcSegment.prototype.setPoint=function(a,b){switch(b){case 0:this.cpX1=a.x;this.cpY1=a.y;break;case 1:this.cpX2=a.x;this.cpY2=a.y;break;case 2:this.x=a.x,this.y=a.y}};a.common.CubicArcSegment.prototype.getEndPoint=function(){return this};
a.common.CubicArcSegment.prototype.invert=function(a){var b=this.cpX1,c=this.cpY1;this.x=a.x;this.y=a.y;this.cpX1=this.cpX2;this.cpY1=this.cpY2;this.cpX2=b;this.cpY2=c};a.common.CubicArcSegment.prototype.transform=function(a,b){var c=this;a.transform3Points(c.x,c.y,c.cpX1,c.cpY1,c.cpX2,c.cpY2,b,c,function(a,b,e,h,k,l){c.x=a;c.y=b;c.cpX1=e;c.cpY1=h;c.cpX2=k;c.cpY2=l})};a.common.CubicArcSegment.prototype.trim=function(a,b){var c=.5,d=this.offsetPoint(this.x,this.y,this.cpX2,this.cpY2,this.cpX1,this.cpY1,
a.x,a.y,c),g=this.offsetPoint(this.x,this.y,this.cpX2,this.cpY2,this.cpX1,this.cpY1,a.x,a.y,.1);c=b*(c/d.distanceTo(this.x,this.y)+.1/g.distanceTo(this.x,this.y))/2;d=this.offsetPoint(this.x,this.y,this.cpX2,this.cpY2,this.cpX1,this.cpY1,a.x,a.y,c);this.x=d.x;this.y=d.y;return this};a.common.CubicArcSegment.prototype.offsetPoint=function(c,b,e,d,g,f,h,k,l){return new a.common.Point((1-l)*(1-l)*(1-l)*c+3*(1-l)*(1-l)*l*e+3*(1-l)*l*l*g+l*l*l*h,(1-l)*(1-l)*(1-l)*b+3*(1-l)*(1-l)*l*d+3*(1-l)*l*l*f+l*l*
l*k)};a.common.DotSegment=function(a,b,e,d,g){this.segmentType=4;this.x=a;this.y=b;this.width=e;this.height=d;this.cornerRadius=g};a.common.Label=function(){this.position=this.text=null;this.weight=0;this.isActive=!0;this.horizontalAlignmentType=this.labelOrientation=this.labelType=0;this.verticalAlignmentType=2;this.parent=a.common.Rect.prototype;this.parent.constructor.apply(this,arguments)};a.common.Label.prototype=new a.common.Rect;a.common.LineSegment=function(){this.parent=a.common.MoveSegment.prototype;
this.parent.constructor.apply(this,arguments);this.segmentType=0};a.common.LineSegment.prototype=new a.common.MoveSegment;a.common.LineSegment.prototype.clone=function(){return new a.common.LineSegment(this)};a.common.LineSegment.prototype.trim=function(a,b){a=this.offsetPoint(this,a,b);this.x=a.x;this.y=a.y;return this};a.common.LineSegment.prototype.offsetPoint=function(c,b,e){var d=c.distanceTo(b);return 0===d||0===e?new a.common.Point(c):new a.common.Point(c.x+(b.x-c.x)/d*e,c.y+(b.y-c.y)/d*e)};
a.common.Matrix=function(a,b,e,d){this.b2=this.a2=this.b1=this.a1=null;switch(arguments.length){case 1:this.a1=a.a1;this.b1=a.b1;this.a2=a.a2;this.b2=a.b2;break;case 4:this.a1=a,this.b1=b,this.a2=e,this.b2=d}};a.common.Matrix.prototype.determinant=function(){return this.a1*this.b2-this.b1*this.a2};a.common.PaletteItem=function(c){this.lineColor="#c0c0c0";this.lineWidth=1;this.lineType=0;this.opacity=this.fillColor=null;this._key="";var b;var e=["lineColor","lineWidth","lineType","fillColor","opacity"];
var d=0;for(b=e.length;d<b;d+=1){var g=e[d];null!=c&&c.hasOwnProperty(g)&&(this[g]=c[g]);this._key+=(a.common.isNullOrEmpty(this._key)?"":", ")+g+":"+this[g]}};a.common.PaletteItem.prototype.toAttr=function(){var a={lineWidth:this.lineWidth,lineType:this.lineType};null!==this.fillColor&&(a.fillColor=this.fillColor);null!==this.opacity&&(a.opacity=this.opacity);null!==this.lineColor&&(a.borderColor=this.lineColor);return a};a.common.PaletteItem.prototype.toString=function(){return this._key};a.common.PaletteManager=
function(c,b){this.palette=[];this.cursor=0;var e;if(0===b.length)this.palette=[new a.common.PaletteItem({lineColor:c.linesColor,lineWidth:c.linesWidth,lineType:c.linesType})],this.paletteLength=this.palette.length,this.regularIndex=0;else{var d=0;for(e=b.length;d<e;d+=1)this.palette.push(new a.common.PaletteItem(b[d]));this.paletteLength=this.palette.length;this.palette.push(new a.common.PaletteItem({lineColor:c.linesColor,lineWidth:c.linesWidth,lineType:c.linesType}));this.regularIndex=this.palette.length-
1}this.palette.push(new a.common.PaletteItem({lineColor:c.highlightLinesColor,lineWidth:c.highlightLinesWidth,lineType:c.highlightLinesType}));this.highlightIndex=this.palette.length-1};a.common.PaletteManager.prototype.selectPalette=function(a){this.cursor=a%this.paletteLength};a.common.PaletteManager.prototype.getPalette=function(a){var b=null;switch(a){case 1:b=this.regularIndex;break;case 2:b=this.highlightIndex;break;case 0:b=this.cursor}return this.palette[b]};a.common.Polyline=function(c){function b(a,
b){var c,e;if(null!=b){var f=0;for(c=l.length;f<c&&(!(e=l[f])||!b.call(a,e,f));f+=1);}}function e(){return a.common.isNullOrEmpty(k.fillColor)}function d(b,c,e,f,d,h){var g=new a.common.Polyline(m);d=[new a.common.Point(d,-h/2),new a.common.Point(0,0),new a.common.Point(d,h/2),new a.common.Point(d/4*3,0)];var k=Math.atan2(c-f,b-e);b=0;for(c=d.length;b<c;b+=1){h=d[b];var q=h.x*Math.cos(k)-h.y*Math.sin(k);var l=h.x*Math.sin(k)+h.y*Math.cos(k);h.x=q+e;h.y=l+f}g.addSegment(new a.common.MoveSegment(d[0].x,
d[0].y));g.addSegment(new a.common.LineSegment(d[1].x,d[1].y));g.addSegment(new a.common.LineSegment(d[2].x,d[2].y));g.addSegment(new a.common.QuadraticArcSegment(d[3].x,d[3].y,d[0].x,d[0].y));return g}function g(a,b){this.segment=a;this.pointIndex=b}function f(b,c,e,f,d){var h=b.relateTo(c),m=d?0:e;2==h?c.offset(m):3==h&&0===c.from.context.pointIndex?(h=new a.common.LineSegment(c.from),f.addSegment(h),c.offset(m),f=c.from.clone(),f.context=new g(h,0),m=new a.common.Vector(b.to.clone(),f),d||(c.from=
f.clone()),m.offset(e),m.intersect(b),m.from.context.pushToSegment(m.from),c.intersect(m),d&&m.to.context.pushToSegment(m.to)):(c.offset(m),c.intersect(b));c.from.context.pushToSegment(c.from)}function h(a,b,c,e){var d=a[0],h=d.to.context.segment.getEndPoint().toString();if(b.hasOwnProperty(h)){var g=b[h];f(d,g,c,e,!0);delete b[h]}d.to.context.pushToSegment(d.to);a.length=0}var k=new a.common.PaletteItem,l=[],n;switch(arguments.length){case 1:k=c}var m=new a.common.PaletteItem({lineColor:k.lineColor,
lineWidth:0,fillColor:k.lineColor,opacity:k.opacity||1});g.prototype.pushToSegment=function(a){this.segment.setPoint(a,this.pointIndex)};return n={paletteItem:k,arrowPaletteItem:m,addSegment:function(a){l.push(a)},addSegments:function(a){var b;var c=0;for(b=a.length;c<b;c+=1)l.push(a[c])},mergeTo:function(a){a.addSegments(l)},length:function(){return l.length},loop:b,loopReversed:function(a,b){var c,e;if(null!=b)for(c=l.length-1;0<=c&&(!(e=l[c])||!b.call(a,e,c));--c);},transform:function(a,c){b(this,
function(b){null!=b.transform&&b.transform(a,c)})},isInvertable:e,addInverted:function(b){var c=!1,f=[];e()?b.loopReversed(this,function(b,e){4!=b.segmentType&&(c||(l.push(new a.common.MoveSegment(b.getEndPoint())),c=!0),f.unshift(b),1<f.length&&(f[1].invert(f[0].getEndPoint()),l.push(f[1]),f.length=1))}):b.mergeTo(n)},addArrow:function(b,c){var e=l.length;var f=3*b;var h=2*b;switch(b){case 1:f=8;h=6;break;case 2:f=12;h=8;break;case 3:f=16,h=10}if(null!=c&&1<e){b=l[e-2].getEndPoint();var g=l[e-1];
null!=g.trim&&(e=new a.common.Point(g.getEndPoint()),e.distanceTo(b)>f&&(b=g.trim(b,f),f=d(b.x,b.y,e.x,e.y,f,h),c(f,b)))}},addOffsetArrow:function(b,c,e,f,h){var g=l.length;var m=3*c;var k=2*c;switch(c){case 1:m=8;k=6;break;case 2:m=12;k=8;break;case 3:m=16,k=10}if(null!=h&&1<g){c=l[g-2].getEndPoint();var q=l[g-1];if(null!=q.offsetPoint){g=new a.common.Point(q.getEndPoint());var p=c.distanceTo(g);p>f&&(e*=p,b?(b=q.offsetPoint(c,g,e),m=d(c.x,c.y,b.x,b.y,m,k)):(b=q.offsetPoint(g,c,e),m=d(g.x,g.y,b.x,
b.y,m,k)),h(m))}}},optimizeMoveSegments:function(){var a;var b={};var c=[],e=[];var f=0;for(a=l.length;f<a-1;f+=1){var d=l[f];var h=l[f+1];switch(d.segmentType){case 0:case 2:case 3:switch(h.segmentType){case 1:case 4:d=d.x+"&"+d.y,b.hasOwnProperty(d)||(b[d]=f)}break;case 1:d=d.x+"&"+d.y,b.hasOwnProperty(d)&&!c[b[d]]&&(c[b[d]]=f+1,e[f]=!0)}}h=[];for(f=0;f<a;f+=1)if(!e[f]&&(d=l[f],h.push(d),e[f]=!0,0<c[f]))for(b=c[f];b<a&&!e[b];)d=l[b],h.push(d),e[b]=!0,b=0<c[b]?c[b]:b+1;l=h},getOffsetPolyine:function(c){var e=
new a.common.Polyline(k),d={},m=[],l=[];b(this,function(b){var k=b.clone();switch(k.segmentType){case 4:case 1:0<l.length&&h(l,d,c,e);m.length=0;1==k.segmentType&&(b=new a.common.Point(k),b.context=new g(k,0),m.push(b));break;default:k.loop(this,function(b,h,q){b=new a.common.Point(b,h);b.context=new g(k,q);m.unshift(b);1<m.length&&(l.unshift(new a.common.Vector(m[1].clone(),m[0].clone())),m.length=1);switch(l.length){case 1:q=l[0];b=q.from.toString();d[b]=q;q.offset(c);q.from.context.pushToSegment(q.from);
break;case 2:b=l[1],q=l[0],f(b,q,c,e,!1),l.length=1}})}e.addSegment(k)});0<l.length&&h(l,d,c,e);return e},toString:function(){return k.toString()},getStartPoint:function(){var a=null;0<l.length&&(a=l[0].getEndPoint());return a},getEndPoint:function(){var a=null;0<l.length&&(a=l[l.length-1].getEndPoint());return a},clone:function(){var b,c=new a.common.Polyline(k),e=[];var f=0;for(b=l.length;f<b;f+=1){var d=l[f];e.push(d.clone())}c.addSegments(e);return c}}};a.common.PolylinesBuffer=function(){function c(b,
c){b[c.toString()]||(b[c.toString()]=new a.common.Polyline(c));return b[c.toString()]}function b(a,b){var c,d;if(null!=b)for(c in e)if(e.hasOwnProperty(c)&&(d=e[c])&&(d.optimizeMoveSegments(),b.call(a,d)))break}var e={};return{getPolyline:function(a){return c(e,a)},loop:b,addInverted:function(a,g){var f;var d=e;e={};null!=a&&a(this);b(this,function(a){f=c(d,a.paletteItem);g?a.mergeTo(f):f.addInverted(a)});e=d},transform:function(a,c){b(this,function(b){b.transform(a,c)})}}};a.common.QuadraticArcSegment=
function(a,b,e,d){this.cpY=this.cpX=this.y=this.x=null;switch(arguments.length){case 2:this.x=b.x;this.y=b.y;this.cpX=a.x;this.cpY=a.y;break;case 4:this.cpX=a,this.cpY=b,this.x=e,this.y=d}this.segmentType=2};a.common.QuadraticArcSegment.prototype.clone=function(){return new a.common.QuadraticArcSegment(this.cpX,this.cpY,this.x,this.y)};a.common.QuadraticArcSegment.prototype.loop=function(a,b){null!=b&&(b.call(a,this.cpX,this.cpY,0),b.call(a,this.x,this.y,1))};a.common.QuadraticArcSegment.prototype.setPoint=
function(a,b){switch(b){case 0:this.cpX=a.x;this.cpY=a.y;break;case 1:this.x=a.x,this.y=a.y}};a.common.QuadraticArcSegment.prototype.getEndPoint=function(){return this};a.common.QuadraticArcSegment.prototype.invert=function(a){this.x=a.x;this.y=a.y};a.common.QuadraticArcSegment.prototype.transform=function(a,b){var c=this;a.transformPoints(c.x,c.y,c.cpX,c.cpY,b,c,function(a,b,f,e){c.x=a;c.y=b;c.cpX=f;c.cpY=e})};a.common.QuadraticArcSegment.prototype.trim=function(a,b){var c=.5,d=this.offsetPoint(this.x,
this.y,this.cpX,this.cpY,a.x,a.y,c),g=this.offsetPoint(this.x,this.y,this.cpX,this.cpY,a.x,a.y,.1);c=b*(c/d.distanceTo(this.x,this.y)+.1/g.distanceTo(this.x,this.y))/2;d=this.offsetPoint(this.x,this.y,this.cpX,this.cpY,a.x,a.y,c);this.x=d.x;this.y=d.y;return this};a.common.QuadraticArcSegment.prototype.offsetPoint=function(c,b,e,d,g,f,h){return new a.common.Point((1-h)*(1-h)*c+2*(1-h)*h*e+h*h*g,(1-h)*(1-h)*b+2*(1-h)*h*d+h*h*f)};a.common.Size=function(a,b){this.height=this.width=0;switch(arguments.length){case 1:this.width=
a.width;this.height=a.height;break;case 2:this.width=a,this.height=b}};a.common.Size.prototype.invert=function(){var a=this.width;this.width=this.height;this.height=a;return this};a.common.Size.prototype.scale=function(a){this.width*=a;this.height*=a;return this};a.common.Size.prototype.getCSS=function(a){a=void 0!==a?a:"px";return{left:this.x+a,top:this.y+a,width:this.width+a,height:this.height+a}};a.common.Size.prototype.cropBySize=function(a){this.width=Math.min(this.width,a.width);this.height=
Math.min(this.height,a.height);return this};a.common.Size.prototype.addSize=function(a){this.width=Math.max(this.width,a.width);this.height=Math.max(this.height,a.height);return this};a.common.Size.prototype.validate=function(){if(isNaN(this.width)||isNaN(this.height))throw"Invalid size.";};a.common.Thickness=function(a,b,e,d){this.left=a;this.top=b;this.right=e;this.bottom=d};a.common.Thickness.prototype.isEmpty=function(){return 0===this.left&&0===this.top&&0===this.right&&0===this.bottom};a.common.Thickness.prototype.toString=
function(a){a=void 0!==a?a:"px";return this.left+a+", "+this.top+a+", "+this.right+a+", "+this.bottom+a};a.common.Vector=function(a,b){this.context=this.to=this.from=null;switch(arguments.length){case 1:this.from=a.from;this.to=a.to;break;case 2:this.from=a,this.to=b}};a.common.Vector.prototype.isNull=function(){return this.from.x==this.to&&this.from.y==this.to.y};a.common.Vector.prototype.length=function(){return this.from.distanceTo(this.to)};a.common.Vector.prototype.equalTo=function(a){return this.from.equalTo(a.from)&&
this.to.equalTo(a.to)};a.common.Vector.prototype.getMiddlePoint=function(){return new a.common.Point((this.from.x+this.to.x)/2,(this.from.y+this.to.y)/2)};a.common.Vector.prototype.relateTo=function(a){var b=0,c=this.to.x-this.from.x,d=this.to.y-this.from.y,g=a.to.x-a.from.x;a=a.to.y-a.from.y;switch((c?8:0)+(d?4:0)+(g?2:0)+(a?1:0)){case 0:case 1:case 2:case 3:case 4:case 8:case 12:b=1;break;case 5:b=0<d*a?2:3;break;case 10:b=0<c*g?2:3;break;case 15:c/g==d/a&&(b=0<c/g?2:3)}return b};a.common.Vector.prototype.offset=
function(a){var b=this.length(),c=(this.to.y-this.from.y)*a/b;a=-(this.to.x-this.from.x)*a/b;this.from.x+=c;this.from.y+=a;this.to.x+=c;this.to.y+=a};a.common.Vector.prototype.getLine=function(){var a=this.from.x,b=this.from.y,e=this.to.x,d=this.to.y;return[d-b,a-e,a*(b-d)+b*(e-a)]};a.common.Vector.prototype.getLineKey=function(){var a=this.getLine(),b=a[0],e=a[1];a=a[2];a=0!==e?[Math.floor(b/e*1E4),1,Math.floor(a/e*1E4)]:[1,0,Math.floor(a/b*1E4)];return a.toString()};a.common.Vector.prototype.intersect=
function(c){var b=this.getLine(),e=c.getLine(),d=(new a.common.Matrix(b[0],b[1],e[0],e[1])).determinant();var g=!1;0!==d&&(g=new a.common.Matrix(-b[2],b[1],-e[2],e[1]),g=g.determinant(),b=new a.common.Matrix(b[0],-b[2],e[0],-e[2]),b=b.determinant(),e=g/d,d=b/d,c.to.x=e,c.to.y=d,this.from.x=e,this.from.y=d,g=!0);return g};a.common.Vector.prototype.getIntersectionPoint=function(c,b,e){var d=this.getLine(),g=c.getLine(),f=(new a.common.Matrix(d[0],d[1],g[0],g[1])).determinant(),h=null;if(0!==f){var k=
new a.common.Matrix(-d[2],d[1],-g[2],g[1]);k=k.determinant();d=new a.common.Matrix(d[0],-d[2],g[0],-g[2]);d=d.determinant();k/=f;f=d/f;b?c._contains(k,f,e)&&this._contains(k,f,e)&&(h=new a.common.Point(k,f)):h=new a.common.Point(k,f)}return h};a.common.Vector.prototype._contains=function(a,b,e){var c=Math.min(this.from.y,this.to.y),g=Math.max(this.from.x,this.to.x),f=Math.max(this.from.y,this.to.y);return Math.min(this.from.x,this.to.x)-e<=a&&a<=g+e&&c-e<=b&&b<=f+e};a.common.Graphics=function(c){this.m_element=
c;this.m_placeholders={};this.m_activePlaceholder=null;this.m_cache=new a.common.Cache;this.graphicsType=null;this.debug=this.hasGraphics=!1;this.layerNames={};a.common.loop(this,a.common.Layers,function(a,c){this.layerNames[c]=a})};a.common.Graphics.prototype.clean=function(){var a,b;this.m_cache.clear();this.m_element=this.m_cache=null;for(a in this.m_placeholders)if(this.m_placeholders.hasOwnProperty(a)){var e=this.m_placeholders[a];for(b in e.layers)if(e.layers.hasOwnProperty(b)){var d=e.layers[b];
d.canvas.parentNode.removeChild(d.canvas);d.canvas=null}e.layers.length=0;e.activeLayer=null;e.size=null;e.rect=null;e.div=null}this.m_placeholders.length=0;this.m_activePlaceholder=null};a.common.Graphics.prototype.resize=function(a,b,e){a=this.m_placeholders[a];null!=a&&this.resizePlaceholder(a,0,0,b,e)};a.common.Graphics.prototype.position=function(a,b,e,d,g){a=this.m_placeholders[a];null!=a&&this.resizePlaceholder(a,b,e,d,g)};a.common.Graphics.prototype.show=function(c){c=this.m_placeholders[c];
null!=c&&a.common.JsonML.applyStyles(c.div,{display:"inherit",visibility:"inherit"})};a.common.Graphics.prototype.hide=function(c){c=this.m_placeholders[c];null!=c&&a.common.JsonML.applyStyles(c.div,{display:"none",visibility:"hidden"})};a.common.Graphics.prototype.resizePlaceholder=function(c,b,e,d,g){var f;c.size=new a.common.Size(d,g);c.rect=new a.common.Rect(b,e,d,g);a.common.JsonML.applyStyles(c.div,c.rect.getCSS());for(f in c.layers)c.layers.hasOwnProperty(f)&&(b=c.layers[f],-1!==b.name&&a.common.JsonML.applyStyles(b.canvas,
{position:"absolute",width:"0px",height:"0px"}))};a.common.Graphics.prototype.begin=function(){this.m_cache.begin()};a.common.Graphics.prototype.end=function(){this.m_cache.end()};a.common.Graphics.prototype.reset=function(a,b){var c="none",d=-1;switch(arguments.length){case 1:"string"===typeof a?c=a:d=a;break;case 2:c=a,d=b}this.m_cache.reset(c,d)};a.common.Graphics.prototype.activate=function(a,b){switch(arguments.length){case 1:"string"===typeof a?(this._activatePlaceholder(a),this._activateLayer(-1)):
(this._activatePlaceholder("none"),this._activateLayer(a));break;case 2:this._activatePlaceholder(a),this._activateLayer(b)}return this.m_activePlaceholder};a.common.Graphics.prototype._activatePlaceholder=function(c){var b=this.m_placeholders[c];if(void 0===b){if("none"===c)var e=this.m_element;else b=this.m_element.getElementsByClassName(c),e=0<b.length?b[0]:this.m_element;b=new a.common.Placeholder(c);b.div=e;b.size=a.common.getInnerSize(e);b.rect=new a.common.Rect(0,0,b.size.width,b.size.height);
this.m_placeholders[c]=b}this.m_activePlaceholder=b};a.common.Graphics.prototype._activateLayer=function(c){var b=this.m_activePlaceholder.layers[c],e;if(void 0===b){var d=this.m_activePlaceholder;if(-1===c)b=new a.common.Layer(c),b.canvas=d.div;else{var g=a.common.JsonML.toHTML(["div",{style:{position:"absolute",width:"0px",height:"0px"},"class":["Layer"+c,"Layer"+this.layerNames[c]]}]);var f=null;for(e in d.layers)d.layers.hasOwnProperty(e)&&(b=d.layers[e],b.name<c&&(f=null!==f?Math.max(f,b.name):
b.name));b=new a.common.Layer(c);b.canvas=g;null===f?this.prepend(d.div,b.canvas):this.insertAfter(d.layers[f].canvas,b.canvas)}d.layers[c]=b}this.m_activePlaceholder.activeLayer=b};a.common.Graphics.prototype.prepend=function(a,b){null==a.firstChild?a.appendChild(b):a.insertBefore(b,a.firstChild)};a.common.Graphics.prototype.insertAfter=function(a,b){var c=a.parentNode;c.lastChild==a?c.appendChild(b):c.insertBefore(b,a.nextSibling)};a.common.Graphics.prototype.text=function(c,b,e,d,g,f,h,k,l){var n=
this.m_activePlaceholder;h={position:"absolute",padding:0,margin:0,textAlign:this._getTextAlign(h),fontSize:l.fontSize,fontFamily:l.fontFamily,fontWeight:l.fontWeight,fontStyle:l.fontStyle,color:l.fontColor,lineHeight:1};l="";switch(f){case 0:case 3:h.left=c+"px";h.top=b+"px";h.width=e+"px";h.height=d+"px";break;case 1:h.left=c+Math.round(e/2-d/2)+"px";h.top=b+Math.round(d/2-e/2)+"px";h.width=d+"px";h.height=e+"px";l="rotate(-90deg)";break;case 2:h.left=c+Math.round(e/2-d/2)+"px",h.top=b+Math.round(d/
2-e/2)+"px",h.width=d+"px",h.height=e+"px",l="rotate(90deg)"}h["-webkit-transform-origin"]="center center";h["-moz-transform-origin"]="center center";h["-o-transform-origin"]="center center";h["-ms-transform-origin"]="center center";h["-webkit-transform"]=l;h["-moz-transform"]=l;h["-o-transform"]=l;h["-ms-transform"]=l;h.transform=l;h.maxWidth=h.width;h.maxHeight=h.height;g=g.replace(/\n/g,"<br/>");switch(k){case 0:this.debug&&(h.border="solid 1px black");b=this.m_cache.get(n.name,n.activeLayer.name,
"text");null===b?(b=a.common.JsonML.toHTML(["div",{style:h,$:function(a){a.innerHTML=g}}]),n.activeLayer.canvas.appendChild(b),this.m_cache.put(n.name,n.activeLayer.name,"text",b)):(a.common.JsonML.applyStyles(b,h),b.innerHTML=g);break;default:h.borderCollapse="collapse",c={verticalAlign:this._getVerticalAlignment(k),padding:0},this.debug&&(c.border="solid 1px black"),b=this.m_cache.get(n.name,n.activeLayer.name,"textintable"),null===b?(b=a.common.JsonML.toHTML(["table",{style:h},["tbody",["tr",["td",
{style:c,$:function(a){a.innerHTML=g}}]]]]),n.activeLayer.canvas.appendChild(b),this.m_cache.put(n.name,n.activeLayer.name,"textintable",b)):(a.common.JsonML.applyStyles(b,h),n=b.getElementsByTagName("td")[0],a.common.JsonML.applyStyles(n,c),n.innerHTML=g)}};a.common.Graphics.prototype._getTextAlign=function(a){var b=null;switch(a){case 0:b="center";break;case 1:b="left";break;case 2:b="right"}return b};a.common.Graphics.prototype._getVerticalAlignment=function(a){var b=null;switch(a){case 1:b="middle";
break;case 0:b="top";break;case 2:b="bottom"}return b};a.common.Graphics.prototype.polylinesBuffer=function(a){a.loop(this,function(a){0<a.length()&&this.polyline(a)})};a.common.Graphics.prototype.polyline=function(a){var b=null,c=null,d=a.paletteItem.toAttr();a.loop(this,function(a){switch(a.segmentType){case 1:b=Math.round(a.x)+.5;c=Math.round(a.y)+.5;break;case 0:this.rightAngleLine(b,c,Math.round(a.x)+.5,Math.round(a.y)+.5,d);b=Math.round(a.x)+.5;c=Math.round(a.y)+.5;break;case 4:this.dot(a.x,
a.y,a.width,a.height,a.cornerRadius,d)}})};a.common.Graphics.prototype.dot=function(c,b,e,d,g,f){var h=this.m_activePlaceholder,k=this.m_cache.get(h.name,h.activeLayer.name,"dot"),l=void 0!==f.lineWidth&&void 0!==f.borderColor;c={position:"absolute",width:e-(l?1:0),top:Math.round(b),left:Math.round(c),padding:0,margin:0,lineHeight:"0px",overflow:"hidden",height:d-(l?1:0),background:f.fillColor,MozBorderRadius:g,WebkitBorderRadius:g,"-khtml-border-radius":g,borderRadius:g,fontSize:"0px",borderStyle:l?
"Solid":"None",borderWidth:l?"1px":"0px",borderColor:l?f.borderColor:""};null===k?(k=a.common.JsonML.toHTML(["div",{style:c}]),h.activeLayer.canvas.appendChild(k),this.m_cache.put(h.name,h.activeLayer.name,"dot",k)):a.common.JsonML.applyStyles(k,c)};a.common.Graphics.prototype.rightAngleLine=function(c,b,e,d,g){var f=this.m_activePlaceholder,h=Math.abs(d-b)>Math.abs(e-c),k=g.lineWidth;g={position:"absolute",top:Math.round(Math.min(b,d)-(h?0:k/2)),left:Math.round(Math.min(c,e)-(h?k/2:0)),padding:0,
margin:0,opacity:.5,lineHeight:"0px",overflow:"hidden",background:g.borderColor,fontSize:"0px"};h?(g.width=k,g.height=Math.abs(Math.round(d-b))):(g.width=Math.abs(Math.round(e-c)),g.height=k);c=this.m_cache.get(f.name,f.activeLayer.name,"rect");null===c?(c=a.common.JsonML.toHTML(["div",{style:g}]),f.activeLayer.canvas.appendChild(c),this.m_cache.put(f.name,f.activeLayer.name,"rect",c)):a.common.JsonML.applyStyles(c,g)};a.common.Graphics.prototype.template=function(c,b,e,d,g,f,h,k,l,n,m,q,p){e=this.m_activePlaceholder;
d="template"+(null!==n?n:a.common.hashCode(l));var r=0;n=this.m_cache.get(e.name,e.activeLayer.name,d);null!==p&&void 0!==p.borderWidth&&(r=this.getPxSize(p.borderWidth));var t={width:h-r+"px",height:k-r+"px",top:b+f+"px",left:c+g+"px"};a.common.mergeObjects(t,p);null==q&&(q=new a.common.RenderEventArgs);q.x=c+g;q.y=b+f;q.width=h-r;q.height=k-r;null==n?(n=this.getElementByTemplate(l),t=a.common.mergeObjects(t,{position:"absolute",padding:"0px",margin:"0px"},p),a.common.JsonML.applyStyles(n,t),q.element=
n,q.renderingMode=0,null!==m&&m(null,q),e.activeLayer.canvas.appendChild(n),this.m_cache.put(e.name,e.activeLayer.name,d,n)):(q.element=n,q.renderingMode=1,a.common.JsonML.applyStyles(n,t),null!==m&&m(null,q));return n};a.common.Graphics.prototype.getElementByTemplate=function(c){if(a.common.isArray(c))c=a.common.JsonML.toHTML(c);else{var b=document.createElement("div");b.innerHTML=c;c=b.firstChild}return c};a.common.Graphics.prototype.getPxSize=function(a,b){var c=a;"string"===typeof a&&(c=0<a.indexOf("pt")?
96*parseInt(a,10)/72:0<a.indexOf("%")?parseFloat(a)/100*b:parseInt(a,10));return c};a.common.Cache=function(){this.threshold=20;this.m_visible={};this.m_invisible={}};a.common.Cache.prototype.begin=function(){var a,b,e;for(a in this.m_visible)if(this.m_visible.hasOwnProperty(a))for(b in this.m_visible[a])if(this.m_visible[a].hasOwnProperty(b)){for(e=this.m_visible[a][b].length-1;0<=e;--e){var d=this.m_visible[a][b][e];d.style.visibility="hidden";this.m_invisible[a][b].push(d)}this.m_visible[a][b].length=
0}};a.common.Cache.prototype.end=function(){var a,b,e;for(a in this.m_visible)if(this.m_visible.hasOwnProperty(a))for(b in this.m_visible[a])if(this.m_visible[a].hasOwnProperty(b)&&this.m_invisible[a][b].length>this.threshold)for(;void 0!==(e=this.m_invisible[a][b].pop());)e.parentNode.removeChild(e)};a.common.Cache.prototype.reset=function(a,b){a=a+"-"+b;var c,d;for(c in this.m_visible[a])if(this.m_visible[a].hasOwnProperty(c)){for(d=this.m_visible[a][c].length-1;0<=d;--d)b=this.m_visible[a][c][d],
this.m_invisible[a][c].push(b),b.style.visibility="hidden";this.m_visible[a][c].length=0}};a.common.Cache.prototype.clear=function(){var a,b,e;for(a in this.m_visible)if(this.m_visible.hasOwnProperty(a))for(b in this.m_visible[a])if(this.m_visible[a].hasOwnProperty(b)){for(;void 0!==(e=this.m_visible[a][b].pop());)e.parentNode.removeChild(e);for(;void 0!==(e=this.m_invisible[a][b].pop());)e.parentNode.removeChild(e)}};a.common.Cache.prototype.get=function(a,b,e){a=a+"-"+b;void 0===this.m_visible[a]&&
(this.m_visible[a]={},this.m_invisible[a]={});void 0===this.m_visible[a][e]&&(this.m_visible[a][e]=[],this.m_invisible[a][e]=[]);b=this.m_invisible[a][e].pop()||null;null!==b&&(this.m_visible[a][e].push(b),b.style.visibility="inherit");return b};a.common.Cache.prototype.put=function(a,b,e,d){this.m_visible[a+"-"+b][e].push(d)};a.common.CanvasGraphics=function(c){this.parent=a.common.Graphics.prototype;this.parent.constructor.apply(this,arguments);this.graphicsType=1;this.m_maximum=8E3};a.common.CanvasGraphics.prototype=
new a.common.Graphics;a.common.CanvasGraphics.prototype.clean=function(){var a,b;for(a in this.m_placeholders)if(this.m_placeholders.hasOwnProperty(a)){var e=this.m_placeholders[a];for(b in e.layers)if(e.layers.hasOwnProperty(b)){var d=e.layers[b];null!==d.canvascanvas&&(d.canvascanvas.parentNode.removeChild(d.canvascanvas),d.canvascanvas=null)}}this.parent.clean.apply(this,arguments)};a.common.CanvasGraphics.prototype._activatePlaceholder=function(a){this.parent._activatePlaceholder.apply(this,arguments);
var b=this.m_activePlaceholder;var c=b.size.width;var d=b.size.height;b.hasGraphics=c>this.m_maximum||d>this.m_maximum?!1:!0};a.common.CanvasGraphics.prototype.resizePlaceholder=function(a,b,e,d,g){var c;this.parent.resizePlaceholder.apply(this,arguments);for(c in a.layers)if(a.layers.hasOwnProperty(c)){var h=a.layers[c];null!==h.canvascanvas&&(h.canvascanvas.width=d,h.canvascanvas.height=g)}};a.common.CanvasGraphics.prototype.begin=function(){var a,b;this.parent.begin.apply(this);for(a in this.m_placeholders)if(this.m_placeholders.hasOwnProperty(a)){var e=
this.m_placeholders[a];var d=e.size.width;var g=e.size.height;for(b in e.layers)if(e.layers.hasOwnProperty(b)){var f=e.layers[b];null!==f.canvascanvas&&f.canvascontext.clearRect(0,0,d,g)}}};a.common.Graphics.prototype._getContext=function(a,b){var c=a.size.width,d=a.size.height;null===b.canvascanvas&&(b.canvascanvas=document.createElement("canvas"),b.canvascanvas.width=c,b.canvascanvas.height=d,this.prepend(a.activeLayer.canvas,b.canvascanvas),b.canvascontext=b.canvascanvas.getContext("2d"));return b.canvascontext};
a.common.CanvasGraphics.prototype.reset=function(a,b){var c="none",d=-1;switch(arguments.length){case 1:"string"===typeof a?c=a:d=a;break;case 2:c=a,d=b}this.parent.reset.apply(this,arguments);var g=this.m_placeholders[c];if(void 0!==g){c=g.size.width;var f=g.size.height;d=g.layers[d];void 0!==d&&null!==d.canvascanvas&&d.canvascontext.clearRect(0,0,c,f)}};a.common.CanvasGraphics.prototype.polyline=function(a){var b=this.m_activePlaceholder,c=a.paletteItem.toAttr(),d;if(b.hasGraphics){var g=b.activeLayer;
var f=this._getContext(b,g);f.save();void 0!==c.lineWidth&&void 0!==c.borderColor?(f.strokeStyle=c.borderColor,f.lineWidth=c.lineWidth):(f.lineWidth=0,f.strokeStyle="Transparent");if(null!=c.lineType){b=Math.round(c.lineWidth)||1;switch(c.lineType){case 0:var h=[];break;case 1:h=[b,b];break;case 2:h=[5*b,3*b]}void 0!==f.setLineDash?f.setLineDash(h):void 0!==f.webkitLineDash?f.webkitLineDash=h:void 0!==f.mozDash&&(f.mozDash=h)}f.beginPath();a.loop(this,function(a){switch(a.segmentType){case 1:f.moveTo(Math.round(a.x)+
.5,Math.round(a.y)+.5);break;case 0:f.lineTo(Math.round(a.x)+.5,Math.round(a.y)+.5);break;case 4:a.width==a.height&&a.width/2<=a.cornerRadius?(f.moveTo(Math.round(a.x)+a.width+.5,Math.round(a.y)+a.height/2+.5),f.arc(Math.round(a.x)+a.width/2+.5,Math.round(a.y)+a.height/2+.5,Math.round(a.width/2),0,2*Math.PI,!1)):0===a.cornerRadius?(f.moveTo(Math.round(a.x)+.5,Math.round(a.y)+.5),f.lineTo(Math.round(a.x+a.width)+.5,Math.round(a.y)+.5),f.lineTo(Math.round(a.x+a.width)+.5,Math.round(a.y+a.height)+.5),
f.lineTo(Math.round(a.x)+.5,Math.round(a.y+a.height)+.5),f.lineTo(Math.round(a.x)+.5,Math.round(a.y)+.5)):(d=Math.min(a.cornerRadius,Math.min(a.width/2,a.height/2)),f.moveTo(Math.round(a.x)+.5,Math.round(a.y+d)+.5),f.arc(Math.round(a.x+d)+.5,Math.round(a.y+d)+.5,Math.round(d),Math.PI,-Math.PI/2,!1),f.lineTo(Math.round(a.x+a.width-d)+.5,Math.round(a.y)+.5),f.arc(Math.round(a.x+a.width-d)+.5,Math.round(a.y+d)+.5,Math.round(d),-Math.PI/2,0,!1),f.lineTo(Math.round(a.x+a.width)+.5,Math.round(a.y+a.height-
d)+.5),f.arc(Math.round(a.x+a.width-d)+.5,Math.round(a.y+a.height-d)+.5,Math.round(d),0,Math.PI/2,!1),f.lineTo(Math.round(a.x+d)+.5,Math.round(a.y+a.height)+.5),f.arc(Math.round(a.x+d)+.5,Math.round(a.y+a.height-d)+.5,Math.round(d),Math.PI/2,Math.PI,!1),f.lineTo(Math.round(a.x)+.5,Math.round(a.y+d)+.5));break;case 2:f.quadraticCurveTo(Math.round(a.cpX)+.5,Math.round(a.cpY)+.5,Math.round(a.x)+.5,Math.round(a.y)+.5);break;case 3:f.bezierCurveTo(Math.round(a.cpX1)+.5,Math.round(a.cpY1)+.5,Math.round(a.cpX2)+
.5,Math.round(a.cpY2)+.5,Math.round(a.x)+.5,Math.round(a.y)+.5)}});null!=c.opacity&&(f.globalAlpha=c.opacity);void 0!==c.lineWidth&&f.stroke();void 0!==c.fillColor&&(f.fillStyle=c.fillColor,f.fill());f.restore()}else this.parent.polyline.apply(this,arguments)};a.common.Element=function(a,b){this.name=this.ns=null;this.attr={};this.style={};this.children=[];switch(arguments.length){case 1:this.name=a;break;case 2:this.ns=a,this.name=b}};a.common.Element.prototype.setAttribute=function(a,b){this.attr[a]=
b};a.common.Element.prototype.appendChild=function(a){this.children[this.children.length]=a};a.common.Element.prototype.create=function(a){var b;var c=null!==this.ns?document.createElementNS(this.ns,this.name):document.createElement(this.name);for(d in this.attr)this.attr.hasOwnProperty(d)&&(void 0!==a?c[d]=this.attr[d]:c.setAttribute(d,this.attr[d]));for(d in this.style)this.style.hasOwnProperty(d)&&(c.style[d]=this.style[d]);for(b=0;b<this.children.length;b+=1){var d=this.children[b];"string"===
typeof d?c.appendChild(document.createTextNode(d)):c.appendChild(d.create(a))}return c};a.common.Element.prototype.update=function(a,b){for(d in this.style)if(this.style.hasOwnProperty(d)){var c=this.style[d];a.style[d]!==c&&(a.style[d]=c)}for(d in this.attr)this.attr.hasOwnProperty(d)&&(c=this.attr[d],void 0!==b?a[d]!==c&&(a[d]=c):a.getAttribute(d)!==c&&a.setAttribute(d,c));var d=this.children.length;for(c=0;c<d;c+=1){var g=this.children[c];"string"===typeof g?a.innerHtml!==g&&(a.innerHtml=g):this.children[c].update(a.children[c],
b)}};a.common.Layer=function(a){this.name=a;this.svgcanvas=this.canvascanvas=this.canvas=null};a.common.Placeholder=function(a){this.name=a;this.layers={};this.div=this.rect=this.size=this.activeLayer=null;this.hasGraphics=!0};a.common.SvgGraphics=function(c){this.parent=a.common.Graphics.prototype;this.parent.constructor.apply(this,arguments);this._svgxmlns="http://www.w3.org/2000/svg";this.graphicsType=0;this.hasGraphics=!0};a.common.SvgGraphics.prototype=new a.common.Graphics;a.common.SvgGraphics.prototype.clean=
function(){var a,b;for(a in this.m_placeholders)if(this.m_placeholders.hasOwnProperty(a)){var e=this.m_placeholders[a];for(b in e.layers)if(e.layers.hasOwnProperty(b)){var d=e.layers[b];null!==d.svgcanvas&&(d.svgcanvas.parentNode.removeChild(d.svgcanvas),d.svgcanvas=null)}}this.parent.clean.apply(this,arguments)};a.common.SvgGraphics.prototype.resizePlaceholder=function(c,b,e,d,g){var f;this.parent.resizePlaceholder.apply(this,arguments);for(f in c.layers)if(c.layers.hasOwnProperty(f)){var h=c.layers[f];
null!==h.svgcanvas&&(a.common.JsonML.applyStyles(h.svgcanvas,{position:"absolute",width:d+"px",height:g+"px"}),h.svgcanvas.viewBox="0 0 "+d+" "+g)}};a.common.SvgGraphics.prototype._getCanvas=function(){var c=this.m_activePlaceholder,b=c.activeLayer,e=c.rect;null===b.svgcanvas&&(b.svgcanvas=document.createElementNS(this._svgxmlns,"svg"),b.svgcanvas.viewBox=e.x+" "+e.y+" "+e.width+" "+e.height,a.common.JsonML.applyStyles(b.svgcanvas,{width:e.width+"px",height:e.height+"px"}),this.prepend(c.activeLayer.canvas,
b.svgcanvas));return b.svgcanvas};a.common.SvgGraphics.prototype.polyline=function(c){var b=this.m_activePlaceholder,e=c.paletteItem.toAttr(),d,g;var f=new a.common.Element(this._svgxmlns,"path");void 0!==e.fillColor?(f.setAttribute("fill",e.fillColor),f.setAttribute("fill-opacity",e.opacity)):f.setAttribute("fill-opacity",0);void 0!==e.lineWidth&&void 0!==e.borderColor?(f.setAttribute("stroke",e.borderColor),f.setAttribute("stroke-width",e.lineWidth),void 0!==e.opacity?f.setAttribute("stroke-opacity",
e.opacity):f.setAttribute("stroke-opacity",1)):(f.setAttribute("stroke","transparent"),f.setAttribute("stroke-width",0));if(null!=e.lineType){var h=Math.round(e.lineWidth)||1;switch(e.lineType){case 0:f.setAttribute("stroke-dasharray","");break;case 1:f.setAttribute("stroke-dasharray",h+","+h);break;case 2:f.setAttribute("stroke-dasharray",5*h+","+3*h)}}var k="";c.loop(this,function(a){switch(a.segmentType){case 1:k+="M"+(Math.round(a.x)+.5)+" "+(Math.round(a.y)+.5);break;case 0:k+="L"+(Math.round(a.x)+
.5)+" "+(Math.round(a.y)+.5);break;case 2:k+="Q"+(Math.round(a.cpX)+.5)+" "+(Math.round(a.cpY)+.5)+" "+(Math.round(a.x)+.5)+" "+(Math.round(a.y)+.5);break;case 4:a.width==a.height&&a.width/2<=a.cornerRadius?(d=a.width/2,k+="M"+(Math.round(a.x)+.5)+" "+(Math.round(a.y)+a.height/2+.5),k+="A"+d+" "+d+" 0 0 0 "+(Math.round(a.x+a.width)+.5)+" "+(Math.round(a.y)+a.height/2+.5),k+="A"+d+" "+d+" 0 0 0 "+(Math.round(a.x)+.5)+" "+(Math.round(a.y)+a.height/2+.5)):0===a.cornerRadius?(k+="M"+(Math.round(a.x)+
.5)+" "+(Math.round(a.y)+.5),k+="L"+(Math.round(a.x+a.width)+.5)+" "+(Math.round(a.y)+.5),k+="L"+(Math.round(a.x+a.width)+.5)+" "+(Math.round(a.y+a.height)+.5),k+="L"+(Math.round(a.x)+.5)+" "+(Math.round(a.y+a.height)+.5),k+="L"+(Math.round(a.x)+.5)+" "+(Math.round(a.y)+.5)):(g=Math.min(a.cornerRadius,Math.min(a.width/2,a.height/2)),k+="M"+(Math.round(a.x)+.5)+" "+(Math.round(a.y+g)+.5),k+="A"+Math.round(g)+" "+Math.round(g)+" 0 0 1 "+(Math.round(a.x+g)+.5)+" "+(Math.round(a.y)+.5),k+="L"+(Math.round(a.x+
a.width-g)+.5)+" "+(Math.round(a.y)+.5),k+="A"+Math.round(g)+" "+Math.round(g)+" 0 0 1 "+(Math.round(a.x+a.width)+.5)+" "+(Math.round(a.y+g)+.5),k+="L"+(Math.round(a.x+a.width)+.5)+" "+(Math.round(a.y+a.height-g)+.5),k+="A"+Math.round(g)+" "+Math.round(g)+" 0 0 1 "+(Math.round(a.x+a.width-g)+.5)+" "+(Math.round(a.y+a.height)+.5),k+="L"+(Math.round(a.x+g)+.5)+" "+(Math.round(a.y+a.height)+.5),k+="A"+Math.round(g)+" "+Math.round(g)+" 0 0 1 "+(Math.round(a.x)+.5)+" "+(Math.round(a.y+a.height-g)+.5),
k+="L"+(Math.round(a.x)+.5)+" "+(Math.round(a.y+g)+.5));break;case 3:k+="C"+(Math.round(a.cpX1)+.5)+" "+(Math.round(a.cpY1)+.5)+" "+(Math.round(a.cpX2)+.5)+" "+(Math.round(a.cpY2)+.5)+" "+(Math.round(a.x)+.5)+" "+(Math.round(a.y)+.5)}});f.setAttribute("d",k);c=this.m_cache.get(b.name,b.activeLayer.name,"path");null===c?(c=f.create(),f=this._getCanvas(),f.appendChild(c),this.m_cache.put(b.name,b.activeLayer.name,"path",c)):f.update(c)};a.common.Transform=function(){this.invertVertically=this.invertHorizontally=
this.invertArea=!1;this.size=null};a.common.Transform.prototype.setOrientation=function(a){switch(a){case 0:this.invertVertically=this.invertHorizontally=this.invertArea=!1;break;case 1:this.invertHorizontally=this.invertArea=!1;this.invertVertically=!0;break;case 2:this.invertArea=!0;this.invertVertically=this.invertHorizontally=!1;break;case 3:this.invertHorizontally=this.invertArea=!0,this.invertVertically=!1}};a.common.Transform.prototype.getOrientation=function(a){var b=a;if(this.invertHorizontally)switch(a){case 2:b=
3;break;case 3:b=2}if(this.invertVertically)switch(a){case 0:b=1;break;case 1:b=0}if(this.invertArea)switch(b){case 0:b=2;break;case 1:b=3;break;case 2:b=0;break;case 3:b=1}return b};a.common.Transform.prototype.transformPoint=function(a,b,e,d,g){if(e&&this.invertArea){var c=a;a=b;b=c}this.invertHorizontally&&(a=this.size.width-a);this.invertVertically&&(b=this.size.height-b);!e&&this.invertArea&&(c=a,a=b,b=c);g.call(d,a,b)};a.common.Transform.prototype.transformPoints=function(a,b,e,d,g,f,h){if(g&&
this.invertArea){var c=a;a=b;b=c;c=e;e=d;d=c}this.invertHorizontally&&(a=this.size.width-a,e=this.size.width-e);this.invertVertically&&(b=this.size.height-b,d=this.size.height-d);!g&&this.invertArea&&(c=a,a=b,b=c,c=e,e=d,d=c);h.call(f,a,b,e,d)};a.common.Transform.prototype.transform3Points=function(a,b,e,d,g,f,h,k,l){if(h&&this.invertArea){var c=a;a=b;b=c;c=e;e=d;d=c;c=g;g=f;f=c}this.invertHorizontally&&(a=this.size.width-a,e=this.size.width-e,g=this.size.width-g);this.invertVertically&&(b=this.size.height-
b,d=this.size.height-d,f=this.size.height-f);!h&&this.invertArea&&(c=a,a=b,b=c,c=e,e=d,d=c,c=g,g=f,f=c);l.call(k,a,b,e,d,g,f)};a.common.Transform.prototype.transformRect=function(a,b,e,d,g,f,h){if(g&&this.invertArea){var c=a;a=b;b=c;c=e;e=d;d=c}this.invertHorizontally&&(a=this.size.width-a-e);this.invertVertically&&(b=this.size.height-b-d);!g&&this.invertArea&&(c=a,a=b,b=c,c=e,e=d,d=c);h.call(f,a,b,e,d)};a.common.ArrayReader=function(c,b,e,d,g){this.itemTemplate=c;this.containsUniqueItems=b;this.uniquePropertyKey=
e;this.containsPrimitiveValues=a.common.isNullOrEmpty(e);this.createSourceHash=d;this.isOrdered=g};a.common.ArrayReader.prototype.read=function(c,b,e,d){var g=[],f={},h={},k={},l,n=e+"-seq";b&&a.common.isArray(b)||(b=[]);var m=d.hash.hasOwnProperty(e)?d.hash[e]:{};var q=d.hash.hasOwnProperty(n)?d.hash[n]:{};var p=0;for(l=b.length;p<l;p+=1){var r=b[p];var t=this.containsUniqueItems?this.containsPrimitiveValues?r:r[this.uniquePropertyKey]:p;if(!f.hasOwnProperty(t)){var u=this.itemTemplate.read(m.hasOwnProperty(t)?
m[t]:{},r,e+"-"+p,d);g.push(u);f[t]=u;h[p]=t;this.createSourceHash&&(k[t]=r);this.isOrdered&&q[p]!=h[p]&&(d.isChanged=!0)}}d.hash[e]=f;d.hash[n]=h;this.createSourceHash&&(d.sourceHash[e]=k);if(null==c||c.length!=g.length)d.isChanged=!0;return g};a.common.EnumerationReader=function(a,b,e){this.enumeration=a;this.isNullable=b;this.defaultValue=e;this.hash={};for(var c in a)this.hash[a[c]]=c};a.common.EnumerationReader.prototype.read=function(a,b,e,d){null!==b&&"undefined"!=typeof b&&this.hash.hasOwnProperty(b)||
(b=this.isNullable?null:this.defaultValue);a!==b&&(d.isChanged=!0);return b};a.common.FunctionReader=function(){};a.common.FunctionReader.prototype.read=function(a,b,e,d){return"function"==typeof b?b:null};a.common.ObjectReader=function(a,b,e){this.dataTemplate=a;this.isNullable=b;this.defaultValue=e};a.common.ObjectReader.prototype.read=function(c,b,e,d){var g=a.common.isObject(c),f;b||(b=this.isNullable?null:this.defaultValue);if(a.common.isObject(b)){var h={};for(f in this.dataTemplate)if(this.dataTemplate.hasOwnProperty(f)){var k=
this.dataTemplate[f];h[f]=k.read(g?c[f]:null,b[f],e+"-"+f,d)}}else h=b,c!==b&&(d.isChanged=!0);return h};a.common.ValueReader=function(a,b,e){this.acceptedTypes=a;this.isNullable=b;this.defaultValue=e;this.hash={};for(b=0;b<a.length;b+=1)this.hash[a[b]]=!0};a.common.ValueReader.prototype.stringify=function(a){if(1==this.hash.object){var b=[];return JSON.stringify(a,function(a,c){return"_"===a[0]?null:null!==c&&"object"==typeof c?-1==b.indexOf(c)?(b.push(c),c):null:c})}return a};a.common.ValueReader.prototype.read=
function(a,b,e,d){null!==b&&"undefined"!=typeof b&&this.hash.hasOwnProperty(typeof b)||(b=this.isNullable?null:this.defaultValue);e=b;this.stringify(a)!==this.stringify(b)&&(d.isChanged=!0);return e};a.famdiagram.EventArgs=function(){this.context=this.oldContext=null;this.parentItems=[];this.childrenItems=[];this.name=this.position=null;this.cancel=!1};a.famdiagram.TemplateConfig=function(){this.name=null;this.isActive=!0;this.itemSize=new a.common.Size(120,100);this.itemBorderWidth=1;this.minimizedItemShapeType=
this.itemTemplate=null;this.minimizedItemSize=new a.common.Size(4,4);this.minimizedItemCornerRadius=null;this.minimizedItemLineWidth=1;this.minimizedItemBorderColor=null;this.minimizedItemLineType=0;this.minimizedItemFillColor=null;this.minimizedItemOpacity=1;this.highlightPadding=new a.common.Thickness(2,2,2,2);this.highlightBorderWidth=1;this.highlightTemplate=null;this.cursorPadding=new a.common.Thickness(3,3,3,3);this.cursorBorderWidth=2;this.onButtonsRender=this.buttons=this.cursorTemplate=null};
a.famdiagram.BackgroundAnnotationConfig=function(c){var b;this.annotationType=4;this.items=[];this.zOrderType=0;this.offset=new a.common.Thickness(18,18,18,18);this.lineWidth=2;this.opacity=1;this.fillColor=this.borderColor=null;this.lineType=0;this.selectItems=!1;switch(arguments.length){case 1:if(null!==c)if(c instanceof Array)this.items=c;else if("object"==typeof c)for(b in c)c.hasOwnProperty(b)&&(this[b]=c[b])}};a.famdiagram.ButtonConfig=function(c,b,e){this.name=c;this.icon=b;this.text=!1;this.label=
null;this.tooltip=e;this.size=new a.common.Size(16,16)};a.famdiagram.Config=function(c){this.name=void 0!==c?c:"FamDiagram";this.classPrefix="famdiagram";this.graphicsType=this.navigationMode=0;this.pageFitMode=3;this.minimalVisibility=2;this.orientationType=0;this.verticalAlignment=1;this.arrowsDirection=this.loopsLayoutMode=0;this.showExtraArrows=!0;this.extraArrowsMinimumSpace=30;this.groupByType=2;this.alignBylevels=!0;this.enableMatrixLayout=!1;this.minimumMatrixSize=4;this.maximumColumnsInMatrix=
6;this.hideGrandParentsConnectors=!1;this.elbowType=3;this.elbowDotSize=this.bevelSize=4;this.emptyDiagramMessage="Diagram is empty.";this.items=[];this.annotations=[];this.highlightItem=this.cursorItem=null;this.highlightGravityRadius=40;this.selectedItems=[];this.hasSelectorCheckbox=0;this.selectCheckBoxLabel="Selected";this.neighboursSelectionMode=this.selectionPathMode=0;this.templates=[];this.defaultLabelAnnotationTemplate=this.defaultTemplateName=null;this.hasButtons=0;this.buttons=[];this.onCursorRender=
this.onHighlightRender=this.onItemRender=this.onMouseDblClick=this.onMouseClick=this.onButtonClick=this.onSelectionChanged=this.onSelectionChanging=this.onCursorChanged=this.onCursorChanging=this.onHighlightChanged=this.onHighlightChanging=this.onButtonsRender=null;this.dotLevelShift=this.normalLevelShift=20;this.normalItemsInterval=this.lineLevelShift=10;this.dotItemsInterval=1;this.lineItemsInterval=2;this.cousinsIntervalMultiplier=5;this.itemTitleFirstFontColor="#ffffff";this.itemTitleSecondFontColor=
"#000080";this.minimizedItemShapeType=6;this.linesColor="#c0c0c0";this.linesWidth=1;this.linesType=0;this.showNeigboursConnectorsHighlighted=!1;this.highlightLinesColor="#ff0000";this.highlightLinesWidth=1;this.highlightLinesType=0;this.linesPalette=[];this.showCallout=!0;this.calloutMaximumVisibility=2;this.calloutPlacementOffset=100;this.defaultCalloutTemplateName=null;this.calloutfillColor="#000000";this.calloutBorderColor=null;this.calloutCornerRadius=this.calloutOffset=4;this.calloutPointerWidth=
"10%";this.calloutLineWidth=1;this.calloutOpacity=.2;this.buttonsPanelSize=28;this.checkBoxPanelSize=this.groupTitlePanelSize=24;this.groupTitleOrientation=this.groupTitlePlacementType=2;this.groupTitleVerticalAlignment=1;this.groupTitleHorizontalAlignment=0;this.groupTitleFontSize="12px";this.groupTitleFontFamily="Arial";this.groupTitleColor="#4169e1";this.groupTitleFontStyle=this.groupTitleFontWeight="normal";this.distance=3;this.scale=1;this.minimumScale=.5;this.maximumScale=1;this.showLabels=
0;this.labelSize=new a.common.Size(80,24);this.labelOffset=1;this.labelOrientation=0;this.labelPlacement=1;this.labelFontSize="10px";this.labelFontFamily="Arial";this.labelColor="#000000";this.labelFontStyle=this.labelFontWeight="normal";this.enablePanning=!0;this.autoSizeMinimum=new a.common.Size(800,600);this.autoSizeMaximum=new a.common.Size(1024,768)};a.famdiagram.ConnectorAnnotationConfig=function(c,b){var e;this.annotationType=0;this.zOrderType=2;this.toItem=this.fromItem=null;this.connectorPlacementType=
this.connectorShapeType=0;this.labelPlacementType=1;this.offset=new a.common.Thickness(0,0,0,0);this.lineWidth=2;this.color="#000000";this.lineType=0;this.selectItems=!0;this.label=null;this.labelSize=new a.common.Size(60,30);switch(arguments.length){case 1:for(e in c)c.hasOwnProperty(e)&&(this[e]=c[e]);break;case 2:this.fromItem=c,this.toItem=b}};a.famdiagram.HighlightPathAnnotationConfig=function(a){var b;this.zOrderType=this.annotationType=2;this.items=[];this.lineWidth=2;this.color="#ff0000";
this.lineType=0;this.opacity=1;this.showArrows=!0;this.selectItems=!1;switch(arguments.length){case 1:if(null!==a)if(a instanceof Array)this.items=a;else if("object"==typeof a)for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}};a.famdiagram.ItemConfig=function(a,b,e,d,g){var c;this.id=null;this.parents=[];this.spouses=[];this.relativeItem=null;this.placementType=3;this.context=this.image=this.description=this.title=this.primaryParent=this.position=null;this.itemTitleColor="#4169e1";this.groupTitle=this.minimizedItemShapeType=
null;this.groupTitleColor="#4169e1";this.isActive=!0;this.hasButtons=this.hasSelectorCheckbox=0;this.templateName=null;this.showCallout=0;this.label=this.calloutTemplateName=null;this.showLabel=0;this.labelSize=null;this.labelOrientation=3;this.labelPlacement=0;switch(arguments.length){case 1:for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);break;case 5:this.id=a,this.parents=b,this.title=e,this.description=d,this.image=g}};a.famdiagram.LabelAnnotationConfig=function(a,b){var c;this.annotationType=
3;this.fromItem=null;this.toItems=[];this.title=null;this.itemTitleColor="#4169e1";this.templateName=null;switch(arguments.length){case 1:for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);break;case 2:this.fromItem=a,this.toItem=b}};a.famdiagram.PaletteItemConfig=function(a,b,e){var c;this.lineColor="#c0c0c0";this.lineWidth=1;this.lineType=0;switch(arguments.length){case 1:for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);break;case 3:this.lineColor=a,this.lineWidth=b,this.lineType=e}};a.famdiagram.ShapeAnnotationConfig=
function(c){var b;this.annotationType=1;this.zOrderType=0;this.items=[];this.shapeType=0;this.offset=new a.common.Thickness(0,0,0,0);this.lineWidth=2;this.cornerRadius="10%";this.opacity=1;this.fillColor=this.borderColor=null;this.lineType=0;this.selectItems=!1;this.label=null;this.labelSize=new a.common.Size(60,30);this.labelPlacement=0;this.labelOffset=4;switch(arguments.length){case 1:if(null!==c)if(c instanceof Array)this.items=c;else if("object"==typeof c)for(b in c)c.hasOwnProperty(b)&&(this[b]=
c[b])}};a.famdiagram.EdgeItem=function(a,b,e,d){this.values=[b,d];this[a]=0;this[e]=1};a.famdiagram.EdgeItem.prototype.getNear=function(a){return this.values[this[a]]};a.famdiagram.EdgeItem.prototype.getFar=function(a){return this.values[Math.abs(this[a]-1)]};a.famdiagram.EdgeItem.prototype.setNear=function(a,b){this.values[this[a]]=b};a.famdiagram.EdgeItem.prototype.setFar=function(a,b){this.values[Math.abs(this[a]-1)]=b};a.famdiagram.EdgeItem.prototype.toString=function(){return this.parent+","+
this.child};a.famdiagram.FamilyItem=function(a){var b;this.itemConfig=this.familyId=this.id=null;this.isActive=this.isVisible=!0;this.isLevelNeutral=!1;this.level=null;this.levelGravity=0;this.hideChildrenConnection=this.hideParentConnection=!1;switch(arguments.length){case 1:for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}};a.famdiagram.Slot=function(a){this.itemId=a;this.position=null;this.balance=0;this.left={};this.right={};this.crossings={}};a.famdiagram.Slot.prototype.clone=function(c){var b=
new a.famdiagram.Slot(c),e;for(e in this.left)this.left.hasOwnProperty(e)&&(b.left[e]=this.left[e]);for(e in this.right)this.right.hasOwnProperty(e)&&(b.right[e]=this.right[e]);for(e in this.crossings)this.crossings.hasOwnProperty(e)&&(b.crossings[e]=this.crossings[e]);b.itemid=c;return b};a.famdiagram.LabelAnnotationOptionTask=function(c,b,e){var d=[],g={},f=null,h={},k=new a.common.ArrayReader(new a.common.ObjectReader({zOrderType:new a.common.EnumerationReader(a.common.ZOrderType,!1,e.zOrderType),
fromItem:new a.common.ValueReader(["string","number"],!0),toItems:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0),title:new a.common.ValueReader(["string"],!0),itemTitleColor:new a.common.ValueReader(["string"],!1,e.itemTitleColor),templateName:new a.common.ValueReader(["string"],!0)},!1),!1,null,!0);return{process:function(){var a={isChanged:!1,hash:h,sourceHash:{}},e=b.getMaximumId(),m;d=k.read(d,c.getAnnotations(3),"annotations",a);g={};var q=a.sourceHash.annotations;
var p=0;for(m=d.length;p<m;p+=1){var r=d[p];e+=1;r.id=e;g[r.id]=q[p]}f=e;return a.isChanged},getAnnotations:function(){return d},getMaximumId:function(){return f},getConfig:function(a){return g[a]}}};a.famdiagram.LabelAnnotationPlacementOptionTask=function(c,b){var e=[],d={},g=new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["number"],!0),fromItem:new a.common.ValueReader(["string","number"],!0),toItems:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],
!0),!0)}),!0,"id");return{process:function(){var a={isChanged:!1,hash:d};e=g.read(e,c.getAnnotations(),"annotations",a);return a.isChanged},getAnnotations:function(){return e},getMaximumId:function(){return c.getMaximumId()}}};a.famdiagram.LabelAnnotationTemplateOptionTask=function(c,b){var e=[],d={},g=new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["number"],!0),title:new a.common.ValueReader(["string"],!0),itemTitleColor:new a.common.ValueReader(["string"],!1,b.itemTitleColor),
templateName:new a.common.ValueReader(["string"],!0)}),!0,"id");return{process:function(){var a={isChanged:!1,hash:d};e=g.read(e,c.getAnnotations(),"annotations",a);return a.isChanged},getAnnotations:function(){return e}}};a.famdiagram.NeighboursSelectionModeOptionTask=function(c,b){var e={},d=new a.common.ObjectReader({neighboursSelectionMode:new a.common.EnumerationReader(a.common.NeighboursSelectionMode,!1,b.neighboursSelectionMode)});return{process:function(){var a={isChanged:!1};e=d.read(e,c.getOptions(),
"options",a);return a.isChanged},getNeighboursSelectionMode:function(){return e.neighboursSelectionMode}}};a.famdiagram.HideGrandParentsConnectorsOptionTask=function(c,b){var e={},d={},g=new a.common.ObjectReader({hideGrandParentsConnectors:new a.common.ValueReader(["boolean"],!1,b.hideGrandParentsConnectors)});return{process:function(){var a={isChanged:!1,hash:d};e=g.read(e,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return e}}};a.famdiagram.ItemsOptionTask=function(c,b){var e=
{},d={},g={},f=new a.common.ObjectReader({items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),parents:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0),isActive:new a.common.ValueReader(["boolean"],!1,b.isActive)}),!0,"id",!0)});return{process:function(){var a={isChanged:!1,hash:d,sourceHash:g};e=f.read(e,c.getOptions(),"options",a);return a.isChanged},getItems:function(){return e.items},getConfig:function(a){return g["options-items"][a]}}};
a.famdiagram.LinePaletteOptionTask=function(c,b){var e={},d={},g=new a.common.ObjectReader({linesPalette:new a.common.ArrayReader(new a.common.ObjectReader({lineColor:new a.common.ValueReader(["string"],!1,b.lineColor),lineWidth:new a.common.ValueReader(["number"],!1,b.lineWidth),lineType:new a.common.EnumerationReader(a.common.LineType,!1,b.lineType)}),!1)});return{process:function(){var a={isChanged:!1,hash:d};e=g.read(e,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return e}}};
a.famdiagram.NormalizeOptionTask=function(c,b){var e={},d={},g=new a.common.ObjectReader({groupByType:new a.common.EnumerationReader(a.common.GroupByType,!1,b.groupByType),alignBylevels:new a.common.ValueReader(["boolean"],!1,b.alignBylevels)});return{process:function(){var a={isChanged:!1,hash:d};e=g.read(e,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return e}}};a.famdiagram.OptionsTask=function(a){return{process:function(){return!0},getOptions:a,description:"Raw options."}};
a.famdiagram.OrderFamilyNodesOptionTask=function(c,b,e){var d={},g={},f=new a.common.ObjectReader({enableMatrixLayout:new a.common.ValueReader(["boolean"],!1,b.enableMatrixLayout),minimumMatrixSize:new a.common.ValueReader(["number"],!1,b.minimumMatrixSize),maximumColumnsInMatrix:new a.common.ValueReader(["number"],!1,b.maximumColumnsInMatrix),items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),position:new a.common.ValueReader(["number"],
!0),relativeItem:new a.common.ValueReader(["string","number"],!0),placementType:new a.common.EnumerationReader(a.common.AdviserPlacementType,!1,e.placementType),primaryParent:new a.common.ValueReader(["string","number"],!0)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:g};d=f.read(d,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return d}}};a.famdiagram.RemoveLoopsOptionTask=function(c,b){var e={},d={},g=new a.common.ObjectReader({loopsLayoutMode:new a.common.EnumerationReader(a.common.LoopsLayoutMode,
!1,b.loopsLayoutMode)});return{process:function(){var a={isChanged:!1,hash:d};e=g.read(e,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return e}}};a.famdiagram.SpousesOptionTask=function(c,b){var e={},d={},g=new a.common.ObjectReader({items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),spouses:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0)}),!0,"id")});return{process:function(){var a={isChanged:!1,
hash:d};e=g.read(e,c.getOptions(),"options",a);return a.isChanged},getItems:function(){return e.items}}};a.famdiagram.VisualTreeOptionTask=function(a){var b={leavesPlacementType:2,childrenPlacementType:2,maximumColumnsInMatrix:6,horizontalAlignment:0};return{process:function(){return!1},getOptions:function(){return b}}};a.famdiagram.CombinedTemplateParamsTask=function(a,b){return{process:function(){return!0},getTemplateParams:function(c){return a.getTemplateParams(c)||b.getTemplateParams(c)}}};a.famdiagram.LabelAnnotationTemplateParamsTask=
function(c,b,e){var d={};return{process:function(){var g=c.getOptions(),f=b.getAnnotations(),h;d={};var k=0;for(h=f.length;k<h;k+=1){var l=f[k],n=new a.orgdiagram.TemplateParams,m=e.getTemplate(l.templateName,g.defaultLabelAnnotationTemplate,e.DefaultWidgetLabelAnnotationTemplateName);n.template=m;d[l.id]=n}return!0},getTemplateParams:function(a){return d[a]}}};a.famdiagram.BaseTransformer=function(a){this.debug=a};a.famdiagram.BaseTransformer.prototype.validate=function(a,b){if(!a.validate())throw"Family structure failed to pass validation!";
a.loop(this,function(c,d){a.loopChildren(this,c,function(c,f,e){if(null===f.level||null===d.level||(b?f.level!=d.level+1:f.level<=d.level))throw"Family tree is broken. Children/Parents or levels mismatch!";return a.SKIP})})};a.famdiagram.FamilyBalance=function(){};a.famdiagram.FamilyBalance.prototype.balance=function(c){var b={maximumId:null,treeLevels:a.common.TreeLevels(),bundles:[],connectorStacks:[]},e={orgTree:a.common.tree(),maximumId:c.maximumId,orgPartners:{},itemByChildrenKey:{},minimumLevel:null,
maximumLevel:null};this.createOrgTree(c,e);var d,g=-1;e.orgTree.loopLevels(this,function(a,e,k){e=c.logicalFamily.node(a);null!=e&&(d!==k&&(d=k,g+=1),b.treeLevels.addItem(g,a,e))});this.recalcLevelsDepth(b.bundles,b.connectorStacks,b.treeLevels,c.logicalFamily);b.maximumId=e.maximumId;return b};a.famdiagram.FamilyBalance.prototype.Family=function(a){this.id=null;this.familyPriority=1;this.childFamilies=[];this.items=[];this.links=[];this.backLinks=[];1==arguments.length&&(this.id=a)};a.famdiagram.FamilyBalance.prototype.FamLink=
function(a,b){this.fromItem=a;this.toItem=b};a.famdiagram.FamilyBalance.prototype.createOrgTree=function(c,b){var e,d,g=[],f=[];if(0<c.logicalFamily.hasNodes()){var h={};var k=0;var l=[];c.logicalFamily.loopRoots(this,function(a,d){p=new this.Family(k);this.extractOrgChart(a,c.logicalFamily,c.primaryParents,b.orgTree,b.orgPartners,b.itemByChildrenKey,h,p);f.push(p);l.push(p);k+=1});l.sort(function(a,b){var c=a.items[0].level,f=b.items[0].level;return c!=f?c-f:b.items.length-a.items.length});g=[];
var n={};if(0<f.length){var m=a.common.graph();var q=0;for(e=f.length;q<e;q+=1){var p=f[q];var r=0;for(d=p.links.length;r<d;r+=1){var t=p.links[r];var u=c.logicalFamily.node(t.fromItem).familyId;var v=c.logicalFamily.node(t.toItem).familyId;u!=v&&(m.addEdge(u,v,{weight:0}),m.edge(u,v).weight+=1);f[v].backLinks.push(new this.FamLink(t.toItem,t.fromItem))}}for(;g.length<f.length;)for(q=0,e=l.length;q<e;q+=1)if(p=l[q],!n.hasOwnProperty(p.id)){var w=m.getSpanningTree(p.id,function(a){return-a.weight});
null!=w.node(p.id)?(w.loopPostOrder(this,function(a,b,c,d){b=f[a];d=f[c];var e=[];null!=c&&(d.familyPriority+=b.familyPriority);e=[];w.loopChildren(this,a,function(a,b,c){e.push(a)});e.sort(function(a,b){return f[a].familyPriority-f[b].familyPriority});w.arrangeChildren(a,e)}),w.loopPreOrder(this,function(a,b){g.push(a);n[a]=!0})):(g.push(p.id),n[p.id]=!0)}}b.maximumId+=1;var y=new a.famdiagram.FamilyBalanceItem(b.maximumId,null,b.minimumLevel-1);b.orgTree.add(null,y.id,y);m={};q=0;for(e=g.length;q<
e;q+=1){p=f[g[q]];v={};var D=y;var B=0;d=p.links.concat(p.backLinks);for(r=0;r<d.length;r+=1)if(t=d[r],u=b.orgTree.node(t.toItem),b.orgTree.node(t.fromItem),!0===m[u.familyId]){var F=p.items[0];var x=u;x.level>=F.level&&b.orgTree.loopParents(this,x.id,function(a,b){x=b;if(b.level<F.level)return!0});v.hasOwnProperty(x.id)?v[x.id]+=1:v[x.id]=1;B<v[x.id]&&(D=x,B=v[x.id])}this.attachFamilyToOrgChart(b,D,p);m[p.id]=!0}q=this.getExtraGravity(b);e=this.getGrandChildren(b);this.balanceOrgTree(b.orgTree,q,
e,c.itemsPositions,c.itemsGroups)}};a.famdiagram.FamilyBalance.prototype.getGrandChildren=function(a){var b={};a.orgTree.loopPostOrder(this,function(c,d,g,f){a.minimumLevel=null!=a.minimumLevel?Math.min(a.minimumLevel,d.level):d.level;a.maximumLevel=null!=a.maximumLevel?Math.max(a.maximumLevel,d.level):d.level;if(null!=g&&(b[g]||(b[g]={}),d=d.level-1,b[g][d]=b[g][d]?b[g][d]+1:1,null!=b[c]))for(d in b[c])b[c].hasOwnProperty(d)&&(b[g][d]=b[g][d]?b[g][d]+b[c][d]:b[c][d])});return b};a.famdiagram.FamilyBalance.prototype.balanceOrgTree=
function(c,b,e,d,g){var f,h,k,l,n,m,q,p,r,t,u;c.loopLevels(this,function(v,w,y){var D=a.common.graph(),B={},F=null,x;q=[];c.loopChildren(this,w.id,function(a,d,e){var g;null==F&&(F=d);B[d.id]={};if(b.hasOwnProperty(d.id))for(g in m=b[d.id],m)if(m.hasOwnProperty(g))for(t=m[g],B[d.id][g]={},f=0,h=t.length;f<h;f+=1)n=t[f],x=n.commonParent==w.id?n.toParent:c.node(n.fromParent).childIndex<c.node(n.toParent).childIndex?"__right__":"__left__",d.id!=x&&(D.addEdge(d.id,x,{weight:0}),D.edge(d.id,x).weight+=
1,null==B[d.id][g][x]&&(B[d.id][g][x]=0),B[d.id][g][x]+=1);0<e&&D.addEdge(d.id,F.id,{weight:0})});if(null!=F)for(u=[],D.getTotalWeightGrowthSequence(this,function(a){return a.weight},function(a){u.push(a)}),0===u.length&&(u=[F.id]),p=this.balanceItems(u,"__left__","__right__",B,e,d,g),k=0,l=p.length;k<l;k+=1)r=c.node(p[k]),r.childIndex=k,q.push(r.id);c.arrangeChildren(w.id,q)})};a.famdiagram.FamilyBalance.prototype.balanceItems=function(c,b,e,d,g,f,h){var k=[],l,n=a.common.LinkedHashItems(),m=0,q=
{},p={},r,t,u,v,w,y,D,B,F,x,A,E,C;var z=[b,null,e];for(l=0;l<z.length;l+=1){var G=z[l];var J=m++;var H=new a.famdiagram.Slot(G);H.position=l;n.add(J,H);null!==G&&(p[G]=J)}for(l=0;l<c.length;l+=1)if(G=c[l],G!=b&&G!=e){z=J=y=w=v=u=t=r=null;h.hasOwnProperty(G)&&(H=h[G],q.hasOwnProperty(H)&&(z=f[G],H=q[H],J=H.previousContext(z),z=H.nextContext(z)));n.iterate(function(a,b){var c,f;if(null==a.itemId){A=g[G];x=F=B=D=0;for(c in a.crossings)a.crossings.hasOwnProperty(c)&&(A&&null!=A[c]&&(D+=a.crossings[c]*
A[c]),x+=a.crossings[c]);for(c in d[G])if(d[G].hasOwnProperty(c)){var e=d[G][c];for(f in e)if(e.hasOwnProperty(f)&&p.hasOwnProperty(f)){var h=n.item(p[f]);null!=h&&(h.position<a.position?(D+=(a.left[c]||0)-(h.left[c]||0),F+=Math.abs(h.balance+1)):(D+=(a.right[c]||0)-(h.right[c]||0),F+=Math.abs(h.balance-1)),B+=Math.abs(h.position-a.position))}}if(null==u||u>D||u==D&&(v>B||v==B&&(w>F||w==F&&y>x)))r=b,u=D,t=a,v=B,w=F,y=x}},J,z);n.insertBefore(r,m++,t.clone(null));var I=p[G]=m;J=t.clone(G);f.hasOwnProperty(G)&&
(H=h[G],q.hasOwnProperty(H)||(q[H]=a.common.SortedList()),H=q[H],H.add(f[G],m));n.insertBefore(r,m++,J);var L=J.position=0;n.iterate(function(a,b){var c;if(b!=I){b=g[G];for(c in b)b.hasOwnProperty(c)&&(a.left[c]=a.left[c]?a.left[c]+b[c]:b[c]);L+=1;a.position=L}},I);L=0;n.iterateBack(function(a,b){var c;if(b!=I){b=g[G];for(c in g[G])g[G].hasOwnProperty(c)&&(a.right[c]=a.right[c]?a.right[c]+b[c]:b[c]);--L;a.position=L}},I);for(E in d[G])if(d[G].hasOwnProperty(E)){var O=d[G][E];for(C in O)if(O.hasOwnProperty(C)&&
p.hasOwnProperty(C)){var K=p[C];H=n.item(K);null!=H&&(0>H.position?(H.balance+=1,--J.balance,n.iterateBack(function(a,b){b!=I&&b!=K&&(a.crossings[E]=a.crossings[E]?a.crossings[E]+O[C]:O[C])},I,K)):(--H.balance,J.balance+=1,n.iterate(function(a,b){b!=I&&b!=K&&(a.crossings[E]=a.crossings[E]?a.crossings[E]+O[C]:O[C])},I,K)))}}}n.iterate(function(a){a=a.itemId;null!=a&&a!=b&&a!=e&&k.push(a)});return k};a.famdiagram.FamilyBalance.prototype.ExtraGravity=function(a){this.toParent=this.fromParent=this.commonParent=
null;this.level=a};a.famdiagram.FamilyBalance.prototype.getExtraGravity=function(a){var b,c={},d;for(b in a.orgPartners)if(a.orgPartners.hasOwnProperty(b)){var g=a.orgTree.node(b);var f=a.orgPartners[b];var h=0;for(d=f.length;h<d;h+=1){var k=a.orgTree.node(f[h]);this.addExtraGravitiesForConnection(a.orgTree,c,k,g)}}return c};a.famdiagram.FamilyBalance.prototype.addExtraGravitiesForConnection=function(a,b,e,d){var c=new this.ExtraGravity(e.level),f=new this.ExtraGravity(d.level);a.zipUp(this,e.id,
d.id,function(a,d,e,g){this.addExtraGravityForItem(b,a,c);this.addExtraGravityForItem(b,e,f);if(d==g)return c.commonParent=d,c.fromParent=a,c.toParent=e,f.commonParent=d,f.fromParent=e,f.toParent=a,!0})};a.famdiagram.FamilyBalance.prototype.addExtraGravityForItem=function(a,b,e){a.hasOwnProperty(b)||(a[b]={});null==a[b][e.level]&&(a[b][e.level]=[]);a[b][e.level].push(e)};a.famdiagram.FamilyBalance.prototype.attachFamilyToOrgChart=function(c,b,e){var d=e.items[0],g=b;for(b=b.level+1;b<d.level;b+=1){c.maximumId+=
1;var f=new a.famdiagram.FamilyBalanceItem(c.maximumId,null,b);c.orgTree.add(g.id,f.id,f);e.items.push(f);g=f}d.hideParentConnection=!0;c.orgTree.adopt(g.id,d.id,d)};a.famdiagram.FamilyBalance.prototype.extractOrgChart=function(c,b,e,d,g,f,h,k){var l;var n=b.node(c);c=new a.famdiagram.FamilyBalanceItem(n.id,k.id,n.level);d.add(null,c.id,c);k.items.push(c);h[n.id]=n;n.familyId=k.id;for(l=this.extractChildren(n,b,e,d,g,f,h,k);0<l.length;){var m=[];c=0;for(n=l.length;c<n;c+=1){var q=l[c];m=m.concat(this.extractChildren(q,
b,e,d,g,f,h,k))}l=m}};a.famdiagram.FamilyBalance.prototype.extractChildren=function(c,b,e,d,g,f,h,k){var l=[],n=null,m=null,q;1==b.countChildren(c.id)&&(n=b.firstChild(c.id));if(null!=f[n])m=f[n],null==g[m.id]&&(g[m.id]=[]),g[m.id].push(c.id),k.links.push(new this.FamLink(c.id,n));else{if(null!=n){if(e.hasOwnProperty(n)&&(e=e[n],e!=c.id))return null==g[e]&&(g[e]=[]),g[e].push(c.id),k.links.push(new this.FamLink(c.id,n)),l;f[n]=c}b.loopChildren(this,c.id,function(f,e,g){if(h[e.id])throw"Many to many relations should not exist at this stage";
l.push(e);q=new a.famdiagram.FamilyBalanceItem(e.id,k.id,e.level);d.add(c.id,q.id,q);k.items.push(q);h[e.id]=!0;e.familyId=k.id;return b.SKIP})}return l};a.famdiagram.FamilyBalance.prototype.recalcLevelsDepth=function(c,b,e,d){var g,f,h,k,l,n,m,q={},p,r,t;e.loopLevels(this,function(u,v){v=new a.orgdiagram.TreeLevelConnectorStackSize;b[u]=v;m=[];e.loopLevelItems(this,u,function(b,f,e){var h=[],g=[],k=null;!q.hasOwnProperty(b)&&(q[b]=!0,f.hideChildrenConnection?k=b:h.push(b),d.loopChildren(this,b,function(a,
b,c){d.loopParents(this,a,function(a,b){q.hasOwnProperty(a)||(q[a]=!0,b.hideChildrenConnection?k=a:h.push(a));return d.SKIP});b.hideParentConnection?k=a:g.push(a);return d.SKIP}),1<h.length||0<g.length)&&(n=new a.common.VerticalConnectorBundle(h,g,k),c.push(n),1<h.length&&m.push(n))});if(0<m.length){t=a.common.pile();g=0;for(f=m.length;g<f;g+=1){n=m[g];r=p=null;h=0;for(k=n.fromItems.length;h<k;h+=1)l=e.getItemPosition(n.fromItems[h]),p=null!=p?Math.min(p,l):l,r=null!=r?Math.max(r,l):l;t.add(p,r,n)}v.parentsStackSize=
t.resolve(this,function(a,b,c,f,d){c.fromOffset=f+1;c.fromStackSize=d})}})};a.famdiagram.FamilyBalanceItem=function(a,b,e){this.id=a;this.familyId=b;this.level=e;this.childIndex=0};a.famdiagram.FamilyMatrixesExtractor=function(c){this.parent=a.famdiagram.BaseTransformer.prototype;this.parent.constructor.apply(this,arguments)};a.famdiagram.FamilyMatrixesExtractor.prototype=new a.famdiagram.BaseTransformer;a.famdiagram.FamilyMatrixesExtractor.prototype.extract=function(c,b,e,d,g,f){0<b.hasNodes()&&
c.enableMatrixLayout&&b.groupBy(this,Math.max(2,c.minimumMatrixSize),function(h,k,l,n){var m=f+=1,q=f+=1,p=b.node(l[0]);p=new a.famdiagram.FamilyItem({id:m,level:p.level,isVisible:!1,isActive:!1,itemConfig:{title:"dummy #"+m,description:"This is item used as aggregator of matrixed nodes."},levelGravity:1,hideParentConnection:!0,hideChildrenConnection:!0});d[m]=q;for(var r=0,t=l.length;r<t;r+=1)b.removeNode(l[r]);null!=h?(b.add([h],m,p),p.hideParentConnection=!1,g.push(new a.common.MatrixConnectorBundle(!0,
l,m,m,this.getMatrixWidth(c.maximumColumnsInMatrix,l.length)))):b.add(null,m,p);null!=k&&(b.adopt([m],k),p.hideChildrenConnection=!1,g.push(new a.common.MatrixConnectorBundle(!1,l,m,q,this.getMatrixWidth(c.maximumColumnsInMatrix,l.length))));e[m]=n});return f};a.famdiagram.FamilyMatrixesExtractor.prototype.getMatrixWidth=function(a,b){return Math.min(a,Math.ceil(Math.sqrt(b)))};a.famdiagram.FamilyNormalizer=function(c){this.parent=a.famdiagram.BaseTransformer.prototype;this.parent.constructor.apply(this,
arguments)};a.famdiagram.FamilyNormalizer.prototype=new a.famdiagram.BaseTransformer;a.famdiagram.FamilyNormalizer.prototype.normalize=function(c,b,e){if(0<b.hasNodes()){b.loopLevels(this,1==c.groupByType,function(a,b,c){b.level=c});b.optimizeReferences(function(){e+=1;return new a.famdiagram.FamilyItem({id:e,isVisible:!1,isActive:!1,itemConfig:{title:"bundle #"+e,description:" This item was created by references optimizer."},levelGravity:2})});if(this.debug&&!b.validate())throw"References are broken in family structure!";
if(this.debug&&b.hasLoops())throw"Structure has loops!";b.eliminateManyToMany(function(){e+=1;return new a.famdiagram.FamilyItem({id:e,isVisible:!1,isActive:!1,itemConfig:{title:"dummy #"+e,description:"This is item used to eliminate M:M relations."},levelGravity:2,hideParentConnection:!1,hideChildrenConnection:!1})});if(this.debug&&!b.validate())throw"References are broken in family structure!";c.alignBylevels?this.resortItemsBylevels(b):b.loopLevels(this,1==c.groupByType,function(a,b,c){b.level=
c});this.debug&&this.validate(b,!1);this.fillInItems(b,function(b){e+=1;return new a.famdiagram.FamilyItem({id:e,levelGravity:2,isVisible:!1,isActive:!1,itemConfig:{title:"extension #"+e,description:"This is item used to fill gaps in levels."}})});this.debug&&this.validate(b,!0)}return e};a.famdiagram.FamilyNormalizer.prototype.resortItemsBylevels=function(a){var b=[],c=null,d=null,g;a.loop(this,function(a,f){f.originalLevel=f.level;f.level=null;null!=f.originalLevel&&(b[f.originalLevel]||(b[f.originalLevel]=
{}),b[f.originalLevel][a]=f,c=null!=c?Math.min(f.originalLevel,c):f.originalLevel,d=null!=d?Math.max(f.originalLevel,d):f.originalLevel)});for(g=c;g<=d;g+=1){var f=b[g];this.setLevelsForItems(f,a)}a.loopTopo(this,function(b,c,f){if(1==c.levelGravity){var d=null;a.loopParents(this,b,function(b,c,f){d=null==d?c.level+1:Math.max(c.level+1,d);return a.SKIP});c.level=d?d:c.level}})};a.famdiagram.FamilyNormalizer.prototype.setLevelsForItems=function(c,b){var e=0,d;for(d in c)c.hasOwnProperty(d)&&b.loopParents(this,
d,function(a,c,f){e=Math.max(c.level+1,e);return b.SKIP});for(d in c)if(c.hasOwnProperty(d)){var g=c[d];g.level=e}for(;!a.common.isEmptyObject(c);){var f={};for(d in c)c.hasOwnProperty(d)&&(g=c[d],b.loopChildren(this,d,function(a,c,d){if(null==c.originalLevel||c.isLevelNeutral)c.level=null==c.level?g.level+1:Math.max(c.level,g.level+1),f[a]=c;return b.SKIP}));c=f}};a.famdiagram.FamilyNormalizer.prototype.fillInItems=function(a,b){var c;a.loop(this,function(d,e){for(var f=!0,h;f;)f=!1,h=[],a.loopParents(this,
d,function(b,c,f){e.level-1>c.level&&h.push(b);return a.SKIP}),1<h.length&&(c=b(e),c.level=e.level-1,c.hideParentConnection=!1,c.hideChildrenConnection=!1,a.bundleParents(d,h,c.id,c),f=!0,d=c.id,e=c)});a.loop(this,function(d,e){for(var f=!0,h,g=!0;f;)f=!1,h=[],a.loopChildren(this,d,function(b,c,f){e.level+1<c.level?h.push(b):g=!1;return a.SKIP}),1<h.length&&(c=b(e),c.level=e.level+1,g&&(c.hideParentConnection=!1,c.hideChildrenConnection=!1),a.bundleChildren(d,h,c.id,c),f=!0,d=c.id,e=c)});a.loop(this,
function(d,e){for(var f=!0,h;f;)f=!1,h=[],a.loopParents(this,d,function(b,c,f){e.level-1>c.level&&h.push(b);return a.SKIP}),0<h.length&&(c=b(e),c.level=e.level-1,c.hideParentConnection=!1,c.hideChildrenConnection=!1,a.bundleParents(d,h,c.id,c),f=!0,d=c.id,e=c)})};a.famdiagram.UserDefinedNodesOrder=function(){};a.famdiagram.UserDefinedNodesOrder.prototype.getUserDefinedPositions=function(c){function b(a,b){this.position=a;this.items=b}var e,d=a.common.tree(),g={};var f=0;for(e=c.length;f<e;f+=1){var h=
c[f];null!=h.relativeItem&&(g[h.relativeItem]=!0);null!=h.id&&(g[h.id]=!0)}f=0;for(e=c.length;f<e;f+=1)h=c[f],g.hasOwnProperty(h.id)&&d.add(h.relativeItem||null,h.id,h);var k={},l={},n={};d.loopPostOrder(this,function(a,c,f,d){d=[];var e=l[a],h=n[a],g;if(null!=e)for(e.sort(function(a,b){return b.position-a.position}),g=0;g<e.length;g+=1)d=d.concat(e[g].items);d.push(a);if(null!=h)for(h.sort(function(a,b){return a.position-b.position}),g=0;g<h.length;g+=1)d=d.concat(h[g].items);null!=f?2==c.placementType?
(l.hasOwnProperty(f)||(l[f]=[]),l[f].push(new b(c.position,d))):(n.hasOwnProperty(f)||(n[f]=[]),n[f].push(new b(c.position,d))):k[a]=d});h={};e={};for(var m in k)if(k.hasOwnProperty(m))for(c=k[m],f=0;f<c.length;f+=1)d=c[f],h[d]=f,e[d]=m;return{position:h,group:e}};a.famdiagram.UserDefinedPrimaryParents=function(){};a.famdiagram.UserDefinedPrimaryParents.prototype.getUserDefinedPrimaryParents=function(a,b){var c={},d,g={};var f=0;for(d=a.length;f<d;f+=1){var h=a[f];null!=h.primaryParent&&(g[h.id]=
h.primaryParent)}for(var k in g){var l=g[k],n={};for(a=[k];0<a.length;){var m=[];f=0;for(d=a.length;f<d;f+=1)k=a[f],b.loopParents(this,k,function(a,f){n[a]=k;if(a==l){for(;null!=n[a];)c[n[a]]=a,a=n[a];m=[];return b.BREAK}0==f.isVisible&&m.push(a);return b.SKIP});a=m}}return c};a.common.BaseLayout=function(a,b){this._children={};if(null!=this.params)for(var c in this.params)this.params.hasOwnProperty(c)&&a.hasOwnProperty(c)&&(this.params[c]=a[c]);if(null!=this.options){for(c in this.options)this.options.hasOwnProperty(c)&&
b.hasOwnProperty(c)&&(this.options[c]=b[c]);this.options.shifts=this.getShifts(this.options);this.options.intervals=this.getIntervals(this.options)}};a.common.BaseLayout.prototype.add=function(a,b){this._children[a]=b};a.common.BaseLayout.prototype.getLayout=function(a){return this._children[a]||null};a.common.BaseLayout.prototype.getShifts=function(a){var b=[];b[1]=a.normalLevelShift;b[2]=a.dotLevelShift;b[3]=a.lineLevelShift;b[4]=a.lineLevelShift;return b};a.common.BaseLayout.prototype.getIntervals=
function(a){var b=[];b[1]=a.normalItemsInterval;b[2]=a.dotItemsInterval;b[3]=a.lineItemsInterval;b[4]=a.lineItemsInterval;return b};a.common.BaseLayout.prototype.getItemSize=function(c,b,e,d){switch(c){case 1:c=e.template.templateConfig;var g=new a.common.Size(c.itemSize);var f=new a.common.Rect(0,0,g.width,g.height);b&&(g.height+=c.cursorPadding.top+c.cursorPadding.bottom,g.width+=c.cursorPadding.left+c.cursorPadding.right,f.x=c.cursorPadding.left,f.y=c.cursorPadding.top);e.hasSelectorCheckbox&&
(g.height+=d.checkBoxPanelSize);if(e.hasButtons)switch(g.width+=d.buttonsPanelSize,d.groupTitlePlacementType){case 3:f.x+=d.buttonsPanelSize}if(e.hasGroupTitle)switch(g.width+=d.groupTitlePanelSize,d.groupTitlePlacementType){case 3:break;default:f.x+=d.groupTitlePanelSize}break;case 2:c=e.template.templateConfig;g=new a.common.Size(c.minimizedItemSize);break;case 3:case 4:g=new a.common.Size}switch(d.orientationType){case 2:case 3:g.invert()}return{actualSize:g,contentPosition:f}};a.famdiagram.FamilyLayout=
function(c,b){this.params={logicalFamily:null,treeLevels:null,getConnectorsStacksSizes:null,isItemSelected:null,cursorItemId:null,getTemplateParams:null};this.options={verticalAlignment:1,pageFitMode:0,minimalVisibility:2,orientationType:0,arrowsDirection:0,linesWidth:1,checkBoxPanelSize:24,buttonsPanelSize:28,groupTitlePanelSize:24,groupTitlePlacementType:2,normalLevelShift:20,dotLevelShift:20,lineLevelShift:20,normalItemsInterval:10,dotItemsInterval:1,lineItemsInterval:2};this.data={treeItemsPositions:{},
treeLevelsPositions:[]};this.parent=a.common.BaseLayout.prototype;this.parent.constructor.apply(this,arguments)};a.famdiagram.FamilyLayout.prototype=new a.common.BaseLayout;a.famdiagram.FamilyLayout.prototype.measure=function(c){var b=new a.common.Rect(0,0,0,0),e={treeItemsPositions:{},treeLevelsPositions:[]};switch(this.options.orientationType){case 2:case 3:c.invert()}if(!this.params.treeLevels.isEmpty())switch(this.options.pageFitMode){case 0:case a.common.PageFitMode.PrintPreview:case 5:var d=
[new a.orgdiagram.LevelVisibility(0,1)];b=this.setTreeLevelsVisibilityAndPositionTreeItems(e,this.params,this.options,d,0);break;default:d=this.getLevelVisibilities(this.params.treeLevels,this.options.minimalVisibility);var g=this.setTreeLevelsVisibilityAndPositionTreeItems(e,this.params,this.options,d,d.length-1);this.checkDiagramSize(g,c,this.options.pageFitMode)?(g.addRect(c),g.offset(0,0,5,5),this.findOptimalSize(this,d.length-1,function(a){b=this.setTreeLevelsVisibilityAndPositionTreeItems(e,
this.params,this.options,d,a);return this.checkDiagramSize(b,g,this.options.pageFitMode)})):b=g}this.data=e;return b};a.famdiagram.FamilyLayout.prototype.getLevelVisibilities=function(c,b){var e=[new a.orgdiagram.LevelVisibility(0,1)],d=[];switch(b){case 2:d.push(2);break;case 0:case 3:case 4:d.push(2),d.push(3)}c.loopLevelsReversed(this,function(b,c){for(c=0;c<d.length;c+=1)e.push(new a.orgdiagram.LevelVisibility(b,d[c]))});return e};a.famdiagram.FamilyLayout.prototype.findOptimalSize=function(a,
b,e){var c=0,g;if(!e.call(a,c)){for(g=b;1<b-c;)g=Math.floor((b+c)/2),e.call(a,g)?b=g:c=g;b!==g&&e.call(a,b)}};a.famdiagram.FamilyLayout.prototype.setTreeLevelsVisibilityAndPositionTreeItems=function(c,b,e,d,g){var f;c.treeLevelsPositions=[];b.treeLevels.loopLevels(this,function(b,f){b=new a.orgdiagram.TreeLevelPosition;b.currentvisibility=1;c.treeLevelsPositions.push(b)});for(f=0;f<=g;f+=1){var h=d[f];c.treeLevelsPositions[h.level].currentvisibility=h.currentvisibility}c.treeItemsPositions={};this.recalcItemsSize(b.treeLevels,
c.treeItemsPositions,c.treeLevelsPositions,b.isItemSelected,b.cursorItemId,b.getTemplateParams,e);this.setOffsets(b.treeLevels,c.treeItemsPositions,c.treeLevelsPositions,b.logicalFamily,e.intervals);this.recalcLevelsDepth(b.treeLevels,c.treeItemsPositions,c.treeLevelsPositions,e.verticalAlignment);this.shiftLevels(c.treeLevelsPositions,e.shifts[3],e.shifts,e.arrowsDirection,e.linesWidth,b.getConnectorsStacksSizes);return this.getLayoutSize(b.treeLevels,c.treeItemsPositions,c.treeLevelsPositions)};
a.famdiagram.FamilyLayout.prototype.checkDiagramSize=function(a,b,e){var c=!1;switch(e){case 1:b.width>=a.width&&(c=!0);break;case 2:b.height>=a.height&&(c=!0);break;case 3:b.height>=a.height&&b.width>=a.width&&(c=!0)}return c};a.famdiagram.FamilyLayout.prototype.getLayoutSize=function(c,b,e){return new a.common.Rect(0,0,Math.round(this.getLayoutWidth(c,b)),Math.round(this.getLayoutHeight(e)))};a.famdiagram.FamilyLayout.prototype.getLayoutWidth=function(a,b){var c=0;a.loopLevels(this,function(d,e){e=
a.getLevelLength(d);0<e&&(d=a.getItemAtPosition(d,e-1),d=b[d],c=Math.max(c,d.offset+d.actualSize.width+d.rightPadding))});return c};a.famdiagram.FamilyLayout.prototype.getLayoutHeight=function(a){a=a[a.length-1];return a.shift+a.nextLevelShift};a.famdiagram.FamilyLayout.prototype.recalcItemsSize=function(c,b,e,d,g,f,h){c.loopLevels(this,function(k,l){var n=e[k];c.loopLevelItems(this,k,function(c,e,k){k=new a.orgdiagram.TreeItemPosition;var m=this.getLayout(c);null==m?(m=d(c)?1:e.isVisible?0:4,e=f(c),
m=0===m?n.currentvisibility:m,e=this.getItemSize(m,g==c,e,h),k.actualVisibility=m,k.actualSize=e.actualSize,k.contentPosition=e.contentPosition):(e=m.measure(n.currentvisibility),k.actualVisibility=4,k.actualSize=e);b[c]=k})})};a.famdiagram.FamilyLayout.prototype.recalcLevelsDepth=function(a,b,e,d){var c,f;a.loopLevels(this,function(h,g){var k=e[h];k.shift=0;k.depth=0;k.actualVisibility=4;f=c=null;a.loopLevelItems(this,h,function(a,d,e){a=b[a];k.depth=Math.max(k.depth,a.actualSize.height);switch(a.actualVisibility){case 2:case 3:case 4:f=
f?Math.min(f,a.actualSize.height):a.actualSize.height;break;default:c=c?Math.min(c,a.actualSize.height):a.actualSize.height}k.actualVisibility=Math.min(k.actualVisibility,a.actualVisibility)});null==c&&(c=k.depth);null!=f&&f>c&&(c=f);switch(d){case 0:k.horizontalConnectorsDepth=c/2;break;case 1:k.horizontalConnectorsDepth=k.depth/2;break;case 2:k.horizontalConnectorsDepth=k.depth-c/2}})};a.famdiagram.FamilyLayout.prototype.shiftLevels=function(a,b,e,d,g,f){var c=0,k=0;g*=8;switch(d){case 1:c=g;k=
0;break;case 2:c=0,k=g}d=0;for(g=a.length;d<g;d+=1){var l=a[d];var n=f(d);b+=l.setShift(b,e[l.actualVisibility],k,c,n.parentsStackSize)}};a.famdiagram.FamilyLayout.prototype.setOffsets=function(c,b,e,d,g){var f;var h=0;for(f=e.length;h<f;h+=1)e[h].currentOffset=0;e=d.getPlanarFamily(c);var k=new a.common.FamilyAlignment(this,e,c,function(a,c){a=b[a];c=g[a.actualVisibility]/2;a.leftPadding=c;a.rightPadding=c;return a.leftPadding+a.actualSize.width+a.rightPadding}),l=null;c.loopLevels(this,function(a,
f){a=c.getItemAtPosition(a,0);null!=a&&(f=b[a],a=k.getOffset(a)-f.leftPadding-f.actualSize.width/2,l=null==l?a:Math.min(l,a))});c.loopLevels(this,function(a,f){c.loopLevelItems(this,a,function(a,c,f){c=b[a];a=k.getOffset(a);c.offset=a-c.actualSize.width/2;c.offset-=l})})};a.famdiagram.FamilyLayout.prototype.arrange=function(a,b){var c=null;null!=b&&this.params.treeLevels.loopLevels(this,function(d,e){var f=this.data.treeLevelsPositions[d];this.params.treeLevels.loopLevelItems(this,d,function(d,e,
g){g=this.data.treeItemsPositions[d];e=this.getItemPosition(g.actualVisibility,g.offset,g.actualSize,c,f,this.options.verticalAlignment);g.actualPosition=e.position;g.horizontalConnectorsShift=e.horizontalConnectorsShift;g.topConnectorShift=e.topConnectorShift;g.topConnectorInterval=e.topConnectorInterval;g.bottomConnectorShift=e.bottomConnectorShift;g.bottomConnectorInterval=e.bottomConnectorInterval;b.call(a,d,g);d=this.getLayout(d);null!=d&&d.arrange(a,e.position,b)});c=f})};a.famdiagram.FamilyLayout.prototype.getItemPosition=
function(c,b,e,d,g,f){var h=0;switch(c){case 1:switch(f){case 0:h=0;break;case 1:h=(g.depth-e.height)/2;break;case 2:h=g.depth-e.height}break;case 2:case 3:case 4:h=g.horizontalConnectorsDepth-e.height/2}return{position:new a.common.Rect(b,g.shift+h,e.width,e.height),horizontalConnectorsShift:g.shift+g.horizontalConnectorsDepth,topConnectorShift:null!=d?d.shift+d.connectorShift:null,topConnectorInterval:null!=d?d.levelSpace/2:null,bottomConnectorShift:g.shift+g.connectorShift,bottomConnectorInterval:g.levelSpace/
2}};a.famdiagram.MatrixLayout=function(c,b){this.params={items:[],isItemSelected:null,cursorItemId:null,getTemplateParams:null,hideParentConnection:!1,hideChildrenConnection:!1};this.options={verticalAlignment:1,orientationType:0,arrowsDirection:0,linesWidth:1,checkBoxPanelSize:24,buttonsPanelSize:28,groupTitlePanelSize:24,groupTitlePlacementType:2,normalLevelShift:20,dotLevelShift:20,lineLevelShift:20,normalItemsInterval:10,dotItemsInterval:1,lineItemsInterval:2,maximumColumnsInMatrix:6};this.data=
{treeItemsPositions:{},columns:[],rows:[]};this.parent=a.common.BaseLayout.prototype;this.parent.constructor.apply(this,arguments)};a.famdiagram.MatrixLayout.prototype=new a.common.BaseLayout;a.famdiagram.MatrixLayout.prototype.Column=function(){this.rightPadding=this.leftPadding=this.offset=this.depth=0};a.famdiagram.MatrixLayout.prototype.Row=function(){this.horizontalConnectorsDepth=this.offset=this.depth=0;this.dotsDepth=this.minimalDepth=null};a.famdiagram.MatrixLayout.prototype.getMatrixWidth=
function(a,b){return Math.min(a,Math.ceil(Math.sqrt(b)))};a.famdiagram.MatrixLayout.prototype.measure=function(a){var b={treeItemsPositions:{},columns:[],rows:[]};this.measureItems(b,this.params,this.options,a);this.measureColumns(b,this.params,this.options);this.measureRows(b,this.params,this.options);this.data=b;return this.getLayoutSize(b)};a.famdiagram.MatrixLayout.prototype.measureItems=function(c,b,e,d){for(var g=0,f=b.items.length;g<f;g+=1){var h=b.items[g],k=h.id,l=new a.orgdiagram.TreeItemPosition,
n=b.isItemSelected(k)?1:h.isVisible?0:4;h=b.getTemplateParams(k);n=0===n?d:n;h=this.getItemSize(n,b.cursorItemId==k,h,e);l.actualVisibility=n;l.actualSize=h.actualSize;l.contentPosition=h.contentPosition;c.treeItemsPositions[k]=l}};a.famdiagram.MatrixLayout.prototype.measureColumns=function(a,b,e){var c,g=this.getMatrixWidth(e.maximumColumnsInMatrix,b.items.length);var f=0;for(c=b.items.length;f<c;f+=1){var h=a.treeItemsPositions[b.items[f].id];var k=e.intervals[h.actualVisibility]/2;h.leftPadding=
k;h.rightPadding=k;var l=f%g;k=a.columns[l];null==k&&(k=new this.Column,a.columns[l]=k);k.depth=Math.max(k.depth,h.leftPadding+h.actualSize.width+h.rightPadding)}g=8*e.linesWidth;f=h=0;for(c=a.columns.length;f<c;f+=1){k=a.columns[f];if(0==f%2)switch(e.arrowsDirection){case 1:k.leftPadding=b.hideChildrenConnection?0:g;k.rightPadding=0;break;case 2:k.leftPadding=0,k.rightPadding=b.hideParentConnection?0:g}else switch(e.arrowsDirection){case 1:k.leftPadding=0;k.rightPadding=b.hideChildrenConnection?
0:g;break;case 2:k.leftPadding=b.hideParentConnection?0:g,k.rightPadding=0}k.offset=h+k.leftPadding+k.depth/2;h=k.offset+k.depth/2+k.rightPadding}};a.famdiagram.MatrixLayout.prototype.measureRows=function(a,b,e){var c,g=this.getMatrixWidth(e.maximumColumnsInMatrix,b.items.length);var f=0;for(c=b.items.length;f<c;f+=1){var h=a.treeItemsPositions[b.items[f].id],k=Math.floor(f/g),l=e.shifts[h.actualVisibility]/2;var n=a.rows[k];null==n&&(n=new this.Row,a.rows[k]=n);n.depth=Math.max(n.depth,l+h.actualSize.height+
l);switch(h.actualVisibility){case 2:case 3:case 4:n.dotsDepth=n.dotsDepth?Math.min(n.dotsDepth,h.actualSize.height):h.actualSize.height;break;default:n.minimalDepth=n.minimalDepth?Math.min(n.minimalDepth,h.actualSize.height):h.actualSize.height}}f=b=0;for(c=a.rows.length;f<c;f+=1)switch(n=a.rows[f],n.offset=b+n.depth/2,b=n.offset+n.depth/2,null==n.minimalDepth&&(n.minimalDepth=n.depth),null!=n.dotsDepth&&n.dotsDepth>n.minimalDepth&&(n.minimalDepth=n.dotsDepth),e.verticalAlignment){case 0:n.horizontalConnectorsDepth=
n.minimalDepth/2;break;case 1:n.horizontalConnectorsDepth=n.depth/2;break;case 2:n.horizontalConnectorsDepth=n.depth-n.minimalDepth/2}};a.famdiagram.MatrixLayout.prototype.getLayoutSize=function(c){return new a.common.Rect(0,0,Math.round(this.getLayoutWidth(c)),Math.round(this.getLayoutHeight(c)))};a.famdiagram.MatrixLayout.prototype.getLayoutWidth=function(a){var b=0,c=a.columns.length;0<c&&(a=a.columns[c-1],b=a.offset+a.depth/2+a.rightPadding);return b};a.famdiagram.MatrixLayout.prototype.getLayoutHeight=
function(a){var b=0,c=a.rows.length;0<c&&(a=a.rows[c-1],b=a.offset+a.depth/2);return b};a.famdiagram.MatrixLayout.prototype.arrange=function(a,b,e){if(null!=e)for(var c=this.getMatrixWidth(this.options.maximumColumnsInMatrix,this.params.items.length),g=0,f=this.params.items.length;g<f;g+=1){var h=this.params.items[g].id,k=this.data.columns[g%c],l=this.data.rows[Math.floor(g/c)],n=this.data.treeItemsPositions[h],m=this.getItemPosition(n.actualVisibility,k,l,n.actualSize,this.options);m.translate(b.x,
b.y);n.actualPosition=m;n.horizontalConnectorsShift=b.y+l.offset-l.depth/2+l.horizontalConnectorsDepth;n.leftMedianOffset=k.depth/2+k.leftPadding;n.rightMedianOffset=k.depth/2+k.rightPadding;n.topConnectorShift=l.depth/2;n.bottomConnectorShift=l.depth/2;e.call(a,h,n)}};a.famdiagram.MatrixLayout.prototype.getItemPosition=function(c,b,e,d,g){var f=0;switch(c){case 1:switch(g.verticalAlignment){case 0:f=0;break;case 1:f=(e.depth-d.height)/2;break;case 2:f=e.depth-d.height}break;case 2:case 3:case 4:f=
e.horizontalConnectorsDepth-d.height/2}return new a.common.Rect(b.offset-d.width/2,e.offset-e.depth/2+f,d.width,d.height)};a.famdiagram.CursorNeighboursTask=function(c,b,e,d){function g(a,b,c,f){var d=[],e={};if(null!==a)switch(b){case 0:c.loopParents(this,a,function(a,b){b.isVisible&&!e.hasOwnProperty(a)&&(e[a]=!0,d.push(a));if(f.hasOwnProperty(a))return c.SKIP});c.loopChildren(this,a,function(a,b){b.isVisible&&!e.hasOwnProperty(a)&&(e[a]=!0,d.push(a));if(f.hasOwnProperty(a))return c.SKIP});break;
case 1:c.loopNeighbours(this,a,function(a,b){b.isVisible&&!e.hasOwnProperty(a)&&(e[a]=!0,d.push(a));if(f.hasOwnProperty(a))return!0})}return d}var f=[],h={},k=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,hash:h},n=c.getCursorTreeItem(),m=e.getLogicalFamily(),q=b.getNeighboursSelectionMode(),p=d.getActiveItems();f=k.read(f,g(n,q,m,p),"items",a);return a.isChanged},getItems:function(){return f}}};a.famdiagram.SelectionPathItemsTask=
function(a,b,e,d){function c(a,b,c){var f=[],d={},e;var h=0;for(e=a.length;h<e;h+=1){var g=a[h];switch(c){case 1:b.loopParents(this,g,function(a,c){if(null!=d[a])return b.SKIP;c.isVisible&&f.push(a);d[a]=!0})}}return f}var f=[];return{process:function(){var h=d.getSelectionPathMode(),g=a.getLogicalFamily(),l=b.getCursorTreeItem(),n=e.getItems().slice(0);n.push(l);f=c(n,g,h);return!0},getItems:function(){return f}}};a.famdiagram.AddLabelAnnotationsTask=function(c,b){function e(b,c){var f=a.common.graph(),
e={},h,g;if(0<c.length){var k=0;for(g=c.length;k<g;k+=1){var r=c[k];e.hasOwnProperty(r.fromItem)?e[r.fromItem].push(r):(e[r.fromItem]=[r],b.loopChildren(this,r.fromItem,function(c,d,e){f.addEdge(r.fromItem,c,new a.famdiagram.EdgeItem(r.fromItem,r.fromItem,c,c));return b.SKIP}),b.loopParents(this,r.fromItem,function(c,d,e){f.addEdge(c,r.fromItem,new a.famdiagram.EdgeItem(c,c,r.fromItem,r.fromItem));return b.SKIP}))}for(h in e)if(e.hasOwnProperty(h))for(c=e[h],c.sort(function(a,b){return b.toItems.length-
a.toItems.length}),k=0;k<c.length;k+=1)r=c[k],d(b,f,r.fromItem,r.toItems,function(){return new a.famdiagram.FamilyItem({id:r.id,isVisible:!0,isLevelNeutral:!0,isActive:!1,itemConfig:r})})}}function d(a,b,c,f,d){var e=!0,h=null,g,m=[];var k=0;for(g=f.length;k<g;k+=1){var l=f[k];var n=b.edge(c,l);if(null!=n){if(null==h)h=n.getFar(l);else if(h!=n.getFar(l)){e=!1;break}m.push(n.getNear(l))}else{e=!1;break}}if(e&&(d=d(),a.bundleParents(h,m,d.id,d)?(d.levelGravity=2,e=!0):a.bundleChildren(h,m,d.id,d)?(d.levelGravity=
1,e=!0):a.bundleParents(h,f,d.id,d)?(d.levelGravity=2,e=!0):a.bundleParents(h,f,d.id,d)&&(d.levelGravity=1,e=!0),e))for(k=0,g=f.length;k<g;k+=1)l=f[k],n=b.edge(c,l),n.setFar(l,d.id)}var g=null,f=null;return{process:function(a){var d=b.getLogicalFamily(),h=c.getAnnotations();d=d.clone();e(d,h);g=d;f=c.getMaximumId();if(a&&!d.validate())throw"References are broken in family structure!";return!0},getLogicalFamily:function(){return g},getMaximumId:function(){return f}}};a.famdiagram.AddSpousesTask=function(c,
b){var e=null,d=null;return{process:function(g){var f=b.getLogicalFamily(),h=b.getMaximumId(),k=c.getItems(),l=f=f.clone(),n,m;var q=0;for(n=k.length;q<n;q+=1){var p=k[q];var r=p.spouses.slice(0);var t=0;for(m=r.length;t<m;t+=1){var u=[p.id,r[t]];if(!l.hasCommonChild(u)){h+=1;var v=new a.famdiagram.FamilyItem({id:h,isVisible:!1,isActive:!1,isLevelNeutral:!0,hideParentConnection:!0,hideChildrenConnection:!0,itemConfig:{title:"fake child #"+h,description:"This is fake child keeps spouses together."},
levelGravity:1});l.add(u,v.id,v)}}}e=f;d=h;if(g&&!f.validate())throw"References are broken in family structure!";return!0},getLogicalFamily:function(){return e},getMaximumId:function(){return d}}};a.famdiagram.HideGrandParentsConnectorsTask=function(a,b){var c=null,d=null;return{process:function(e){e=b.getLogicalFamily();var f=b.getMaximumId();d=e=1==a.getOptions().hideGrandParentsConnectors?e.getFamilyWithoutGrandParentsRelations():e.clone();c=f;return!0},getLogicalFamily:function(){return d},getMaximumId:function(){return c}}};
a.famdiagram.ItemsPositionsTask=function(c,b,e,d,g,f,h,k,l,n){var m={},q=null;return{process:function(){var p=d.getOptions(),r=g.getOptions(),t=f.getOptions(),u={logicalFamily:h.getLogicalFamily(),treeLevels:h.getTreeLevels(),getConnectorsStacksSizes:h.getConnectorsStacksSizes,isItemSelected:n.isItemSelected,cursorItemId:l.getCursorTreeItem(),getTemplateParams:k.getTemplateParams};p={verticalAlignment:p.verticalAlignment,pageFitMode:p.pageFitMode,minimalVisibility:p.minimalVisibility,normalLevelShift:p.normalLevelShift,
dotLevelShift:p.dotLevelShift,lineLevelShift:p.lineLevelShift,normalItemsInterval:p.normalItemsInterval,dotItemsInterval:p.dotItemsInterval,lineItemsInterval:p.lineItemsInterval,orientationType:e.getOptions().orientationType,arrowsDirection:r.arrowsDirection,linesWidth:r.linesWidth,checkBoxPanelSize:p.checkBoxPanelSize,buttonsPanelSize:p.buttonsPanelSize,groupTitlePanelSize:p.groupTitlePanelSize,groupTitlePlacementType:p.groupTitlePlacementType,maximumColumnsInMatrix:t.maximumColumnsInMatrix};r=c.getOptimalPanelSize();
t=b.getOptions().scale;r.scale(1/t);r=new a.common.Rect(0,0,r.width,r.height);t=new a.famdiagram.FamilyLayout(u,p);var v=h.getMatrixes(),w;for(w in v)if(v.hasOwnProperty(w)){var y=u.logicalFamily.node(w);t.add(w,new a.famdiagram.MatrixLayout({items:v[w],isItemSelected:u.isItemSelected,cursorItemId:u.cursorItemId,getTemplateParams:u.getTemplateParams,hideParentConnection:y.hideParentConnection,hideChildrenConnection:y.hideChildrenConnection},p))}q=t.measure(r);m={};t.arrange(this,function(a,b){m[a]=
b});return!0},getItemsPositions:function(){return m},getItemPosition:function(a){return m[a]},getContentSize:function(){return q}}};a.famdiagram.LogicalFamilyTask=function(c){var b=null,e=null;return{process:function(d){var g,f=c.getItems(),h=a.common.family(),k=0;if(0<f.length){var l=0;for(g=f.length;l<g;l+=1){var n=f[l];if(null!=n){var m=new a.famdiagram.FamilyItem({id:n.id,itemConfig:n,isActive:n.isActive});h.add(n.parents,m.id,m);n=parseInt(n.id,10);k=Math.max(isNaN(n)?0:n,k)}}}b=h;e=k;if(d&&
!h.validate())throw"References are broken in family structure!";return!0},getLogicalFamily:function(){return b},getMaximumId:function(){return e}}};a.famdiagram.NormalizeLogicalFamilyTask=function(c,b){var e=null,d=null,g=new a.famdiagram.FamilyNormalizer(!1);return{process:function(a){a=b.getLogicalFamily();var f=b.getMaximumId(),k=c.getOptions();k={groupByType:k.groupByType,alignBylevels:k.alignBylevels};a=a.clone();f=g.normalize(k,a,f);d=a;e=f;return!0},getLogicalFamily:function(){return d},getMaximumId:function(){return e}}};
a.famdiagram.OrderFamilyNodesTask=function(c,b,e){var d=null,g=null,f={},h={},k=null,l=null,n=null,m=new a.famdiagram.FamilyBalance,q=new a.famdiagram.FamilyMatrixesExtractor(!1),p=new a.famdiagram.UserDefinedPrimaryParents,r=new a.orgdiagram.TreeLevelConnectorStackSize;return{process:function(a){a=e.getLogicalFamily();var r=e.getMaximumId(),t={},w={},y=[],D=c.getOptions(),B={enableMatrixLayout:D.enableMatrixLayout,minimumMatrixSize:D.minimumMatrixSize,maximumColumnsInMatrix:D.maximumColumnsInMatrix};
a=a.clone();r=q.extract(B,a,t,w,y,r);g=a;f=t;h=w;l=y;a={logicalFamily:a,maximumId:r,itemsPositions:b.getPositions(),itemsGroups:b.getGroups(),primaryParents:p.getUserDefinedPrimaryParents(D.items,a)};a=m.balance(a);d=a.maximumId;k=a.treeLevels;l=l.concat(a.bundles);n=a.connectorStacks;return!0},getLogicalFamily:function(){return g},getMatrixes:function(){return f},getNestedLayoutBottomConnectorIds:function(){return h},getMaximumId:function(){return d},getTreeLevels:function(){return k},getBundles:function(){return l},
getConnectorsStacksSizes:function(a){return n[a]||r}}};a.famdiagram.RemoveLoopsTask=function(c,b,e){function d(b,c,f,d,e){var h,m=g(c,f);c=[];1<m.length&&0==b&&(m=a.common.getFamilyLoops(f,e));var k=[],q={};b=0;for(e=m.length;b<e;b+=1){var l=m[b];q.hasOwnProperty(l.to)?q[l.to].parents.push(l.from):(q[l.to]={itemid:l.to,parents:[l.from]},k.push(q[l.to]))}m={};if(0<k.length)for(f=f.clone(),b=0,e=k.length;b<e;b+=1){var p=k[b];q=p.parents;var n=[];f.loopParents(this,p.itemid,function(a,b){n.push(a);return f.SKIP});
var B=0;for(h=n.length;B<h;B+=1)f.removeChildRelation(n[B],p.itemid);d+=1;l=n.length<=q.length;l=new a.famdiagram.FamilyItem({id:d,isVisible:!1,isActive:!1,isLevelNeutral:!0,hideParentConnection:l,hideChildrenConnection:l,levelGravity:2,itemConfig:{title:"fake parent #"+d,description:"This is fake parent item was created by loops reversal."}});f.add([],l.id,l);f.adopt([l.id],p.itemid);B=0;for(h=q.length;B<h;B+=1){var F=q[B];p=m[F];null==p&&(d+=1,p=new a.famdiagram.FamilyItem({id:d,isVisible:!1,isActive:!1,
isLevelNeutral:!0,hideParentConnection:!0,hideChildrenConnection:!0,levelGravity:1,itemConfig:{title:"fake child #"+d,description:"This is fake child item was created by loops reversal."}}),m[F]=p,f.add([F],p.id,p));f.adopt([l.id],p.id);c.push({from:l.id,to:p.id})}p={};B=0;for(h=q.length;B<h;B+=1)p[q[B]]=!0;B=0;for(h=n.length;B<h;B+=1)p.hasOwnProperty(n[B])||f.adopt([n[B]],l.id)}return{maximumId:d,logicalFamily:f,loops:c}}function g(a,b){var c,f,d=[];var e=b.clone();b.loopTopo(this,function(a,b,c){e.removeNode(a)});
if(e.hasNodes())for(b=0,c=a.length;b<c;b+=1){var h=a[b];if(null!=e.node(h.id)){var g=[];e.loopParents(this,h.id,function(a,b,c){g.push(a);d.push({from:a,to:h.id});return e.SKIP});var k=0;for(f=g.length;k<f;k+=1)e.removeRelation(g[k],h.id);var l=[];e.loopTopo(this,function(a,b,c){l.push(a)});k=0;for(f=l.length;k<f;k+=1)e.removeNode(l[k])}}return d}var f=null,h=null,k=[];return{process:function(a){var g=e.getLogicalFamily(),m=e.getMaximumId(),q=c.getItems(),l=b.getOptions().loopsLayoutMode;m=d(l,q,
g,m,a);f=m.logicalFamily;h=m.maximumId;k=m.loops;if(a&&!g.validate())throw"References are broken in family structure!";return!0},getLogicalFamily:function(){return f},getMaximumId:function(){return h},getLoops:function(){return k}}};a.famdiagram.UserDefinedNodesOrderTask=function(c){var b=null,e=null,d=new a.famdiagram.UserDefinedNodesOrder;return{process:function(){var a=c.getOptions();a=d.getUserDefinedPositions(a.items);b=a.position;e=a.group;return!0},getPositions:function(){return b},getGroups:function(){return e}}};
a.famdiagram.Control=function(c,b){return a.orgdiagram.BaseControl(c,b,a.famdiagram.TaskManagerFactory,a.famdiagram.EventArgsFactory,{AnnotationLabelTemplate:a.common.AnnotationLabelTemplate,ButtonsTemplate:a.common.ButtonsTemplate,CheckBoxTemplate:a.common.CheckBoxTemplate,CursorTemplate:a.common.CursorTemplate,DotHighlightTemplate:a.common.DotHighlightTemplate,GroupTitleTemplate:a.common.GroupTitleTemplate,HighlightTemplate:a.common.HighlightTemplate,ItemTemplate:a.common.ItemTemplate,UserTemplate:a.common.UserTemplate,
LabelAnnotationTemplate:a.common.LabelAnnotationTemplate})};a.famdiagram.EventArgsFactory=function(c,b,e,d){var g=new a.famdiagram.EventArgs,f=c.tasks.getTask("CombinedContextsTask"),h=c.tasks.getTask("AlignDiagramTask"),k=c.tasks.getTask("LogicalFamilyTask");b=f.getConfig(b);var l=f.getConfig(e),n=k.getLogicalFamily();b&&null!=b.id&&(g.oldContext=b);l&&null!=l.id&&(g.context=l,n.loopParents(this,l.id,function(a,b,c){if(0<c)return n.BREAK;g.parentItems.push(f.getConfig(a))}),n.loopChildren(this,l.id,
function(a,b,c){if(0<c)return n.BREAK;g.childrenItems.push(f.getConfig(a))}),k=a.common.getElementOffset(c.layout.mousePanel),c=a.common.getElementOffset(c.layout.element),e=h.getItemPosition(e),g.position=(new a.common.Rect(e.actualPosition)).translate(k.left,k.top).translate(-c.left,-c.top));null!=d&&(g.name=d);return g};a.famdiagram.getProcessDiagramConfig=function(){var c=function(){};return a.famdiagram.TaskManagerFactory(c,c,c).getProcessDiagramConfig()};a.famdiagram.TaskManagerFactory=function(c,
b,e,d,g){var f=new a.common.TaskManager;f.addDependency("options",c);f.addDependency("graphics",b);f.addDependency("getLayout",e);f.addDependency("setLayout",d);f.addDependency("templates",g);f.addDependency("defaultConfig",new a.famdiagram.Config);f.addDependency("defaultItemConfig",new a.famdiagram.ItemConfig);f.addDependency("defaultTemplateConfig",new a.famdiagram.TemplateConfig);f.addDependency("defaultButtonConfig",new a.famdiagram.ButtonConfig);f.addDependency("defaultPaletteItemConfig",new a.famdiagram.PaletteItemConfig);
f.addDependency("defaultBackgroundAnnotationConfig",new a.famdiagram.BackgroundAnnotationConfig);f.addDependency("defaultConnectorAnnotationConfig",new a.famdiagram.ConnectorAnnotationConfig);f.addDependency("defaultHighlightPathAnnotationConfig",new a.famdiagram.HighlightPathAnnotationConfig);f.addDependency("defaultShapeAnnotationConfig",new a.famdiagram.ShapeAnnotationConfig);f.addDependency("defaultLabelAnnotationConfig",new a.famdiagram.LabelAnnotationConfig);f.addDependency("isFamilyChartMode",
!0);f.addDependency("showElbowDots",!0);f.addDependency("null",null);f.addDependency("foreground",2);f.addDependency("background",1);f.addTask("OptionsTask",["options"],a.famdiagram.OptionsTask,"#000000");f.addTask("LayoutOptionsTask",["getLayout","OptionsTask"],a.orgdiagram.LayoutOptionsTask,"#000000");f.addTask("CurrentControlSizeTask",["LayoutOptionsTask","ItemsSizesOptionTask"],a.orgdiagram.CurrentControlSizeTask,"#000000");f.addTask("CurrentScrollPositionTask",["LayoutOptionsTask"],a.orgdiagram.CurrentScrollPositionTask,
"#000000");f.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.CalloutOptionTask,"#000080");f.addTask("ConnectorsOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ConnectorsOptionTask,"#000080");f.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],a.famdiagram.ItemsOptionTask,"#000080");f.addTask("ItemsContentOptionTask",["OptionsTask","defaultItemConfig"],a.orgdiagram.ItemsContentOptionTask,"#000080");f.addTask("RemoveLoopsOptionTask",
["OptionsTask","defaultConfig"],a.famdiagram.RemoveLoopsOptionTask,"#000080");f.addTask("SpousesOptionTask",["OptionsTask","defaultItemConfig"],a.famdiagram.SpousesOptionTask,"#000080");f.addTask("ItemsSizesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig","defaultButtonConfig"],a.orgdiagram.ItemsSizesOptionTask,"#000080");f.addTask("LabelsOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.LabelsOptionTask,"#000080");f.addTask("TemplatesOptionTask",["OptionsTask",
"defaultConfig","defaultButtonConfig","defaultTemplateConfig"],a.orgdiagram.TemplatesOptionTask,"#000080");f.addTask("OrientationOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.OrientationOptionTask,"#000080");f.addTask("VisualTreeOptionTask",["OptionsTask"],a.famdiagram.VisualTreeOptionTask,"#000080");f.addTask("MinimizedItemsOptionTask",["OptionsTask"],a.orgdiagram.MinimizedItemsOptionTask,"#000080");f.addTask("HideGrandParentsConnectorsOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.HideGrandParentsConnectorsOptionTask,
"#000080");f.addTask("NormalizeOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.NormalizeOptionTask,"#000080");f.addTask("OrderFamilyNodesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.famdiagram.OrderFamilyNodesOptionTask,"#000080");f.addTask("LinePaletteOptionTask",["OptionsTask","defaultPaletteItemConfig"],a.famdiagram.LinePaletteOptionTask,"#000080");f.addTask("CursorItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorItemOptionTask,"#000080");f.addTask("HighlightItemOptionTask",
["OptionsTask","defaultConfig"],a.orgdiagram.HighlightItemOptionTask,"#000080");f.addTask("SelectedItemsOptionTask",["OptionsTask"],a.orgdiagram.SelectedItemsOptionTask,"#000080");f.addTask("CursorSelectionPathModeOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorSelectionPathModeOptionTask,"#000080");f.addTask("NeighboursSelectionModeOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.NeighboursSelectionModeOptionTask,"#000080");f.addTask("SplitAnnotationsOptionTask",["OptionsTask"],
a.orgdiagram.SplitAnnotationsOptionTask,"#00ffff");f.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");f.addTask("BackgroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","background"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");f.addTask("ForegroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig",
"foreground"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");f.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","background"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");f.addTask("ForegroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");f.addTask("BackgroundConnectorAnnotationOptionTask",
["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");f.addTask("BackgroundAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultBackgroundAnnotationConfig"],a.orgdiagram.BackgroundAnnotationOptionTask,"#000080");f.addTask("ScaleOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ScaleOptionTask,"#000080");f.addTask("UserDefinedNodesOrderTask",["OrderFamilyNodesOptionTask","defaultItemConfig"],a.famdiagram.UserDefinedNodesOrderTask,
"#ff0000");f.addTask("LogicalFamilyTask",["ItemsOptionTask"],a.famdiagram.LogicalFamilyTask,"#00ffff");f.addTask("RemoveLoopsTask",["ItemsOptionTask","RemoveLoopsOptionTask","LogicalFamilyTask"],a.famdiagram.RemoveLoopsTask,"#ff0000");f.addTask("LabelAnnotationOptionTask",["SplitAnnotationsOptionTask","RemoveLoopsTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationOptionTask,"#000080");f.addTask("LabelAnnotationTemplateOptionTask",["LabelAnnotationOptionTask","defaultLabelAnnotationConfig"],
a.famdiagram.LabelAnnotationTemplateOptionTask,"#000080");f.addTask("LabelAnnotationPlacementOptionTask",["LabelAnnotationOptionTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationPlacementOptionTask,"#000080");f.addTask("CombinedContextsTask",["ItemsContentOptionTask","LabelAnnotationOptionTask"],a.orgdiagram.CombinedContextsTask,"#00ffff");f.addTask("AddLabelAnnotationsTask",["LabelAnnotationPlacementOptionTask","RemoveLoopsTask"],a.famdiagram.AddLabelAnnotationsTask,"#ff0000");f.addTask("AddSpousesTask",
["SpousesOptionTask","AddLabelAnnotationsTask"],a.famdiagram.AddSpousesTask,"#ff0000");f.addTask("HideGrandParentsConnectorsTask",["HideGrandParentsConnectorsOptionTask","AddSpousesTask"],a.famdiagram.HideGrandParentsConnectorsTask,"#ff0000");f.addTask("NormalizeLogicalFamilyTask",["NormalizeOptionTask","HideGrandParentsConnectorsTask"],a.famdiagram.NormalizeLogicalFamilyTask,"#ff0000");f.addTask("OrderFamilyNodesTask",["OrderFamilyNodesOptionTask","UserDefinedNodesOrderTask","NormalizeLogicalFamilyTask"],
a.famdiagram.OrderFamilyNodesTask,"#ff0000");f.addTask("ReadTemplatesTask",["TemplatesOptionTask","templates"],a.orgdiagram.ReadTemplatesTask,"#00ffff");f.addTask("ActiveItemsTask",["ItemsSizesOptionTask","ReadTemplatesTask"],a.orgdiagram.ActiveItemsTask,"#00ffff");f.addTask("ItemTemplateParamsTask",["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],a.orgdiagram.ItemTemplateParamsTask,"#00ffff");f.addTask("LabelAnnotationTemplateParamsTask",["ItemsSizesOptionTask","LabelAnnotationTemplateOptionTask",
"ReadTemplatesTask"],a.famdiagram.LabelAnnotationTemplateParamsTask,"#00ffff");f.addTask("CombinedTemplateParamsTask",["ItemTemplateParamsTask","LabelAnnotationTemplateParamsTask"],a.famdiagram.CombinedTemplateParamsTask,"#00ffff");f.addTask("GroupTitleTemplateTask",["TemplatesOptionTask","templates"],a.orgdiagram.GroupTitleTemplateTask,"#00ffff");f.addTask("CheckBoxTemplateTask",["ItemsSizesOptionTask","templates"],a.orgdiagram.CheckBoxTemplateTask,"#00ffff");f.addTask("ButtonsTemplateTask",["ItemsSizesOptionTask",
"templates"],a.orgdiagram.ButtonsTemplateTask,"#00ffff");f.addTask("AnnotationLabelTemplateTask",["ItemsOptionTask","templates"],a.orgdiagram.AnnotationLabelTemplateTask,"#00ffff");f.addTask("ConnectionsGraphTask","graphics CreateTransformTask ConnectorsOptionTask OrderFamilyNodesTask AlignDiagramTask RemoveLoopsTask".split(" "),a.orgdiagram.ConnectionsGraphTask,"#00ffff");f.addTask("HighlightItemTask",["HighlightItemOptionTask","ActiveItemsTask"],a.orgdiagram.HighlightItemTask,"#00ffff");f.addTask("CursorItemTask",
["CursorItemOptionTask","ActiveItemsTask"],a.orgdiagram.CursorItemTask,"#00ffff");f.addTask("CursorNeighboursTask",["CursorItemTask","NeighboursSelectionModeOptionTask","AddSpousesTask","ActiveItemsTask"],a.famdiagram.CursorNeighboursTask,"#00ffff");f.addTask("SelectedItemsTask",["SelectedItemsOptionTask"],a.orgdiagram.SelectedItemsTask,"#00ffff");f.addTask("SelectionPathItemsTask",["AddSpousesTask","CursorItemTask","SelectedItemsTask","CursorSelectionPathModeOptionTask"],a.famdiagram.SelectionPathItemsTask,
"#00ffff");f.addTask("NormalVisibilityItemsByForegroundShapeAnnotationTask",["ForegroundShapeAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");f.addTask("NormalVisibilityItemsByBackgroundShapeAnnotationTask",["BackgroundShapeAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");f.addTask("NormalVisibilityItemsByBackgroundAnnotationTask",["BackgroundAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");
f.addTask("NormalVisibilityItemsByForegroundHighlightPathAnnotationTask",["ForegroundHighlightPathAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");f.addTask("NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask",["BackgroundHighlightPathAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");f.addTask("NormalVisibilityItemsByForegroundConnectorAnnotationTask",["ForegroundConnectorAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,
"#00ffff");f.addTask("NormalVisibilityItemsByBackgroundConnectorAnnotationTask",["BackgroundConnectorAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,"#00ffff");f.addTask("CombinedNormalVisibilityItemsTask","ItemsSizesOptionTask CursorItemTask CursorNeighboursTask SelectedItemsTask SelectionPathItemsTask NormalVisibilityItemsByForegroundShapeAnnotationTask NormalVisibilityItemsByBackgroundShapeAnnotationTask NormalVisibilityItemsByBackgroundAnnotationTask NormalVisibilityItemsByForegroundHighlightPathAnnotationTask NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask NormalVisibilityItemsByForegroundConnectorAnnotationTask NormalVisibilityItemsByBackgroundConnectorAnnotationTask".split(" "),
a.orgdiagram.CombinedNormalVisibilityItemsTask,"#00ffff");f.addTask("ItemsPositionsTask","CurrentControlSizeTask ScaleOptionTask OrientationOptionTask ItemsSizesOptionTask ConnectorsOptionTask OrderFamilyNodesOptionTask OrderFamilyNodesTask CombinedTemplateParamsTask CursorItemTask CombinedNormalVisibilityItemsTask".split(" "),a.famdiagram.ItemsPositionsTask,"#ff0000");f.addTask("AlignDiagramTask","OrientationOptionTask ItemsSizesOptionTask VisualTreeOptionTask ScaleOptionTask CurrentControlSizeTask ActiveItemsTask ItemsPositionsTask isFamilyChartMode".split(" "),
a.orgdiagram.AlignDiagramTask,"#ff0000");f.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],a.orgdiagram.CreateTransformTask,"#00ffff");f.addTask("CenterOnCursorTask","LayoutOptionsTask CurrentControlSizeTask CurrentScrollPositionTask CursorItemTask AlignDiagramTask CreateTransformTask ScaleOptionTask".split(" "),a.orgdiagram.CenterOnCursorTask,"#00ffff");f.addTask("PaletteManagerTask",["ConnectorsOptionTask","LinePaletteOptionTask"],a.orgdiagram.PaletteManagerTask,"#00ffff");
f.addTask("ApplyLayoutChangesTask","graphics setLayout ItemsSizesOptionTask CurrentControlSizeTask ScaleOptionTask AlignDiagramTask".split(" "),a.orgdiagram.ApplyLayoutChangesTask,"#00ffff");f.addTask("DrawBackgroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","ForegroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","foreground"],a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");f.addTask("DrawForegroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask",
"BackgroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","background"],a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");f.addTask("DrawBackgroundAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask BackgroundAnnotationOptionTask LogicalFamilyTask AlignDiagramTask".split(" "),a.orgdiagram.DrawBackgroundAnnotationTask,"#008000");f.addTask("DrawForegroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground".split(" "),
a.orgdiagram.DrawConnectorAnnotationTask,"#008000");f.addTask("DrawBackgroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background".split(" "),a.orgdiagram.DrawConnectorAnnotationTask,"#008000");f.addTask("DrawForegroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground".split(" "),
a.orgdiagram.DrawShapeAnnotationTask,"#008000");f.addTask("DrawBackgroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background".split(" "),a.orgdiagram.DrawShapeAnnotationTask,"#008000");f.addTask("DrawCursorTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask CombinedTemplateParamsTask CursorItemTask SelectedItemsTask".split(" "),
a.orgdiagram.DrawCursorTask,"#008000");f.addTask("DrawHighlightTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask CombinedTemplateParamsTask HighlightItemTask CursorItemTask SelectedItemsTask".split(" "),a.orgdiagram.DrawHighlightTask,"#008000");f.addTask("DrawHighlightAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask ScaleOptionTask CombinedContextsTask CalloutOptionTask ReadTemplatesTask AlignDiagramTask CenterOnCursorTask HighlightItemTask CursorItemTask SelectedItemsTask".split(" "),
a.orgdiagram.DrawHighlightAnnotationTask,"#008000");f.addTask("DrawTreeItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask ScaleOptionTask ItemsSizesOptionTask CombinedContextsTask AlignDiagramTask CenterOnCursorTask CombinedTemplateParamsTask CursorItemTask SelectedItemsTask GroupTitleTemplateTask CheckBoxTemplateTask ButtonsTemplateTask".split(" "),a.orgdiagram.DrawTreeItemsTask,"#008000");f.addTask("DrawMinimizedItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask MinimizedItemsOptionTask CombinedTemplateParamsTask AlignDiagramTask".split(" "),
a.orgdiagram.DrawMinimizedItemsTask,"#008000");f.addTask("DrawConnectorsTask",["graphics","ConnectionsGraphTask","ConnectorsOptionTask","showElbowDots","PaletteManagerTask"],a.orgdiagram.DrawConnectorsTask,"#008000");f.addTask("DrawItemLabelsTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","LabelsOptionTask","AlignDiagramTask"],a.orgdiagram.DrawItemLabelsTask,"#008000");return f};a.orgdiagram.TemplateConfig=function(){this.name=null;this.isActive=!0;this.itemSize=new a.common.Size(120,
100);this.itemBorderWidth=1;this.minimizedItemShapeType=this.itemTemplate=null;this.minimizedItemSize=new a.common.Size(4,4);this.minimizedItemCornerRadius=null;this.minimizedItemLineWidth=1;this.minimizedItemBorderColor=null;this.minimizedItemLineType=0;this.minimizedItemFillColor=null;this.minimizedItemOpacity=1;this.highlightPadding=new a.common.Thickness(2,2,2,2);this.highlightBorderWidth=1;this.highlightTemplate=null;this.cursorPadding=new a.common.Thickness(3,3,3,3);this.cursorBorderWidth=2;
this.onButtonsRender=this.buttons=this.cursorTemplate=null};a.orgdiagram.BackgroundAnnotationConfig=function(c){var b;this.annotationType=4;this.items=[];this.includeChildren=!1;this.zOrderType=0;this.offset=new a.common.Thickness(18,18,18,18);this.lineWidth=2;this.opacity=1;this.fillColor=this.borderColor=null;this.lineType=0;this.selectItems=!1;switch(arguments.length){case 1:if(null!==c)if(c instanceof Array)this.items=c;else if("object"==typeof c)for(b in c)c.hasOwnProperty(b)&&(this[b]=c[b])}};
a.orgdiagram.ButtonConfig=function(c,b,e){this.name=c;this.icon=b;this.text=!1;this.label=null;this.tooltip=e;this.size=new a.common.Size(16,16)};a.orgdiagram.Config=function(c){this.name=void 0!==c?c:"OrgDiagram";this.classPrefix="orgdiagram";this.graphicsType=this.navigationMode=0;this.pageFitMode=3;this.minimalVisibility=2;this.horizontalAlignment=this.orientationType=0;this.verticalAlignment=1;this.arrowsDirection=0;this.showExtraArrows=!1;this.extraArrowsMinimumSpace=30;this.connectorType=0;
this.bevelSize=4;this.elbowType=0;this.elbowDotSize=4;this.emptyDiagramMessage="Diagram is empty.";this.items=[];this.annotations=[];this.highlightItem=this.cursorItem=null;this.highlightGravityRadius=40;this.selectedItems=[];this.hasSelectorCheckbox=0;this.selectCheckBoxLabel="Selected";this.selectionPathMode=1;this.templates=[];this.defaultTemplateName=null;this.hasButtons=0;this.buttons=[];this.onCursorRender=this.onHighlightRender=this.onItemRender=this.onMouseDblClick=this.onMouseClick=this.onButtonClick=
this.onSelectionChanged=this.onSelectionChanging=this.onCursorChanged=this.onCursorChanging=this.onHighlightChanged=this.onHighlightChanging=this.onButtonsRender=null;this.dotLevelShift=this.normalLevelShift=20;this.normalItemsInterval=this.lineLevelShift=10;this.dotItemsInterval=1;this.lineItemsInterval=2;this.cousinsIntervalMultiplier=5;this.itemTitleFirstFontColor="#ffffff";this.itemTitleSecondFontColor="#000080";this.minimizedItemShapeType=6;this.linesColor="#c0c0c0";this.linesWidth=1;this.linesType=
0;this.highlightLinesColor="#ff0000";this.highlightLinesWidth=1;this.highlightLinesType=0;this.showCallout=!0;this.calloutMaximumVisibility=2;this.calloutPlacementOffset=100;this.defaultCalloutTemplateName=null;this.calloutfillColor="#000000";this.calloutBorderColor=null;this.calloutCornerRadius=this.calloutOffset=4;this.calloutPointerWidth="10%";this.calloutLineWidth=1;this.calloutOpacity=.2;this.leavesPlacementType=this.childrenPlacementType=2;this.placeAdvisersAboveChildren=this.placeAssistantsAboveChildren=
!0;this.maximumColumnsInMatrix=6;this.buttonsPanelSize=28;this.checkBoxPanelSize=this.groupTitlePanelSize=24;this.groupTitleOrientation=this.groupTitlePlacementType=2;this.groupTitleVerticalAlignment=1;this.groupTitleHorizontalAlignment=0;this.groupTitleFontSize="12px";this.groupTitleFontFamily="Arial";this.groupTitleColor="#4169e1";this.groupTitleFontStyle=this.groupTitleFontWeight="normal";this.distance=3;this.scale=1;this.minimumScale=.5;this.maximumScale=2;this.showLabels=0;this.labelSize=new a.common.Size(80,
24);this.labelOffset=1;this.labelOrientation=0;this.labelPlacement=1;this.labelFontSize="10px";this.labelFontFamily="Arial";this.labelColor="#000000";this.labelFontStyle=this.labelFontWeight="normal";this.enablePanning=!0;this.autoSizeMinimum=new a.common.Size(800,600);this.autoSizeMaximum=new a.common.Size(1024,768)};a.orgdiagram.ConnectorAnnotationConfig=function(c,b){var e;this.annotationType=0;this.zOrderType=2;this.toItem=this.fromItem=null;this.connectorPlacementType=this.connectorShapeType=
0;this.labelPlacementType=1;this.offset=new a.common.Thickness(0,0,0,0);this.lineWidth=2;this.color="#000000";this.lineType=0;this.selectItems=!0;this.label=null;this.labelSize=new a.common.Size(60,30);switch(arguments.length){case 1:for(e in c)c.hasOwnProperty(e)&&(this[e]=c[e]);break;case 2:this.fromItem=c,this.toItem=b}};a.orgdiagram.HighlightPathAnnotationConfig=function(a){var b;this.zOrderType=this.annotationType=2;this.items=[];this.lineWidth=2;this.color="#ff0000";this.lineType=0;this.opacity=
1;this.showArrows=!0;this.selectItems=!1;switch(arguments.length){case 1:if(null!==a)if(a instanceof Array)this.items=a;else if("object"==typeof a)for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}};a.orgdiagram.ItemConfig=function(a,b,e,d,g){var c;this.context=this.image=this.description=this.title=this.parent=this.id=null;this.itemTitleColor="#4169e1";this.groupTitle=this.minimizedItemShapeType=null;this.groupTitleColor="#4169e1";this.isActive=this.isVisible=!0;this.itemType=this.hasButtons=this.hasSelectorCheckbox=
0;this.levelOffset=null;this.placeAdvisersAboveChildren=this.placeAssistantsAboveChildren=this.childrenPlacementType=this.adviserPlacementType=0;this.templateName=null;this.showCallout=0;this.label=this.calloutTemplateName=null;this.showLabel=0;this.labelSize=null;this.labelOrientation=3;this.labelPlacement=0;switch(arguments.length){case 1:for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);break;case 5:this.id=a,this.parent=b,this.title=e,this.description=d,this.image=g}};a.orgdiagram.ShapeAnnotationConfig=
function(c){var b;this.annotationType=1;this.zOrderType=0;this.items=[];this.shapeType=0;this.offset=new a.common.Thickness(0,0,0,0);this.lineWidth=2;this.cornerRadius="10%";this.opacity=1;this.fillColor=this.borderColor=null;this.lineType=0;this.selectItems=!1;this.label=null;this.labelSize=new a.common.Size(60,30);this.labelPlacement=0;this.labelOffset=4;switch(arguments.length){case 1:if(null!==c)if(c instanceof Array)this.items=c;else if("object"==typeof c)for(b in c)c.hasOwnProperty(b)&&(this[b]=
c[b])}};a.orgdiagram.EventArgs=function(){this.name=this.position=this.parentItem=this.context=this.oldContext=null;this.cancel=!1};a.common.BaseConnectorBundle=function(){this.NORMAL_ITEM_WEIGHT=10010;this.LINE_ITEM_WEIGHT=1E4};a.common.BaseConnectorBundle.prototype.trace=function(a,b,e){};a.common.BaseConnectorBundle.prototype.getId=function(a){var b="_"+a.nodeid;a.nodeid+=1;return b};a.common.BaseConnectorBundle.prototype.ConnectorEdge=function(a,b,e,d,g,f,h,k,l,n,m){this.polyline=e;this.from=
a;this.to=b;this.weight=h||0;this.fromOffset=k||0;this.hasArrow=m||!1;this.parentsArrowId=d;this.childrenArrowId=g;this.dotId=f;this.hasMiddle=l;this.middleParent=n;this.isOppositeFlow=!1};a.common.BaseConnectorBundle.prototype.ConnectorDestination=function(a){this.bundleid=this.y=this.x=this.id=null;this.hasElbow=!1;this.visibility=this.elbowPoint2=this.elbowPoint1=null;this.isSquared=!0;for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])};a.common.BaseConnectorBundle.prototype.traceFork=function(c,
b,e,d,g,f,h,k,l){var n,m,q=[];if(f){q=[];f=0;for(m=g.length;f<m;f+=1){var p=g[f];if(p.x<d.x&&!p.isSquared)q.push(p);else break}m=q.length;0<m&&(p=q[m-1],p=p.x==d.x?d:new this.ConnectorDestination({id:p.bundleid,x:p.x,y:d.y}),this.traceAngularSegments(c,b,e,p,q,!1));q=[];for(n=g.length-1;n>=f;--n)if(p=g[n],p.x>d.x&&!p.isSquared)q.push(p);else break;m=q.length;0<m&&(p=q[m-1],p=p.x==d.x?d:new this.ConnectorDestination({id:p.bundleid,x:p.x,y:d.y}),this.traceAngularSegments(c,b,e,p,q,!1));for(q=f;q<=n;q+=
1){p=g[q];m=e.bevelSize;2>m&&(m=0);if(b.hasGraphics)switch(e.elbowType){case 2:case 3:0<m&&Math.abs(d.x-p.x)>m&&Math.abs(d.y-p.y)>m&&(p.hasElbow=!0,p.elbowPoint1=new a.common.Point(p.x,d.y+(d.y>p.y?-m:m)),p.elbowPoint2=new a.common.Point(p.x+(d.x>p.x?m:-m),d.y))}var r=new a.common.Polyline;p.hasElbow?(b.transform.transform3Points(p.elbowPoint2.x,p.elbowPoint2.y,p.elbowPoint1.x,p.elbowPoint2.y,p.elbowPoint1.x,p.elbowPoint1.y,!0,this,function(b,c,f,d,h,g){switch(e.elbowType){case 2:r.addSegment(new a.common.MoveSegment(b,
c));r.addSegment(new a.common.LineSegment(h,g));break;case 3:r.addSegment(new a.common.MoveSegment(b,c)),r.addSegment(new a.common.CubicArcSegment(b,c,f,d,h,g))}}),b.transform.transformPoints(p.elbowPoint1.x,p.elbowPoint1.y,p.x,p.y,!0,this,function(b,c,f,d){r.addSegment(new a.common.LineSegment(f,d))})):b.transform.transformPoints(p.x,d.y,p.x,p.y,!0,this,function(b,c,f,d){r.addSegment(new a.common.MoveSegment(b,c));r.addSegment(new a.common.LineSegment(f,d))});m=p.x==d.x?d.id:p.bundleid;var t=4!==
p.visibility;c.graph.addEdge(m,p.id,new this.ConnectorEdge(m,p.id,r,h?p.id:null,h?null:p.id,null,t?this.NORMAL_ITEM_WEIGHT:this.LINE_ITEM_WEIGHT,k,null,null,t))}f=Math.max(f-1,0);n=Math.min(n+1,g.length-1);p=d;m=d.id;for(q=f;q<=n;q+=1){t=g[q];var u=t.bundleid;t.x>p.x&&(r=new a.common.Polyline,b.transform.transformPoints(p.x,d.y,null!=t.elbowPoint2?t.elbowPoint2.x:t.x,d.y,!0,this,function(b,c,f,d){r.addSegment(new a.common.MoveSegment(b,c));r.addSegment(new a.common.LineSegment(f,d))}),c.graph.addEdge(m,
u,new this.ConnectorEdge(m,u,r,null,null,m,Math.abs(t.x-p.x)/1E4,k,l,h?u:m)),p=t.elbowPoint2||t,m=u)}p=d;m=d.id;for(q=n;q>=f;--q)t=g[q],u=t.bundleid,t.x<p.x&&(r=new a.common.Polyline,b.transform.transformPoints(p.x,d.y,null!=t.elbowPoint2?t.elbowPoint2.x:t.x,d.y,!0,this,function(b,c,f,d){r.addSegment(new a.common.MoveSegment(b,c));r.addSegment(new a.common.LineSegment(f,d))}),c.graph.addEdge(m,u,new this.ConnectorEdge(m,u,r,null,null,m,Math.abs(t.x-p.x)/1E4,k,l,h?u:m)),p=t.elbowPoint2||t,m=u)}else this.traceAngularSegments(c,
b,e,d,g,!0)};a.common.BaseConnectorBundle.prototype.traceAngularSegments=function(c,b,e,d,g,f){var h;var k=0;for(h=g.length;k<h;k+=1){var l=g[k];var n=new a.common.Polyline;b.transform.transformPoint(d.x,d.y,!0,this,function(b,c){n.addSegment(new a.common.MoveSegment(b,c))});switch(e.connectorType){case 1:b.transform.transformPoint(l.x,l.y,!0,this,function(b,c){n.addSegment(new a.common.LineSegment(b,c))});break;case 2:var m=new a.common.Rect(d,l);f?d.x>m.x?b.transform.transform3Points(m.right(),
m.verticalCenter(),m.x,m.verticalCenter(),m.x,m.bottom(),!0,this,function(b,c,f,d,e,h){n.addSegment(new a.common.CubicArcSegment(b,c,f,d,e,h))}):b.transform.transform3Points(m.x,m.verticalCenter(),m.right(),m.verticalCenter(),m.right(),m.bottom(),!0,this,function(b,c,f,d,e,h){n.addSegment(new a.common.CubicArcSegment(b,c,f,d,e,h))}):d.x>m.x?b.transform.transformPoints(m.x,m.y,m.x,m.bottom(),!0,this,function(b,c,f,d){n.addSegment(new a.common.QuadraticArcSegment(b,c,f,d))}):b.transform.transformPoints(m.right(),
m.y,m.right(),m.bottom(),!0,this,function(b,c,f,d){n.addSegment(new a.common.QuadraticArcSegment(b,c,f,d))})}m=4!==l.visibility;c.graph.addEdge(d.id,l.id,new this.ConnectorEdge(d.id,l.id,n,null,m?l.id:null,m?this.NORMAL_ITEM_WEIGHT:this.LINE_ITEM_WEIGHT,null,null,null,!0))}};a.common.HorizontalConnectorBundle=function(a,b){this.fromItem=a;this.toItem=b};a.common.HorizontalConnectorBundle.prototype=new a.common.BaseConnectorBundle;a.common.HorizontalConnectorBundle.prototype.trace=function(c,b,e){e=
this.fromItem;var d=this.toItem,g=b.treeItemsPositions[e],f=b.treeItemsPositions[d],h=new a.common.Polyline;g.actualPosition.x<f.actualPosition.x?b.transform.transformPoints(g.actualPosition.right(),g.horizontalConnectorsShift,f.actualPosition.x,f.horizontalConnectorsShift,!0,this,function(b,c,f,d){h.addSegment(new a.common.MoveSegment(b,c));h.addSegment(new a.common.LineSegment(f,d))}):b.transform.transformPoints(g.actualPosition.x,g.horizontalConnectorsShift,f.actualPosition.right(),g.horizontalConnectorsShift,
!0,this,function(b,c,f,d){h.addSegment(new a.common.MoveSegment(b,c));h.addSegment(new a.common.LineSegment(f,d))});b=4!==f.actualVisibility;g=4!==g.actualVisibility;c.graph.addEdge(e,d,new this.ConnectorEdge(e,d,h,b?d:null,g?e:null,b||g?this.NORMAL_ITEM_WEIGHT:this.LINE_ITEM_WEIGHT),null,null,null,!0)};a.common.MatrixConnectorBundle=function(a,b,e,d,g){this.isChildren=a;this.items=b;this.len=b.length;this.matrixNodeId=e;this.connectionId=d;this.matrixWidth=g;this.blocksCount=Math.ceil(this.matrixWidth/
2);this.rowsCount=Math.ceil(this.len/this.matrixWidth)};a.common.MatrixConnectorBundle.prototype=new a.common.BaseConnectorBundle;a.common.MatrixConnectorBundle.prototype.trace=function(a,b,e){this.isChildren?this.traceChildrenLayout(a,b,e):this.traceParentsLayout(a,b,e)};a.common.MatrixConnectorBundle.prototype.traceChildrenLayout=function(c,b,e){for(var d,g=[],f=0;f<this.blocksCount;f+=1){for(var h=null,k=this.rowsCount-1;0<=k;--k){var l=this.getNodeIndex(f,k,!0,!0),n=null;d=null;l<this.len&&(n=
this.items[l],d=b.treeItemsPositions[n]);var m=this.getNodeIndex(f,k,!1,!0),q=null;l=null;m<this.len&&(q=this.items[m],l=b.treeItemsPositions[q]);var p=null;null==p&&null!=d&&(p=new this.ConnectorDestination({id:this.getId(c),x:d.actualPosition.horizontalCenter()+d.rightMedianOffset,y:d.horizontalConnectorsShift}));null==p&&null!=l&&(p=new this.ConnectorDestination({id:this.getId(c),x:l.actualPosition.horizontalCenter()-l.leftMedianOffset,y:l.horizontalConnectorsShift}));null!=d&&(d=d.actualPosition,
b.transform.transformPoints(d.right(),d.verticalCenter(),p.x,p.y,!0,this,function(b,f,d,e){var h=new a.common.Polyline;h.addSegment(new a.common.MoveSegment(b,f));h.addSegment(new a.common.LineSegment(d,e));c.graph.addEdge(n,p.id,new this.ConnectorEdge(n,p.id,h,null,n,null,10,null,null,null,!0))}));null!=l&&(d=l.actualPosition,b.transform.transformPoints(d.left(),d.verticalCenter(),p.x,p.y,!0,this,function(b,f,d,e){var h=new a.common.Polyline;h.addSegment(new a.common.MoveSegment(b,f));h.addSegment(new a.common.LineSegment(d,
e));c.graph.addEdge(q,p.id,new this.ConnectorEdge(q,p.id,h,null,q,null,10,null,null,null,!0))}));null!=h&&null!=p&&b.transform.transformPoints(h.x,h.y,p.x,p.y,!0,this,function(b,f,d,e){var g=new a.common.Polyline;g.addSegment(new a.common.MoveSegment(b,f));g.addSegment(new a.common.LineSegment(d,e));c.graph.addEdge(h.id,p.id,new this.ConnectorEdge(h.id,p.id,g,null,null,null,0))});null!=p&&(h=p)}null!=h&&g.push(new this.ConnectorDestination({id:h.id,bundleid:this.getId(c),x:h.x,y:h.y,isSquared:!0,
visibility:4}))}d=b.treeItemsPositions[this.matrixNodeId].actualPosition;f=new this.ConnectorDestination({id:this.matrixNodeId,x:d.horizontalCenter(),y:d.top()});this.traceFork(c,b,e,f,g,!0,!1,0,e.showExtraArrows)};a.common.MatrixConnectorBundle.prototype.traceParentsLayout=function(c,b,e){for(var d,g=[],f=0;f<=this.blocksCount;f+=1){for(var h=null,k=0;k<this.rowsCount;k+=1){var l=this.getNodeIndex(f,k,!0,!1),n=null;d=null;l<this.len&&(n=this.items[l],d=b.treeItemsPositions[n]);var m=this.getNodeIndex(f,
k,!1,!1),q=null;l=null;m<this.len&&(q=this.items[m],l=b.treeItemsPositions[q]);var p=null;null==p&&null!=d&&(p=new this.ConnectorDestination({id:this.getId(c),x:d.actualPosition.horizontalCenter()+d.rightMedianOffset,y:d.horizontalConnectorsShift}));null==p&&null!=l&&(p=new this.ConnectorDestination({id:this.getId(c),x:l.actualPosition.horizontalCenter()-l.leftMedianOffset,y:l.horizontalConnectorsShift}));null!=d&&(d=d.actualPosition,b.transform.transformPoints(d.right(),d.verticalCenter(),p.x,p.y,
!0,this,function(b,f,d,e){var h=new a.common.Polyline;h.addSegment(new a.common.MoveSegment(b,f));h.addSegment(new a.common.LineSegment(d,e));c.graph.addEdge(n,p.id,new this.ConnectorEdge(n,p.id,h,n,null,null,10,null,null,null,!0))}));null!=l&&(d=l.actualPosition,b.transform.transformPoints(d.left(),d.verticalCenter(),p.x,p.y,!0,this,function(b,f,d,e){var h=new a.common.Polyline;h.addSegment(new a.common.MoveSegment(b,f));h.addSegment(new a.common.LineSegment(d,e));c.graph.addEdge(q,p.id,new this.ConnectorEdge(q,
p.id,h,q,null,null,10,null,null,null,!0))}));null!=h&&null!=p&&b.transform.transformPoints(h.x,h.y,p.x,p.y,!0,this,function(b,f,d,e){var g=new a.common.Polyline;g.addSegment(new a.common.MoveSegment(b,f));g.addSegment(new a.common.LineSegment(d,e));c.graph.addEdge(h.id,p.id,new this.ConnectorEdge(h.id,p.id,g,null,null,null,0,null,null,null,!0))});null!=p&&(h=p)}null!=h&&g.push(new this.ConnectorDestination({id:h.id,bundleid:this.getId(c),x:h.x,y:h.y,isSquared:!0,visibility:4}))}d=b.treeItemsPositions[this.matrixNodeId].actualPosition;
f=new this.ConnectorDestination({id:this.connectionId,x:d.horizontalCenter(),y:d.bottom()});this.traceFork(c,b,e,f,g,!0,!0,0,e.showExtraArrows)};a.common.MatrixConnectorBundle.prototype.getNodeIndex=function(a,b,e,d){var c=null;d?(a=2*a+(e?0:1),this.matrixWidth>a&&(c=b*this.matrixWidth+a)):(a=2*a+(e?-1:0),0<=a&&a<this.matrixWidth&&(c=b*this.matrixWidth+a));return c};a.common.VerticalConnectorBundle=function(a,b,e){this.fromItems=a;this.toItems=b;this.dotId=e||null;this.fromStackSize=this.fromOffset=
0};a.common.VerticalConnectorBundle.prototype=new a.common.BaseConnectorBundle;a.common.VerticalConnectorBundle.prototype.trace=function(c,b,e){var d,g=0===e.connectorType;var f=[];if(0<this.fromItems.length){var h=this.fromItems;var k=0;for(d=h.length;k<d;k+=1){var l=h[k];var n=b.treeItemsPositions[l];l=new this.ConnectorDestination({id:b.nestedLayoutBottomConnectorIds.hasOwnProperty(l)?b.nestedLayoutBottomConnectorIds[l]:l,bundleid:this.getId(c),x:n.actualPosition.horizontalCenter(),y:n.actualPosition.bottom(),
isSquared:!0,visibility:n.actualVisibility});f.push(l)}f.sort(function(a,b){return a.x-b.x});var m=n.bottomConnectorShift-n.bottomConnectorInterval*(this.fromStackSize-this.fromOffset+1)}d=[];if(0<this.toItems.length){var q=!1;h=this.toItems;for(k=0;k<h.length;k+=1){l=h[k];n=b.treeItemsPositions[l];var p=!0;if(b.hasGraphics)switch(n.actualVisibility){case 2:case 3:p=g}l=new this.ConnectorDestination({id:l,bundleid:this.getId(c),x:n.actualPosition.horizontalCenter()+0,y:n.actualPosition.top(),isSquared:p,
visibility:n.actualVisibility});d.push(l);q=q||l.isSquared}d.sort(function(a,b){return a.x-b.x});p=n.topConnectorShift}h=1==d.length?d[0].x:1==f.length?f[0].x:0<d.length&&0<f.length?(f[0].x+f[f.length-1].x+d[0].x+d[d.length-1].x)/4:0<d.length?(d[0].x+d[d.length-1].x)/2:(f[0].x+f[f.length-1].x)/2;var r=null;0<f.length&&(r=new this.ConnectorDestination({id:0==d.length?this.dotId:this.getId(c),x:h,y:m}),this.traceFork(c,b,e,r,f,!0,!0,this.fromOffset,e.showExtraArrows));var t=null;0<d.length&&(t=new this.ConnectorDestination({id:0==
f.length?this.dotId:this.getId(c),x:h,y:p}),null!=r&&t.y==r.y&&(t=r),this.traceFork(c,b,e,t,d,q,!1,0,e.showExtraArrows));null!=r&&null!=t&&r.id!=t.id&&b.transform.transformPoints(r.x,r.y,t.x,t.y,!0,this,function(b,f,d,e){var h=new a.common.Polyline;h.addSegment(new a.common.MoveSegment(b,f));h.addSegment(new a.common.LineSegment(d,e));c.graph.addEdge(r.id,t.id,new this.ConnectorEdge(r.id,t.id,h,null,null,null,0))})};a.orgdiagram.LevelVisibility=function(a,b){this.level=a;this.currentvisibility=b};
a.orgdiagram.OrgItem=function(a){var b;this.id=null;this.isActive=this.isVisible=!0;this.hasVisibleChildren=!1;this.placeAssistantsAboveChildren=this.placeAdvisersAboveChildren=this.childrenPlacementType=this.adviserPlacementType=this.itemType=0;this.level=this.levelOffset=null;this.hideChildrenConnection=this.hideParentConnection=!1;this.childIndex=null;var c="id parent isVisible isActive itemType adviserPlacementType childrenPlacementType placeAdvisersAboveChildren placeAssistantsAboveChildren levelOffset".split(" ");
var d=0;for(b=c.length;d<b;d+=1){var g=c[d];a.hasOwnProperty(g)&&(this[g]=a[g])}};a.orgdiagram.Template=function(a,b,e,d,g){this.templateConfig=a;this.itemTemplate=b;this.highlightTemplate=e;this.dotHighlightTemplate=d;this.cursorTemplate=g};a.orgdiagram.TemplateParams=function(){this.template=null;this.hasGroupTitle=this.hasButtons=this.hasSelectorCheckbox=this.isActive=!1;this.buttons=[];this.onButtonsRender=null};a.orgdiagram.TreeItem=function(){this.visualAggregatorId=this.id=null;this.visualDepth=
1;this.partners=[];this.visibility=1;this.actualItemType=null;this.relationDegree=this.gravity=this.connectorPlacement=0};a.orgdiagram.TreeItemPosition=function(c){this.partnerConnectorOffset=0;this.levelPosition=this.level=null;this.rightPadding=this.leftPadding=this.offset=0;this.actualVisibility=1;this.topConnectorShift=this.horizontalConnectorsShift=this.contentPosition=this.actualPosition=this.actualSize=null;this.topConnectorInterval=0;this.bottomConnectorShift=null;this.bottomConnectorInterval=
0;this.rightMedianOffset=this.leftMedianOffset=null;if(null!=c)for(var b in c)if(c.hasOwnProperty(b))switch(b){case "actualPosition":this.actualPosition=new a.common.Rect(c.actualPosition);break;default:this[b]=c[b]}};a.orgdiagram.TreeLevelConnectorStackSize=function(){this.parentsStackSize=0};a.orgdiagram.TreeLevelPosition=function(a){this.actualVisibility=this.currentvisibility=1;this.currentOffset=this.levelSpace=this.connectorShift=this.topConnectorShift=this.horizontalConnectorsDepth=this.nextLevelShift=
this.depth=this.shift=0;this.labels=[];this.labelsRect=null;this.showLabels=!0;this.hasFixedLabels=!1;if(null!=a)for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])};a.orgdiagram.TreeLevelPosition.prototype.setShift=function(a,b,e,d,g){this.shift=a;this.levelSpace=b;this.topConnectorShift=-b/2-e;this.connectorShift=this.depth+d+b/2*(g+1);return this.nextLevelShift=e+this.depth+d+b+g*b/2};a.orgdiagram.TreeLevelPosition.prototype.shiftDown=function(a){this.shift+=a};a.orgdiagram.TreeLevelPosition.prototype.toString=
function(){return this.currentvisibility};a.orgdiagram.AlignDiagramTask=function(c,b,e,d,g,f,h,k){function l(){var a=[],b={},c;for(c in m.treeItemsPositions)if(m.treeItemsPositions.hasOwnProperty(c)){var f=m.treeItemsPositions[c];switch(f.actualVisibility){case 1:case 2:case 3:f=f.actualPosition,f=Math.max(f.width,f.height),b.hasOwnProperty(f)||(b[f]=!0,a.push(f))}}return a}function n(){if(null==w){w=a.common.SpatialIndex(l());for(var b in m.treeItemsPositions)if(m.treeItemsPositions.hasOwnProperty(b)){var c=
m.treeItemsPositions[b];if(q.hasOwnProperty(b))switch(c.actualVisibility){case 1:case 2:case 3:c=new a.common.Rect(c.actualPosition),c.context=b,w.addRect(c)}}}return w}var m={treeItemsPositions:{},panelSize:null},q,p,r,t,u,v,w,y;return{process:function(){var l=new a.common.Size(h.getContentSize()),n=new a.common.Size(g.getOptimalPanelSize());y=w=null;q=null!=f?f.getActiveItems():{};p=h.getItemsPositions();r=b.getOptions();t=c.getOptions();u=e.getOptions();v=d.getOptions();switch(t.orientationType){case 2:case 3:n.invert()}n.scale(1/
v.scale);m.panelSize=n;m.treeItemsPositions=p;switch(r.pageFitMode){case 5:m.panelSize=new a.common.Size(l);break;default:m.panelSize=new a.common.Size(l);if(l.width<n.width){m.treeItemsPositions={};var F=l.width,x=n.width;if(k)var A=(x-F)/2;else switch(u.horizontalAlignment){case 1:A=0;break;case 2:A=x-F;break;case 0:A=(x-F)/2}F=m.treeItemsPositions;for(var E in p)p.hasOwnProperty(E)&&(x=new a.orgdiagram.TreeItemPosition(p[E]),x.actualPosition.translate(A,0),F[E]=x);m.panelSize.width=n.width}l.height<
n.height&&(m.panelSize.height=n.height)}switch(t.orientationType){case 2:case 3:m.panelSize.invert()}return!0},getItemPosition:function(a){return m.treeItemsPositions[a]},getItemsPositions:function(){return m.treeItemsPositions},getContentSize:function(){return m.panelSize},getTreeItemForMousePosition:function(b,c,f){var d=null,e=null,h=v.scale,g=n();b/=h;c/=h;h=new a.common.Rect(b,c,0,0);var k=new a.common.Point(b,c);h.offset(f,f,f,f);g.loopArea(this,h,function(a){var f=a.context;if(a.contains(b,
c))return d=f,!0;switch(m.treeItemsPositions[f].actualVisibility){case 2:case 3:if(a=k.distanceTo(a.horizontalCenter(),a.verticalCenter()),null==e||a<e)e=a,d=f}});return d},getNextItem:function(b,c){if(null==y)for(d in y=a.common.KeyboardNavigationManager(),m.treeItemsPositions)if(m.treeItemsPositions.hasOwnProperty(d)){var f=m.treeItemsPositions[d];if(q.hasOwnProperty(d))switch(f.actualVisibility){case 1:f=new a.common.Rect(f.actualPosition),y.addRect(f,d)}}var d=y;switch(c){case 0:var e=d.getItemAbove(b);
break;case 1:e=d.getItemBelow(b);break;case 2:e=d.getItemOnLeft(b);break;case 3:e=d.getItemOnRight(b)}return e}}};a.orgdiagram.ApplyLayoutChangesTask=function(c,b,e,d,g,f){var h=null;return{process:function(){var a=c(),l=g.getOptions(),n=e.getOptions(),m=f.getContentSize(),q=d.getScrollPanelSize();a.resize("placeholder",m.width,m.height);h=b({scale:l.scale,contentSize:m,scrollPanelSize:q,autoSize:5==n.pageFitMode,autoSizeMaximum:n.autoSizeMaximum,autoSizeMinimum:n.autoSizeMinimum});return!0},getOptimalPanelSize:function(){return new a.common.Size(h.width-
25,h.height-25)}}};a.orgdiagram.CenterOnCursorTask=function(c,b,e,d,g,f,h){function k(b){var c=!1;n.transformRect(b.x,b.y,b.width,b.height,!0,this,function(b,f,d,e){c=new a.common.Rect(b,f,d,e)});return c}var l=null,n;return{process:function(){var m=c.getOptions();var q=d.getCursorTreeItem(),p=g.getItemPosition(q);q=new a.common.Size(g.getContentSize());var r=h.getOptions().scale;l=e.getPlaceholderOffset();m.forceCenterOnCursor&&(n=f.getTransform(),null!=p&&(m=k(p.actualPosition),m.scale(r),q.scale(r),
r=b.getScrollPanelSize(),l=new a.common.Point(Math.max(Math.min(m.horizontalCenter()-r.width/2,q.width-r.width),0),Math.max(Math.min(m.verticalCenter()-r.height/2,q.height-r.height),0))));return!0},getPlaceholderOffset:function(){return l}}};a.orgdiagram.CreateTransformTask=function(c,b){var e=null;return{process:function(){var d=c.getOptions(),g=new a.common.Size(b.getContentSize());e=new a.common.Transform;e.setOrientation(d.orientationType);e.size=new a.common.Size(g);return!0},getTransform:function(){return e},
getTreeItemForMousePosition:function(a,c,f){var d=null;e.transformPoint(a,c,!1,this,function(a,c){d=b.getTreeItemForMousePosition(a,c,f)});return d},description:"Create oordiante system tranfromation object."}};a.orgdiagram.CurrentControlSizeTask=function(c,b){var e={scrollPanelSize:null},d={},g=new a.common.ObjectReader({scrollPanelSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!0),height:new a.common.ValueReader(["number"],!0)},!0)});return{process:function(){var a={isChanged:!1,
hash:d},h=c.getOptions(),k=!1,l=b.getOptions();e=g.read(e,h,"layout",a);switch(l.pageFitMode){case 1:case 2:case 3:case 0:k=a.isChanged}return k},getScrollPanelSize:function(){return e.scrollPanelSize},getOptimalPanelSize:function(){return new a.common.Size(e.scrollPanelSize.width-25,e.scrollPanelSize.height-25)}}};a.orgdiagram.CurrentScrollPositionTask=function(c){var b={placeholderOffset:null},e={},d=new a.common.ObjectReader({placeholderOffset:new a.common.ObjectReader({x:new a.common.ValueReader(["number"],
!0),y:new a.common.ValueReader(["number"],!0)},!0)});return{process:function(){var a={isChanged:!1,hash:e},f=c.getOptions();b=d.read(b,f,"layout",a);return a.isChanged},getPlaceholderOffset:function(){return b.placeholderOffset}}};a.orgdiagram.BackgroundAnnotationOptionTask=function(c,b){var e=[],d={},g=new a.common.ArrayReader(new a.common.ObjectReader({items:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0),includeChildren:new a.common.ValueReader(["boolean"],!1,b.includeChildren),
zOrderType:new a.common.EnumerationReader(a.common.ZOrderType,!1,b.zOrderType),offset:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],!1,b.offset.left),top:new a.common.ValueReader(["number"],!1,b.offset.top),right:new a.common.ValueReader(["number"],!1,b.offset.right),bottom:new a.common.ValueReader(["number"],!1,b.offset.bottom)},!1,b.offset),lineWidth:new a.common.ValueReader(["number"],!1,b.lineWidth),opacity:new a.common.ValueReader(["number"],!1,b.opacity),borderColor:new a.common.ValueReader(["string"],
!1,b.borderColor),fillColor:new a.common.ValueReader(["string"],!1,b.fillColor),lineType:new a.common.EnumerationReader(a.common.LineType,!1,b.lineType),selectItems:new a.common.ValueReader(["boolean"],!1,b.selectItems)}),!1);return{process:function(){var a={isChanged:!1,hash:d};e=g.read(e,c.getAnnotations(4,null),"annotations",a);return a.isChanged},getAnnotations:function(){return e}}};a.orgdiagram.ConnectorAnnotationOptionTask=function(c,b,e){var d=[],g={},f=new a.common.ArrayReader(new a.common.ObjectReader({zOrderType:new a.common.EnumerationReader(a.common.ZOrderType,
!1,b.zOrderType),fromItem:new a.common.ValueReader(["string","number"],!0),toItem:new a.common.ValueReader(["string","number"],!0),connectorShapeType:new a.common.EnumerationReader(a.common.ShapeType,!1,b.connectorShapeType),connectorPlacementType:new a.common.EnumerationReader(a.common.ConnectorPlacementType,!1,b.connectorPlacementType),labelPlacementType:new a.common.EnumerationReader(a.common.ConnectorLabelPlacementType,!1,b.labelPlacementType),offset:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],
!1,b.offset.left),top:new a.common.ValueReader(["number"],!1,b.offset.top),right:new a.common.ValueReader(["number"],!1,b.offset.right),bottom:new a.common.ValueReader(["number"],!1,b.offset.bottom)},!1,b.offset),lineWidth:new a.common.ValueReader(["number"],!1,b.lineWidth),color:new a.common.ValueReader(["string"],!1,b.color),lineType:new a.common.EnumerationReader(a.common.LineType,!1,b.lineType),selectItems:new a.common.ValueReader(["boolean"],!1,b.selectItems),label:new a.common.ValueReader(["string",
"object"],!1,b.label),labelSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,b.labelSize.width),height:new a.common.ValueReader(["number"],!1,b.labelSize.height)},!1,b.labelSize)}),!1);return{process:function(){var a={isChanged:!1,hash:g};d=f.read(d,c.getAnnotations(0,e),"annotations",a);return a.isChanged},getAnnotations:function(){return d}}};a.orgdiagram.HighlightPathAnnotationOptionTask=function(c,b,e){var d=[],g={},f=new a.common.ArrayReader(new a.common.ObjectReader({zOrderType:new a.common.EnumerationReader(a.common.ZOrderType,
!1,b.zOrderType),lineWidth:new a.common.ValueReader(["number"],!1,b.lineWidth),opacity:new a.common.ValueReader(["number"],!1,b.opacity),color:new a.common.ValueReader(["string"],!1,b.color),lineType:new a.common.EnumerationReader(a.common.LineType,!1,b.lineType),items:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!1),selectItems:new a.common.ValueReader(["boolean"],!1,b.selectItems),showArrows:new a.common.ValueReader(["boolean"],!1,b.showArrows)},!1));return{process:function(){var a=
{isChanged:!1,hash:g};d=f.read(d,c.getAnnotations(2,e),"annotations",a);return a.isChanged},getAnnotations:function(){return d}}};a.orgdiagram.ShapeAnnotationOptionTask=function(c,b,e){var d=[],g={},f=new a.common.ArrayReader(new a.common.ObjectReader({zOrderType:new a.common.EnumerationReader(a.common.ZOrderType,!1,b.zOrderType),items:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0),shapeType:new a.common.EnumerationReader(a.common.ShapeType,!1,b.shapeType),offset:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],
!1,b.offset.left),top:new a.common.ValueReader(["number"],!1,b.offset.top),right:new a.common.ValueReader(["number"],!1,b.offset.right),bottom:new a.common.ValueReader(["number"],!1,b.offset.bottom)},!1,b.offset),lineWidth:new a.common.ValueReader(["number"],!1,b.lineWidth),cornerRadius:new a.common.ValueReader(["string"],!1,b.cornerRadius),opacity:new a.common.ValueReader(["number"],!1,b.opacity),borderColor:new a.common.ValueReader(["string"],!1,b.borderColor),fillColor:new a.common.ValueReader(["string"],
!1,b.fillColor),lineType:new a.common.EnumerationReader(a.common.LineType,!1,b.lineType),selectItems:new a.common.ValueReader(["boolean"],!1,b.selectItems),label:new a.common.ValueReader(["string","object"],!1,b.label),labelSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,b.labelSize.width),height:new a.common.ValueReader(["number"],!1,b.labelSize.height)},!1,b.labelSize),labelPlacement:new a.common.EnumerationReader(a.common.PlacementType,!1,b.labelPlacement),labelOffset:new a.common.ValueReader(["number"],
!1,b.labelOffset)},!1));return{process:function(){var a={isChanged:!1,hash:g};d=f.read(d,c.getAnnotations(1,e),"annotations",a);return a.isChanged},getAnnotations:function(){return d}}};a.orgdiagram.SplitAnnotationsOptionTask=function(c){var b={};return{process:function(){var e=c.getOptions().annotations,d,g={};if(a.common.isArray(e)){var f=0;for(d=e.length;f<d;f+=1){var h=e[f];var k=h.annotationType;switch(k){case 1:case 0:case 2:switch(h.zOrderType){case 1:var l=1;break;default:l=2}break;default:l=
null}null!=k&&(k=1E3*k+(l||0),g.hasOwnProperty(k)||(g[k]=[]),g[k].push(h))}}b=g;return!0},getAnnotations:function(a,c){return b[1E3*a+(c||0)]}}};a.orgdiagram.CursorItemOptionTask=function(c,b){var e={},d=new a.common.ObjectReader({cursorItem:new a.common.ValueReader(["string","number"],!0),navigationMode:new a.common.EnumerationReader(a.common.NavigationMode,!1,b.navigationMode)});return{process:function(){var a={isChanged:!1};e=d.read(e,c.getOptions(),"options",a);return a.isChanged},getCursorItem:function(){return e.cursorItem},
hasCursorEnabled:function(){switch(e.navigationMode){case 0:case 1:return!0}return!1},description:"Checks currenct cursor item option."}};a.orgdiagram.CursorSelectionPathModeOptionTask=function(c,b){var e={},d=new a.common.ObjectReader({selectionPathMode:new a.common.EnumerationReader(a.common.SelectionPathMode,!1,b.selectionPathMode)});return{process:function(){var a={isChanged:!1};e=d.read(e,c.getOptions(),"options",a);return a.isChanged},getSelectionPathMode:function(){return e.selectionPathMode},
description:"Checks cursor selection path option."}};a.orgdiagram.HighlightItemOptionTask=function(c,b){var e={},d=new a.common.ObjectReader({highlightItem:new a.common.ValueReader(["string","number"],!0),navigationMode:new a.common.EnumerationReader(a.common.NavigationMode,!1,b.navigationMode),highlightGravityRadius:new a.common.ValueReader(["number"],!1,b.highlightGravityRadius)});return{process:function(){var a={isChanged:!1};e=d.read(e,c.getOptions(),"options",a);return a.isChanged},getHighlightItem:function(){return e.highlightItem},
hasHighlightEnabled:function(){switch(e.navigationMode){case 0:case 3:return!0}return!1},getGravityRadius:function(){return e.highlightGravityRadius},description:"Checks highlight item option."}};a.orgdiagram.SelectedItemsOptionTask=function(c){var b={},e={},d=new a.common.ObjectReader({selectedItems:new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0)});return{process:function(){var a={isChanged:!1,hash:e},f=c.getOptions();b=d.read(b,f,"options",a);return a.isChanged},getSelectedItems:function(){return b.selectedItems},
description:"Checks user selected items option."}};a.orgdiagram.CalloutOptionTask=function(c,b,e){var d={},g={},f=new a.common.ObjectReader({calloutMaximumVisibility:new a.common.EnumerationReader(a.common.Visibility,!1,b.calloutMaximumVisibility),showCallout:new a.common.ValueReader(["boolean"],!1,b.showCallout),calloutPlacementOffset:new a.common.ValueReader(["number"],!1,b.calloutPlacementOffset),orientationType:new a.common.EnumerationReader(a.common.OrientationType,!1,b.orientationType),defaultTemplateName:new a.common.ValueReader(["string"],
!0),defaultCalloutTemplateName:new a.common.ValueReader(["string"],!0),calloutfillColor:new a.common.ValueReader(["string"],!1,b.calloutfillColor),calloutBorderColor:new a.common.ValueReader(["string"],!0),calloutOffset:new a.common.ValueReader(["number"],!1,b.calloutOffset),calloutCornerRadius:new a.common.ValueReader(["string"],!1,b.calloutCornerRadius),calloutPointerWidth:new a.common.ValueReader(["string"],!1,b.calloutPointerWidth),calloutLineWidth:new a.common.ValueReader(["number"],!1,b.calloutLineWidth),
calloutOpacity:new a.common.ValueReader(["number"],!1,b.calloutOpacity),items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),showCallout:new a.common.EnumerationReader(a.common.Enabled,!1,b.showCallout),calloutTemplateName:new a.common.ValueReader(["string"],!0),templateName:new a.common.ValueReader(["string"],!0)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:g};d=f.read(d,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return d},
getItemOptions:function(a){return g["options-items"][a]},description:"Checks item callout options."}};a.orgdiagram.ConnectorsOptionTask=function(c,b){var e={},d={},g=new a.common.ObjectReader({arrowsDirection:new a.common.EnumerationReader(a.common.GroupByType,!1,b.arrowsDirection),showExtraArrows:new a.common.ValueReader(["boolean"],!1,b.showExtraArrows),extraArrowsMinimumSpace:new a.common.ValueReader(["number"],!1,b.extraArrowsMinimumSpace),connectorType:new a.common.EnumerationReader(a.common.ConnectorType,
!1,b.hasOwnProperty("connectorType")?b.connectorType:0),showNeigboursConnectorsHighlighted:new a.common.EnumerationReader(a.common.ConnectorType,!1,b.hasOwnProperty("showNeigboursConnectorsHighlighted")?b.showNeigboursConnectorsHighlighted:!1),elbowType:new a.common.EnumerationReader(a.common.ElbowType,!1,b.elbowType),bevelSize:new a.common.ValueReader(["number"],!1,b.bevelSize),elbowDotSize:new a.common.ValueReader(["number"],!1,b.elbowDotSize),linesColor:new a.common.ValueReader(["string"],!1,b.linesColor),
linesWidth:new a.common.ValueReader(["number"],!1,b.linesWidth),linesType:new a.common.EnumerationReader(a.common.LineType,!1,b.linesType),highlightLinesColor:new a.common.ValueReader(["string"],!1,b.highlightLinesColor),highlightLinesWidth:new a.common.ValueReader(["number"],!1,b.highlightLinesWidth),highlightLinesType:new a.common.EnumerationReader(a.common.LineType,!1,b.highlightLinesType)});return{process:function(){var a={isChanged:!1,hash:d};e=g.read(e,c.getOptions(),"options",a);return a.isChanged},
getOptions:function(){return e},description:"Checks connector lines drawing options."}};a.orgdiagram.ItemsContentOptionTask=function(c,b){var e={},d={},g={},f=new a.common.ObjectReader({items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),title:new a.common.ValueReader(["string"],!0),description:new a.common.ValueReader(["string"],!0),image:new a.common.ValueReader(["string"],!0),context:new a.common.ValueReader(["string","number","object"],
!0),itemTitleColor:new a.common.ValueReader(["string"],!1,b.itemTitleColor),groupTitle:new a.common.ValueReader(["string"],!1,b.groupTitle),groupTitleColor:new a.common.ValueReader(["string"],!1,b.groupTitleColor)}),!0,"id",!0,!0)});return{process:function(){var a={isChanged:!1,hash:d,sourceHash:g};e=f.read(e,c.getOptions(),"options",a);return a.isChanged},getItems:function(){return e.items},getConfig:function(a){return g["options-items"][a]},description:"Checks items configuration options effecting their placement in layout."}};
a.orgdiagram.ItemsOptionTask=function(c,b){var e={},d={},g={},f=new a.common.ObjectReader({items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),parent:new a.common.ValueReader(["string","number"],!0),itemType:new a.common.EnumerationReader(a.orgdiagram.ItemType,!1,b.itemType),adviserPlacementType:new a.common.EnumerationReader(a.common.AdviserPlacementType,!1,b.adviserPlacementType),childrenPlacementType:new a.common.EnumerationReader(a.common.ChildrenPlacementType,
!1,b.childrenPlacementType),placeAdvisersAboveChildren:new a.common.EnumerationReader(a.common.Enabled,!1,b.placeAdvisersAboveChildren),placeAssistantsAboveChildren:new a.common.EnumerationReader(a.common.Enabled,!1,b.placeAssistantsAboveChildren),isVisible:new a.common.ValueReader(["boolean"],!1,b.isVisible),isActive:new a.common.ValueReader(["boolean"],!1,b.isActive),levelOffset:new a.common.ValueReader(["number"],!0)}),!0,"id",!0,!0)});return{process:function(){var a={isChanged:!1,hash:d,sourceHash:g};
e=f.read(e,c.getOptions(),"options",a);return a.isChanged},getItems:function(){return e.items},getConfig:function(a){return g["options-items"][a]},description:"Checks items configuration options effecting their placement in layout."}};a.orgdiagram.ItemsSizesOptionTask=function(c,b,e,d){var g={},f={},h=new a.common.ObjectReader({defaultTemplateName:new a.common.ValueReader(["string"],!0),defaultLabelAnnotationTemplate:new a.common.ValueReader(["string"],!0),hasSelectorCheckbox:new a.common.EnumerationReader(a.common.Enabled,
!1,b.hasSelectorCheckbox),hasButtons:new a.common.EnumerationReader(a.common.Enabled,!1,b.hasButtons),buttonsPanelSize:new a.common.ValueReader(["number"],!1,b.buttonsPanelSize),groupTitlePanelSize:new a.common.ValueReader(["number"],!1,b.groupTitlePanelSize),groupTitlePlacementType:new a.common.EnumerationReader(a.common.AdviserPlacementType,!1,b.groupTitlePlacementType),checkBoxPanelSize:new a.common.ValueReader(["number"],!1,b.checkBoxPanelSize),selectCheckBoxLabel:new a.common.ValueReader(["string"],
!1,b.selectCheckBoxLabel),buttons:new a.common.ArrayReader(new a.common.ObjectReader({name:new a.common.ValueReader(["string"],!0),icon:new a.common.ValueReader(["string"],!0),text:new a.common.ValueReader(["boolean"],!1,!1),tooltip:new a.common.ValueReader(["string"],!0),size:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,d.size.width),height:new a.common.ValueReader(["number"],!1,d.size.height)},!1,d.size)}),!0,"name"),onButtonsRender:new a.common.FunctionReader,pageFitMode:new a.common.EnumerationReader(a.common.PageFitMode,
!1,b.pageFitMode),minimalVisibility:new a.common.EnumerationReader(a.common.Visibility,!1,b.minimalVisibility),selectionPathMode:new a.common.EnumerationReader(a.common.SelectionPathMode,!1,b.selectionPathMode),autoSizeMinimum:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,b.autoSizeMinimum.width),height:new a.common.ValueReader(["number"],!1,b.autoSizeMinimum.height)},!1,b.autoSizeMinimum),autoSizeMaximum:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],
!1,b.autoSizeMaximum.width),height:new a.common.ValueReader(["number"],!1,b.autoSizeMaximum.height)},!1,b.autoSizeMaximum),scale:new a.common.ValueReader(["number"],!1,b.scale),maximumScale:new a.common.ValueReader(["number"],!1,b.maximumScale),minimumScale:new a.common.ValueReader(["number"],!1,b.minimumScale),normalLevelShift:new a.common.ValueReader(["number"],!1,b.normalLevelShift),dotLevelShift:new a.common.ValueReader(["number"],!1,b.dotLevelShift),lineLevelShift:new a.common.ValueReader(["number"],
!1,b.lineLevelShift),normalItemsInterval:new a.common.ValueReader(["number"],!1,b.normalItemsInterval),dotItemsInterval:new a.common.ValueReader(["number"],!1,b.dotItemsInterval),lineItemsInterval:new a.common.ValueReader(["number"],!1,b.lineItemsInterval),cousinsIntervalMultiplier:new a.common.ValueReader(["number"],!1,b.cousinsIntervalMultiplier),verticalAlignment:new a.common.EnumerationReader(a.common.VerticalAlignmentType,!1,b.verticalAlignment),items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string",
"number"],!0),groupTitle:new a.common.ValueReader(["string","number"],!0),isVisible:new a.common.ValueReader(["boolean","number"],!1,e.isVisible),isActive:new a.common.ValueReader(["boolean","number"],!1,e.isActive),hasSelectorCheckbox:new a.common.EnumerationReader(a.common.Enabled,!1,e.hasSelectorCheckbox),hasButtons:new a.common.EnumerationReader(a.common.Enabled,!1,e.hasButtons),templateName:new a.common.ValueReader(["string"],!0)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:f};
g=h.read(g,c.getOptions(),"options",a);return a.isChanged},getItemOptions:function(a){return f["options-items"][a]},getOptions:function(){return g},description:"Checks items size options."}};a.orgdiagram.LabelsOptionTask=function(c,b,e){var d={},g={},f=new a.common.ObjectReader({showLabels:new a.common.EnumerationReader(a.common.Enabled,!1,b.showLabels),labelOffset:new a.common.ValueReader(["number"],!1,b.labelOffset),labelFontSize:new a.common.ValueReader(["string"],!1,b.labelFontSize),labelFontFamily:new a.common.ValueReader(["string"],
!1,b.labelFontFamily),labelFontStyle:new a.common.ValueReader(["string"],!1,b.labelFontStyle),labelFontWeight:new a.common.ValueReader(["string"],!1,b.labelFontWeight),labelColor:new a.common.ValueReader(["string"],!1,b.labelColor),labelSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,b.labelSize.width),height:new a.common.ValueReader(["number"],!1,b.labelSize.height)},!1,b.labelSize),labelOrientation:new a.common.EnumerationReader(a.text.TextOrientationType,!1,b.labelOrientation),
labelPlacement:new a.common.EnumerationReader(a.common.PlacementType,!1,b.labelPlacement),arrowsDirection:new a.common.EnumerationReader(a.common.GroupByType,!1,b.arrowsDirection),items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),label:new a.common.ValueReader(["string","number","object"],!0),showLabel:new a.common.EnumerationReader(a.common.Enabled,!1,e.showLabel),labelSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],
!1,0),height:new a.common.ValueReader(["number"],!1,0)},!0),labelOrientation:new a.common.EnumerationReader(a.text.TextOrientationType,!1,e.labelOrientation),labelPlacement:new a.common.EnumerationReader(a.common.PlacementType,!1,e.labelPlacement)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:g};d=f.read(d,c.getOptions(),"options",a);return a.isChanged},getItemOptions:function(a){return g["options-items"][a]},getItemsOptions:function(){return g["options-items"]},getOptions:function(){return d},
description:"Checks items labels options."}};a.orgdiagram.LayoutOptionsTask=function(a,b){var c={};return{process:function(){c=a();return!0},getOptions:function(){return c},description:"Raw layout options."}};a.orgdiagram.MinimizedItemsOptionTask=function(c){var b={},e={},d=new a.common.ObjectReader({minimizedItemShapeType:new a.common.EnumerationReader(a.common.ShapeType,!0),items:new a.common.ArrayReader(new a.common.ObjectReader({id:new a.common.ValueReader(["string","number"],!0),minimizedItemShapeType:new a.common.EnumerationReader(a.common.ShapeType,
!0),itemTitleColor:new a.common.ValueReader(["string"],!0)}),!0,"id")});return{process:function(){var a={isChanged:!1,hash:e};b=d.read(b,c.getOptions(),"options",a);return a.isChanged},getItemOptions:function(a){return e["options-items"][a]},getOptions:function(){return b},description:"Checks minimized items drawing options."}};a.orgdiagram.OptionsTask=function(a){return{process:function(){return!0},getOptions:a,description:"Raw options."}};a.orgdiagram.OrientationOptionTask=function(c,b){var e={},
d={},g=new a.common.ObjectReader({orientationType:new a.common.EnumerationReader(a.common.OrientationType,!1,b.orientationType)});return{process:function(){var a={isChanged:!1,hash:d};e=g.read(e,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return e},description:"Checks diagram orientation options."}};a.orgdiagram.ScaleOptionTask=function(c,b){var e={},d={},g=new a.common.ObjectReader({scale:new a.common.ValueReader(["number"],!1,b.scale),minimumScale:new a.common.ValueReader(["number"],
!1,b.minimumScale),maximumScale:new a.common.ValueReader(["number"],!1,b.maximumScale)});return{process:function(){var a={isChanged:!1,hash:d};e=g.read(e,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return e},description:"Checks control scale options."}};a.orgdiagram.TemplatesOptionTask=function(c,b,e,d){var g={},f={},h=new a.common.ObjectReader({groupTitleVerticalAlignment:new a.common.EnumerationReader(a.common.VerticalAlignmentType,!1,b.groupTitleVerticalAlignment),groupTitleHorizontalAlignment:new a.common.EnumerationReader(a.common.HorizontalAlignmentType,
!1,b.groupTitleHorizontalAlignment),groupTitleOrientation:new a.common.EnumerationReader(a.text.TextOrientationType,!1,b.groupTitleOrientation),groupTitleFontSize:new a.common.ValueReader(["string"],!1,b.groupTitleFontSize),groupTitleFontFamily:new a.common.ValueReader(["string"],!1,b.groupTitleFontFamily),groupTitleColor:new a.common.ValueReader(["string"],!1,b.groupTitleColor),groupTitleFontWeight:new a.common.ValueReader(["string"],!1,b.groupTitleFontWeight),groupTitleFontStyle:new a.common.ValueReader(["string"],
!1,b.groupTitleFontStyle),itemTitleFirstFontColor:new a.common.ValueReader(["string"],!1,b.itemTitleFirstFontColor),itemTitleSecondFontColor:new a.common.ValueReader(["string"],!1,b.itemTitleSecondFontColor),selectCheckBoxLabel:new a.common.ValueReader(["string"],!1,b.selectCheckBoxLabel),onItemRender:new a.common.FunctionReader,onCursorRender:new a.common.FunctionReader,onHighlightRender:new a.common.FunctionReader,templates:new a.common.ArrayReader(new a.common.ObjectReader({name:new a.common.ValueReader(["string"],
!0),isActive:new a.common.ValueReader(["boolean"],!1,d.isActive),itemSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,d.itemSize.width),height:new a.common.ValueReader(["number"],!1,d.itemSize.height)},!1,d.itemSize),itemBorderWidth:new a.common.ValueReader(["number"],!1,d.itemBorderWidth),itemTemplate:new a.common.ValueReader(["string","object"],!0),minimizedItemShapeType:new a.common.EnumerationReader(a.common.ShapeType,!0),minimizedItemSize:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],
!1,d.minimizedItemSize.width),height:new a.common.ValueReader(["number"],!1,d.minimizedItemSize.height)},!1,d.minimizedItemSize),minimizedItemCornerRadius:new a.common.ValueReader(["number"],!0),minimizedItemLineWidth:new a.common.ValueReader(["number"],!1,d.minimizedItemLineWidth),minimizedItemBorderColor:new a.common.ValueReader(["string"],!0),minimizedItemLineType:new a.common.EnumerationReader(a.common.LineType,!1,d.minimizedItemLineType),minimizedItemFillColor:new a.common.ValueReader(["string"],
!0),minimizedItemOpacity:new a.common.ValueReader(["number"],!1,d.minimizedItemOpacity),highlightPadding:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],!1,d.highlightPadding.left),top:new a.common.ValueReader(["number"],!1,d.highlightPadding.top),right:new a.common.ValueReader(["number"],!1,d.highlightPadding.right),bottom:new a.common.ValueReader(["number"],!1,d.highlightPadding.bottom)},!1,d.highlightPadding),highlightBorderWidth:new a.common.ValueReader(["number"],!1,d.highlightBorderWidth),
highlightTemplate:new a.common.ValueReader(["string","object"],!0),cursorPadding:new a.common.ObjectReader({left:new a.common.ValueReader(["number"],!1,d.cursorPadding.left),top:new a.common.ValueReader(["number"],!1,d.cursorPadding.top),right:new a.common.ValueReader(["number"],!1,d.cursorPadding.right),bottom:new a.common.ValueReader(["number"],!1,d.cursorPadding.bottom)},!1,d.cursorPadding),cursorBorderWidth:new a.common.ValueReader(["number"],!1,d.cursorBorderWidth),cursorTemplate:new a.common.ValueReader(["string",
"object"],!0),buttons:new a.common.ArrayReader(new a.common.ObjectReader({name:new a.common.ValueReader(["string"],!0),icon:new a.common.ValueReader(["string"],!0),text:new a.common.ValueReader(["boolean"],!1,!1),tooltip:new a.common.ValueReader(["string"],!0),size:new a.common.ObjectReader({width:new a.common.ValueReader(["number"],!1,e.size.width),height:new a.common.ValueReader(["number"],!1,e.size.height)},!1,e.size)}),!0,"name"),onButtonsRender:new a.common.FunctionReader}),!0,"name")});return{process:function(){var a=
{isChanged:!1,hash:f};g=h.read(g,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return g},description:"Checks items template options."}};a.orgdiagram.VisualTreeOptionTask=function(c,b){var e={},d={},g=new a.common.ObjectReader({leavesPlacementType:new a.common.EnumerationReader(a.common.ChildrenPlacementType,!1,b.leavesPlacementType),childrenPlacementType:new a.common.EnumerationReader(a.common.ChildrenPlacementType,!1,b.childrenPlacementType),placeAdvisersAboveChildren:new a.common.ValueReader(["boolean"],
!1,b.placeAdvisersAboveChildren),placeAssistantsAboveChildren:new a.common.ValueReader(["boolean"],!1,b.placeAssistantsAboveChildren),maximumColumnsInMatrix:new a.common.ValueReader(["number"],!1,b.maximumColumnsInMatrix),horizontalAlignment:new a.common.EnumerationReader(a.common.HorizontalAlignmentType,!1,b.horizontalAlignment)});return{process:function(){var a={isChanged:!1,hash:d};e=g.read(e,c.getOptions(),"options",a);return a.isChanged},getOptions:function(){return e},description:"Checks items layout options."}};
a.orgdiagram.CollinearVectorBundle=function(){function c(a){var c;if(b.width>b.height){var h=0;for(c=e.length;h<c;h+=1){var g=e[h];a(g.from.x,g.to.x,d[h])}}else for(h=0,c=e.length;h<c;h+=1)g=e[h],a(g.from.y,g.to.y,d[h])}var b=new a.common.Rect,e=[],d=[];return{addVector:function(a,c){e.push(a);d.push(c);b.addRect(a.from.x,a.from.y);b.addRect(a.to.x,a.to.y)},resolve:function(){if(1==e.length)d[0](0,1,1);else{var b=a.common.pile();c(function(a,c,d){b.add(a,c,d)});b.resolve(this,function(a,b,c,d,e,g){c(d,
e,g)})}}}};a.orgdiagram.ConnectorAnnotationOffsetResolver=function(){var c={};return{getOffset:function(b,e){var d=b.getLineKey();c.hasOwnProperty(d)||(c[d]=new a.orgdiagram.CollinearVectorBundle);c[d].addVector(b,e)},resolve:function(){for(var a in c)c.hasOwnProperty(a)&&c[a].resolve()}}};a.orgdiagram.DrawBackgroundAnnotationTask=function(c,b,e,d,g,f){function h(b,c,d){var e,h;c=0;for(e=b.length;c<e;c+=1){var g=b[c];if(null!=g.items&&0<g.items.length){var m=new a.common.MergedRectangles(k);m.transform=
n;var q=new a.orgdiagram.BackgroundAnnotationConfig;var l=["opacity","lineWidth","borderColor","fillColor","lineType"];var p=0;for(h=l.length;p<h;p+=1){var B=l[p];m[B]=g.hasOwnProperty(B)?g[B]:q[B]}k.activate("placeholder",2);var F=[];var x={};p=0;for(h=g.items.length;p<h;p+=1){q=g.items[p];var A=f.getItemPosition(q);if(null!=A){x[q]=!0;var E=new a.common.Rect(A.actualPosition);E.offset(g.offset);F.push(E);g.includeChildren&&d.loopChildren(this,q,function(b,c){x[b]||(x[b]=!0,A=f.getItemPosition(b),
null!=A&&(E=new a.common.Rect(A.actualPosition),E.offset(g.offset),F.push(E)))})}}m.draw(F)}}}var k,l,n;return{process:function(){var a=d.getAnnotations();k=c();k.reset("placeholder",2);if(0<a.length){l=f.getItemsPositions();n=b.getTransform();var e=g.getLogicalFamily();h(a,l,e)}return!1}}};a.orgdiagram.DrawConnectorAnnotationTask=function(c,b,e,d,g,f,h,k){function l(b,c){var d,f,e=new a.common.PolylinesBuffer,h=a.orgdiagram.ConnectorAnnotationOffsetResolver(),g=0;switch(k){case 1:n.activate("placeholder",
4);break;case 2:n.activate("placeholder",14)}var l=0;for(d=b.length;l<d;l+=1){var r=b[l];g=Math.max(g,r.lineWidth)}l=0;for(d=b.length;l<d;l+=1)if(r=b[l],null!=r.fromItem&&null!=r.toItem){var t=c(r.fromItem);var A=c(r.toItem);if(null!=t&&null!=A){var E=t.actualPosition;var C=A.actualPosition;switch(r.connectorPlacementType){case 0:var z=new a.common.ConnectorOffbeat;break;case 1:z=new a.common.ConnectorStraight}var G;m.transformRect(0,0,r.labelSize.width,r.labelSize.height,!1,this,function(b,c,d,f){G=
new a.common.Size(d,f)});var J=null;m.transformRect(0,0,p.width,p.height,!1,this,function(b,c,d,f){J=new a.common.Size(d,f)});A=new a.common.PaletteItem({lineColor:r.color,lineWidth:r.lineWidth,lineType:r.lineType});t=!a.common.isNullOrEmpty(r.label);E=(new a.common.Rect(E)).offset(r.offset);C=(new a.common.Rect(C)).offset(r.offset);z.draw(e,A,E,C,3*r.lineWidth,6*g,G,J,r.connectorShapeType,4,r.labelPlacementType,t,h,function(b,c){a.common.isNullOrEmpty(c.label)||null==b||(m.transformRect(b.x,b.y,
b.width,b.height,!0,this,function(c,d,f,e){b=new a.common.Rect(c,d,f,e)}),f=new a.common.RenderEventArgs,f.context=c,n.template(b.x,b.y,0,0,0,0,b.width,b.height,q.template(),q.getHashCode(),q.render,f,null))},r)}}h.resolve();e.transform(m,!0);n.polylinesBuffer(e)}var n,m,q,p;return{process:function(){n=c();m=b.getTransform();d.getOptions();q=h.getTemplate();p=new a.common.Size(f.getContentSize());switch(k){case 1:n.reset("placeholder",4);break;case 2:n.reset("placeholder",14)}l(g.getAnnotations(),
f.getItemPosition);return!1}}};a.orgdiagram.DrawConnectorsTask=function(c,b,e,d,g){return{process:function(){var f=c(),h=b.getGraph(),k=e.getOptions(),l=g.getPaletteManager();f.reset("placeholder",6);f.activate("placeholder",6);var n=new a.common.PolylinesBuffer,m=Math.round(k.elbowDotSize/2),q={},p={};h.loopNodes(this,null,function(b){h.loopNodeEdges(this,b,function(c,f){if(!q.hasOwnProperty(c)){c=null;1>=f.fromOffset?c=l.getPalette(1):(l.selectPalette(f.fromOffset),c=l.getPalette(0));var e=n.getPolyline(c);
if(d&&null!=f.dotId&&0!=k.elbowType&&!p.hasOwnProperty(f.dotId)){c=n.getPolyline(e.arrowPaletteItem);var h=f.dotId==f.from?f.polyline.getStartPoint():f.polyline.getEndPoint();c.addSegment(new a.common.DotSegment(h.x-m,h.y-m,2*m,2*m,m));p[f.dotId]=!0}c=null;if(f.hasArrow)switch(k.arrowsDirection){case 1:c=f.isOppositeFlow?f.childrenArrowId:f.parentsArrowId;break;case 2:c=f.isOppositeFlow?f.parentsArrowId:f.childrenArrowId}null==c?(c=f.polyline.clone(),f.hasMiddle&&0!=k.arrowsDirection&&(h=!0,h=f.from==
f.middleParent?2==k.arrowsDirection:1==k.arrowsDirection,f.isOppositeFlow&&(h=!h),c.addOffsetArrow(h,k.linesWidth,.4,k.extraArrowsMinimumSpace,function(a){a.mergeTo(n.getPolyline(e.arrowPaletteItem))})),f.from==b?c.mergeTo(e):e.addInverted(c)):(c==f.to?f.polyline.clone().mergeTo(e):e.addInverted(f.polyline.clone()),e.addArrow(k.linesWidth,function(a){a.mergeTo(n.getPolyline(a.paletteItem))}))}});q[b]=!0});f.polylinesBuffer(n);return!1}}};a.orgdiagram.DrawCursorTask=function(c,b,e,d,g,f,h,k){function l(b){n.activate("placeholder",
11);var c=g.getItemPosition(b);if(null!=c){var e=c.actualPosition,h=new a.common.Rect(c.contentPosition),q=f.getTemplateParams(b).template,l=q.templateConfig;c=l.cursorPadding;h.offset(c.left,c.top,c.right,c.bottom);var w=new a.common.RenderEventArgs;w.context=d.getConfig(b);w.isCursor=!0;w.isSelected=k.isSelected(b);w.templateName=l.name;m.transformRect(e.x,e.y,e.width,e.height,!0,this,function(a,b,c,f){n.template(a,b,c,f,h.x,h.y,h.width,h.height,q.cursorTemplate.template(),q.cursorTemplate.getHashCode(),
q.cursorTemplate.render,w,{borderWidth:l.cursorBorderWidth})})}}var n,m;return{process:function(){var a=h.getCursorTreeItem();n=c();n.reset("placeholder",11);null!=a&&(m=b.getTransform(),l(a));return!1}}};a.orgdiagram.DrawHighlightAnnotationTask=function(c,b,e,d,g,f,h,k,l,n,m,q){function p(b){var c,n,p,w,x,A=!0,E=k.getItemPosition(b),C=E.actualPosition;switch(E.actualVisibility){case 2:case 3:case 1:var z=f.getItemOptions(b);switch(z.showCallout){case 2:A=!1;break;case 1:A=!1;break;default:A=v.showCallout}A?
(r.activate("placeholder",12),t.transformRect(C.x,C.y,C.width,C.height,!0,this,function(f,t,A,I){t=new a.common.Rect(f,t,A,I);f=new a.common.Point(t.horizontalCenter(),t.verticalCenter());A=d.getOptions().scale;I=new a.common.Point(l.getPlaceholderOffset());var L=new a.common.Rect(k.getContentSize()),C=new a.common.Size(e.getOptimalPanelSize());I.scale(1/A);C.scale(1/A);A=new a.common.Rect(I.x,I.y,Math.min(C.width,L.width),Math.min(C.height,L.height));if(E.actualVisibility>=v.calloutMaximumVisibility&&
4!=E.actualVisibility||!A.overlaps(t)){w=a.common.isNullOrEmpty(z.calloutTemplateName)?a.common.isNullOrEmpty(z.templateName)?a.common.isNullOrEmpty(v.defaultCalloutTemplateName)?v.defaultTemplateName:v.defaultCalloutTemplateName:z.templateName:z.calloutTemplateName;x=h.getTemplate(w,h.DefaultWidgetTemplateName);t=x.templateConfig.itemSize;I=new a.common.Rect(f.x,f.y,t.width,t.height);switch(v.orientationType){case 0:case 1:I.y-=t.height/4;f.x<A.horizontalCenter()?I.x+=v.calloutPlacementOffset:I.x-=
v.calloutPlacementOffset+t.width;break;default:I.x-=t.width/4,f.y<A.verticalCenter()?I.y+=v.calloutPlacementOffset:I.y-=v.calloutPlacementOffset+t.height}I.x<A.x?I.x=A.x+5:I.right()>A.right()&&(I.x-=I.right()-A.right()+5);I.y<A.y?I.y=A.y+5:I.bottom()>A.bottom()&&(I.y-=I.bottom()-A.bottom()+5);n=I;c=new a.common.Rect(n);c.addRect(f.x,f.y);c.offset(50);f.x-=c.x;f.y-=c.y;n.x-=c.x;n.y-=c.y;p=new a.common.RenderEventArgs;p.context=g.getConfig(b);p.isCursor=m.getCursorTreeItem()==b;p.isSelected=q.isSelected(b);
p.templateName=x.templateConfig.name;r.show("calloutplaceholder");r.activate("calloutplaceholder",15);r.position("calloutplaceholder",c.x,c.y,c.width,c.height);r.template(n.x,n.y,n.width,n.height,0,0,n.width,n.height,x.itemTemplate.template(),x.itemTemplate.getHashCode(),x.itemTemplate.render,p,null);u.pointerPlacement=0;u.cornerRadius=v.calloutCornerRadius;u.offset=v.calloutOffset;u.opacity=v.calloutOpacity;u.lineWidth=v.calloutLineWidth;u.pointerWidth=v.calloutPointerWidth;u.borderColor=v.calloutBorderColor;
u.fillColor=v.calloutfillColor;u.draw(f,n)}else r.hide("calloutplaceholder")})):r.hide("calloutplaceholder");break;case 4:r.hide("calloutplaceholder")}}var r,t,u=new a.common.Callout(c()),v;return{process:function(){var a=n.getHighlightTreeItem();r=c();r.reset("calloutplaceholder",15);null!==a&&(t=b.getTransform(),v=f.getOptions(),p(a));return!1}}};a.orgdiagram.DrawHighlightPathAnnotationTask=function(c,b,e,d,g){function f(b,c,f,d){var e,h;if(0<f.length){var k=new a.common.PolylinesBuffer;switch(g){case 1:b.activate("placeholder",
5);break;case 2:b.activate("placeholder",7)}var l={};var n=0;for(e=f.length;n<e;n+=1){var u=f[n];if(null!=u.items&&0<u.items.length){var v=u.items.slice(0);var w=v[0];if(d.hasNode(w)){var y=1;for(h=v.length;y<h;y+=1){var D=v[y];d.hasNode(D)&&(l.hasOwnProperty(w)?l[w].push(D):l[w]=[D],w=D)}}}}var B={};for(x in l)B[x]={},l.hasOwnProperty(x)&&d.getShortestPath(this,x,l[x],function(a,b,c){return a.weight},function(a,b){B[x][b]=a});n=0;for(e=f.length;n<e;n+=1)if(u=f[n],y=new a.common.PaletteItem({lineColor:null!=
u.color?u.color:c.highlightLinesColor,lineWidth:null!=u.lineWidth?u.lineWidth:c.highlightLinesWidth,lineType:null!=u.lineType?u.lineType:c.highlightLinesType,fillColor:null,opacity:u.opacity}),l=k.getPolyline(y),null!=u.items&&0<u.items.length&&(v=u.items.slice(0),w=v[0],d.hasNode(w)))for(y=1,h=v.length;y<h;y+=1)if(D=v[y],d.hasNode(D)){var F=B[w][D]||[];for(w=F.length-2;0<=w;--w){var x=F[w+1];var A=F[w];var E=d.edge(x,A);E.from==x?E.polyline.clone().mergeTo(l):l.addInverted(E.polyline.clone());u.showArrows&&
(A==E.parentsArrowId||A==E.childrenArrowId)&&l.addArrow(u.lineWidth,function(a){a.mergeTo(k.getPolyline(a.paletteItem))})}w=D}b.polylinesBuffer(k)}}return{process:function(){var a=d.getGraph(),k=b.getOptions(),l=e.getAnnotations(),n=c();switch(g){case 1:n.reset("placeholder",5);break;case 2:n.reset("placeholder",7)}f(n,k,l,a);return!1}}};a.orgdiagram.DrawHighlightTask=function(c,b,e,d,g,f,h,k,l){function n(b){m.activate("placeholder",8);var c=g.getItemPosition(b),e=c.actualPosition,h=f.getTemplateParams(b).template,
n=h.templateConfig,p=n.highlightPadding;var y=new a.common.RenderEventArgs;y.context=d.getConfig(b);y.isCursor=k.getCursorTreeItem()==b;y.isSelected=l.isSelected(b);y.templateName=n.name;q.transformRect(e.x,e.y,e.width,e.height,!0,this,function(b,f,d,e){var g=new a.common.Rect(0,0,Math.round(d),Math.round(e));g.offset(p.left,p.top,p.right,p.bottom);1==c.actualVisibility?m.template(b,f,d,e,g.x,g.y,g.width,g.height,h.highlightTemplate.template(),h.highlightTemplate.getHashCode(),h.highlightTemplate.render,
y,{borderWidth:n.highlightBorderWidth}):m.template(Math.round(b),Math.round(f),Math.round(d),Math.round(e),Math.round(g.x),Math.round(g.y),Math.round(g.width),Math.round(g.height),h.dotHighlightTemplate.template(),h.dotHighlightTemplate.getHashCode(),h.dotHighlightTemplate.render,y,{borderWidth:n.highlightBorderWidth})})}var m,q;return{process:function(){var a=h.getHighlightTreeItem();m=c();m.reset("placeholder",8);null!=a&&(q=b.getTransform(),n(a));return!1}}};a.orgdiagram.DrawItemLabelsTask=function(c,
b,e,d,g){function f(b,c){var f=[];if(0==c.showLabels||1==c.showLabels)for(var d in b.treeItemsPositions)if(b.treeItemsPositions.hasOwnProperty(d)){var e=c.itemsOptions[d],h=b.treeItemsPositions[d],g=h.actualPosition;null!=e&&b.transform.transformRect(g.x,g.y,g.width,g.height,!0,this,function(b,d,g,m){switch(h.actualVisibility){case 1:if(0==c.showLabels){var k=new a.common.Label(b,d,g,m);k.weight=1E4;k.labelType=1;f.push(k)}break;case 2:case 3:k=e;var l=h,q=null;if(!a.common.isNullOrEmpty(k.label)){var n=
3;switch(k.showLabel){case 0:switch(c.showLabels){case 0:switch(l.actualVisibility){case 3:case 2:n=0}break;case 1:n=2}break;case 1:n=2}switch(n){case 0:var p=l.leftPadding+l.rightPadding;break;case 2:p=1E4;break;case 3:p=0}if(3!=n){var r=null!=k.labelSize?k.labelSize:c.labelSize;l=3!=k.labelOrientation?k.labelOrientation:3!=c.labelOrientation?c.labelOrientation:0;q=0!=k.labelPlacement?k.labelPlacement:0!=c.labelPlacement?c.labelPlacement:1;switch(l){case 0:var t=r.width;var u=r.height;break;case 1:case 2:u=
r.width,t=r.height}r=c.labelOffset;switch(q){case 0:case 1:var v=new a.common.Rect(b+g/2-t/2,d-r-u,t,u);switch(l){case 0:var w=0;var y=2;break;case 1:y=w=1;break;case 2:w=2,y=1}break;case 2:case 11:v=new a.common.Rect(b+g+r,d-r-u,t,u);switch(l){case 0:w=1;y=2;break;case 1:w=1;y=0;break;case 2:y=w=2}break;case 3:v=new a.common.Rect(b+g+r,d+m/2-u/2,t,u);switch(l){case 0:y=w=1;break;case 1:y=w=0;break;case 2:w=0,y=2}break;case 4:case 12:v=new a.common.Rect(b+g+r,d+m+r,t,u);switch(l){case 0:w=1;y=0;break;
case 1:w=2;y=0;break;case 2:w=1,y=2}break;case 5:v=new a.common.Rect(b+g/2-t/2,d+m+r,t,u);switch(l){case 0:y=w=0;break;case 1:w=2;y=1;break;case 2:y=w=1}break;case 6:case 10:v=new a.common.Rect(b-t-r,d+m+r,t,u);switch(l){case 0:w=2;y=0;break;case 1:y=w=2;break;case 2:w=1,y=0}break;case 7:v=new a.common.Rect(b-t-r,d+m/2-u/2,t,u);switch(l){case 0:w=2;y=1;break;case 1:w=0;y=2;break;case 2:y=w=0}break;case 8:case 9:switch(v=new a.common.Rect(b-t-r,d-r-u,t,u),l){case 0:y=w=2;break;case 1:w=1;y=2;break;
case 2:w=2,y=0}}b=w;q=new a.common.Label(v);q.labelType=n;q.weight=p;q.text=k.label;q.labelOrientation=l;q.horizontalAlignmentType=b;q.verticalAlignmentType=y}}k=q;null!=k&&f.push(k)}})}0==c.showLabels&&a.common.getCrossingRectangles(this,f,function(a,b){if(a.isActive&&b.isActive)switch(a.labelType){case 1:switch(b.labelType){case 0:b.isActive=!1;break;case 2:b.isActive=!1}break;case 2:switch(b.labelType){case 1:a.isActive=!1;break;case 0:b.isActive=!1}break;case 0:switch(b.labelType){case 1:a.isActive=
!1;break;case 0:a.weight<=b.weight?a.isActive=!1:b.isActive=!1;break;case 2:a.isActive=!1}}});b.graphics.activate("placeholder",10);d={fontSize:c.labelFontSize,fontFamily:c.labelFontFamily,fontStyle:c.labelFontStyle,fontWeight:c.labelFontWeight,fontColor:c.labelColor};g=0;for(var k=f.length;g<k;g+=1){var t=f[g];if(t.isActive)switch(t.labelType){case 0:case 2:b.graphics.text(t.x,t.y,t.width,t.height,t.text,t.labelOrientation,t.horizontalAlignmentType,t.verticalAlignmentType,d)}}}return{process:function(){var a=
d.getOptions(),e={graphics:c(),transform:b.getTransform(),treeItemsPositions:g.getItemsPositions()};a={showLabels:a.showLabels,labelFontSize:a.labelFontSize,labelFontFamily:a.labelFontFamily,labelFontStyle:a.labelFontStyle,labelFontWeight:a.labelFontWeight,labelColor:a.labelColor,itemsOptions:d.getItemsOptions(),labelSize:a.labelSize,labelOrientation:a.labelOrientation,labelPlacement:a.labelPlacement,labelOffset:a.labelOffset};e.graphics.reset("placeholder",10);f(e,a);return!1}}};a.orgdiagram.DrawMinimizedItemsTask=
function(c,b,e,d,g,f){function h(){var b=new a.common.PolylinesBuffer,c,f=new a.common.Marker,e,h,v,w,y,D,B;for(B in m)if(m.hasOwnProperty(B)){var F=m[B];var x=F.actualPosition;var A=d.getItemOptions(B);l.transformRect(x.x,x.y,x.width,x.height,!0,this,function(d,m,k,l){switch(F.actualVisibility){case 2:y=g.getTemplateParams(B),D=y.template.templateConfig,v=h=e=null,w=0,null!=A&&(h=e=A.itemTitleColor,v=A.minimizedItemShapeType),e=e||D.minimizedItemBorderColor||"#000080",h=h||D.minimizedItemFillColor||
"#000080",null==v&&(v=null!==D.minimizedItemShapeType?D.minimizedItemShapeType:n.minimizedItemShapeType),w=null===D.minimizedItemCornerRadius?D.minimizedItemSize.width:D.minimizedItemCornerRadius,null==v||6==v?(c=b.getPolyline(new a.common.PaletteItem({lineColor:e,lineWidth:D.minimizedItemLineWidth,lineType:D.minimizedItemLineType,fillColor:h,opacity:D.minimizedItemOpacity})),c.addSegment(new a.common.DotSegment(d,m,k,l,w))):f.draw(b,v,new a.common.Rect(d,m,k,l),new a.common.PaletteItem({lineColor:e,
lineWidth:D.minimizedItemLineWidth,lineType:D.minimizedItemLineType,fillColor:h,opacity:D.minimizedItemOpacity}))}})}k.activate("placeholder",9);k.polylinesBuffer(b)}var k,l,n,m;return{process:function(){k=c();l=b.getTransform();n=d.getOptions();m=f.getItemsPositions();k.reset("placeholder",9);h();return!1}}};a.orgdiagram.DrawShapeAnnotationTask=function(c,b,e,d,g,f,h,k){function l(b,c){var f,d;switch(k){case 1:var e=n.activate("placeholder",3);break;case 2:e=n.activate("placeholder",13)}var h=0;
for(f=b.length;h<f;h+=1){var g=b[h];if(null!=g.items&&0<g.items.length){var l=new a.common.Rect;var r=0;for(d=g.items.length;r<d;r+=1){var t=c(g.items[r]);null!=t&&l.addRect(t.actualPosition)}if(!l.isEmpty()){var A=new a.common.Shape(n);t=new a.orgdiagram.ShapeAnnotationConfig;var E="opacity cornerRadius shapeType offset lineWidth borderColor fillColor lineType labelSize labelOffset labelPlacement zOrderType".split(" ");r=0;for(d=E.length;r<d;r+=1){var C=E[r];A[C]=g.hasOwnProperty(C)?g[C]:t[C]}A.position=
l;A.orientationType=q.orientationType;A.panelSize=e.size;A.labelTemplate=p;A.hasLabel=null!=g.templateName||null!=g.label;var z=new a.common.RenderEventArgs;z.context=g;z.templateName=A.labelTemplate;m.transformRect(l.x,l.y,l.width,l.height,!0,this,function(b,c,f,d){b=new a.common.Rect(b,c,f,d);A.draw(b,z)})}}}}var n,m,q,p;return{process:function(){n=c();m=b.getTransform();q=d.getOptions();p=h.getTemplate();switch(k){case 1:n.reset("placeholder",3);break;case 2:n.reset("placeholder",13)}l(g.getAnnotations(),
f.getItemPosition);return!1}}};a.orgdiagram.DrawTreeItemsTask=function(c,b,e,d,g,f,h,k,l,n,m,q,p,r){function t(){var b,c=n.getCursorTreeItem(),d=u(),e;for(e in v)if(v.hasOwnProperty(e)){var h=v[e];var g=h.actualPosition;1==h.actualVisibility&&y.transformRect(g.x,g.y,g.width,g.height,!0,this,function(g,k,q,n){var p=new a.common.Rect(g,k,q,n);if(null==d||d.overlaps(p)){var r=l.getTemplateParams(e);p=r.template;b=new a.common.RenderEventArgs;b.id=e;b.context=f.getConfig(e);b.isCursor=e==c;b.isSelected=
m.isSelected(e);b.templateName=p.templateConfig.name;b.template=r.template;b.isActive=r.isActive;b.hasSelectorCheckbox=r.hasSelectorCheckbox;b.hasButtons=r.hasButtons;b.hasGroupTitle=r.hasGroupTitle;b.buttons=r.buttons;b.onButtonsRender=r.onButtonsRender;w.activate("placeholder",12);w.template(g,k,q,n,h.contentPosition.x,h.contentPosition.y,h.contentPosition.width,h.contentPosition.height,p.itemTemplate.template(),p.itemTemplate.getHashCode(),p.itemTemplate.render,b,{borderWidth:p.templateConfig.itemBorderWidth});
if(r.hasGroupTitle){var t=0;switch(D.groupTitlePlacementType){case 2:case 0:t=2;break;case 3:t=q-(D.groupTitlePanelSize-4)}w.template(g,k,q,n,t,h.contentPosition.y,D.groupTitlePanelSize-4,h.contentPosition.height+2,x.template(),x.getHashCode(),x.render,b,null)}r.hasSelectorCheckbox&&(w.activate("placeholder",16),w.template(g,k,q,n,h.contentPosition.x,n-(D.checkBoxPanelSize-4),h.contentPosition.width,D.checkBoxPanelSize-4,F.template(),F.getHashCode(),F.render,b,null));if(r.hasButtons){w.activate("placeholder",
16);r=0;switch(D.groupTitlePlacementType){case 2:case 0:r=q-(D.buttonsPanelSize-4);break;case 3:r=2}w.template(g,k,q,n,r,h.contentPosition.y,D.buttonsPanelSize-4,Math.max(h.contentPosition.height,n-h.contentPosition.y),B.template(),p.templateConfig.name+B.getHashCode(),B.render,b,null)}}})}}function u(){var b=null;if(null!=k){b=d.getOptions().scale;var c=new a.common.Point(k.getPlaceholderOffset()),f=new a.common.Rect(h.getContentSize()),g=new a.common.Size(e.getOptimalPanelSize());c.scale(1/b);g.scale(1/
b);b=new a.common.Rect(c.x,c.y,Math.min(g.width,f.width),Math.min(g.height,f.height))}return b}var v,w,y,D,B,F,x;return{process:function(){w=c();D=g.getOptions();v=h.getItemsPositions();y=b.getTransform();B=r.getTemplate();F=p.getTemplate();x=q.getTemplate();w.reset("placeholder",12);w.reset("placeholder",16);t();return!1}}};a.orgdiagram.ActiveItemsTask=function(c,b){function e(a,c){var f=[],d;var e=0;for(d=c.length;e<d;e+=1){var h=c[e],g=b.getTemplate(h.templateName,a.defaultTemplateName,b.DefaultWidgetTemplateName).templateConfig;
h.isActive&&g.isActive&&f.push(h.id)}return f}var d=[],g={},f=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,hash:g},b=c.getOptions();d=f.read(d,e(b,b.items),"items",a);return a.isChanged},getActiveItems:function(){return g.items}}};a.orgdiagram.AnnotationLabelTemplateTask=function(a,b){var c=null;return{process:function(){return!1},getTemplate:function(){null==c&&(c=new b.AnnotationLabelTemplate);return c}}};a.orgdiagram.ButtonsTemplateTask=
function(a,b){var c=null;return{process:function(){return!1},getTemplate:function(){null==c&&(c=new b.ButtonsTemplate);return c}}};a.orgdiagram.CheckBoxTemplateTask=function(a,b){var c=null;return{process:function(){c=null;return!0},getTemplate:function(){if(null==c){var d=a.getOptions();c=new b.CheckBoxTemplate(d.selectCheckBoxLabel)}return c}}};a.orgdiagram.GroupTitleTemplateTask=function(a,b){var c=null;return{process:function(){c=null;return!0},getTemplate:function(){if(null==c){var d=a.getOptions();
c=new b.GroupTitleTemplate(d)}return c}}};a.orgdiagram.ItemTemplateParamsTask=function(c,b,e){function d(a,b,c){var f=!1;switch(b){case 0:switch(c){case 0:f=a;break;case 1:f=!0;break;case 2:f=!1}break;case 1:f=!0;break;case 2:f=!1}return f}var g={};return{process:function(){var f=c.getOptions(),h=0<f.buttons.length||null!=f.onButtonsRender,k=b.getCursorItem(),l=f.items,n;g={};var m=0;for(n=l.length;m<n;m+=1){var q=l[m],p=new a.orgdiagram.TemplateParams,r=k==q.id,t=e.getTemplate(q.templateName,f.defaultTemplateName,
e.DefaultWidgetTemplateName),u=t.templateConfig,v=null!=u.buttons&&0<u.buttons.length;v=v||null!=u.onButtonsRender;p.template=t;p.isActive=q.isActive&&u.isActive;p.isActive&&(p.hasSelectorCheckbox=d(r,q.hasSelectorCheckbox,f.hasSelectorCheckbox),p.hasButtons=(h||v)&&d(r,q.hasButtons,f.hasButtons),p.hasButtons&&(p.buttons=v?u.buttons:f.buttons,p.onButtonsRender=u.onButtonsRender||f.onButtonsRender));p.hasGroupTitle=!a.common.isNullOrEmpty(q.groupTitle);g[q.id]=p}return!0},getTemplateParams:function(a){return g[a]}}};
a.common.LabelAnnotationTemplate=function(){var a=["div",{"class":["bp-item","bp-label-annotation"]}];return{template:function(){return a},getHashCode:function(){return"defaultLabelAnnotationTemplate"},render:function(a,c){c.element.innerHTML=c.context.title}}};a.orgdiagram.ReadTemplatesTask=function(c,b){var e={};return{process:function(){var d,g=c.getOptions(),f=g.templates;e={};var h=new a.orgdiagram.TemplateConfig;e.DefaultWidgetTemplate=new a.orgdiagram.Template(h,new b.ItemTemplate(g,h),new b.HighlightTemplate(g,
h),new b.DotHighlightTemplate(g,h),new b.CursorTemplate(g,h));var k=new a.orgdiagram.TemplateConfig;k.name="DefaultWidgetLabelAnnotationTemplate";k.isActive=!1;k.itemSize=new a.common.Size(100,20);k.minimizedItemSize=new a.common.Size(0,0);k.minimizedItemCornerRadius=k.minimizedItemSize.width/2;h=k;e.DefaultWidgetLabelAnnotationTemplate=new a.orgdiagram.Template(h,new b.LabelAnnotationTemplate,null,new b.DotHighlightTemplate(g,h),null);k=0;for(d=f.length;k<d;k+=1)h=f[k],e[h.name]=new a.orgdiagram.Template(h,
a.common.isNullOrEmpty(h.itemTemplate)?new b.ItemTemplate(g,h):new b.UserTemplate(g,h.itemTemplate,g.onItemRender),a.common.isNullOrEmpty(h.highlightTemplate)?new b.HighlightTemplate(g,h):new b.UserTemplate(g,h.highlightTemplate,g.onHighlightRender),new b.DotHighlightTemplate(g,h),a.common.isNullOrEmpty(h.cursorTemplate)?new b.CursorTemplate(g,h):new b.UserTemplate(g,h.cursorTemplate,g.onCursorRender));return!0},getTemplate:function(a,b,c){return e[a]||e[b]||e[c]},DefaultWidgetTemplateName:"DefaultWidgetTemplate",
DefaultWidgetLabelAnnotationTemplateName:"DefaultWidgetLabelAnnotationTemplate"}};a.orgdiagram.CombinedNormalVisibilityItemsTask=function(c,b,e,d,g,f,h,k,l,n,m,q){function p(a,b){b=[];var c,f,d={};var e=0;for(c=a.length;e<c;e+=1){var h=a[e];var g=h.getItems();h=0;for(f=g.length;h<f;h+=1){var m=g[h];d.hasOwnProperty(m)||(b.push(m),d[m]=!0)}}return b}var r=[],t={},u=[b,e,d,g,f,h,k,l,n,m,q],v=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a=
{isChanged:!1,hash:t},b=c.getOptions();r=v.read(r,p(u),"items",a);if(0==b.pageFitMode||1==b.minimalVisibility)a.isChanged=!1;return a.isChanged},isItemSelected:function(a){return t.items.hasOwnProperty(a)}}};a.orgdiagram.CursorItemTask=function(a,b){var c=null;return{process:function(){var d=a.getCursorItem(),e=null!=b?b.getActiveItems():{};c=null!=d&&e.hasOwnProperty(d)?d:null;return!0},getCursorTreeItem:function(){return c},getItems:function(){return null!=c?[c]:[]}}};a.orgdiagram.CursorNeighboursTask=
function(a,b){function c(a,b){var c=[];null!==a&&b.loopNeighbours(this,a,function(a,b,f){0===b.visibility&&c.push(a);return!0});return c}var d=[];return{process:function(){var e=b.getLogicalFamily(),f=a.getCursorTreeItem();d=c(f,e);return!0},getItems:function(){return d}}};a.orgdiagram.HighlightItemTask=function(a,b){var c=null;return{process:function(){var d=a.getHighlightItem(),e=null!=b?b.getActiveItems():{};c=null!=d&&e.hasOwnProperty(d)?d:null;return!0},getHighlightTreeItem:function(){return c}}};
a.orgdiagram.NormalVisibilityItemsByAnnotationTask=function(c){function b(a){var b=[],c={},f,d;var e=0;for(f=a.length;e<f;e+=1){var g=a[e];if(g.selectItems){var p=g.items;g=0;for(d=p.length;g<d;g+=1){var r=p[g];null==r||c.hasOwnProperty(r)||(b.push(r),c[r]=!0)}}}return b}var e=[],d={},g=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,hash:d},h=c.getAnnotations();e=g.read(e,b(h),"items",a);return a.isChanged},getItems:function(){return e}}};
a.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask=function(c){function b(a){var b=[],c={},f;var d=0;for(f=a.length;d<f;d+=1){var e=a[d];e.selectItems&&(null==e.fromItem||c.hasOwnProperty(e.fromItem)||(b.push(e.fromItem),c[e.fromItem]=!0),null==e.toItem||c.hasOwnProperty(e.toItem)||(b.push(e.toItem),c[e.toItem]=!0))}return b}var e=[],d={},g=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,hash:d},h=c.getAnnotations();
e=g.read(e,b(h),"items",a);return a.isChanged},getItems:function(){return e}}};a.orgdiagram.SelectedItemsTask=function(c){function b(a){var b=[],c={},f;var d=0;for(f=a.length;d<f;d+=1){var e=a[d];null==e||c.hasOwnProperty(e)||(b.push(e),c[e]=!0)}return b}var e=[],d={},g=new a.common.ArrayReader(new a.common.ValueReader(["string","number"],!0),!0);return{process:function(){var a={isChanged:!1,hash:d},h=c.getSelectedItems();e=g.read(e,b(h),"items",a);return a.isChanged},getItems:function(){return e},
isSelected:function(a){return d.items.hasOwnProperty(a)}}};a.orgdiagram.SelectionPathItemsTask=function(a,b,e,d){function c(a,b,c){var f=[],d={},e;var h=0;for(e=a.length;h<e;h+=1){var g=a[h];switch(c){case 1:b.loopParents(this,g,function(a,c){if(null!=d[a])return b.SKIP;4!=c.visibility&&f.push(a);d[a]=!0})}}return f}var f=[];return{process:function(){var h=d.getSelectionPathMode(),g=a.getLogicalFamily(),l=b.getCursorTreeItem(),n=e.getItems().slice(0);n.push(l);f=c(n,g,h);return!0},getItems:function(){return f}}};
a.orgdiagram.CombinedContextsTask=function(a,b){return{process:function(){return!0},getConfig:function(c){return a.getConfig(c)||null!=b&&b.getConfig(c)}}};a.orgdiagram.ConnectionsGraphTask=function(c,b,e,d,g,f){function h(a,b){for(var c=0,f=b.length;c<f;c+=1){var d=b[c];a.getShortestPath(this,d.from,[d.to],function(a,b,c){return a.weight},function(b,c){c=0;for(var f=b.length-1;c<f;c+=1){var d=a.edge(b[c],b[c+1]);d.isOppositeFlow=!0;d.hasArrow=!0}})}}var k={graph:null,nodeid:0};return{process:function(){var l=
c().activate("placeholder",6),n=d.getBundles(),m=d.getNestedLayoutBottomConnectorIds(),q=e.getOptions(),p=null!=f?f.getLoops():[],r={graph:a.common.graph(),nodeid:0};l={treeItemsPositions:g.getItemsPositions(),nestedLayoutBottomConnectorIds:m,transform:b.getTransform(),hasGraphics:l.hasGraphics};m={connectorType:q.connectorType,showExtraArrows:q.showExtraArrows,bevelSize:q.bevelSize,elbowType:q.elbowType};for(var t=0,u=n.length;t<u;t+=1)n[t].trace(r,l,m);h(r.graph,p,q.extraArrowsMinimumSpace);k=r;
return!0},getGraph:function(){return k.graph}}};a.orgdiagram.ItemsPositionsTask=function(c,b,e,d,g,f,h,k,l,n,m){function q(b){var c=new a.common.Rect(0,0,0,0),f;switch(O.orientationType){case 2:case 3:b.invert()}if(!G.isEmpty())switch(N.pageFitMode){case 0:case 5:var d=[new a.orgdiagram.LevelVisibility(0,1)];c=p(d,0);break;default:d=[new a.orgdiagram.LevelVisibility(0,1)];var e=[];switch(N.minimalVisibility){case 2:e.push(2);break;case 0:case 3:case 4:e.push(2),e.push(3)}G.loopLevelsReversed(this,
function(b,c){for(c=0;c<e.length;c+=1)d.push(new a.orgdiagram.LevelVisibility(b,e[c]))});var h=p(d,d.length-1);h.addRect(b);h.offset(0,0,5,5);var g=f=b=null;c=p(d,0);if(!r(c,h)&&(b=0,c=p(d,d.length-1),r(c,h))){for(g=f=d.length-1;1<f-b;)g=Math.floor((f+b)/2),c=p(d,g),r(c,h)?f=g:b=g;f!==g&&(c=p(d,f))}}return c}function p(b,c){var d;J=[];G.loopLevels(this,function(b,c){b=new a.orgdiagram.TreeLevelPosition;b.currentvisibility=1;J.push(b)});for(d=0;d<=c;d+=1){var f=b[d];J[f.level].currentvisibility=f.currentvisibility}v();
B();w();y();return new a.common.Rect(0,0,Math.round(u()),Math.round(t()))}function r(a,b){var c=!1;switch(N.pageFitMode){case 1:b.width>=a.width&&(c=!0);break;case 2:b.height>=a.height&&(c=!0);break;case 3:b.height>=a.height&&b.width>=a.width&&(c=!0)}return c}function t(){var a=J[J.length-1];return a.shift+a.nextLevelShift}function u(){var a=0,b;var c=0;for(b=J.length;c<b;c+=1)a=Math.max(a,J[c].currentOffset);return a+=N.normalItemsInterval}function v(){var b=n.getCursorTreeItem();C={};G.loopLevels(this,
function(c,d){var f=J[c];G.loopLevelItems(this,c,function(c,d,e){e=new a.orgdiagram.TreeItemPosition;var h=m.isItemSelected(c)?1:d.visibility;d=l.getTemplateParams(c);h=0===h?f.currentvisibility:h;var g=b==c,k=N,q=O.orientationType;switch(h){case 1:var n=d.template.templateConfig;var p=new a.common.Size(n.itemSize);var r=new a.common.Rect(0,0,p.width,p.height);g&&(p.height+=n.cursorPadding.top+n.cursorPadding.bottom,p.width+=n.cursorPadding.left+n.cursorPadding.right,r.x=n.cursorPadding.left,r.y=
n.cursorPadding.top);d.hasSelectorCheckbox&&(p.height+=k.checkBoxPanelSize);if(d.hasButtons)switch(p.width+=k.buttonsPanelSize,k.groupTitlePlacementType){case 3:r.x+=k.buttonsPanelSize}if(d.hasGroupTitle)switch(p.width+=k.groupTitlePanelSize,k.groupTitlePlacementType){case 3:break;default:r.x+=k.groupTitlePanelSize}break;case 2:n=d.template.templateConfig;p=new a.common.Size(n.minimizedItemSize);break;case 3:case 4:p=new a.common.Size}switch(q){case 2:case 3:p.invert()}e.actualVisibility=h;e.actualSize=
p;e.contentPosition=r;C[c]=e})})}function w(){var a,b;G.loopLevels(this,function(c,d){var f=J[c];f.shift=0;f.depth=0;f.actualVisibility=4;b=a=null;G.loopLevelItems(this,c,function(c,d,e){c=C[c];f.depth=Math.max(f.depth,c.actualSize.height);switch(c.actualVisibility){case 2:case 3:case 4:b=b?Math.min(b,c.actualSize.height):c.actualSize.height;break;default:a=a?Math.min(a,c.actualSize.height):c.actualSize.height}f.actualVisibility=Math.min(f.actualVisibility,c.actualVisibility)});null==a&&(a=f.depth);
null!=b&&b>a&&(a=b);switch(N.verticalAlignment){case 0:f.horizontalConnectorsDepth=a/2;break;case 1:f.horizontalConnectorsDepth=f.depth/2;break;case 2:f.horizontalConnectorsDepth=f.depth-a/2}})}function y(){var a=N.lineLevelShift,b,c=0,f=0;var d=8*K.linesWidth;switch(K.arrowsDirection){case 1:c=d;f=0;break;case 2:c=0,f=d}d=0;for(b=J.length;d<b;d+=1){var e=J[d];var h=k.getConnectorsStacksSizes(d);a+=e.setShift(a,D(e.actualVisibility),f,c,h.parentsStackSize)}}function D(a){var b=0;switch(a){case 1:b=
N.normalLevelShift;break;case 2:b=N.dotLevelShift;break;case 3:case 4:b=N.lineLevelShift}return b}function B(){var a;var b=0;for(a=J.length;b<a;b+=1)J[b].currentOffset=0;H.loopPostOrder(this,function(a,b,c,d){c=C[a];var f=c.actualVisibility;d=G.getLevelIndex(a);d=J[d];f=W[0===f?d.currentvisibility:f]/2;var e=8*K.linesWidth;c.leftPadding=f+(0<d.currentOffset?f*b.relationDegree*N.cousinsIntervalMultiplier:0);c.rightPadding=f;0!=K.arrowsDirection&&(b.connectorPlacement&8&&(c.leftPadding+=e),b.connectorPlacement&
2&&(c.rightPadding+=e));c.offset=d.currentOffset+c.leftPadding;d.currentOffset=c.offset+c.actualSize.width+c.rightPadding;if(H.hasChildren(a))if(a=F(b),0<a)A(b,a);else if(0>a){a=-a;x(b,a);var h=null;var g={};var m=null;c=H.parent(b.id);if(null!==c&&(H.loopChildrenReversed(this,c.id,function(a,c,d){if(c===b)h=[];else if(null!==h){a=null;d=[];var f;var e=L[c.id];void 0===e&&(e=[]);e=e.slice();e.splice(0,0,c.id);var k=0;for(f=e.length;k<f;k+=1){var q=C[e[k]];d[k]=q.offset+q.actualSize.width+q.rightPadding}e=
[];k=I[b.id];void 0===k&&(k=[]);k=k.slice();k.splice(0,0,b.id);f=0;for(q=k.length;f<q;f+=1){var n=C[k[f]];e[f]=n.offset-n.leftPadding}k=Math.min(d.length,e.length);for(f=0;f<k&&!(q=e[f]-d[f],a=null!==a?Math.min(a,q):q,0>=q);f+=1);l=Math.floor(a);g[c.id]=l;if(0<l)h.splice(0,0,c);else return m=c,!0}}),0<h.length)){d=null;if(null!==m)for(e=[m],e=e.concat(h),e.push(b),d=[[m]],c=1,f=e.length;c<f;c+=1){var k=e[c-1];var q=e[c];2==k.gravity||1==q.gravity?d[d.length-1].push(q):d.push([q])}else d=[h.slice(0)],
d[d.length-1].push(b);if(0<d.length)for(h=d[d.length-1],c=h.length-2;0<=c;--c){q=h[c];var l=g[q.id];a=Math.min(l,a);x(q,a);A(q,a)}e=a/(d.length-1);for(f=d.length-2;0<f;--f)for(k=d[f],c=k.length-1;0<=c;--c)q=k[c],l=g[q.id],a=Math.min(f*e,Math.min(l,a)),x(q,a),A(q,a)}}})}function F(a){var b=C[a.id];b=b.offset+b.actualSize.width/2;var c=null;if(null===a.visualAggregatorId){var d=null;H.loopChildren(this,a.id,function(a,b,c){d=b;if(d.connectorPlacement&1)return!0});var f=C[d.id];var e=null;H.loopChildrenReversed(this,
a.id,function(a,b,c){e=b;if(e.connectorPlacement&1)return!0});a=C[e.id];switch(M.horizontalAlignment){case 1:c=f.offset+f.actualSize.width/2;break;case 2:c=a.offset+a.actualSize.width/2;break;case 0:c=(f.offset+a.offset+a.actualSize.width)/2}}else a=C[a.visualAggregatorId],c=a.offset+a.actualSize.width/2;return b-c}function x(a,b){var c=C[a.id];c.offset+=b;a=J[G.getLevelIndex(a.id)];a.currentOffset=Math.max(a.currentOffset,c.offset+c.actualSize.width+c.rightPadding)}function A(a,b){var c,d;H.loopLevels(this,
a.id,function(a,f,e){c=C[a];c.offset+=b;d=J[G.getLevelIndex(a)];d.currentOffset=Math.max(d.currentOffset,c.offset+c.actualSize.width);return!0})}function E(){var b=null;G.loopLevels(this,function(c,d){var f=J[c];G.loopLevelItems(this,c,function(c,d,e){c=C[c];d=c.actualSize;var h=b;e=0;switch(c.actualVisibility){case 1:switch(N.verticalAlignment){case 0:e=0;break;case 1:e=(f.depth-d.height)/2;break;case 2:e=f.depth-d.height}break;case 2:case 3:case 4:e=f.horizontalConnectorsDepth-d.height/2}d=new a.common.Rect(c.offset,
f.shift+e,d.width,d.height);e=f.shift+f.horizontalConnectorsDepth;var g=null!=h?h.shift+h.connectorShift:null;h=null!=h?h.levelSpace/2:null;var m=f.shift+f.connectorShift;var k=f.levelSpace/2;c.actualPosition=d;c.horizontalConnectorsShift=e;c.topConnectorShift=g;c.topConnectorInterval=h;c.bottomConnectorShift=m;c.bottomConnectorInterval=k});b=f})}var C={};var z=null;var G,J,H,I,L,O,K,M,N,V,W;return{process:function(){var m=N=d.getOptions();var l=[];l[1]=m.normalItemsInterval;l[2]=m.dotItemsInterval;
l[3]=m.lineItemsInterval;l[4]=m.lineItemsInterval;W=l;O=e.getOptions();K=g.getOptions();M=f.getOptions();G=k.getTreeLevels();H=h.getVisualTree();I=h.getLeftMargins();L=h.getRightMargins();J=[];C={};m=c.getOptimalPanelSize();V=b.getOptions();m.scale(1/V.scale);m=new a.common.Rect(0,0,m.width,m.height);z=q(m);E();return!0},getItemsPositions:function(){return C},getItemPosition:function(a){return C[a]},getContentSize:function(){return z}}};a.orgdiagram.OrgTreeTask=function(c){var b;function e(c){var f,
e=0,l=a.common.tree();var n=0;for(f=c.length;n<f;n+=1){var m=c[n];if(null!=m.id){var q=new a.orgdiagram.OrgItem(m);var p=parseInt(m.id,10);e=Math.max(isNaN(p)?0:p,e);l.add(m.parent,q.id,q)}}e+=1;c=new a.orgdiagram.ItemConfig;c.id=e;c.title="internal root";c.isVisible=!1;c.isActive=!1;var r=new a.orgdiagram.OrgItem(c);r.hideParentConnection=!0;r.hideChildrenConnection=!0;l.add(null,r.id,r);l.loopLevels(this,function(a,b,c){if(0<c)return l.BREAK;r.id!=a&&(l.adopt(r.id,a),b.itemType=0)});d(l);b=l;g=
e;return!0}function d(a){a.loopLevels(this,function(b,c,d){var f=!0;if(c.isVisible)return a.SKIP;a.loopChildren(this,b,function(a,b,c){if(0!=b.itemType)return f=!1,!0});if(f)c.hideChildrenConnection=!0,a.loopChildren(this,b,function(a,b,c){b.hideParentConnection=!0});else return a.SKIP})}var g=b=null;return{process:function(){e(c.getItems());return!0},getOrgTree:function(){return b},getMaximumId:function(){return g}}};a.orgdiagram.PaletteManagerTask=function(c,b){var e;return{process:function(){var d=
[];null!=b&&(d=b.getOptions().linesPalette);e=new a.common.PaletteManager(c.getOptions(),d);return!0},getPaletteManager:function(){return e}}};a.orgdiagram.VisualTreeLevelsTask=function(c,b){function e(b,c,d,f,e){var h,g,m,k,q,l,n,D={},B,F,x;d.loopLevels(this,function(e,p){p=new a.orgdiagram.TreeLevelConnectorStackSize;c[e]=p;n=[];d.loopLevelItems(this,e,function(c,e,h){h=[];if(!D.hasOwnProperty(c)&&(e.connectorPlacement&4&&h.push(c),h=h.concat(e.partners),0<h.length)){l=new a.common.VerticalConnectorBundle(h,
[]);for(var g=0,m=h.length;g<m;g+=1)D[h[g]]=l;f.loopChildren(this,c,function(a,b,c){b.connectorPlacement&1&&l.toItems.push(a)});1<h.length&&n.push(l);(1<l.fromItems.length||0<l.toItems.length)&&b.push(l)}e.connectorPlacement&8&&(l=new a.common.HorizontalConnectorBundle(c,d.getPrevItem(c)),b.push(l));e.connectorPlacement&2&&(l=new a.common.HorizontalConnectorBundle(c,d.getNextItem(c)),b.push(l))});if(0<n.length){x=a.common.pile();h=0;for(g=n.length;h<g;h+=1){l=n[h];F=B=null;m=0;for(k=l.fromItems.length;m<
k;m+=1)q=d.getItemPosition(l.fromItems[m]),B=null!=B?Math.min(B,q):q,F=null!=F?Math.max(F,q):q;x.add(B,F,l)}p.parentsStackSize=x.resolve(this,function(a,b,c,d,f){c.fromOffset=d+1;c.fromStackSize=f})}})}var d=null,g=null,f=null,h=new a.orgdiagram.TreeLevelConnectorStackSize;return{process:function(){var b=c.getVisualTree();d=a.common.TreeLevels();b.loopLevels(this,function(a,b,c){d.addItem(c,a,b)});g=[];f=[];e(g,f,d,b);return!0},getTreeLevels:function(){return d},getBundles:function(){return g},getConnectorsStacksSizes:function(a){return f[a]||
h},getNestedLayoutBottomConnectorIds:function(){return{}}}};a.orgdiagram.VisualTreeTask=function(c,b,e,d){function g(a,b,c){var e,g,m,q,w,x,I,L,A,K,M,N,F,B={},D,P={},U,Q,R,T={},S;a.loopPostOrder(this,function(a,b,c,d){b.hasVisibleChildren=b.isVisible||b.hasVisibleChildren;null!=d&&(d.hasVisibleChildren=d.hasVisibleChildren||b.hasVisibleChildren)});a.loopLevels(this,function(f,m,k){var l;if(!d&&!m.hasVisibleChildren)return a.SKIP;var K=c.node(f);K||(K=u({visibility:4,connectorPlacement:0,parentId:null,
actualItemType:0},m),c.add(null,f,K));R=Q=0;null!=(x=c.indexOf(f))&&(Q=x,R=c.countSiblings(f)-x-1);var I=[];a.loopChildren(this,f,function(a,b,h){if(d||b.hasVisibleChildren){e=u({parentId:f,actualItemType:b.itemType},b);switch(K.actualItemType){case 7:case 8:case 6:switch(e.actualItemType){case 7:case 8:case 6:e.actualItemType=2;break;case 0:e.actualItemType=1}}switch(e.actualItemType){case 5:v(K,e),e.connectorPlacement=5,l=u({visibility:4}),c.add(l.id,e.id,e),e=l;case 8:case 2:g=c.parent(f);if(K.connectorPlacement&
2)q=p(c,y.navigationFamily,K),c.add(g.id,e.id,e,q+1),e.connectorPlacement=6,e.gravity=2;else if(K.connectorPlacement&8)w=r(c,y.navigationFamily,K),c.add(g.id,e.id,e,w),e.connectorPlacement=12,e.gravity=1;else switch(b.adviserPlacementType){case 2:q=p(c,y.navigationFamily,K);c.add(g.id,e.id,e,q+1);e.connectorPlacement=6;e.gravity=2;break;default:w=r(c,y.navigationFamily,K),c.add(g.id,e.id,e,w),e.connectorPlacement=12,e.gravity=1}switch(e.actualItemType){case 8:null!=K.parentId?v(c.node(K.parentId),
e):v(K,e,!0);break;case 2:v(K,e)}break;case 4:v(K,e),e.connectorPlacement=5,l=u({visibility:4}),c.add(l.id,e.id,e),e=l;case 1:a=K;var m=b.levelOffset||0,k=null;h=!1;for(var n=0;n<=m;){k=null==k?a:c.node(k.visualAggregatorId);if(null==k.visualAggregatorId){var t=u({visibility:4,visualAggregatorId:null,connectorPlacement:h?0:5});c.insert(k.id,t.id,t);k.visualAggregatorId=t.id}n+=1}a=k;switch(b.adviserPlacementType){case 2:c.add(a.id,e.id,e,0);e.connectorPlacement=6;e.gravity=2;break;default:c.add(a.id,
e.id,e),e.connectorPlacement=12,e.gravity=1}1==e.actualItemType&&v(K,e);break;case 0:b=b.levelOffset||0;null==I[b]?I[b]=[e]:I[b].push(e);v(K,e);break;case 7:case 6:g=c.parent(f);if(K.connectorPlacement&2)c.add(g.id,e.id,e,Q),e.connectorPlacement=6,e.gravity=2;else if(K.connectorPlacement&8)c.add(g.id,e.id,e,c.countChildren(g.id)-R),e.connectorPlacement=12,e.gravity=1;else{switch(b.adviserPlacementType){case 2:c.add(g.id,e.id,e,Q);e.gravity=2;break;default:c.add(g.id,e.id,e,c.countChildren(g.id)-R),
e.gravity=1}switch(e.actualItemType){case 6:e.connectorPlacement=5;break;case 7:e.connectorPlacement=4}}null!=K.parentId?v(c.node(K.parentId),e):v(K,e,!0)}}});switch(K.actualItemType){case 7:case 8:case 6:break;default:S=[],null!=(g=c.parent(f))&&c.loopChildrenRange(this,g.id,Q,c.countChildren(g.id)-R,function(b,c,d){if(c.id==f)S.push(c);else switch(c.actualItemType){case 7:case 8:case 6:a.parentid(c.id)==f&&S.push(c)}}),1<S.length&&(T[f]=S)}B[f]=[];P[f]=[];k=[];if(0<I.length){g=h(c,K);for(var A=
0;A<I.length-1;A+=1){var M=I[A];if(null!=M){var z=t(c,g,4==K.visibility&&0===K.connectorPlacement);k.push([z]);var E=0;switch(b.horizontalAlignment){case 0:E=Math.ceil(M.length/2)-1;break;case 1:E=-1;break;case 2:E=M.length-1}for(x=E;0<=x;--x)L=M[x],c.add(g.id,L.id,L,0),L.connectorPlacement=5,L.gravity=2;for(x=E+1;x<M.length;x+=1)L=M[x],c.add(g.id,L.id,L),L.connectorPlacement=5,L.gravity=1;g=z}}n(a,c,b,K,I[I.length-1],m.childrenPlacementType,B[f],P[f]);B[f]=B[f].concat(k);P[f]=P[f].concat(I.slice(0,
I.length-1))}});a.loopPostOrder(this,function(a,d,e,h){d=c.node(a);var g=null!=T[e];if(null!=d){e=P[a];var q=B[a];if(null!=h){var n=g;switch(h.placeAssistantsAboveChildren){case 0:b.placeAssistantsAboveChildren&&(n=!0);break;case 1:n=!0}if(n&&(M=k(c,d),0<M&&(d.visualDepth=M+1,null!==d.visualAggregatorId)))for(m=c.node(d.visualAggregatorId),n=c.hasChildren(m.id),x=0;x<M-1;x+=1)m=t(c,m,!n)}if(null!=h){n=g;switch(h.placeAdvisersAboveChildren){case 0:b.placeAdvisersAboveChildren&&(n=!0);break;case 1:n=
!0}if(n){h=0;g=c.parent(d.id);var p,r;if(null!==g){n=c.indexOf(d.id);for(p=1;null!=(r=c.getChild(g.id,n+p));)if(r.connectorPlacement&8)h=Math.max(h,l(c,r)),p+=1;else break;for(p=1;null!=(r=c.getChild(g.id,n-p));)if(r.connectorPlacement&2)h=Math.max(h,l(c,r)),p+=1;else break}M=h;if(1<M)for(d.visualDepth+=M-1,n=c.hasChildren(a),m=d,x=0;x<M-1;x+=1)m=t(c,m,!n)}}N=[];x=0;for(I=e.length;x<I;x+=1)for(U=e[x],A=N[x]=0,K=U.length;A<K;A+=1)N[x]=Math.max(N[x],l(c,U[A]));x=0;for(I=N.length;x<I;x+=1)if(F=N[x],
1<F)for(A=0,K=q[x].length;A<K;A+=1)if(D=q[x][A],c.hasChildren(D.id))for(M=F;1<M;)D=t(c,D,!1),--M;null!=T[a]&&f(c,d,T[a])}})}function f(a,b,c){var d,f=0,e=[],g;var m=0;for(d=c.length;m<d;m+=1){var k=c[m];f=Math.max(f,k.visualDepth)}m=0;for(d=c.length;m<d;m+=1){k=c[m];var q=h(a,k);var l=1;for(g=k;null!=g.visualAggregatorId;)g=a.node(g.visualAggregatorId),g.connectorPlacement=5,l+=1;for(;l<f;)q=t(a,q,!1),l+=1;e.push(h(a,q).id)}g=h(a,b);if(a.hasChildren(g.id)){q=c[Math.floor(c.length/2)];if(1<c.length&&
0===c.length%2)for(m=a.parent(q.id),d=p(a,y.navigationFamily,q),l=a.getChild(m.id,d).gravity||a.getChild(m.id,d+1).gravity,q=u({visibility:4,connectorPlacement:q.connectorPlacement&10,gravity:l}),a.add(m.id,q.id,q,d+1),l=1;l<f;)q=t(a,q,!1),q.connectorPlacement=0,l+=1;m=0;for(d=c.length;m<d;m+=1)k=c[m],y.navigationFamily.loopChildren(this,b.id,function(a,c,d){switch(c.actualItemType){case 5:case 2:case 4:case 1:break;default:b.id!=k.id&&v(k,c)}return y.navigationFamily.SKIP});q=h(a,q);a.moveChildren(g.id,
q.id)}q.partners=e}function h(a,b){for(;null!=b.visualAggregatorId;)b=a.node(b.visualAggregatorId);return b}function k(a,b){var c=0;null!=b.visualAggregatorId&&a.loopLevels(this,b.id,function(d,f,e){if(b.visualAggregatorId==d)return a.SKIP;c=e+1});return c}function l(a,b){var c=0;a.loopLevels(this,b.id,function(a,b,d){c=d+1});return c+1}function n(a,b,c,d,f,e,g,k){var l,n,p,r=4==d.visibility&&0===d.connectorPlacement;switch(c.horizontalAlignment){case 0:case 1:var t=3;break;case 2:t=2}0===e&&(e=q(a,
d)?0===c.leavesPlacementType?3:c.leavesPlacementType:0===c.childrenPlacementType?2:c.childrenPlacementType);d=h(b,d);3==e&&3>f.length&&(e=2);switch(e){case 2:e=0;for(l=f.length;e<l;e+=1)c=f[e],g=a.node(c.id),b.add(d.id,c.id,c),c.connectorPlacement=(g.hideParentConnection?0:1)|(g.hideChildrenConnection?0:4),0===e&&(c.relationDegree=1);break;case 3:e=Math.min(c.maximumColumnsInMatrix,Math.ceil(Math.sqrt(f.length)));l=Math.ceil(f.length/e);var v=Math.ceil(e/2);for(n=0;n<v;n+=1)for(a=d,p=0;p<l;p+=1){t=
m(f,2*n,p,e);c=m(f,2*n+1,p,e);void 0===g[p]&&(g[p]=[],k[p]=[]);null!==t&&(0===n&&(t.relationDegree=1),b.add(a.id,t.id,t),t.connectorPlacement=(r?0:2)|4,t.gravity=2,k[p].push(t));if(null!==t||null!==c){var w=u({visibility:4,connectorPlacement:r?0:5});b.add(a.id,w.id,w);g[p].push(w)}null!==c&&(b.add(a.id,c.id,c),c.connectorPlacement=(r?0:8)|4,c.gravity=1,k[p].push(c));a=w}2<e&&(d.visualAggregatorId=null);break;case 1:e=0;for(l=f.length;e<l;e+=1){c=f[e];w=u({visibility:4,connectorPlacement:r?0:5});switch(t){case 2:b.add(d.id,
c.id,c);b.add(d.id,w.id,w);c.connectorPlacement=(r?0:2)|4;c.gravity=2;break;case 3:b.add(d.id,w.id,w),b.add(d.id,c.id,c),c.connectorPlacement=(r?0:8)|4,c.gravity=1}g[e]=[w];k[e]=[c];d=w}break;default:throw"Children placement is undefined!";}}function m(a,b,c,d){0<d%2&&(b===d-1?b=a.length:b===d&&(b=d-1));b=c*d+b;return b>a.length-1?null:a[b]}function q(a,b){var c=!1,d=!0;a.loopChildren(this,b.id,function(b,f,e){c=!0;if(0===f.itemType&&a.hasChildren(b))return d=!1,!0});return c&&d}function p(a,b,c){var d=
null,f={},e=a.parent(c.id);a.loopChildrenReversed(this,e.id,function(a,e,h){if(null===d)a==c.id&&(d=-1,f[c.id]=!0,b.loopChildren(this,c.id,function(a,c,d){if(0<d)return b.BREAK;f[a]=!0}));else if(f.hasOwnProperty(a))b.loopChildren(this,e.id,function(a,c,d){if(0<d)return b.BREAK;f[a]=!0});else return d=h,!0});return d}function r(a,b,c){var d=null,f={},e=a.parent(c.id);a.loopChildren(this,e.id,function(a,e,h,g){if(null===d)a==c.id&&(d=g+1,f[c.id]=!0,b.loopChildren(this,c.id,function(a,c,d){if(0<d)return b.BREAK;
f[a]=!0}));else if(f.hasOwnProperty(a))b.loopChildren(this,a,function(a,c,d){if(0<d)return b.BREAK;f[a]=!0});else return d=h,!0});return d}function t(a,b,c){c=u({visibility:4,visualAggregatorId:b.visualAggregatorId,connectorPlacement:4==b.visibility&&0===b.connectorPlacement||c?0:5});a.insert(b.id,c.id,c);b.visualAggregatorId=c.id;return c}function u(b,c){var d=new a.orgdiagram.TreeItem,f;for(f in b)b.hasOwnProperty(f)&&(d[f]=b[f]);null!=c?(d.id=c.id,d.visibility=c.isVisible?0:4):(D+=1,d.id=D);return d}
function v(a,b,c){var d=[];c||4==a.visibility||!B.hasOwnProperty(a.id)?(c||d.push(a.id),y.navigationFamily.loopParents(this,a.id,function(a,b,c){if(4!=b.visibility&&(d.push(a),B.hasOwnProperty(a)))return y.navigationFamily.SKIP})):d.push(a.id);null!=y.navigationFamily.node(b.id)?y.navigationFamily.adopt(d,b.id):y.navigationFamily.add(d,b.id,b)}function w(a,b,c){a.loop(this,function(a,d){b[a]=[];c[a]=[]});a.loopPostOrder(this,function(a,d,f,e){d=b[f];e=c[f];var h=b[a],g=c[a],m;if(null!=f){d[0]||(d[0]=
a);f=0;for(m=h.length;f<m;f+=1)d[f+1]||(d[f+1]=h[f]);e[0]=a;f=0;for(m=g.length;f<m;f+=1)e[f+1]=g[f]}})}var y={visualTree:null,leftMargins:{},rightMargins:{},navigationFamily:null},D,B;return{process:function(){var d=c.getOrgTree(),f=e.getOptions();B=null!=b?b.getActiveItems():{};y.visualTree=a.common.tree();y.navigationFamily=a.common.family();D=c.getMaximumId();d.hasNodes()&&g(d,f,y.visualTree);y.leftMargins={};y.rightMargins={};w(y.visualTree,y.leftMargins,y.rightMargins);return!0},getVisualTree:function(){return y.visualTree},
getLogicalFamily:function(){return y.navigationFamily},getConnectionsFamily:function(){return y.connectionsFamily},getLeftMargins:function(){return y.leftMargins},getRightMargins:function(){return y.rightMargins}}};a.common.AnnotationLabelTemplate=function(){var c=["div",{type:"checkbox",name:"checkbox","class":["bp-item","bp-corner-all","bp-connector-label"]}];return{template:function(){return c},getHashCode:function(){return"defaultAnnotationLabelTemplate"},render:function(b,c){b=c.context;a.common.isArray(b.label)?
(c.element.innerHTML="",c.element.appendChild(a.common.JsonML.toHTML(b.label))):c.element.innerHTML=b.label}}};a.common.ButtonsTemplate=function(c){var b=["div",{style:{position:"absolute"}}];return{template:function(){return b},getHashCode:function(){return"defaultButtonsTemplate"},render:function(b,c){b=0;var d=c.buttons,f;switch(c.renderingMode){case 0:for(f=0;f<d.length;f+=1){var e=d[f];var k=["button",{style:{position:"absolute",top:b+"px",left:"0px"},"class":["orgdiagrambutton","bp-button"],
"data-buttonname":e.name},["span",{style:{width:e.size.width+"px",height:e.size.height+"px"},"class":["bp-icon",e.icon]}]];c.element.appendChild(a.common.JsonML.toHTML(k));b+=10+e.size.height}}}}};a.common.CheckBoxTemplate=function(a){var b=["div",["label",["nobr",["input",{type:"checkbox",name:"checkbox","class":"bp-selectioncheckbox"}],"\u00a0",["span",{name:"selectiontext","class":"bp-selectiontext"},a]]]];return{template:function(){return b},getHashCode:function(){return"defaultCheckBoxTemplate"},
render:function(a,b){a=b.element.firstChild.firstChild.firstChild;a.checked=b.isSelected;a.setAttribute("data-id",b.id);b.element.firstChild.firstChild.childNodes[2].setAttribute("data-id",b.id)}}};a.common.CursorTemplate=function(a,b){var c=["div",{style:{width:b.itemSize.width+b.cursorPadding.left+b.cursorPadding.right+"px",height:b.itemSize.height+b.cursorPadding.top+b.cursorPadding.bottom+"px",borderWidth:b.cursorBorderWidth+"px"},"class":["bp-item","bp-corner-all","bp-cursor-frame"]}];return{template:function(){return c},
getHashCode:function(){return"defaultCursorTemplate"},render:function(a,b){}}};a.common.DotHighlightTemplate=function(a,b){var c=function(a){var b=a.minimizedItemCornerRadius;null==b&&(b=Math.max(a.highlightPadding.left+a.minimizedItemSize.width+a.highlightPadding.right,a.highlightPadding.top+a.minimizedItemSize.height+a.highlightPadding.bottom)+a.highlightBorderWidth);return["div",{style:{borderWidth:a.highlightBorderWidth+"px",MozBorderRadius:b+"px",WebkitBorderRadius:b+"px","-khtml-border-radius":b+
"px",borderRadius:b+"px"},"class":["bp-item","bp-highlight-dot-frame"]}]}(b);return{template:function(){return c},getHashCode:function(){return"defaultDotHighlightTemplate"},render:function(a,b){}}};a.common.GroupTitleTemplate=function(c){var b=["div",{style:{fontSize:c.groupTitleFontSize,fontFamily:c.groupTitleFontFamily,fontWeight:c.groupTitleFontWeight,fontStyle:c.groupTitleFontStyle},"class":["bp-item","bp-corner-all","bp-grouptitle-frame"]},function(a,b,g){var d="";switch(a){case 1:d="rotate(-90deg)";
break;case 2:d="rotate(90deg)"}a=c.groupTitleFontSize;var e=c.groupTitleFontFamily,k=c.groupTitleFontWeight,l=c.groupTitleFontStyle,n=null;switch(b){case 0:n="center";break;case 1:n="left";break;case 2:n="right"}b={fontSize:a,fontFamily:e,fontWeight:k,fontStyle:l,position:"absolute",padding:0,margin:0,textAlign:n,lineHeight:1,"-webkit-transform-origin":"center center","-moz-transform-origin":"center center","-o-transform-origin":"center center","-ms-transform-origin":"center center","-webkit-transform":d,
"-moz-transform":d,"-o-transform":d,"-ms-transform":d,transform:d};switch(g){case 0:g=["div",{style:b,"class":["bp-title-content","bp-item","bp-corner-all"]}];break;default:b.borderCollapse="collapse";d=null;switch(g){case 1:d="middle";break;case 0:d="top";break;case 2:d="bottom"}g=["table",{style:b},["tbody",["tr",["td",{style:{verticalAlign:d,padding:0},"class":"bp-title-content"}]]]]}return g}(c.groupTitleOrientation,c.groupTitleHorizontalAlignment,c.groupTitleVerticalAlignment)];return{template:function(){return b},
getHashCode:function(){return"defaultGroupTitleTemplate"},render:function(b,d){var e=d.context;b=e.groupTitleColor||c.groupTitleColor;var f={},h=d.width,k=d.height;f.left=Math.round(h/2-k/2)+"px";f.top=Math.round(k/2-h/2)+"px";f.width=k+"px";f.height=h+"px";f.maxWidth=f.width;f.maxHeight=f.height;a.common.JsonML.applyStyles(d.element.firstChild,f);e=e.groupTitle||"";e=e.replace(/\n/g,"<br/>");switch(c.groupTitleVerticalAlignment){case 0:f=d.element.firstChild;break;default:f=d.element.firstChild.firstChild.firstChild.firstChild,
f.style.borderCollapse="collapse"}f.style.color=a.common.highestContrast(b,c.itemTitleSecondFontColor,c.itemTitleFirstFontColor);f.textContent=e;a.common.JsonML.applyStyles(d.element,{backgroundColor:b})}}};a.common.HighlightTemplate=function(a,b){var c=["div",{style:{borderWidth:b.highlightBorderWidth+"px"},"class":["bp-item","bp-corner-all","bp-highlight-frame"]}];return{template:function(){return c},getHashCode:function(){return"defaultHighlightTemplate"},render:function(a,b){}}};a.common.ItemTemplate=
function(c,b){var e=function(b){var c=new a.common.Size(b.itemSize);c.width-=2*b.itemBorderWidth;c.height-=2*b.itemBorderWidth;return["div",{style:{borderWidth:b.itemBorderWidth+"px"},"class":["bp-item","bp-corner-all","bt-item-frame"]},["div",{name:"titleBackground",style:{top:"2px",left:"2px",width:c.width-4+"px",height:"18px"},"class":["bp-item","bp-corner-all","bp-title-frame"]},["div",{name:"title",style:{top:"1px",left:"4px",width:c.width-4-8+"px",height:"16px"},"class":["bp-item","bp-title"]}]],
["div",{name:"photoBorder",style:{top:"24px",left:"2px",width:"50px",height:"60px"},"class":["bp-item","bp-photo-frame"]},["img",{name:"photo",alt:"",style:{width:"50px",height:"60px"}}]],["div",{name:"description",style:{top:"24px",left:"56px",width:c.width-4-56+"px",height:"74px"},"class":["bp-item","bp-description"]}]]}(b);return{template:function(){return e},getHashCode:function(){return"defaultItemTemplate"},render:function(b,e){b=e.context;var d=null!=b.itemTitleColor?b.itemTitleColor:"#4169e1",
h=a.common.highestContrast(d,c.itemTitleSecondFontColor,c.itemTitleFirstFontColor),g=e.element;e=g.firstChild;var l=g.childNodes[1].firstChild,n=e.firstChild;g=g.childNodes[2];a.common.JsonML.applyStyles(e,{backgroundColor:d});l.src=b.image;l.alt=b.title;a.common.JsonML.applyStyles(n,{color:h});n.textContent=b.title;g.textContent=b.description}}};a.common.UserTemplate=function(c,b,e){var d=a.common.hashCode(JSON.stringify(b));return{template:function(){return b},getHashCode:function(){return d},render:function(b,
d){if(null!=e)e(b,d);else{var f=d.context,g=null!=f.itemTitleColor?f.itemTitleColor:"#4169e1",l=a.common.highestContrast(g,c.itemTitleSecondFontColor,c.itemTitleFirstFontColor);a.common.getElementsByName(this,d.element,"photo",function(a){a.src=f.image;a.alt=f.title});a.common.getElementsByName(this,d.element,"titleBackground",function(b){a.common.JsonML.applyStyles(b,{background:g})});a.common.getElementsByName(this,d.element,"title",function(b){a.common.JsonML.applyStyles(b,{color:l});b.textContent=
f.title});a.common.getElementsByName(this,d.element,"description",function(a){a.textContent=f.description})}}}};a.orgdiagram.BaseControl=function(c,b,e,d,g){function f(b,c){null==c&&(c=!0);switch(b){case 1:h(c,!1);break;case 2:z.layout.forceCenterOnCursor=!1;z.tasks.process("HighlightItemOptionTask",null,!1);z.graphics.end();break;default:t(z.layout),r(z.layout),p(z.layout,z.name),b=z.layout,b.mousePanel.addEventListener("mousemove",u),b.mousePanel.addEventListener("click",w),b.mousePanel.addEventListener("dblclick",
y),b.mousePanel.addEventListener("change",v),b.scrollPanel.addEventListener("keydown",D),b.scrollPanel.addEventListener("scroll",k),z.options.enablePanning&&a.common.isChrome()&&(b.scrollPanel.draggable=!0,b.scrollPanel.addEventListener("dragstart",B),b.scrollPanel.addEventListener("drag",x),b.scrollPanel.addEventListener("dragend",x),b.scrollPanel.addEventListener("dragover",F)),z.tasks=e(l,n,m,q,g),z.graphics=a.common.createGraphics(z.options.graphicsType,z.layout.element),z.graphics.debug=!1,h(!0,
!1)}}function h(b,c){z.layout.forceCenterOnCursor=b;z.tasks.process("OptionsTask",null,c);z.graphics.end();b&&(b=z.tasks.getTask("CenterOnCursorTask"),b=b.getPlaceholderOffset(),z.layout.scrollPanel.scrollLeft=b.x,z.layout.scrollPanel.scrollTop=b.y);b=a.common.getFixOfPixelALignment(z.layout.element);a.common.JsonML.applyStyles(z.layout.scrollPanel,{top:"0px",left:"0px",marginBottom:"0px",marginRight:"0px",marginLeft:b.width+"px",marginTop:b.height+"px"})}function k(a){null==O&&(O=window.setTimeout(function(){z.layout.forceCenterOnCursor=
!1;z.tasks.process("LayoutOptionsTask",null,!1);z.graphics.end();window.clearTimeout(O);O=null},200))}function l(){return z.options}function n(){return z.graphics}function m(){var b=z.layout,c=a.common.getInnerSize(b.element),d=new a.common.Point(b.scrollPanel.scrollLeft,b.scrollPanel.scrollTop);return{forceCenterOnCursor:b.forceCenterOnCursor,scrollPanelSize:c,placeholderOffset:d}}function q(b){var c=z.layout,d=new a.common.Size(b.contentSize);d.scale(1*b.scale);a.common.JsonML.applyStyles(c.mousePanel,
d.getCSS());a.common.JsonML.applyStyles(c.placeholder,b.contentSize.getCSS());var f="scale("+b.scale+","+b.scale+")";a.common.JsonML.applyStyles(c.placeholder,{"transform-origin":"0 0",transform:f,"-ms-transform":f,"-webkit-transform":f,"-o-transform":f,"-moz-transform":f});f=new a.common.Size(b.scrollPanelSize);b.autoSize&&(f=new a.common.Size(d.width+25,d.height+25),f.cropBySize(b.autoSizeMaximum),f.addSize(b.autoSizeMinimum),a.common.JsonML.applyStyles(c.element,f.getCSS()));a.common.JsonML.applyStyles(c.scrollPanel,
f.getCSS());return f}function p(b,d){var f=a.common.getInnerSize(b.element);f=new a.common.Rect(0,0,f.width,f.height);var e=new a.common.Rect(f),h=a.common.getFixOfPixelALignment(c);a.common.JsonML.appendDOM(b.element,a.common.JsonML.toHTML(["div",{tabindex:0,style:{position:"relative",overflow:"auto","-webkit-overflow-scrolling":"touch",top:"0px",left:"0px",width:f.width+"px",height:f.height+"px",padding:"0px",marginBottom:"0px",marginRight:"0px",marginLeft:h.width+"px",marginTop:h.height+"px"},
"class":d,$:function(a){b.scrollPanel=a}},["div",{style:a.common.mergeObjects({position:"absolute",overflow:"hidden"},e.getCSS()),"class":d,$:function(a){b.mousePanel=a}},["div",{style:a.common.mergeObjects({position:"absolute",overflow:"hidden"},e.getCSS()),"class":["placeholder",d],$:function(a){b.placeholder=a}},["div",{style:{position:"absolute",overflow:"visible",top:"0px",left:"0px",width:"0px",height:"0px"},"class":["calloutplaceholder",d],$:function(a){b.calloutPlaceholder=a}}]]]]))}function r(a){null!=
z.layout.scrollPanel&&(a=z.layout.scrollPanel.parentNode,null!=a&&a.removeChild(z.layout.scrollPanel))}function t(a){null!=a.mousePanel&&(a.mousePanel.removeEventListener("mousemove",u),a.mousePanel.removeEventListener("click",w),a.mousePanel.removeEventListener("dblclick",y),a.mousePanel.removeEventListener("change",v));null!=a.scrollPanel&&(a.scrollPanel.removeEventListener("keydown",D),a.scrollPanel.removeEventListener("scroll",k),a.scrollPanel.removeEventListener("dragstart",B),a.scrollPanel.removeEventListener("drag",
x),a.scrollPanel.removeEventListener("dragend",x),a.scrollPanel.removeEventListener("dragover",F))}function u(b){var c=a.common.getElementOffset(z.layout.mousePanel),d=b.pageX-c.left;c=b.pageY-c.top;var f=z.tasks.getTask("CreateTransformTask"),e=z.tasks.getTask("HighlightItemOptionTask");e.hasHighlightEnabled()&&(d=f.getTreeItemForMousePosition(d,c,e.getGravityRadius()),A(b,d))}function v(b){var c=b.target,f=c.getAttribute("data-id");if(null!=f){var e=(z.options.selectedItems||[]).slice(),h=d(z,null,
f,void 0),g=a.common.indexOf(e,f);C("onSelectionChanging",b,h);h.cancel||(0<=g?e.splice(g,1):e.push(f),z.options.selectedItems=e,0>g?c.setAttribute("checked","checked"):c.removeAttribute("checked"),C("onSelectionChanged",b,h))}}function w(b){var c=a.common.getElementOffset(z.layout.mousePanel),f=b.pageX-c.left,e=b.pageY-c.top,h=z.tasks.getTask("CreateTransformTask");c=z.tasks.getTask("CursorItemOptionTask");var g=z.tasks.getTask("HighlightItemOptionTask");f=h.getTreeItemForMousePosition(f,e,g.getGravityRadius());
e=b.target;null!==f&&(a.common.hasClass(e,z.name+"button")||a.common.hasClass(e.parentNode,z.name+"button")?(c=a.common.hasClass(e,z.name+"button")?e:e.parentNode,c=c.getAttribute("data-buttonname"),e=d(z,null,f,c),C("onButtonClick",b,e)):"checkbox"!==e.getAttribute("name")&&"selectiontext"!==e.getAttribute("name")&&(e=d(z,null,f,void 0),C("onMouseClick",b,e),!e.cancel&&c.hasCursorEnabled()&&(E(b,f),z.layout.scrollPanel.focus())))}function y(a){var b=z.tasks.getTask("HighlightItemTask").getHighlightTreeItem();
null!==b&&(b=d(z,null,b,void 0),C("onMouseDblClick",a,b))}function D(a){var b=z.tasks.getTask("HighlightItemTask"),c=z.tasks.getTask("HighlightItemOptionTask"),d=z.tasks.getTask("CursorItemTask"),f=z.tasks.getTask("CursorItemOptionTask"),e=z.tasks.getTask("AlignDiagramTask"),h=z.tasks.getTask("CreateTransformTask").getTransform(),g=null,m=null,k=z.layout;c.hasHighlightEnabled()&&f.hasCursorEnabled()?(g=b.getHighlightTreeItem(),null===g&&(g=d.getCursorTreeItem())):c.hasHighlightEnabled()?g=b.getHighlightTreeItem():
f.hasCursorEnabled()&&(g=d.getCursorTreeItem());if(null!=g){switch(a.which){case 13:f.hasCursorEnabled()&&(E(a,g),a.preventDefault(),k.scrollPanel.focus());break;case 40:m=1;break;case 38:m=0;break;case 37:m=2;break;case 39:m=3}if(null!=m){for(d=!1;!d;)d=!0,m=h.getOrientation(m),b=e.getNextItem(g,m),null!=b&&(a.preventDefault(),c.hasHighlightEnabled()?A(a,b):f.hasCursorEnabled()&&E(a,b));k.scrollPanel.focus()}}}function B(b){var c=z.layout.scrollPanel;G=new a.common.Point(b.clientX,b.clientY);J=new a.common.Point(c.scrollLeft,
c.scrollTop);I=I||new Image;b.dataTransfer.setDragImage(I,0,0)}function F(a){a.preventDefault();a.dataTransfer.dropEffect="move"}function x(b){H=new a.common.Point(J.x-(b.clientX-G.x),J.y-(b.clientY-G.y));null==L&&(L=window.setTimeout(function(){var a=z.layout.scrollPanel;a.scrollLeft=H.x;a.scrollTop=H.y;window.clearTimeout(L);L=null},50))}function A(a,b){var c=!0;if(null!==b){if(b!==z.options.highlightItem){var f=d(z,z.options.highlightItem,b,void 0);z.options.highlightItem=b;C("onHighlightChanging",
a,f);f.cancel?c=!1:(h(!1,!1),C("onHighlightChanged",a,f))}}else null!==z.options.highlightItem&&(f=d(z,z.options.highlightItem,null,void 0),z.options.highlightItem=null,C("onHighlightChanging",a,f),f.cancel?c=!1:(h(!1,!1),C("onHighlightChanged",a,f)));return c}function E(a,b){if(b!==z.options.cursorItem){var c=d(z,z.options.cursorItem,b,void 0);z.options.cursorItem=b;C("onCursorChanging",a,c);c.cancel||(h(!0,!1),C("onCursorChanged",a,c))}}function C(a,b,c){a=z.options[a];null!=a&&a(b,c)}var z={name:"orgdiagram",
options:b,tasks:null,graphics:null,mouse:null,layout:{element:c,scrollPanel:null,mousePanel:null,placeholder:null,calloutPlaceholder:null,forceCenterOnCursor:!0}},G,J,H,I,L,O=null;f();return{destroy:function(){t(z.layout);r(z.layout);z.tasks=null;z.graphics=null},setOptions:function(a){for(var b in a)a.hasOwnProperty(b)&&(z.options[b]=a[b])},getOptions:l,setOption:function(a,b){return z.options[a]=b},getOption:function(a){return z.options[a]},update:f}};a.orgdiagram.Control=function(c,b){return a.orgdiagram.BaseControl(c,
b,a.orgdiagram.TaskManagerFactory,a.orgdiagram.EventArgsFactory,{AnnotationLabelTemplate:a.common.AnnotationLabelTemplate,ButtonsTemplate:a.common.ButtonsTemplate,CheckBoxTemplate:a.common.CheckBoxTemplate,CursorTemplate:a.common.CursorTemplate,DotHighlightTemplate:a.common.DotHighlightTemplate,GroupTitleTemplate:a.common.GroupTitleTemplate,HighlightTemplate:a.common.HighlightTemplate,ItemTemplate:a.common.ItemTemplate,UserTemplate:a.common.UserTemplate,LabelAnnotationTemplate:a.common.LabelAnnotationTemplate})};
a.orgdiagram.EventArgsFactory=function(c,b,e,d){var g=new a.orgdiagram.EventArgs,f=c.tasks.getTask("CombinedContextsTask"),h=c.tasks.getTask("AlignDiagramTask");b=f.getConfig(b);var k=f.getConfig(e);b&&null!=b.id&&(g.oldContext=b);k&&null!=k.id&&(g.context=k,null!==k.parent&&(g.parentItem=f.getConfig(k.parent)),f=a.common.getElementOffset(c.layout.mousePanel),c=a.common.getElementOffset(c.layout.element),e=h.getItemPosition(e),g.position=(new a.common.Rect(e.actualPosition)).translate(f.left,f.top).translate(-c.left,
-c.top));null!=d&&(g.name=d);return g};a.orgdiagram.getProcessDiagramConfig=function(){var c=function(){};return a.orgdiagram.TaskManagerFactory(c,c,c).getProcessDiagramConfig()};a.orgdiagram.TaskManagerFactory=function(c,b,e,d,g){var f=new a.common.TaskManager;f.addDependency("options",c);f.addDependency("graphics",b);f.addDependency("getLayout",e);f.addDependency("setLayout",d);f.addDependency("templates",g);f.addDependency("defaultConfig",new a.orgdiagram.Config);f.addDependency("defaultItemConfig",
new a.orgdiagram.ItemConfig);f.addDependency("defaultTemplateConfig",new a.orgdiagram.TemplateConfig);f.addDependency("defaultButtonConfig",new a.orgdiagram.ButtonConfig);f.addDependency("defaultBackgroundAnnotationConfig",new a.orgdiagram.BackgroundAnnotationConfig);f.addDependency("defaultConnectorAnnotationConfig",new a.orgdiagram.ConnectorAnnotationConfig);f.addDependency("defaultHighlightPathAnnotationConfig",new a.orgdiagram.HighlightPathAnnotationConfig);f.addDependency("defaultShapeAnnotationConfig",
new a.orgdiagram.ShapeAnnotationConfig);f.addDependency("isFamilyChartMode",!1);f.addDependency("showElbowDots",!1);f.addDependency("null",null);f.addDependency("foreground",2);f.addDependency("background",1);f.addTask("OptionsTask",["options"],a.orgdiagram.OptionsTask,"#000000");f.addTask("LayoutOptionsTask",["getLayout","OptionsTask"],a.orgdiagram.LayoutOptionsTask,"#000000");f.addTask("CurrentControlSizeTask",["LayoutOptionsTask","ItemsSizesOptionTask"],a.orgdiagram.CurrentControlSizeTask,"#000000");
f.addTask("CurrentScrollPositionTask",["LayoutOptionsTask"],a.orgdiagram.CurrentScrollPositionTask,"#000000");f.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.CalloutOptionTask,"#000080");f.addTask("ConnectorsOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ConnectorsOptionTask,"#000080");f.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],a.orgdiagram.ItemsOptionTask,"#000080");f.addTask("ItemsContentOptionTask",["OptionsTask","defaultItemConfig"],
a.orgdiagram.ItemsContentOptionTask,"#000080");f.addTask("ItemsSizesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig","defaultButtonConfig"],a.orgdiagram.ItemsSizesOptionTask,"#000080");f.addTask("LabelsOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.LabelsOptionTask,"#000080");f.addTask("TemplatesOptionTask",["OptionsTask","defaultConfig","defaultButtonConfig","defaultTemplateConfig"],a.orgdiagram.TemplatesOptionTask,"#000080");f.addTask("OrientationOptionTask",
["OptionsTask","defaultConfig"],a.orgdiagram.OrientationOptionTask,"#000080");f.addTask("VisualTreeOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.VisualTreeOptionTask,"#000080");f.addTask("MinimizedItemsOptionTask",["OptionsTask"],a.orgdiagram.MinimizedItemsOptionTask,"#000080");f.addTask("CursorItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorItemOptionTask,"#000080");f.addTask("HighlightItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.HighlightItemOptionTask,
"#000080");f.addTask("SelectedItemsOptionTask",["OptionsTask"],a.orgdiagram.SelectedItemsOptionTask,"#000080");f.addTask("CursorSelectionPathModeOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorSelectionPathModeOptionTask,"#000080");f.addTask("SplitAnnotationsOptionTask",["OptionsTask"],a.orgdiagram.SplitAnnotationsOptionTask,"#00ffff");f.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],a.orgdiagram.ShapeAnnotationOptionTask,
"#000080");f.addTask("BackgroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","background"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");f.addTask("ForegroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","foreground"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");f.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig",
"background"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");f.addTask("ForegroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");f.addTask("BackgroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");f.addTask("BackgroundAnnotationOptionTask",["SplitAnnotationsOptionTask",
"defaultBackgroundAnnotationConfig"],a.orgdiagram.BackgroundAnnotationOptionTask,"#000080");f.addTask("ScaleOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ScaleOptionTask,"#000080");f.addTask("CombinedContextsTask",["ItemsContentOptionTask"],a.orgdiagram.CombinedContextsTask,"#00ffff");f.addTask("OrgTreeTask",["ItemsOptionTask"],a.orgdiagram.OrgTreeTask,"#ff0000");f.addTask("ReadTemplatesTask",["TemplatesOptionTask","templates"],a.orgdiagram.ReadTemplatesTask,"#00ffff");f.addTask("ActiveItemsTask",
["ItemsSizesOptionTask","ReadTemplatesTask"],a.orgdiagram.ActiveItemsTask,"#00ffff");f.addTask("ItemTemplateParamsTask",["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],a.orgdiagram.ItemTemplateParamsTask,"#00ffff");f.addTask("GroupTitleTemplateTask",["TemplatesOptionTask","templates"],a.orgdiagram.GroupTitleTemplateTask,"#00ffff");f.addTask("CheckBoxTemplateTask",["ItemsSizesOptionTask","templates"],a.orgdiagram.CheckBoxTemplateTask,"#00ffff");f.addTask("ButtonsTemplateTask",["ItemsSizesOptionTask",
"templates"],a.orgdiagram.ButtonsTemplateTask,"#00ffff");f.addTask("AnnotationLabelTemplateTask",["ItemsOptionTask","templates"],a.orgdiagram.AnnotationLabelTemplateTask,"#00ffff");f.addTask("VisualTreeTask",["OrgTreeTask","ActiveItemsTask","VisualTreeOptionTask","isFamilyChartMode"],a.orgdiagram.VisualTreeTask,"#ff0000");f.addTask("VisualTreeLevelsTask",["VisualTreeTask","ItemTemplateParamsTask"],a.orgdiagram.VisualTreeLevelsTask,"#ff0000");f.addTask("ConnectionsGraphTask",["graphics","CreateTransformTask",
"ConnectorsOptionTask","VisualTreeLevelsTask","AlignDiagramTask"],a.orgdiagram.ConnectionsGraphTask,"#00ffff");f.addTask("HighlightItemTask",["HighlightItemOptionTask","ActiveItemsTask"],a.orgdiagram.HighlightItemTask,"#00ffff");f.addTask("CursorItemTask",["CursorItemOptionTask","ActiveItemsTask"],a.orgdiagram.CursorItemTask,"#00ffff");f.addTask("CursorNeighboursTask",["CursorItemTask","VisualTreeTask"],a.orgdiagram.CursorNeighboursTask,"#00ffff");f.addTask("SelectedItemsTask",["SelectedItemsOptionTask"],
a.orgdiagram.SelectedItemsTask,"#00ffff");f.addTask("SelectionPathItemsTask",["VisualTreeTask","CursorItemTask","SelectedItemsTask","CursorSelectionPathModeOptionTask"],a.orgdiagram.SelectionPathItemsTask,"#00ffff");f.addTask("NormalVisibilityItemsByForegroundShapeAnnotationTask",["ForegroundShapeAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");f.addTask("NormalVisibilityItemsByBackgroundShapeAnnotationTask",["BackgroundShapeAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,
"#00ffff");f.addTask("NormalVisibilityItemsByBackgroundAnnotationTask",["BackgroundAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");f.addTask("NormalVisibilityItemsByForegroundHighlightPathAnnotationTask",["ForegroundHighlightPathAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,"#00ffff");f.addTask("NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask",["BackgroundHighlightPathAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByAnnotationTask,
"#00ffff");f.addTask("NormalVisibilityItemsByForegroundConnectorAnnotationTask",["ForegroundConnectorAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,"#00ffff");f.addTask("NormalVisibilityItemsByBackgroundConnectorAnnotationTask",["BackgroundConnectorAnnotationOptionTask"],a.orgdiagram.NormalVisibilityItemsByConnectorAnnotationTask,"#00ffff");f.addTask("CombinedNormalVisibilityItemsTask","ItemsSizesOptionTask CursorItemTask CursorNeighboursTask SelectedItemsTask SelectionPathItemsTask NormalVisibilityItemsByForegroundShapeAnnotationTask NormalVisibilityItemsByBackgroundShapeAnnotationTask NormalVisibilityItemsByBackgroundAnnotationTask NormalVisibilityItemsByForegroundHighlightPathAnnotationTask NormalVisibilityItemsByBackgroundHighlightPathAnnotationTask NormalVisibilityItemsByForegroundConnectorAnnotationTask NormalVisibilityItemsByBackgroundConnectorAnnotationTask".split(" "),
a.orgdiagram.CombinedNormalVisibilityItemsTask,"#00ffff");f.addTask("ItemsPositionsTask","CurrentControlSizeTask ScaleOptionTask OrientationOptionTask ItemsSizesOptionTask ConnectorsOptionTask VisualTreeOptionTask VisualTreeTask VisualTreeLevelsTask ItemTemplateParamsTask CursorItemTask CombinedNormalVisibilityItemsTask".split(" "),a.orgdiagram.ItemsPositionsTask,"#ff0000");f.addTask("AlignDiagramTask","OrientationOptionTask ItemsSizesOptionTask VisualTreeOptionTask ScaleOptionTask CurrentControlSizeTask ActiveItemsTask ItemsPositionsTask isFamilyChartMode".split(" "),
a.orgdiagram.AlignDiagramTask,"#ff0000");f.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],a.orgdiagram.CreateTransformTask,"#00ffff");f.addTask("CenterOnCursorTask","LayoutOptionsTask CurrentControlSizeTask CurrentScrollPositionTask CursorItemTask AlignDiagramTask CreateTransformTask ScaleOptionTask".split(" "),a.orgdiagram.CenterOnCursorTask,"#00ffff");f.addTask("PaletteManagerTask",["ConnectorsOptionTask","null"],a.orgdiagram.PaletteManagerTask,"#00ffff");f.addTask("ApplyLayoutChangesTask",
"graphics setLayout ItemsSizesOptionTask CurrentControlSizeTask ScaleOptionTask AlignDiagramTask".split(" "),a.orgdiagram.ApplyLayoutChangesTask,"#008000");f.addTask("DrawBackgroundAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask BackgroundAnnotationOptionTask VisualTreeTask AlignDiagramTask".split(" "),a.orgdiagram.DrawBackgroundAnnotationTask,"#008000");f.addTask("DrawBackgroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","ForegroundHighlightPathAnnotationOptionTask",
"ConnectionsGraphTask","foreground"],a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");f.addTask("DrawForegroundHighlightPathAnnotationTask",["graphics","ConnectorsOptionTask","BackgroundHighlightPathAnnotationOptionTask","ConnectionsGraphTask","background"],a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");f.addTask("DrawForegroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground".split(" "),
a.orgdiagram.DrawConnectorAnnotationTask,"#008000");f.addTask("DrawBackgroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background".split(" "),a.orgdiagram.DrawConnectorAnnotationTask,"#008000");f.addTask("DrawForegroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground".split(" "),
a.orgdiagram.DrawShapeAnnotationTask,"#008000");f.addTask("DrawBackgroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background".split(" "),a.orgdiagram.DrawShapeAnnotationTask,"#008000");f.addTask("DrawCursorTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask ItemTemplateParamsTask CursorItemTask SelectedItemsTask".split(" "),
a.orgdiagram.DrawCursorTask,"#008000");f.addTask("DrawHighlightTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask ItemTemplateParamsTask HighlightItemTask CursorItemTask SelectedItemsTask".split(" "),a.orgdiagram.DrawHighlightTask,"#008000");f.addTask("DrawHighlightAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask ScaleOptionTask CombinedContextsTask CalloutOptionTask ReadTemplatesTask AlignDiagramTask CenterOnCursorTask HighlightItemTask CursorItemTask SelectedItemsTask".split(" "),
a.orgdiagram.DrawHighlightAnnotationTask,"#008000");f.addTask("DrawTreeItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask ScaleOptionTask ItemsSizesOptionTask CombinedContextsTask AlignDiagramTask CenterOnCursorTask ItemTemplateParamsTask CursorItemTask SelectedItemsTask GroupTitleTemplateTask CheckBoxTemplateTask ButtonsTemplateTask".split(" "),a.orgdiagram.DrawTreeItemsTask,"#008000");f.addTask("DrawMinimizedItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask MinimizedItemsOptionTask ItemTemplateParamsTask AlignDiagramTask".split(" "),
a.orgdiagram.DrawMinimizedItemsTask,"#008000");f.addTask("DrawConnectorsTask",["graphics","ConnectionsGraphTask","ConnectorsOptionTask","showElbowDots","PaletteManagerTask"],a.orgdiagram.DrawConnectorsTask,"#008000");f.addTask("DrawItemLabelsTask",["graphics","CreateTransformTask","ApplyLayoutChangesTask","LabelsOptionTask","AlignDiagramTask"],a.orgdiagram.DrawItemLabelsTask,"#008000");return f};a.common.binarySearch=function(a,b,e,d){var c=null;e=e||0;var f=d||a.length-1;if(0<a.length){var h=a[e];
c={index:e,item:h};d=b(h,e);if(0<d){var k=Math.abs(d);h=a[f];d=b(h,f);if(0<=d)c={index:f,item:h};else for(d=Math.abs(d),k>d&&(k=d,c={index:f,item:h});e+1<f;){var l=Math.round((e+f)/2);h=a[l];d=b(h,l);if(0===d){c={index:l,item:h};break}else 0<d?e=l:f=l,d=Math.abs(d),k>d&&(k=d,c={index:l,item:h})}}}return c};a.common.family=function(c){function b(a,b,c,d){var f;if(null!=d&&(b=b[c],null!=b))for(f in b)if(b.hasOwnProperty(f)&&d.call(a,f,b[f]))break}function e(a,b){var c=!1;null!=C[a]&&null!=C[a][b]&&
(delete C[a][b],--z[a],delete G[b][a],--J[b],z[a]||(delete C[a],delete z[a]),G[b]||(delete G[b],delete J[b],null==A[null]&&(A[null]={},E[null]=0),A[null][b]=!0,E[null]+=1),c=!0);return c}function d(a,b){var c;if(null!=b)for(c in H)if(H.hasOwnProperty(c)&&b.call(a,c,H[c]))break}function g(a,c,d,f){for(var e,h,g={},m=0,k=!0;k;){e={};k=!1;for(h in d)if(d.hasOwnProperty(h)&&!g[h])switch(g[h]=!0,f.call(a,h,H[h],m)){case 1:e={};k=!1;break;case 2:break;default:b(this,c,h,function(a){g[a]||(k=e[a]=!0)})}d=
e;m+=1}}function f(a,b,c){null!=c&&null!=b&&null!=H[b]&&null!=C[b]&&g(a,C,C[b],c)}function h(a,b,c){null!=c&&null!=b&&null!=H[b]&&null!=G[b]&&g(a,G,G[b],c)}function k(a,c,d,f,e,h){var g;if(null!=h){c=[];var m={};for(q in H)H.hasOwnProperty(q)&&(m[q]=d[q]||0,m[q]||c.push(q));for(g=0;0<c.length;){var k=[];d=0;for(e=c.length;d<e;d+=1){var q=c[d];if(h.call(a,q,H[q],g)){k=[];break}g+=1;b(this,f,q,function(a){--m[a];0===m[a]&&k.push(a)})}c=k}}}function l(a,b){k(a,G,J,C,z,b)}function n(a,b){k(a,C,z,G,J,
b)}function m(a,b,c,d,f,e,h,g,m){var k=!1,q;if(null!=H[a]&&null!=h[a]){k=!0;if(m)for(m=0,q=b.length;m<q;m+=1){var l=b[m];if(null==H[l]||null==h[a][l])k=!1}if(k&&(null!=d&&(H[c]=d),null!=H[c]))for(f[c]||(f[c]={},e[c]=0),h[c]||(h[c]={},g[c]=0),f[c][a]||(f[c][a]=!0,e[c]+=1),h[a][c]||(h[a][c]=!0,g[a]+=1),m=0,q=b.length;m<q;m+=1)l=b[m],c!=l&&(null!=h[a][l]&&(delete h[a][l],--g[a]),null!=f[l][a]&&(delete f[l][a],--e[l]),f[l][c]||(f[l][c]=!0,e[l]+=1),h[c][l]||(h[c][l]=!0,g[c]+=1))}return k}function q(a,
b,c,d){return m(a,b,c,d,G,J,C,z,!0)}function p(){this.key=this.id="";this.children=[];this.childrenHash={};this.processed=!1}function r(a){this.items=[];this.difference=this.weight=0;0<arguments.length&&(this.difference=a)}function t(c){var d=a.common.graph(),f,e,h,g,m,k,q,l,n={};for(f in c)c.hasOwnProperty(f)&&b(this,C,f,function(a){if(!n.hasOwnProperty(a))for(n[a]=!0,e=[],b(this,G,a,function(a){e.push(a)}),h=0,m=e.length;h<m-1;h+=1)if(k=e[h],c.hasOwnProperty(k))for(g=h+1;g<m;g+=1)if(q=e[g],c.hasOwnProperty(q)){l=
Math.abs(c[k].children.length-c[q].children.length);var f=d.edge(k,q);null==f&&(f=new r(l),d.addEdge(k,q,f));f.items.push(a);f.weight+=1}});return d}function u(a,b){this.parentid=a;this.childid=b;this.key=a+","+b}function v(a,b,c){this.from=a;this.to=b;this.distance=0}function w(a){return z[a]||0}function y(a){return J[a]||0}function D(a){var b=null;a=C[a]||{};for(b in a)if(a.hasOwnProperty(b))return b;return null}function B(a){var b=null;a=G[a]||{};for(b in a)if(a.hasOwnProperty(b))return b;return null}
function F(a,b){this.parentid=a;this.childid=b;this.ids=[];this.nodes=[]}function x(){return a.common.family({roots:A,rootsCount:E,children:C,childrenCount:z,parents:G,parentsCount:J,nodes:H})}var A={},E={},C={},z={},G={},J={},H={};(function(b){a.common.isObject(b)&&(A=a.common.cloneObject(b.roots,!1),E=a.common.cloneObject(b.rootsCount,!0),C=a.common.cloneObject(b.children,!1),z=a.common.cloneObject(b.childrenCount,!0),G=a.common.cloneObject(b.parents,!1),J=a.common.cloneObject(b.parentsCount,!0),
H=a.common.cloneObject(b.nodes,!0))})(c);return{add:function(a,c,d){var f,e={};a&&0!==a.length||(a=[null]);if(null==H[c]&&null!=d){H[c]=d;d=0;for(f=a.length;d<f;d+=1){var h=a[d];null==e[h]&&h!=c&&(e[h]=!0,null!=H[h]?(null==G[c]&&(G[c]={},J[c]=0),G[c][h]||(G[c][h]=!0,J[c]+=1),null==C[h]&&(C[h]={},z[h]=0),C[h][c]||(C[h][c]=!0,z[h]+=1)):(null==A[h]&&(A[h]={},E[h]=0),A[h][c]||(A[h][c]=!0,E[h]+=1)))}null!=A[c]&&(C[c]=A[c],z[c]=E[c],delete A[c],delete E[c],b(this,C,c,function(a){null==G[a]&&(G[a]={},J[a]=
0);G[a][c]||(G[a][c]=!0,J[a]+=1)}))}},adopt:function(a,b){var c;if(null!=H[b]){var d=0;for(c=a.length;d<c;d+=1){var f=a[d];null==G[b]&&(G[b]={},J[b]=0);if(f!=b&&null!=H[f])G[b][f]||(G[b][f]=!0,J[b]+=1),null==C[f]&&(C[f]={},z[f]=0),C[f][b]||(C[f][b]=!0,z[f]+=1);else throw"Item cannot be parent of itself and parent should exist in the structure!";}}else throw"Child should be in hierarchy!";},bundleChildren:q,bundleParents:function(a,b,c,d){return m(a,b,c,d,C,z,G,J,!0)},optimizeReferences:function(c){var d=
{},e={},h={},g;var k=0;var q=10;if(null!=c){for(g in H)if(k+=1,H.hasOwnProperty(g)){var l=new p;b(this,C,g,function(a){l.children.push(a);l.childrenHash[a]=!0});l.children.sort();l.id=g;l.key=l.children.join(",");h[l.id]=l}for(q=Math.pow(10,k.toString().length);!a.common.isEmptyObject(h);){var n={};var r={};var u=t(h);for(g in h)if(h.hasOwnProperty(g)&&(k=h[g],!k.processed)){var w=u.getSpanningTree(g,function(a){return a.weight*q+q-a.difference});w.loopLevels(this,function(a,b,g){h[a].processed=!0;
w.loopChildren(this,a,function(g,k){var l=u.edge(a,g),q=null,t,w;h[g].processed=!0;if(1<l.weight){var v=l.items.join(",");if(d.hasOwnProperty(v))q=d[v];else{var y=c();H[y.id]=y;q=new p;q.id=y.id;q.key=v;v=0;for(t=l.items.length;v<t;v+=1){var x=l.items[v];q.children.push(x);q.childrenHash[x]=!0;r[x]=!0}q.children.sort();d[q.key]=q;e[q.id]=q;n[q.id]=q;r[q.id]=q;var B=q.children.slice(0);f(this,b.replacementItem||a,function(a,b,c){q.childrenHash[a]||null==e[a]||(w=!0,f(this,a,function(a,b,c){if(!q.childrenHash[a])return w=
!1,1;if(!r.hasOwnProperty(a))return 2}),w&&B.push(a));return 2});m(b.replacementItem||a,B,q.id,y,G,J,C,z,!1);1>=(z[a]||0)&&null==b.replacementItem&&(b.replacementItem=q.id)}q.id!=g&&(B=q.children.slice(0),f(this,k.replacementItem||g,function(a,b,c){null==e[a]||q.childrenHash[a]||(w=!0,f(this,a,function(a,b,c){return q.childrenHash[a]?(r.hasOwnProperty(a),2):(w=!1,1)}),w&&B.push(a));return 2}),m(k.replacementItem||g,B,q.id,null,G,J,C,z,!1),1>=(z[g]||0)&&null==k.replacementItem&&(k.replacementItem=
q.id))}})})}h=n}}},eliminateManyToMany:function(a){var c,d;for(c in C)C.hasOwnProperty(c)&&1<(z[c]||0)&&b(this,C,c,function(b){1<(J[b]||0)&&(d=a(),q(c,[b],d.id,d))})},groupBy:function(a,b,c){if(null!=c){var d={};for(g in H){var f=z[g]||0;if(1>=(J[g]||0)&&1>=f){f=B(g);var e=D(g),h=f+" * "+e;d.hasOwnProperty(h)||(d[h]=new F(f,e));d[h].ids.push(g);d[h].nodes.push(H[g])}}for(h in d)if(d.hasOwnProperty(h)){var g=d[h];if(g.ids.length>=b&&c.call(a,g.parentid,g.childid,g.ids,g.nodes))break}}},getPlanarFamily:function(b){var c=
new a.common.family,d,e;b.loopLevels(this,function(h,g){var m=new a.common.LinkedHashItems,k={},q={},l=[];b.loopLevelItems(this,h,function(a,c,d){f(this,a,function(c,d){var f=b.getItemPosition(c),e=new u(a,c);q[e.key]=e;var h=[];m.isEmpty()?m.add(f,[e]):(m.iterateBack(function(b,c){if(c<f)return m.insertAfter(c,f,[e]),!0;if(c==f)return b.push(e),!0;c=0;for(var d=b.length;c<d;c+=1){var g=b[c];g.parentid!=a&&h.push(g)}}),m.startKey()>f&&m.unshift(f,[e]));k[e.key]=h;c=0;for(d=h.length;c<d;c+=1)k[h[c].key].push(e);
return 2});1==w(a)&&(c=D(a),1==y(c)&&(c=new u(a,c),l.push(c.key)))});h=[];for(v in k){var n=k[v];g=n.length;null!=h[g]?h[g].push(v):h[g]=[v]}g={};h.unshift(l);for(var p=0,r=h.length;p<r;p+=1){var t=h[p];if(null!=t)for(d=0,e=t.length;d<e;d+=1){var v=t[d];if(!g.hasOwnProperty(v)){g[v]=!0;n=q[v];null==c.node(n.parentid)&&c.add(null,n.parentid,{});null==c.node(n.childid)?c.add([n.parentid],n.childid,{}):c.adopt([n.parentid],n.childid);n=k[v];v=0;for(var x=n.length;v<x;v+=1)g[n[v].key]=!0}}}});return c},
getFamilyWithoutGrandParentsRelations:function(){var c=new a.common.family,f={},e=[],h=0;for(l in G)G.hasOwnProperty(l)&&b(this,G,l,function(a){var b=f[l];null==b&&(b={},f[l]=b);b.hasOwnProperty(a)||(b=new v(l,a,h),e.push(b),f[l][a]=b)});for(;0<e.length;){var g=[];h+=1;for(var m=0,k=e.length;m<k;m+=1){var q=e[m];var l=q.to;G.hasOwnProperty(l)&&b(this,G,l,function(a){var b=f[q.from];null==b&&(b={},f[q.from]=b);if(b.hasOwnProperty(a))b[a].distance=h;else{var c=new v(l,a,h);g.push(c);b[a]=c}})}e=g}d(this,
function(a,d){var e=[];b(this,G,a,function(b){0===f[a][b].distance&&e.push(b)});c.add(e,a,d)});return c},getGraph:function(c,d){var f=a.common.graph(),e;for(e in C)C.hasOwnProperty(e)&&b(this,C,e,function(a){var b=f.edge(e,a);null==b&&(b=null==d?new r({}):d.call(c,e,a),f.addEdge(e,a,b))});return f},removeNode:function(a){null!=H[a]&&(b(this,C,a,function(b){delete G[b][a];--J[b];J[b]||(delete G[b],delete J[b],null==A[null]&&(A[null]={},E[null]=0),A[null][b]||(A[null][b]=!0,E[null]+=1))}),b(this,G,
a,function(b){delete C[b][a];--z[b];z[b]||(delete C[b],delete z[b])}),null!=A[null]&&null!=A[null][a]&&(delete A[null][a],--E[null],E[null]||(delete A[null],delete E[null])),delete C[a],delete z[a],delete G[a],delete J[a],delete H[a])},removeRelation:function(a,b){var c=!1;null!=H[a]&&null!=H[b]&&(c=e(a,b)||e(b,a));return c},removeChildRelation:function(a,b){var c=!1;null!=H[a]&&null!=H[b]&&(c=e(a,b));return c},node:function(a){return H[a]},loop:d,loopLevels:function(a,c,d){function f(){this.items=
{};this.minimumLevel=null}function e(a,b,c){var d=p[b];d||(d=new f,p[b]=d);d.addItemToLevel(a,c);u=null==u?c:Math.min(u,c);q[a]=c;m[a]=!0}var h=[],g={},m={},k=[],q={},p={},r,t,u=null;var v=c?l:n;var w,y,x;f.prototype.addItemToLevel=function(a,b){var c=this.items[b];c?c.push(a):(c=[a],this.items[b]=c);this.minimumLevel=null==this.minimumLevel?b:Math.min(this.minimumLevel,b)};if(null!=d){v(this,function(a,b,c){h.push(a);g[a]=c});v=0;for(w=h.length;v<w;v+=1){var B=h[v];if(null==m[B])for(k.push(B),e(B,
v,0);0<k.length;){var z=x=y=null;var D=!c;var A=[];B=0;for(t=k.length;B<t;B+=1){var E=k[B];var F=q[E];var I=!1;c?(b(this,G,E,function(a){if(!m[a]){I=!0;var b=g[a];if(null==y||!D||y<b||y==b&&z>F-1)y=b,x=a,z=F-1,D=!0}}),b(this,C,E,function(a){if(!m[a]){I=!0;var b=g[a];if(null==y||!D&&(y>b||y==b&&z<F+1))y=b,x=a,z=F+1,D=!1}})):(b(this,C,E,function(a){if(!m[a]){I=!0;var b=g[a];if(null==y||D||y<b||y==b&&z<F+1)y=b,x=a,z=F+1,D=!1}}),b(this,G,E,function(a){if(!m[a]){I=!0;var b=g[a];if(null==y||D&&(y>b||y==
b&&z>F-1))y=b,x=a,z=F-1,D=!0}}));I&&A.push(E)}null!=x&&(A.push(x),e(x,v,z));k=A}}k=!0;for(c=u;k;){B={};k=!1;for(r in p)if(p.hasOwnProperty(r)&&(v=p[r],t=v.items[v.minimumLevel-u+c],null!=t))for(B[r]=v,k=!0,v=0,w=t.length;v<w;v+=1)if(E=t[v],d.call(a,E,H[E],c-u))return k=!1,!0;p=B;c+=1}}},loopTopo:l,loopTopoReversed:n,loopChildren:f,loopParents:h,findLargestRoot:function(){var a=null,b={},c={},d;var f=null;n(this,function(e,g,m){b.hasOwnProperty(e)||(b[e]={},c[e]=0);b[e][e]=!0;c[e]+=1;d=!0;h(this,g.id,
function(a,f,h){var g;d=!1;b.hasOwnProperty(a)||(b[a]={},c[a]=0);if(c[a]||1!=J[e])for(g in f=b[e],f)f.hasOwnProperty(g)&&(b[a][g]=!0,c[a]+=1);else b[a]=b[e],c[a]=c[e];return 2});d&&(!f||c[e]>f)&&(f=c[e],a=e)});return a},loopRoots:function(a,b){var c=null,d=0,f={},e={},g,m={},k={},q,l,p;n(this,function(a,b,c){f.hasOwnProperty(a)||(f[a]={},e[a]=0);f[a][a]=!0;e[a]+=1;g=!0;h(this,b.id,function(b,c,d){var h;g=!1;f.hasOwnProperty(b)||(f[b]={},e[b]=0);if(e[b]||1!=J[a])for(h in c=f[a],c)c.hasOwnProperty(h)&&
!f[b][h]&&(f[b][h]=!0,e[b]+=1);else f[b]=f[a],e[b]=e[a];return 2});g&&(m[a]=!0,d+=1)});var r={};for(u in m)if(m.hasOwnProperty(u)){var t=f[u];for(l in t)t.hasOwnProperty(l)&&(r[l]||(r[l]=[]),r[l].push(u.toString()))}for(;0<d;){t=null;for(q in m)m.hasOwnProperty(q)&&(!t||e[q]<t)&&(t=e[q],c=q);if(null!=c){null!=b&&b.call(a,c,H[c]);t=f[c];for(l in t)if(t.hasOwnProperty(l)&&!k[l]){var u=r[l];var v=0;for(p=u.length;v<p;v+=1){var w=u[v];--e[w]}k[l]=!0}delete m[c];--d}}},hasNodes:function(){return!a.common.isEmptyObject(H)},
hasCommonChild:function(a){var c=!1,d,f,e;var h={};var g=d=0;for(f=a.length;g<f;g+=1){var m=a[g];null==H[m]||h[m]||(h[m]=!0,d+=1)}var k={};for(m in h)h.hasOwnProperty(m)&&b(this,C,m,function(a){k[a]=k[a]?k[a]+1:1});for(e in k)if(k.hasOwnProperty(e)&&null!=G[e]&&(J[e]||0)==k[e]&&k[e]==d){c=!0;break}return c},loopNeighbours:function(a,b,c){var d={};null!=c&&(f(this,b,function(b,f,e){d.hasOwnProperty(b)||(d[b]=null,c.call(a,b,f,1)&&(d[b]=2),h(this,b,function(b,f,e){d.hasOwnProperty(b)||(d[b]=null,c.call(a,
b,f,2)&&(d[b]=2));return d[b]}));return d[b]}),h(this,b,function(b,e,h){d.hasOwnProperty(b)||(d[b]=null,c.call(a,b,e,1)&&(d[b]=2),f(this,b,function(b,f,e){d.hasOwnProperty(b)||(d[b]=!0,c.call(a,b,f,2)&&(d[b]=2));return d[b]}));return d[b]}))},countChildren:w,countParents:y,firstParent:B,firstChild:D,validate:function(a){function c(a){var b=0,c;if(null!=a)for(c in a)a.hasOwnProperty(c)&&(b+=1);return b}var f,e;d(this,function(c,d){b(this,C,c,function(b){if(!G.hasOwnProperty(b)||!G[b].hasOwnProperty(c))return null!=
a&&(a.message="Child #"+b+" does not reference parent #"+c),!1});b(this,G,c,function(b){if(!C.hasOwnProperty(b)||!C[b].hasOwnProperty(c))return null!=a&&(a.message="Parent #"+b+" does not reference child #"+c),!1})});for(f in G)if(G.hasOwnProperty(f)){if((J[f]||0)!=c(G[f]))return null!=a&&(a.message="Parents count for item #"+f+" missmatch."),!1;if(G.hasOwnProperty(f)&&!H.hasOwnProperty(f))return null!=a&&(a.message="Orphant parents for item #"+f),!1}for(e in C)if(C.hasOwnProperty(e)){if((z[e]||0)!=
c(C[e]))return null!=a&&(a.message="Children count for item "+e+" missmatch."),!1;if(C.hasOwnProperty(e)&&!H.hasOwnProperty(e))return null!=a&&(a.message="Orphant children of item "+e),!1}for(e in A)if(A.hasOwnProperty(e)){if((E[e]||0)!=c(A[e]))return null!=a&&(a.message="Root children count for item @"+e+" missmatch."),!1;b(this,A,e,function(b){if(!H.hasOwnProperty(b))return null!=a&&(a.message="Child #"+b+"of root #"+e+" does not exists."),!1})}return!0},hasLoops:function(){var a=x();l(this,function(b,
c,d){a.removeNode(b)});return a.hasNodes()},clone:x,BREAK:1,SKIP:2}};a.common.FamilyAlignment=function(c,b,e,d){function g(b,c){var d=b[c];null==d&&(d=new a.common.FamilyMargins,b[c]=d);return d}function f(a,b,c,d,f,e,g,k){var m=e,q=e;c.loopSiblings(this,b,function(a){a=g.getItemPosition(a);m=Math.min(m,a);q=Math.max(q,a)});for(var l=e-1;l>=m;--l){var n=g.getItemAtPosition(d,l);if(!a.hasOwnProperty(n)){var p=g.getItemAtPosition(d,l+1);a[n]=a[p]-(h[n]/2+(k[p]||0)+h[p]/2)}}for(l=e+1;l<=q;l+=1)n=g.getItemAtPosition(d,
l),a.hasOwnProperty(n)||(p=g.getItemAtPosition(d,l-1),a[n]=a[p]+(h[p]/2+(k[n]||0)+h[n]/2));n=g.getItemAtPosition(d,m);p=a[n]-h[n]/2;n=g.getItemAtPosition(d,q);p+=a[n]+h[n]/2;p/=2;q=m=null;c.loopNonSiblings(this,b,function(a){a=g.getItemPosition(a);m=null!=m?Math.min(m,a):a;q=null!=q?Math.max(q,a):a});c=0;for(l=m;l<=q;l+=1)b=g.getItemAtPosition(f,l),c+=h[b],l>m&&(c+=k[b]||0);l=p-c/2;b=g.getItemAtPosition(f,m);a.hasOwnProperty(b)||(a[b]=l+h[b]/2);for(l=m+1;l<=q;l+=1)b=g.getItemAtPosition(f,l),a.hasOwnProperty(b)||
(p=g.getItemAtPosition(f,l-1),a[b]=a[p]+(h[p]/2+(k[b]||0)+h[b]/2))}var h={};null!=d&&e.loopItems(this,function(a,b,f,e,g){h[a]=d.call(c,a,b)});var k=function(b,c){var d={},f={},e=null;c.loopLevelsReversed(this,function(m,k){k=new a.common.FamilyMargins;null!=e&&(e.add(0,Number.MAX_VALUE),k.merge(e,0));var l=e=k;c.loopLevelItems(this,m,function(a,e,m){var k=g(f,a);k.add(h[a],m);switch(b.countParents(a)){case 0:null!=l&&(d[a]=l.attach(k));break;case 1:b.loopParents(this,a,function(c,e,h){c=g(f,c);d[a]=
c.merge(k);l=c;return b.BREAK});break;default:var q=0,n=null,p=null,r={};b.loopParents(this,a,function(a,d,f){if(0<f)return b.BREAK;q+=h[a];d=c.getItemPosition(a);n=null==n?d:Math.min(n,d);p=null==p?d:Math.max(p,d);r[d]=a});e=-q/2;for(m=n;m<=p;m+=1){var t=r[m];e+=h[t]/2;var u=g(f,t);u.attach(k,-e);l=u;e+=h[t]/2}}})});return d}(b,e);var l=function(b,c,d){var e={},g=a.common.getFamilyUnits(b),m={};c.loopLevels(this,function(a,b){c.loopLevelItems(this,a,function(b,k,l){if(!e.hasOwnProperty(b)){k=0;if(0===
l)null!=d[b]&&(k+=d[b]+h[b]/2);else{var q=c.getItemAtPosition(a,l-1);k+=e[q]+h[q]/2+(d[b]||0)+h[b]/2}e[b]=k}k=g[b];if(null!=k)for(q=0;q<k.length;q+=1){var n=k[q];m.hasOwnProperty(n.id)||(m[n.id]=!0,f(e,b,n,a,a+1,l,c,d))}})});return e}(b,e,k);return{getOffset:function(a){return l[a]}}};a.common.FamilyMargins=function(){function a(a,c,d,g){this.left=a;this.right=c;this.leftIndex=d;this.rightIndex=g}this.items=[];this.add=function(b,c,d,g){switch(arguments.length){case 2:this.items.push(new a(-b/2,b/
2,c,c));break;case 4:this.items.push(new a(b,c,d,g))}};this.merge=function(b,c){for(var d=this.getDistanceTo(b),e=0,f=0,h=this.items.length,k=b.items.length,l=Math.min(h,k),n=Math.max(h,k),m=0;m<l;m+=1){var q=this.items[h-1-m],p=b.items[k-1-m];0===m&&(f=q.right-q.left+(d||0)+(c||0)+p.right-p.left,e=f/2+q.left,f=f/2-p.right);q.left-=e;q.right=p.right+f;q.rightIndex=p.rightIndex;this.items[n-1-m]=q}for(m=l;m<n;m+=1)q=this.items[h-1-m],p=b.items[k-1-m],null==q?this.items[n-1-m]=new a(p.left+f,p.right+
f,p.leftIndex,p.rightIndex):(q.left-=e,q.right-=e);return d};this.attach=function(b,c){for(var d=this.getDistanceTo(b),e=c||0,f=this.items.length,h=b.items.length,k=Math.min(f,h),l=Math.max(f,h),n=0;n<k;n+=1){var m=this.items[f-1-n],q=b.items[h-1-n];0===n&&(e=m.right+(d||0)+(c||0)-q.left);m.right=q.right+e;m.rightIndex=q.rightIndex;this.items[l-1-n]=m}for(n=k;n<l;n+=1)m=this.items[f-1-n],null==m&&(q=b.items[h-1-n],this.items[l-1-n]=new a(q.left+e,q.right+e,q.leftIndex,q.rightIndex));return d};this.getDistanceTo=
function(a){var b=null,c=0,g=this.items.length,f=a.items.length,h=Math.min(g,f);if(0<h){for(var k=0;k<h;k+=1){var l=this.items[g-1-k],n=a.items[f-1-k];0===k?b=c=l.right-n.left:l.rightIndex<n.leftIndex&&(b=Math.max(b,l.right-n.left))}b-=c}return b};this.loop=function(a,c){if(null!=c)for(var b=0,e=this.items.length;b<e;b+=1){var f=this.items[e-1-b];if(c.call(a,b,f.left,f.right,f.leftIndex,f.rightIndex))break}};this.getLeft=function(a){var b=this.items.length-1;if(b>=a)return this.items[b-a].left}};
a.common.HeapResult=function(a){this.key=a.key;this.priority=a.priority;this.item=a.item};a.common.FibonacciHeap=function(c){function b(a,b,c){this.key=a;this.priority=b;this.item=c;this.degree=0;this.marked=!1;this.right=this.left=this.child=this.parent=null}function e(a,b){var c=p[a.right];b.right=a.right;b.left=a.key;a.right=b.key;c.left=b.key}function d(a){var b=p[a.left],c=p[a.right];b.right=c.key;c.left=b.key;a.right=a.key;a.left=a.key}function g(){var b=null;null!=q&&(b=new a.common.HeapResult(p[q]));
return b}function f(){var a=g();if(null!=a){var b=p[q],c=p[b.right];if(null!=b.child){var f=p[b.child],e=p[f.left];b.right=f.key;c.left=e.key;f.left=b.key;e.right=c.key;d(b);delete p[b.key];q=null;h(f.key)}else d(b),delete p[b.key],q=null,c.key!=b.key&&h(c.key)}return a}function h(a){var b=[],d,f={};for(d=a;!f.hasOwnProperty(d);){a=p[d];var e=a.right;f[d]=!0;for(a.parent=null;null!=(d=b[a.degree]);)(c?a.priority>d.priority:a.priority<d.priority)?k(a,d):(k(d,a),a=d),b[a.degree-1]=null;b[a.degree]=
a;if(null==q||null==p[q]||(c?p[q].priority<=a.priority:p[q].priority>=a.priority))q=a.key;d=e}}function k(a,b){a.degree+=1;d(b);var f=p[a.child];if(null!=f){if(e(f,b),c?f.priority<b.priority:f.priority>b.priority)a.child=b.key}else a.child=b.key;b.parent=a.key}function l(a,b){a=p[a];if(c?a.priority>b:a.priority<b)throw"Priority increase is not supported";a.priority=b;null!=a.parent&&(b=p[a.parent],c?b.priority<a.priority:b.priority>a.priority)&&(n(b,a),m(b));if(c?p[q].priority<a.priority:p[q].priority>
a.priority)q=a.key}function n(a,b){b.marked=!1;b.parent=null;b.right==b.key?a.child=null:(a.child=b.right,d(b));--a.degree;e(p[q],b)}function m(a){if(null!=a.parent)if(a.marked){var b=p[a.parent];n(b,a);m(b)}else a.marked=!0}var q=null,p={};return{add:function(a,d,f){if(p.hasOwnProperty(a))throw"Duplicate keys are not supported!";d=new b(a,d,f);p[a]=d;if(null==q)d.left=a,q=d.right=a;else if(f=p[q],e(f,d),c?f.priority<d.priority:f.priority>d.priority)q=a},getPriority:function(a){var b=null;p.hasOwnProperty(a)&&
(b=p[a].priority);return b},setPriority:l,heapRoot:g,extractRoot:f,deleteKey:function(a){l(a,c?Infinity:-1);f()},validate:function(){var a=0;for(d in p)if(p.hasOwnProperty(d)){var b=p[d];a+=1;if(null!=b.child){if(!p.hasOwnProperty(b.child))throw"Child does not exists";var c=p[b.child];if(c.parent!=b.key)throw"Child references wrong parent";}if(null!=b.parent&&!p.hasOwnProperty(b.parent))throw"Parent does not exists";if(null!=b.left){if(!p.hasOwnProperty(b.left))throw"Left does not exists";c=p[b.left];
if(c.right!=b.key)throw"Left references wrong right";}if(null!=b.right){if(!p.hasOwnProperty(b.right))throw"Right does not exists";c=p[b.right];if(c.left!=b.key)throw"Right references wrong left";}}if(null==q&&0<a)throw"Orphans";if(null!=q){if(!p.hasOwnProperty(q))throw"Root node does not exists";b=p[q];if(null!=b.parent)throw"Root node has parent reference";var d=[q];b={};for(c=0;0<d.length;){for(var f=[],e=0,h=d.length;e<h;e+=1)for(var g=p[d[e]];!b.hasOwnProperty(g.key);)b[g.key]=!0,c+=1,null!=
g.child&&f.push(g.child),g=p[g.right];d=f}if(a!=c)throw"Tree has loops or orpants";}}}};a.common.getCrossingRectangles=function(c,b,e){function d(a,b,c,d){this.isStart=a;this.index=b;this.x=c;this.rect=d}function g(){this.count=0;this.rectangles={};this.add=function(a){this.count+=1;this.rectangles[a]=!0};this.remove=function(a){--this.count;delete this.rectangles[a];return 0==this.count}}function f(a,d,f,h,g){a.loopForward(this,d,function(a,d){if(a>f)return!0;for(var k in d.rectangles)d.rectangles.hasOwnProperty(k)&&
(a=h>k?h+"-"+k:k+"-"+h,m.hasOwnProperty(a)||(m[a]=!0,e.call(c,g,b[k])))})}if(null!=e){for(var h=[],k=0;k<b.length;k+=1){var l=b[k];h.push(new d(1,k,l.x,l));h.push(new d(0,k,l.right(),l))}h.sort(function(a,b){return a.x==b.x?b.isStart-a.isStart:a.x-b.x});l=a.common.SortedList();var n={},m={};for(k=0;k<h.length;k+=1){var q=h[k],p=[q.rect.y,q.rect.bottom()];if(1==q.isStart){f(l,p[0],p[1],q.index,q.rect);for(var r=0,t=p.length;r<t;r+=1){var u=p[r],v=n[u];null==v&&(v=new g,n[u]=v,l.add(u,v));v.add(q.index)}}else{r=
0;for(t=p.length;r<t;r+=1)u=p[r],v=n[u],v.remove(q.index)&&(delete n[u],l.remove(u));f(l,p[0],p[1],q.index,q.rect)}}}};a.common.Edge=function(a,b){this.from=a;this.to=b};a.common.getFamilyLoops=function(c,b){var e=[],d,g=c.clone();c.loopTopo(this,function(a){g.removeNode(a)});c.loopTopoReversed(this,function(a){g.removeNode(a)});var f=g.clone();f.loop(this,function(b){if(null!=g.node(b)){f.loopParents(this,b,function(c){e.push(new a.common.Edge(c,b));g.removeChildRelation(c,b);return f.SKIP});var c=
[];g.loopTopo(this,function(a){c.push(a)});g.loopTopoReversed(this,function(a){c.push(a)});for(var d=0;d<c.length;d+=1)g.removeNode(c[d])}});c=0;for(d=e.length;c<d;c+=1){var h=e[c];if(!f.removeChildRelation(h.from,h.to))throw"Relation does not exists";}if(b&&f.hasLoops())throw"Failed to clean loops in family";var k=f.getGraph(this,function(a,b){return{from:a,to:b,capacity:1,flow:0}});var l=e.length;c=0;for(d=e.length;c<d;c+=1)h=e[c],b=k.edge(h.from,"__2000__"),null==b?k.addEdge(h.from,"__2000__",
{from:h.from,to:"__2000__",capacity:1,flow:0,tos:[h.to]}):(b.capacity+=1,b.tos.push(h.to)),b=k.edge("__1000__",h.to),null==b?k.addEdge("__1000__",h.to,{from:"__1000__",to:h.to,capacity:1,flow:0,froms:[h.from]}):(b.capacity+=1,b.froms.push(h.from));h=0;for(c=null;;){c=k.getLevelGraph(this,"__1000__",function(a,b,c){return a==c.from?c.capacity>c.flow:0<c.flow});if(!c.hasNode("__2000__"))break;for(;;){var n=k.dfsPath(this,"__1000__","__2000__",function(a,b,c){return a==c.from?c.capacity>c.flow:0<c.flow});
if(0==n.length)break;var m=Infinity;c=0;for(d=n.length;c<d-1;c+=1){var q=n[c];b=n[c+1];b=k.edge(q,b);var p=0;p=b.from==q?b.capacity-b.flow:b.flow;if(0==p)throw"Broken flow path";m=Math.min(m,p)}c=0;for(d=n.length;c<d-1;c+=1)q=n[c],b=n[c+1],b=k.edge(q,b),b.flow=b.from==q?b.flow+m:b.flow-m;h+=m}}if(h<l){var r=k.getLevelGraph(this,"__1000__",function(a,b,c){return a==c.from?c.capacity>c.flow:!1}),t=[];r.loopNodes(this,"__1000__",function(b){k.loopNodeEdges(this,b,function(c,d){if(d.to==c&&!r.hasNode(c)){var f=
!0;k.dfsLoop(this,c,function(a,b,c){return c.from==a?0<c.capacity:!1},function(a){return r.hasNode(a)?(f=!1,!0):!1});f&&t.push(new a.common.Edge(b,c))}})});n=[];c=m=0;for(d=t.length;c<d;c+=1)if(p=t[c],"__1000__"==p.from)for(b=k.edge(p.from,p.to),l=0,q=b.froms.length;l<q;l+=1)n.push(new a.common.Edge(b.froms[l],p.to)),m+=1;else if("__2000__"==p.to)for(b=k.edge(p.from,p.to),l=0,q=b.tos.length;l<q;l+=1)n.push(new a.common.Edge(p.from,b.tos[l])),m+=1;else n.push(p),m+=1;if(m!=h)throw"Failed to properly collect edges cutting maximum flow";
e=n}return e};a.common.getFamilyUnits=function(a){function b(){this.toIndex=this.fromIndex=0;this.items=[];this.hash={}}function c(a){this.id=a;this.parents=new b;this.children=new b;this.loopSiblings=function(a,b,c){this._loop(a,this.parents.hash.hasOwnProperty(b)?this.parents.items:this.children.items,c)};this.loopNonSiblings=function(a,b,c){this._loop(a,this.parents.hash.hasOwnProperty(b)?this.children.items:this.parents.items,c)};this.loop=function(a,b){this._loop(a,this.parents.items,b);this._loop(a,
this.children.items,b)};this._loop=function(a,b,c){if(null!=c)for(var d=0,f=b.length;d<f;d+=1)c.call(a,b[d])};this.addParent=function(a){this._add(a,this.parents)};this.addChild=function(a){this._add(a,this.children)};this._add=function(a,b){b.hash.hasOwnProperty(a)||(b.items.push(a),b.hash[a]=!0)}}var d=[],g={},f;var h=0;a.loop(this,function(b,f){var e=a.countChildren(b);if(0<e&&!g.hasOwnProperty(b)){var m=new c(h);h+=1;m.addParent(b);a.loopChildren(this,b,function(b,c){m.addChild(b);1==e&&a.loopParents(this,
b,function(b){m.addParent(b);g[b]=m;return a.SKIP});return a.SKIP});d.push(m);g[b]=m}});var k={};h=0;for(f=d.length;h<f;h+=1){var l=d[h];l.loop(this,function(a){k.hasOwnProperty(a)?k[a].push(l):k[a]=[l]})}return k};a.common.getLiniarBreaks=function(c){function b(b,f){var e=0,h=(d[f]-d[b]+c[b])/(f-b+1),g=a.common.binarySearch(c,function(a){return h-a},b,f);g.item<=h?(e+=h*(g.index+1-b)-(d[g.index]-d[b]+c[b]),e+=d[f]-d[g.index]-h*(f-g.index)):(e+=h*(g.index-b)-(d[g.index]-d[b]-c[g.index]+c[b]),e+=d[f]-
d[g.index]+c[g.index]-h*(f-g.index+1));return e}function e(a,c){var d=0+b(0,a);c>a+1&&(d+=b(a+1,c-1));return d+=b(c,g-1)}for(var d=[],g=c.length,f=0,h=0;h<g;h+=1)f+=c[h],d[h]=f;f=0;h=g-1;for(var k=e(f,h);f<h+1;){var l=e(f+1,h),n=e(f,h-1);if(l<n){if(l>=k)break;f+=1;k=l}else{if(n>=k)break;--h;k=n}}return[f,h-1,g-1]};a.common.getMergedRectangles=function(c,b,e){function d(a,b){this.start=a;this.startHead=null;this.end=b;this.endHead=null;this.overlap=function(a){return!(this.end<a.start||this.start>
a.end)}}function g(a,b){this.x=a;this.ranges=b}function f(a,b){this.isHead=a;this.list=b;x.hasOwnProperty(b)||(x[b]=[]);x[b].push(this);this.add=function(a){a.from.equalTo(a.to)||(this.isHead?F[this.list].add(A,a):F[this.list].unshift(A,a),A+=1)};this.getTail=function(){return new f(!this.isHead,this.list)};this.attach=function(a){if(this.list!=a.list){F[this.list].attach(F[a.list]);var b=x[a.list];delete x[a.list];if(null!=b)for(var c=0,d=b.length;c<d;c+=1){var f=b[c];f!=a&&(f.list=this.list,x[this.list].push(f))}}}}
function h(b){F.push(new a.common.LinkedHashItems);return new f(b,F.length-1)}var k;b.sort(function(a,b){return a.x==b.x?a.y-b.y:a.x-b.x});var l=[],n={};var m=0;for(k=b.length;m<k;m+=1){var q=b[m];var p=[q.x,q.right()];for(var r=0;r<p.length;r+=1){var t=p[r];var u=n[t];null==u&&(u={x:t,add:[],remove:[]},n[t]=u,l.push(u));t==q.x?u.add.push(m):u.remove.push(m)}}l.sort(function(a,b){return a.x-b.x});r={};n=[];n.push(new g(null,[]));m=0;for(k=l.length;m<k;m+=1){u=l[m];q=0;for(p=u.add.length;q<p;q+=1)r[u.add[q]]=
!0;q=0;for(p=u.remove.length;q<p;q+=1)delete r[u.remove[q]];t=[];for(var v in r)r.hasOwnProperty(v)&&t.push(b[v]);t.sort(function(a,b){return a.y-b.y});var w=[],y=null,D=null;q=0;for(p=t.length;q<p;q+=1){var B=t[q];null==y?(y=B.y,D=B.bottom()):D<B.y?(w.push(new d(y,D)),y=B.y,D=B.bottom()):D=Math.max(D,B.bottom())}null!=y&&w.push(new d(y,D));n.push(new g(u.x,w))}var F=[],x={},A=1;m=1;for(k=n.length;m<k;m+=1)for(b=n[m-1],u=n[m],q=v=0;v<b.ranges.length||q<u.ranges.length;)if(p=v<b.ranges.length?b.ranges[v]:
null,r=q<u.ranges.length?u.ranges[q]:null,null==r){l=[new a.common.Point(b.x,p.end),new a.common.Point(u.x,p.end),new a.common.Point(u.x,p.start),new a.common.Point(b.x,p.start)];for(w=1;w<l.length;w+=1)p.endHead.add(new a.common.Vector(l[w-1],l[w]));p.endHead.attach(p.startHead);v+=1}else if(null==p)r.endHead=h(!0),r.endHead.add(new a.common.Vector(new a.common.Point(u.x,r.start),new a.common.Point(u.x,r.end))),r.startHead=r.endHead.getTail(),q+=1;else if(r.overlap(p)){l=[new a.common.Point(b.x,
p.start),new a.common.Point(u.x,p.start),new a.common.Point(u.x,r.start)];for(w=1;w<l.length;w+=1)p.startHead.add(new a.common.Vector(l[w],l[w-1]));r.startHead=p.startHead;for(w=!0;w;)if(w=!1,p.end>r.end)t=q+1<u.ranges.length?u.ranges[q+1]:null,null!=t&&t.overlap(p)&&(w=new a.common.Point(u.x,t.start),y=new a.common.Point(u.x,r.end),r.endHead=h(!0),r.endHead.add(new a.common.Vector(w,y)),t.startHead=r.endHead.getTail(),q+=1,r=t,w=!0);else if(t=v+1<b.ranges.length?b.ranges[v+1]:null,null!=t&&t.overlap(r)){l=
[new a.common.Point(b.x,p.end),new a.common.Point(u.x,p.end),new a.common.Point(u.x,t.start),new a.common.Point(b.x,t.start)];for(w=1;w<l.length;w+=1)p.endHead.add(new a.common.Vector(l[w-1],l[w]));p.endHead.attach(t.startHead);v+=1;p=t;w=!0}l=[new a.common.Point(b.x,p.end),new a.common.Point(u.x,p.end),new a.common.Point(u.x,r.end)];for(w=1;w<l.length;w+=1)p.endHead.add(new a.common.Vector(l[w-1],l[w]));r.endHead=p.endHead;v+=1;q+=1}else if(p.start<r.start){l=[new a.common.Point(b.x,p.end),new a.common.Point(u.x,
p.end),new a.common.Point(u.x,p.start),new a.common.Point(b.x,p.start)];for(w=1;w<l.length;w+=1)p.endHead.add(new a.common.Vector(l[w-1],l[w]));p.endHead.attach(p.startHead);v+=1}else r.endHead=h(!0),r.endHead.add(new a.common.Vector(new a.common.Point(u.x,r.start),new a.common.Point(u.x,r.end))),r.startHead=r.endHead.getTail(),q+=1;if(null!=e)for(m=0;m<F.length;m+=1)x.hasOwnProperty(m)&&(k=F[m],l=[],k.iterate(function(a,b){0==l.length&&l.push(a.from);l.push(a.to)}),e.call(c,l))};a.common.getMinimumCrossingRows=
function(a,b,e){var c=null,g=null;if(null!=e){b.sort(function(a,b){return a.y-b.y});for(var f=0;f<b.length;f+=1){var h=b[f],k=h.bottom();null===c?(c=h.y,g=k):h.y>=g?(e.call(a,c),c=h.y,g=k):(h.y>c&&(c=h.y),k<g&&(g=k))}null!==c&&e.call(a,c)}};a.common.graph=function(){function c(a,b,c,e){var f=[],h,g;f.push(b);c[b]=!0;if(null!=e)for(;0<f.length;){b=[];var k=0;for(h=f.length;k<h;k+=1){var p=f[k];if(e.call(a,p))return;p=d[p];for(g in p)p.hasOwnProperty(g)&&!c.hasOwnProperty(g)&&(c[g]=!0,b.push(g))}f=
b}}function b(a,b){var c=null,f,e,g=null;for(f in d)if(d.hasOwnProperty(f)){var m=d[f];var q=0;for(e in m)m.hasOwnProperty(e)&&(q+=b.call(a,m[e],f,e));if(q>g||null==g)c=f,g=q}return c}function e(a,c,e,k,l){var f={},h,g={},p=0,r,t;if(null!=e&&null!=k&&(null==c&&(c=b(a,e)),null!=c))for(k.call(a,c),f[c]=!0,p+=1,g[c]=null;0<p;){c=[];var u=r=null;var v={};for(h in f)if(f.hasOwnProperty(h)){var w=d[h];var y=!1;for(t in w)if(w.hasOwnProperty(t)&&!g.hasOwnProperty(t)){var D=e.call(a,w[t],h,t);y=!0;switch(l){case 1:null==
v[t]&&(v[t]=0);v[t]+=D;if(!u||v[t]>u)r=t,u=v[t];break;case 2:if(v[t]=null==v[t]?D:Math.min(v[t],D),!u||v[t]<u)r=t,u=v[t]}}y||c.push(h)}if(null==r)break;else f[r]=!0,p+=1,g[r]=!0,k.call(a,r);y=0;for(r=c.length;y<r;y+=1)delete f[c[y]],--p}}var d={};return{addEdge:function(a,b,c){null!=d[a]&&null!=d[a][b]||null==c||(null==d[a]&&(d[a]={}),d[a][b]=c,null==d[b]&&(d[b]={}),d[b][a]=c)},edge:function(a,b){var c=null;null!=d[a]&&d[a][b]&&(c=d[a][b]);return c},hasNode:function(a){return d.hasOwnProperty(a)},
loopNodes:function(a,b,e){var f={};if(null==b)for(b in d)d.hasOwnProperty(b)&&(f.hasOwnProperty[b]||c(a,b,f,e));else c(a,b,f,e)},loopNodeEdges:function(a,b,c){var f;if(null!=c&&(b=d[b],null!=b))for(f in b)b.hasOwnProperty(f)&&c.call(a,f,b[f])},getSpanningTree:function(b,c){var f=a.common.tree(),e=a.common.FibonacciHeap(!0),g={},n;e.add(b,0,null);for(g[b]=null;null!=(b=e.extractRoot());){var m=d[b.key];for(n in m)if(m.hasOwnProperty(n)&&!f.node(n)){var q=null!=c?c(m[n]):m[n];var p=e.getPriority(n);
null==p?(e.add(n,q,null),g[n]=b.key.toString()):p<=q&&(e.setPriority(n,q),g[n]=b.key.toString())}f.add(g[b.key],b.key.toString(),{})}return f},getTotalWeightGrowthSequence:function(a,c,d){var f=b(a,c);e(a,f,c,d,1)},getMinimumWeightGrowthSequence:function(a,b,c,d){e(a,b,c,d,2)},getShortestPath:function(b,c,e,k,l){var f=a.common.FibonacciHeap(!1),h,g={},p={},r=0,t=0;var u=0;for(h=e.length;u<h;u+=1){var v=e[u];p.hasOwnProperty(v)||(r+=1,p[v]=!0)}f.add(c,0,null);for(g[c]=null;null!=(c=f.extractRoot());){e=
d[c.key];for(v in e)e.hasOwnProperty(v)&&(h=1,null!=k?(h=k.call(b,e[v],c,v),u=c.priority+h):u=c.priority+1,0<=h&&(h=f.getPriority(v),null!=h?h>u&&(f.setPriority(v,u),g[v]=c.key):g.hasOwnProperty(v)||(f.add(v,u,null),g[v]=c.key)));if(p.hasOwnProperty(c.key)){e=[];for(u=c.key;null!=u;)e.push(u),u=g[u];l.call(b,e,c.key);t+=1;if(t>=r)break}}},dfsPath:function(a,b,c,e){var f=[],h={};f.push(b);h[b]=null;if(b!=c)for(;0<f.length&&!h.hasOwnProperty(c);){b=f[f.length-1];--f.length;var g=d[b],k;for(k in g)if(g.hasOwnProperty(k)&&
!h.hasOwnProperty(k)&&e.call(a,b,k,g[k])&&(f.push(k),h[k]=b,k==c))break}b=c;for(a=[];h.hasOwnProperty(b);)a.push(b),b=h[b];h=[];if(0<a.length)for(c=a.length-1;0<=c;--c)h.push(a[c]);return h},getLevelGraph:function(b,c,e){var f={},h=[];h.push(c);for(f[c]=1;0<h.length;){for(var g=[],m=0,q=h.length;m<q;m+=1){var p=h[m];c=f[p];var r=d[p];for(var t in r)r.hasOwnProperty(t)&&!f.hasOwnProperty(t)&&e.call(b,p,t,r[t])&&(g.push(t),f[t]=c+1)}h=g}b=a.common.graph();for(p in d)if(f.hasOwnProperty(p))for(t in c=
f[p],r=d[p],r)f.hasOwnProperty(t)&&c+1==f[t]&&b.addEdge(p,t,r[t]);return b},dfsLoop:function(a,b,c,e){var f=[],h={};f.push(b);for(h[b]=!0;0<f.length;){b=f[f.length-1];--f.length;var g=d[b],k;for(k in g)if(g.hasOwnProperty(k)&&!h.hasOwnProperty(k)&&c.call(a,b,k,g[k])&&(f.push(k),h[k]=!0,e.call(a,k)))return}}}};a.common.LCA=function(c){var b=[],e=[],d={},g;(function(){var f=0;c.loopEulerWalk(this,function(a,c,g){b.push(a);e.push(g);d.hasOwnProperty(a)||(d[a]=f);f+=1});g=a.common.RMQ(e)})();return{getLowestCommonAncestor:function(a,
c){a=d[a];c=d[c];c=a<c?g.getRangeMinimumIndex(a,c):g.getRangeMinimumIndex(c,a);return b[c]}}};a.common.LinkedHashItems=function(){function a(a,b){if(f.hasOwnProperty(a))throw"Duplicate segments are not supported!";f[a]=b;h[a]=null;null==n?(l=a,k[a]=null):(h[n]=a,k[a]=n);n=a}function b(a,b){if(f.hasOwnProperty(a))throw"Duplicate segments are not supported!";f[a]=b;k[a]=null;null==l?(n=a,h[a]=null):(k[l]=a,h[a]=l);l=a}function e(c,d,e){if(f.hasOwnProperty(d))throw"Duplicate segments are not supported!";
if(null==c)b(d,e);else{var g=h[c];null==g?a(d,e):(f[d]=e,h[c]=d,h[d]=g,k[g]=d,k[d]=c)}}function d(a,b,c,d){null==c&&(c=a?l:n);if(null!=b)for(;null!=c;){var e=f[c];if(null!=e&&b(e,c))break;c=c==d?null:a?h[c]:k[c]}}function g(a,b,c){d(!0,a,b,c)}var f={},h={},k={},l=null,n=null;return{add:a,item:function(a){return f[a]},nextKey:function(a){return h[a]},prevKey:function(a){return k[a]},startKey:function(){return l},endKey:function(){return n},unshift:b,insertAfter:e,insertBefore:function(a,c,d){if(f.hasOwnProperty(c))throw"Duplicate segments are not supported!";
if(null==a||!f.hasOwnProperty(a))throw"Before key should be defined!";a=k[a];null==a?b(c,d):e(a,c,d)},remove:function(a){var b=k[a],c=h[a];null!=b?h[b]=c:l=c;null!=c?k[c]=b:n=b;delete f[a];delete h[a];delete k[a]},isEmpty:function(){return null==l},attach:function(b){b.iterate(function(b,c){a(c,b)})},iterate:g,iterateBack:function(a,b,c){d(!1,a,b,c)},empty:function(){f={};h={};k={};n=l=null},toArray:function(){var a=[];g(function(b){a.push(b)});return a},validate:function(a){var b,c;for(b in f)if(f.hasOwnProperty(b)&&
(!h.hasOwnProperty(b)||!k.hasOwnProperty(b)))return null!=a&&(a.message="Orphant key found!"),!1;if(!f.hasOwnProperty(l)||!f.hasOwnProperty(n))return null!=a&&(a.message="Start or end values are missing!"),!1;for(b in h)if(h.hasOwnProperty(b)){if(!f.hasOwnProperty(b)||!k.hasOwnProperty(b))return null!=a&&(a.message="Orphant key found!"),!1;if((c=h[b])&&!h.hasOwnProperty(c))return null!=a&&(a.message="Next key not found!"),!1}for(b in k)if(k.hasOwnProperty(b)){if(!f.hasOwnProperty(b)||!h.hasOwnProperty(b))return null!=
a&&(a.message="Orphant key found!"),!1;if((c=k[b])&&!k.hasOwnProperty(c))return null!=a&&(a.message="Prev key not found!"),!1}return!0}}};a.common.mergeSort=function(a,b,e){var c,g,f,h,k,l;switch(a.length){case 0:a=[];break;default:var n=[];for(c=0;c<a.length;c+=1){var m=a[c];var q=[];var p=n.length;var r=m.length;var t=g=0;var u=h=k=f=null;0<p&&(f=n[g],k=b?b(f):f);0<r&&(h=m[t],u=b?b(h):h);for(l=null;g<p||t<r;)g>=p?(e&&l==h||(q.push(h),l=h),t+=1,t<r&&(h=m[t],u=b?b(h):h)):t>=r?(e&&l==f||(q.push(f),
l=f),g+=1,g<p&&(f=n[g],k=b?b(f):f)):k<u?(e&&l==f||(q.push(f),l=f),g+=1,g<p&&(f=n[g],k=b?b(f):f)):(e&&l==h||(q.push(h),l=h),t+=1,t<r&&(h=m[t],u=b?b(h):h));n=q}a=n}return a};a.common.pile=function(){function a(a,b,c,e){this.context=c;this.from=a;this.to=b;this.offset=null;this.direction=e}function b(a,c,e,h,k){if(a>=c.length)return 0;if(e.hasOwnProperty(a))return e[a];for(var d=c[a],f=b(a+1,c,e,h,k),g=a+1;g<c.length&&!(c[g].from>=d.to);)g+=1;c=1+b(g,c,e,h,k);c>f?(e[a]=c,h[a]=g,k[a]=!0):(e[a]=f,h[a]=
a+1,k[a]=!1);return e[a]}var e=[];return{add:function(b,c,f){b<c?e.push(new a(b,c,f,1)):e.push(new a(c,b,f,-1))},resolve:function(a,c){var d,h,g=0;if(null!=c){var l=e.slice(0);l.sort(function(a,b){return a.from-b.from});for(d=[];0<l.length;){var n={};var m={};var q={};b(0,l,n,m,q);n=[];d[g]=[];for(h=0;m.hasOwnProperty(h);)q[h]&&(n.push(h),d[g].push(l[h])),h=m[h];for(h=n.length-1;0<=h;--h)l.splice(n[h],1);g+=1}for(q=0;q<g;q+=1)for(n=d[q],h=0;h<n.length;h+=1)if(m=n[h],c.call(a,m.from,m.to,m.context,
q,g,m.direction))return g}return g}}};a.common.QuadTree=function(c){function b(a,b,c,d){this.x=a;this.y=b;this.scale=c;this.size=d;this.quadrants=[];this.points=[]}function e(a){var c=a.size/2;a.quadrants=[new b(a.x,a.y,a.scale-1,c),new b(a.x+c,a.y,a.scale-1,c),new b(a.x,a.y+c,a.scale-1,c),new b(a.x+c,a.y+c,a.scale-1,c)];c=0;for(var d=a.points.length;c<d;c+=1){var e=a.points[c];a.quadrants[a.getQuadrantIndex(Math.floor(e.x),Math.floor(e.y))].points.push(e)}a.points=null}var d=Math.max(1,Math.floor(Math.log(c)/
Math.log(2))),g=8,f=256,h=null;h=new b(0,0,g,f);b.prototype.notEnclosed=function(a){return this.x<a.x||this.x+this.size>a.x+a.width||this.y<a.y||this.y+this.size>a.y+a.height?!0:!1};b.prototype.overlaps=function(a){return this.x+this.size<a.x||a.x+a.width<this.x||this.y+this.size<a.y||a.y+a.height<this.y?!1:!0};b.prototype.getQuadrantIndex=function(a,b){var c=this.scale-1;return a>>c&1|(b>>c&1)<<1};return{addPoint:function(a){for(var c=Math.max(Math.floor(a.x),Math.floor(a.y));f<=c;){g+=1;f*=2;var k=
new b(0,0,g,f);e(k);k.quadrants[0]=h;h=k}c=Math.floor(a.x);k=Math.floor(a.y);var m=h;if(0>c||0>k)throw"Negative values are not supported in the quad tree.";for(;(null==m.points||0<m.points.length)&&(m.scale!=d||null==m.points);)null!=m.points&&0<m.points.length&&e(m),m=m.quadrants[m.getQuadrantIndex(c,k)];m.points.push(a)},loopArea:function(a,b,c){var d;if(null!=c)for(var e=[h],f=[];0<e.length||0<f.length;){var g=[],k=[];var l=0;for(d=e.length;l<d;l+=1){var n=e[l];if(n.overlaps(b))if(n.notEnclosed(b))if(null==
n.points)for(var w=0;4>w;w+=1)g.push(n.quadrants[w]);else{w=0;for(var y=n.points.length;w<y;w+=1){var D=n.points[w];if(b.contains(D)&&c.call(a,D))return}}else f.push(n)}l=0;for(d=f.length;l<d;l+=1)if(n=f[l],null==n.points)for(w=0;4>w;w+=1)k.push(n.quadrants[w]);else for(w=0,y=n.points.length;w<y;w+=1)if(c.call(a,n.points[w]))return;e=g;f=k}},validate:function(){for(var b=[h];0<b.length;){for(var c=[],d=0,e=b.length;d<e;d+=1){var f=b[d],g=new a.common.Rect(f.x,f.y,f.size,f.size);if(null!=f.points&&
0<f.quadrants.length)return!1;if(null==f.points)for(g=0;4>g;g+=1)c.push(f.quadrants[g]);else for(var r=0,t=f.points.length;r<t;r+=1)if(!g.contains(f.points[r]))return!1}b=c}return!0},getPositions:function(b){for(var c=[],d=[h];0<d.length;){for(var e=[],f=0,g=d.length;f<g;f+=1){var k=d[f],t=new a.common.Rect(k.x,k.y,k.size,k.size);t.context={isHighlighted:!1};null!=b&&b.overlaps(t)&&null!=k.points&&0<k.points.length&&(t.context.isHighlighted=!0);c.push(t);for(t=0;4>t;t+=1){var u=k.quadrants[t];null!=
u&&e.push(u)}}d=e}return c}}};a.common.RMQ=function(a){function b(b,e){var f=Math.floor(Math.log(e-b+1)/d);return a[c[b][f]]<=a[c[e-(1<<f)+1][f]]?c[b][f]:c[e-(1<<f)+1][f]}var c=[],d=Math.log(2);(function(){for(var b,d=0,e=a.length;d<e;d+=1)c[d]=[d];b=1;for(e=a.length;1<<b<e;b+=1)for(d=0;d+(1<<b)-1<e;d+=1)c[d][b]=a[c[d][b-1]]<a[c[d+(1<<b-1)][b-1]]?c[d][b-1]:c[d+(1<<b-1)][b-1]})();return{getRangeMinimumIndex:b,getRangeMinimum:function(c,d){return a[b(c,d)]}}};a.common.SortedList=function(){function a(a,
b){this.value=a;this.context=b;this.right=this.left=null;this.balance=0}function b(a){if(2==a.balance){var b=a.right;var c=b.balance;if(0<=c)e(b,a),1==b.balance?(a.balance=0,b.balance=0):(a.balance=-1,b.balance=1);else{var f=b.left;d(f,b);e(b,a);a.balance=0;switch(f.balance){case 1:b.balance=-1;f.balance=0;break;case 0:f.balance=0;b.balance=0;break;default:f.balance=1,b.balance=0}}}else if(-2==a.balance)if(c=a.left.balance,0>=c)b=a.left,d(b,a),-1==b.balance?(a.balance=0,b.balance=0):(a.balance=1,
b.balance=-1);else switch(b=a.left,f=b.right,e(f,b),d(b,a),a.balance=0,f.balance){case -1:f.balance=0;b.balance=1;break;case 0:f.balance=0;b.balance=0;break;default:f.balance=-1,b.balance=0}return c}function e(a,b){f(a,b);b.right=a.right;a.right=a.left;a.left=b.left;b.left=a}function d(a,b){f(a,b);b.left=a.left;a.left=a.right;a.right=b.right;b.right=a}function g(a,b){var c=null!=a.right?a.right:a.left;null!=b?b.value>a.value?b.left=c:b.right=c:n=c}function f(a,b){var c=a.value;a.value=b.value;b.value=
c;c=a.context;a.context=b.context;b.context=c}function h(a,b,c){if(null!=c){var d=[],e;for(e=n;null!=e;)e.value>=b||null==b?(d.push(e),e=e.left):e=e.right;for(;null!=(e=d.pop())&&!c.call(a,e.value,e.context);)for(e=e.right;null!=e;)if(null!=e.left)d.push(e),e=e.left;else{if(c.call(a,e.value,e.context))return;e=e.right}}}function k(a,b,c){if(null!=c){var d=[],e;for(e=n;null!=e;)e.value<=b||null==b?(d.push(e),e=e.right):e=e.left;for(;null!=(e=d.pop())&&!c.call(a,e.value,e.context);)for(e=e.left;null!=
e;)if(null!=e.right)d.push(e),e=e.right;else{if(c.call(a,e.value,e.context))return;e=e.left}}}function l(a){var b=[],c=0;if(null!=a)for(b.push(a);0<b.length;){for(var d=[],e=0;e<b.length;e+=1)a=b[e],null!=a.left&&d.push(a.left),null!=a.right&&d.push(a.right);b=d;c+=1}return c}var n=null;return{add:function(c,d,e,f){if(null==n)n=new a(c,d);else{for(var h=[],g=null,k=n;null!=k;)if(null!=g&&h.push(g),g=k,g.value==c)if(null!=f)f.call(e,g.context);else throw"Structure does not support duplicates.";else k=
g.value>c?g.left:g.right;h.push(g);d=new a(c,d);g.value>c?g.left=d:g.right=d;for(g=d;null!=(k=h.pop());){if(g.value<k.value)if(0>k.balance){--k.balance;b(k);break}else{if(0<k.balance){--k.balance;break}--k.balance}else if(0<k.balance){k.balance+=1;b(k);break}else{if(0>k.balance){k.balance+=1;break}k.balance+=1}g=k}}},remove:function(a){for(var c=[],d=n;null!=d;)if(d.value==a){if(null!=d.right&&null!=d.left){c.push(d);for(a=d.right;null!=a.left;)c.push(a),a=a.left;var e=a;d.value=e.value;d.context=
e.context;g(a,c[c.length-1]);c.push(a)}else g(d,c[c.length-1]),c.push(d);for(a=c.length-2;0<=a;--a)if(e=c[a],d=c[a+1],e.value>d.value)if(0<e.balance){if(e.balance+=1,0===b(e))break}else{if(0===e.balance){e.balance+=1;break}e.balance+=1}else if(0>e.balance){if(--e.balance,0===b(e))break}else{if(0===e.balance){--e.balance;break}--e.balance}break}else c.push(d),d=d.value>a?d.left:d.right},loopForward:h,loopBackward:k,nextContext:function(a){var b=null;h(this,a,function(a,c){b=c;return!0});return b},
previousContext:function(a){var b=null;k(this,a,function(a,c){b=c;return!0});return b},validate:function(){if(null!=n)for(var a=[n];0<a.length;){for(var b=[],c=0;c<a.length;c+=1){var d=a[c];if(null==d.value||null!=d.left&&(b.push(d.left),d.left.value>=d.value)||null!=d.right&&(b.push(d.right),d.right.value<=d.value))return!1;if(d.balance!=l(d.right)-l(d.left))return console.log("Disbalanced node: "+d.value+" - "+JSON.stringify(n)),!1}a=b}return!0}}};a.common.SpatialIndex=function(c){function b(b,
c){this.minimum=b;this.maximum=c;this.quadTree=a.common.QuadTree(2*c)}var e=[];c.sort(function(a,b){return a-b});switch(c.length){case 0:e.push(new b(0,1E6));break;case 1:var d=c[0];e.push(new b(0,d));break;case 2:d=c[0];c=c[1];c>2*d?(e.push(new b(0,d)),e.push(new b(d,c))):e.push(new b(0,c));break;default:d=a.common.getLiniarBreaks(c);for(var g=0,f=0;f<d.length;f+=1){var h=c[d[f]];e.push(new b(g,h));g=h}}return{addRect:function(a){for(var b=Math.max(a.width,a.height),c=a.centerPoint(),d=0,f=e.length;d<
f;d+=1){var h=e[d];if(b<=h.maximum||d==f-1){c.context=a;h.quadTree.addPoint(c);break}}},loopArea:function(b,c,d){if(null!=d)for(var f=0,h=e.length;f<h;f+=1){var g=e[f],k=new a.common.Rect(c);k.offset(g.maximum/2);g.quadTree.loopArea(this,k,function(a){a=a.context;if(c.overlaps(a))return d.call(b,a)})}},validate:function(){for(var a=!0,b=0,c=e.length;b<c;b+=1){var d=e[b];a=a&&d.quadTree.validate()}return a},getPositions:function(a){for(var b=[],c=0,d=e.length;c<d;c+=1)b=b.concat(e[c].quadTree.getPositions(a));
return b}}};a.common.tree=function(c){function b(a,b,c){var d;if(null!=f[b]&&(b=k[b],null!=b)){var e=0;for(d=b.length;e<d;e+=1){var h=b[e];if(c.call(a,h,f[h],e,d-1))break}}}function e(a){var b=null;null!=h[a]&&(b=h[a]);return b}function d(a,b){var c,d=a.length;for(c=0;c<d;c+=1)if(a[c]==b)return a.splice(c,1),d-1;return d}function g(a,c,d){if(null!=d&&f.hasOwnProperty(c)){var h=e(c);null!=h&&d.call(a,h,f[h])||(b(a,h,function(b,e){b!=c&&d.call(a,b,e)}),b(a,c,function(b,c){d.call(a,b,c)}))}}var f={},
h={},k={},l={},n={};(function(b){a.common.isObject(b)&&(f=a.common.cloneObject(b.nodes,!0),h=a.common.cloneObject(b.parents,!0),k=a.common.cloneObject(b.children,!1),l=a.common.cloneObject(b.roots,!1),n=a.common.cloneObject(b.rootChildren,!0))})(c);return{loop:function(a,b){var c;if(null!=b)for(c in f)if(f.hasOwnProperty(c)&&b.call(a,c,f[c]))break},loopLevels:function(a,b,c){var d=0,e=[],h;switch(arguments.length){case 2:var g=b;break;case 3:var l=b;g=c}if(null!=g){if(null==l)for(m in n)n.hasOwnProperty(m)&&
(e=e.concat(n[m]));else null!=k[l]&&(e=e.concat(k[l]));for(;0<e.length;){var m=[];var q=0;for(h=e.length;q<h;q+=1)switch(l=e[q],g.call(a,l,f[l],d)){case 1:m=[];break;case 2:break;default:null!=k[l]&&(m=m.concat(k[l]))}e=m;d+=1}}},loopParents:function(a,b,c,d){if(null!=f[b]&&null!=c&&(!0!==d||!c.call(a,b,f[b])))for(;null!=(b=h[b])&&!c.call(a,b,f[b]););},loopChildren:b,loopChildrenRange:function(a,b,c,d,e){var h;if(null!=f[b]&&(b=k[b],null!=b))if(c<d)for(c=Math.max(c,0),d=Math.min(d,b.length-1),h=c;h<=
d&&(c=b[h],!e.call(a,c,f[c],h,NaN));h+=1);else for(c=Math.min(c,b.length-1),d=Math.max(0,d),h=c;h>=d&&(c=b[h],!e.call(a,c,f[c],h,NaN));--h);},loopChildrenReversed:function(a,b,c){var d;if(null!=f[b]){b=k[b];var e=b.length-1;if(null!=b)for(d=e;0<=d;--d){var h=b[d];if(c.call(a,h,f[h],d,e))break}}},loopPostOrder:function(a,b){var c=[],d;if(null!=b){for(e in n)n.hasOwnProperty(e)&&(c=c.concat(n[e]));for(;0<c.length;){var e=c[c.length-1];if(e!=g&&null!=(d=k[e]))for(e=d.length-1;0<=e;--e)c.push(d[e]);else{c.pop();
var g=h[e];if(b.call(a,e,f[e],g,f[g]))break}}}},loopPreOrder:function(a,b){var c=[],d;if(null!=b){for(e in n)n.hasOwnProperty(e)&&(c=c.concat(n[e]));for(;0<c.length;){var e=c[c.length-1];if(e!=l){var g=h[e];if(b.call(a,e,f[e],g,f[g]))break}if(e!=l&&null!=(d=k[e]))for(e=d.length-1;0<=e;--e)c.push(d[e]);else{c.pop();var l=h[e]}}}},loopEulerWalk:function(a,b){var c=[],d=[],e;if(null!=b){for(m in n)if(n.hasOwnProperty(m)){var g=n[m];var l=0;for(e=g.length;l<e;l+=1)c.push(g[l]),d.push(0)}for(;0<c.length;){l=
c.length-1;var m=c[l];e=d[l];if(b.call(a,m,f[m],e))break;if(m!=q&&null!=(g=k[m]))for(l=g.length-1;0<=l;--l)c.push(g[l]),d.push(e+1),0<l&&(c.push(m),d.push(e));else{c.pop();d.pop();var q=h[m]}}}},loopNeighbours:function(a,b,c,d){var e={},h=[b],k=0;if(null!=d&&f.hasOwnProperty(b))for(e[b]=!0;0<h.length;){var l=[];b=0;for(var m=h.length;b<m;b+=1){var n=h[b];if(0<k&&d.call(a,n,f[n],k))return;k<c&&g(this,n,function(a,b){e.hasOwnProperty(a)||(l.push(a),e[a]=!0)})}h=l;k+=1}},zipUp:function(a,b,c,d){if(null!=
d)for(;null!=b&&null!=c&&b!=c;){var e=h[b];var f=h[c];if(d.call(a,b,e,c,f))break;b=e;c=f}},parentid:e,parent:function(a){var b=null;null!=h[a]&&(b=f[h[a]]);return b},adopt:function(a,b){if(null!=f[a]&&null!=f[b])if(a!=b)l.hasOwnProperty(b)&&(d(n[l[b]],b)||delete n[l[b]],delete l[b]),h.hasOwnProperty(b)&&(d(k[h[b]],b)||delete k[h[b]]),h[b]=a,null!=k[a]?k[a].push(b):k[a]=[b];else throw"Item cannot be parent of itself!";else throw"Both parent and child should be in hierarchy!";},moveChildren:function(a,
c){null!=f[a]&&null!=f[c]&&a!=c&&null!=k[a]&&(b(this,a,function(a,b,d){h[a]=c}),k[c]=null!=k[c]?k[c].concat(k[a]):k[a],delete k[a])},node:function(a){return f[a]},add:function(a,b,c,d){if(null!=f[b])throw"Node already exists";if(null!=b&&null!=c&&null==f[b]&&(null!=f[a]?(h[b]=a,null!=k[a]?null==d?k[a].push(b):k[a].splice(d,0,b):k[a]=[b]):(l[b]=a,null!=n[a]?null==d?n[a].push(b):n[a].splice(d,0,b):n[a]=[b]),f[b]=c,null!=n[b]))for(k[b]=n[b],delete n[b],d=k[b],a=0,c=d.length;a<c;a+=1){var e=d[a];delete l[e];
h[e]=b}},insert:function(a,c,d){null!=f[a]&&null!=c&&null==f[c]&&null!=d&&(f[c]=d,null!=k[a]&&(k[c]=k[a]),k[a]=[c],b(this,c,function(a,b,d){h[a]=c}),h[c]=a)},hasNodes:function(){return!a.common.isEmptyObject(n)},hasChildren:function(a){return null!=k[a]},countChildren:function(a){return null!=k[a]?k[a].length:0},countSiblings:function(a){a=e(a);return null!=a?k[a].length:0},indexOf:function(b){var c=e(b);return null!=c?a.common.indexOf(k[c],b):null},getChild:function(a,b){var c=null,d;null!=(d=k[a])&&
(c=f[d[b]]);return c},arrangeChildren:function(a,b){var c;b=b.slice(0);if(null!=f[a])if(null!=k[a])if(k[a].length==b.length){var d=0;for(c=b.length;d<c;d+=1){var e=b[d];if(h[e]!=a)throw"Child "+e+" does not belong to given node!";}k[a]=b}else throw"Collections of children don't match each other!";else if(0<b.length)throw"Collections of children don't match each other!";},validate:function(){var a=!0,b;for(b in l)if(l.hasOwnProperty(b)&&null!=l[b]){a=!1;break}return a},clone:function(){return a.common.tree({nodes:f,
parents:h,children:k,roots:l,rootChildren:n})},BREAK:1,SKIP:2}};a.common.TreeLevels=function(c){function b(a){this.context=a;this.items=[]}function e(a,b,c){this.context=a;this.positions={};this.positions[c]=b;this.endLevel=this.startLevel=c}function d(a){null==g[a]&&(g[a]=new b(null),h=null===h?a:Math.min(h,a),k=null===k?a:Math.max(k,a));return g[a]}var g=[],f={},h=null,k=null;(function(b){a.common.isObject(b)&&(g=a.common.cloneObject(b.levels,!0),f=a.common.cloneObject(b.items,!0),h=a.common.cloneObject(b.minimum,
!0),k=a.common.cloneObject(b.maximum,!0))})(c);return{addlevel:function(a,b){d(a).context=b},hasLevel:function(a){return null!=g[a]},hasItem:function(a){return f.hasOwnProperty(a)},addItem:function(a,b,c){if(f.hasOwnProperty(b)){var h=d(a);h.items.push(b);b=f[b];b.positions[a]=h.items.length-1;b.startLevel=Math.min(b.startLevel,a);b.endLevel=Math.max(b.endLevel,a)}else h=d(a),h.items.push(b),f[b]=new e(c,h.items.length-1,a)},getItemContext:function(a){var b=null;f.hasOwnProperty(a)&&(b=f[a].context);
return b},getLevelIndex:function(a){return f.hasOwnProperty(a)?f[a].startLevel:null},getEndLevelIndex:function(a){return f.hasOwnProperty(a)?f[a].endLevel:null},getItemPosition:function(a,b){a=f[a];return null!=a?null!=b?a.positions[b]:a.positions[a.startLevel]:null},getItemAtPosition:function(a,b){a=g[a];var c=null;null!=a&&(c=a.items[b]);return c},loopLevels:function(a,b){var c;if(null!=b)for(c=h;c<=k;c+=1){var d=g[c];if(null!=d&&b.call(a,c,d.context))break}},loopLevelsReversed:function(a,b){var c;
if(null!=b)for(c=k;c>=h;--c){var d=g[c];if(null!=d&&b.call(a,c,d.context))break}},loopLevelItems:function(a,b,c){var d;if(null!=c){var e=g[b];if(null!=e)for(b=0,d=e.items.length;b<d;b+=1){var h=e.items[b];if(c.call(a,h,f[h].context,b))break}}},getLevelLength:function(a){var b=0;a=g[a];null!=a&&(b=a.items.length);return b},loopItems:function(a,b){var c,d,e={};if(null!=b)for(d=h;d<=k;d+=1){var l=g[d];if(null!=l){var n=l.items;var u=0;for(c=n.length;u<c;u+=1){var v=n[u];if(!e.hasOwnProperty(v)&&(e[v]=
!0,b.call(a,v,f[v].context,u,d,l.context)))return}}}},binarySearch:function(b,c,d){var e=null;null!=d&&(c=g[c],null!=c&&(e=a.common.binarySearch(c.items,function(a){return d.call(b,a,f[a].context)})));return e.item},loopMerged:function(b,c,d){var e,h=[];var k=0;for(e=g.length;k<e;k+=1){var l=g[k];null!=l&&h.push(l.items)}l=a.common.mergeSort(h,c,!0);if(null!=d)for(k=0,e=l.length;k<e&&(c=l[k],!d.call(b,c,f[c].context));k+=1);},loopFromItem:function(a,b,c,d,e){if(f.hasOwnProperty(b)){b=f[b];var h=e||
b.startLevel;e=g[h].items;b=b.positions[h];if(null!=d)if(c)for(c=b-1;0<=c&&(h=e[c],!d.call(a,h,f[h].context));--c);else for(c=b+1,b=e.length;c<b&&(h=e[c],!d.call(a,h,f[h].context));c+=1);}},loopLevelsFromItem:function(a,b,c,d){if(f.hasOwnProperty(b)&&(b=f[b],null!=d))if(c)for(c=b.endLevel+1;c<=k&&(b=g[c],!d.call(a,c,null!=b?b.context:null));c+=1);else for(c=b.startLevel-1;c>=h&&(b=g[c],!d.call(a,c,null!=b?b.context:null));--c);},getPrevItem:function(a,b){var c=null;f.hasOwnProperty(a)&&(a=f[a],b=
b||a.startLevel,c=g[b].items[a.positions[b]-1]);return c},getNextItem:function(a,b){var c=null;f.hasOwnProperty(a)&&(a=f[a],b=b||a.startLevel,c=g[b].items[a.positions[b]+1]);return c},length:function(){return g.length},isEmpty:function(){return!g.length},clone:function(){return a.common.TreeLevels({levels:g,items:f,minimum:h,maximum:k})}}};a.common.DependencyManager=function(){var a={};return{register:function(b,c){return a[b]=c},resolve:function(b,c,d){var e=[],f=d||{};return function(){for(var d=
Array.prototype.slice.call(arguments,0),g=0;g<b.length;g+=1){var l=b[g];e.push(a.hasOwnProperty(l)&&""!==l?a[l]:d.shift())}e=e.concat(d);return c.apply(f||{},e)}}}};a.common.KeyboardNavigationManager=function(){function c(a,b){this.itemid=a;this.row=b}function b(){if(null==h){var b=0;f=a.common.SortedList();a.common.getMinimumCrossingRows(this,g,function(a){f.add(a,b);b+=1});h=a.common.TreeLevels();g.sort(function(a,b){return a.horizontalCenter()-b.horizontalCenter()});for(var c=0,d=g.length;c<d;c+=
1){var e=g[c];f.loopForward(this,e.y,function(a,b){if(a>e.bottom())return!0;h.addItem(b,e.context,e)})}}}function e(a){b();if(null==k||k.itemid!=a)k=new c(a,h.getLevelIndex(a));return k}function d(a){var b=h.getItemContext(k.itemid).horizontalCenter(),c=k.itemid;h.loopLevelsFromItem(this,k.itemid,a,function(a){k.row=a;k.itemid=h.binarySearch(this,a,function(a,c){return b-c.horizontalCenter()});return!0});c==k.itemid&&(k.row=a?h.getEndLevelIndex(k.itemid):h.getLevelIndex(k.itemid))}var g=[],f,h,k=
null;return{addRect:function(b,c){b=new a.common.Rect(b);b.context=c;g.push(b)},prepair:b,getItemAbove:function(a){k=e(a);d(!1);return k.itemid},getItemBelow:function(a){k=e(a);d(!0);return k.itemid},getItemOnLeft:function(a){k=e(a);a=h.getPrevItem(k.itemid,k.row);null!=a&&(k.itemid=a);return k.itemid},getItemOnRight:function(a){k=e(a);a=h.getNextItem(k.itemid,k.row);null!=a&&(k.itemid=a);return k.itemid},getNavigationLevels:function(){b();var a=[];h.loopLevels(this,function(b,c){var d=[];h.loopLevelItems(this,
b,function(a,b,c){d.push(a)});a.push(d)});return a}}};a.common.TaskManager=function(){function c(a,b,c,d){this.name=a;this.dependencies=b;this.factory=c;this.task=null;this.color=d}var b=new a.common.family,e=new a.common.DependencyManager,d=[];return{addTask:function(a,e,h,k){if(0<d.length)throw"Task Manager is already initialized";b.add(e,a,new c(a,e,h,k))},addDependency:function(a,b){if(0<d.length)throw"Task Manager is already initialized";e.register(a,b)},getTask:function(a){return(a=b.node(a))&&
a.task},process:function(a,c,h){var f=!1;0===d.length&&b.loopTopo(this,function(a,b){b.task=e.register(a,e.resolve(b.dependencies,b.factory)());d.push(b)});h&&console.log("-- process --");for(var g={},n=0,m=d.length;n<m;n+=1){var q=d[n],p=[];if(q.name==a||g.hasOwnProperty(q.name)){if(h)var r=performance.now();(f=q.task.process(h))&&b.loopChildren(this,q.name,function(a,c){g[a]=!0;h&&p.push(a);return b.SKIP});if(h)var t=performance.now();h&&console.log(n+". "+q.name+(", "+Math.round(t-r,2)+" ms. ")+
(f?" - forces: "+p.toString():""))}if(q.name==c)break}},getProcessDiagramConfig:function(){var c=new a.famdiagram.Config;0===d.length&&b.loopTopo(this,function(a,b){b.task=e.register(a,e.resolve(b.dependencies,b.factory)());d.push(b)});for(var f=0,h=d.length;f<h;f+=1){var k=d[f],l=new a.famdiagram.ItemConfig;l.id=k.name;l.title=a.common.splitCamelCaseName(k.name).join(" ");l.description=k.task.description||"";l.itemTitleColor=k.color;l.parents=[];b.loopParents(this,k.name,function(a,c){l.parents.push(a);
return b.SKIP});c.items.push(l)}return c}}};a.pdf.graphics=function(c){this._context=this._doc=c;this._dummyPlaceholder=new a.common.Placeholder};a.pdf.graphics.prototype.clean=function(){};a.pdf.graphics.prototype.resize=function(a,b,e){};a.pdf.graphics.prototype.begin=function(){};a.pdf.graphics.prototype.end=function(){};a.pdf.graphics.prototype.reset=function(a,b){};a.pdf.graphics.prototype.activate=function(a,b){return this._dummyPlaceholder};a.pdf.graphics.prototype.text=function(a,b,e,d,g,
f,h,k,l){};a.pdf.graphics.prototype.polylinesBuffer=function(a){a.loop(this,function(a){0<a.length()&&this.polyline(a)})};a.pdf.graphics.prototype.polyline=function(a){var b=a.paletteItem.toAttr(),c,d=this._doc;d.save();a.loop(this,function(a){switch(a.segmentType){case 1:d.moveTo(Math.round(a.x)+.5,Math.round(a.y)+.5);break;case 0:d.lineTo(Math.round(a.x)+.5,Math.round(a.y)+.5);break;case 4:a.width==a.height&&a.width/2<=a.cornerRadius?d.roundedRect(Math.round(a.x)+.5,Math.round(a.y)+.5,a.width,a.height,
Math.min(a.width,a.height)/2):0===a.cornerRadius?(d.moveTo(Math.round(a.x)+.5,Math.round(a.y)+.5),d.lineTo(Math.round(a.x+a.width)+.5,Math.round(a.y)+.5),d.lineTo(Math.round(a.x+a.width)+.5,Math.round(a.y+a.height)+.5),d.lineTo(Math.round(a.x)+.5,Math.round(a.y+a.height)+.5),d.lineTo(Math.round(a.x)+.5,Math.round(a.y)+.5)):(c=Math.min(a.cornerRadius,Math.min(a.width/2,a.height/2)),d.roundedRect(Math.round(a.x)+.5,Math.round(a.y)+.5,a.width,a.height,c));break;case 2:d.quadraticCurveTo(Math.round(a.cpX)+
.5,Math.round(a.cpY)+.5,Math.round(a.x)+.5,Math.round(a.y)+.5);break;case 3:d.bezierCurveTo(Math.round(a.cpX1)+.5,Math.round(a.cpY1)+.5,Math.round(a.cpX2)+.5,Math.round(a.cpY2)+.5,Math.round(a.x)+.5,Math.round(a.y)+.5)}});d.lineJoin("round");if(null!=b.lineType)switch(a=Math.round(b.lineWidth)||1,b.lineType){case 1:d.dash(a,2*a);break;case 2:d.dash(5*a,3*a)}void 0!==b.lineWidth&&void 0!==b.fillColor?d.lineWidth(b.lineWidth).fillOpacity(b.opacity).fillAndStroke(b.fillColor,b.borderColor):void 0!==
b.lineWidth?d.lineWidth(b.lineWidth).stroke(b.borderColor):void 0!==b.fillColor&&d.fillOpacity(b.opacity).fillColor(b.fillColor);d.restore()};a.pdf.graphics.prototype.rightAngleLine=function(a,b,e,d,g){};a.pdf.graphics.prototype.template=function(c,b,e,d,g,f,h,k,l,n,m,q,p){e=0;null!==p&&void 0!==p.borderWidth&&(e=this.getPxSize(p.borderWidth));c=new a.common.Rect(c+g,b+f,h-e,k-e);null==q&&(q=new a.common.RenderEventArgs);null!==m&&m(this._doc,c,q)};a.pdf.graphics.prototype.getPxSize=function(a,b){var c=
a;"string"===typeof a&&(c=0<a.indexOf("pt")?96*parseInt(a,10)/72:0<a.indexOf("%")?parseFloat(a)/100*b:parseInt(a,10));return c};a.pdf.famdiagram.Plugin=function(c){function b(){return f.options}function e(){return f.graphics}function d(){var c=new a.common.TaskManager;c.addDependency("options",b);c.addDependency("graphics",e);c.addDependency("defaultConfig",new a.famdiagram.Config);c.addDependency("defaultItemConfig",new a.famdiagram.ItemConfig);c.addDependency("defaultTemplateConfig",new a.famdiagram.TemplateConfig);
c.addDependency("defaultButtonConfig",new a.famdiagram.ButtonConfig);c.addDependency("defaultPaletteItemConfig",new a.famdiagram.PaletteItemConfig);c.addDependency("defaultBackgroundAnnotationConfig",new a.famdiagram.BackgroundAnnotationConfig);c.addDependency("defaultConnectorAnnotationConfig",new a.famdiagram.ConnectorAnnotationConfig);c.addDependency("defaultHighlightPathAnnotationConfig",new a.famdiagram.HighlightPathAnnotationConfig);c.addDependency("defaultShapeAnnotationConfig",new a.famdiagram.ShapeAnnotationConfig);
c.addDependency("defaultLabelAnnotationConfig",new a.famdiagram.LabelAnnotationConfig);c.addDependency("isFamilyChartMode",!0);c.addDependency("showElbowDots",!0);c.addDependency("null",null);c.addDependency("foreground",2);c.addDependency("background",1);c.addTask("OptionsTask",["options"],a.famdiagram.OptionsTask,"#000000");c.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.CalloutOptionTask,"#000080");c.addTask("ConnectorsOptionTask",["OptionsTask","defaultConfig"],
a.orgdiagram.ConnectorsOptionTask,"#000080");c.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],a.famdiagram.ItemsOptionTask,"#000080");c.addTask("RemoveLoopsOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.RemoveLoopsOptionTask,"#000080");c.addTask("SpousesOptionTask",["OptionsTask","defaultItemConfig"],a.famdiagram.SpousesOptionTask,"#000080");c.addTask("ItemsSizesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig","defaultButtonConfig"],a.orgdiagram.ItemsSizesOptionTask,
"#000080");c.addTask("TemplatesOptionTask",["OptionsTask","defaultConfig","defaultButtonConfig","defaultTemplateConfig"],a.orgdiagram.TemplatesOptionTask,"#000080");c.addTask("OrientationOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.OrientationOptionTask,"#000080");c.addTask("VisualTreeOptionTask",["OptionsTask"],a.famdiagram.VisualTreeOptionTask,"#000080");c.addTask("HideGrandParentsConnectorsOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.HideGrandParentsConnectorsOptionTask,
"#000080");c.addTask("NormalizeOptionTask",["OptionsTask","defaultConfig"],a.famdiagram.NormalizeOptionTask,"#000080");c.addTask("OrderFamilyNodesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.famdiagram.OrderFamilyNodesOptionTask,"#000080");c.addTask("LinePaletteOptionTask",["OptionsTask","defaultPaletteItemConfig"],a.famdiagram.LinePaletteOptionTask,"#000080");c.addTask("CursorItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorItemOptionTask,"#000080");c.addTask("HighlightItemOptionTask",
["OptionsTask","defaultConfig"],a.orgdiagram.HighlightItemOptionTask,"#000080");c.addTask("SelectedItemsOptionTask",["OptionsTask"],a.orgdiagram.SelectedItemsOptionTask,"#000080");c.addTask("SplitAnnotationsOptionTask",["OptionsTask"],a.orgdiagram.SplitAnnotationsOptionTask,"#00ffff");c.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");c.addTask("BackgroundShapeAnnotationOptionTask",
["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","background"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");c.addTask("ForegroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","foreground"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");c.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","background"],a.orgdiagram.HighlightPathAnnotationOptionTask,
"#000080");c.addTask("ForegroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");c.addTask("BackgroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");c.addTask("BackgroundAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultBackgroundAnnotationConfig"],a.orgdiagram.BackgroundAnnotationOptionTask,
"#000080");c.addTask("ScaleOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ScaleOptionTask,"#000080");c.addTask("UserDefinedNodesOrderTask",["OrderFamilyNodesOptionTask","defaultItemConfig"],a.famdiagram.UserDefinedNodesOrderTask,"#ff0000");c.addTask("LogicalFamilyTask",["ItemsOptionTask"],a.famdiagram.LogicalFamilyTask,"#00ffff");c.addTask("RemoveLoopsTask",["ItemsOptionTask","RemoveLoopsOptionTask","LogicalFamilyTask"],a.famdiagram.RemoveLoopsTask,"#ff0000");c.addTask("LabelAnnotationOptionTask",
["SplitAnnotationsOptionTask","RemoveLoopsTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationOptionTask,"#000080");c.addTask("LabelAnnotationTemplateOptionTask",["LabelAnnotationOptionTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationTemplateOptionTask,"#000080");c.addTask("LabelAnnotationPlacementOptionTask",["LabelAnnotationOptionTask","defaultLabelAnnotationConfig"],a.famdiagram.LabelAnnotationPlacementOptionTask,"#000080");c.addTask("CombinedContextsTask",["ItemsOptionTask",
"LabelAnnotationOptionTask"],a.orgdiagram.CombinedContextsTask,"#00ffff");c.addTask("AddLabelAnnotationsTask",["LabelAnnotationPlacementOptionTask","RemoveLoopsTask"],a.famdiagram.AddLabelAnnotationsTask,"#ff0000");c.addTask("AddSpousesTask",["SpousesOptionTask","AddLabelAnnotationsTask"],a.famdiagram.AddSpousesTask,"#ff0000");c.addTask("HideGrandParentsConnectorsTask",["HideGrandParentsConnectorsOptionTask","AddSpousesTask"],a.famdiagram.HideGrandParentsConnectorsTask,"#ff0000");c.addTask("NormalizeLogicalFamilyTask",
["NormalizeOptionTask","HideGrandParentsConnectorsTask"],a.famdiagram.NormalizeLogicalFamilyTask,"#ff0000");c.addTask("OrderFamilyNodesTask",["OrderFamilyNodesOptionTask","UserDefinedNodesOrderTask","NormalizeLogicalFamilyTask"],a.famdiagram.OrderFamilyNodesTask,"#ff0000");c.addTask("ReadTemplatesTask",["TemplatesOptionTask"],a.pdf.orgdiagram.ReadTemplatesTask,"#00ffff");c.addTask("ItemTemplateParamsTask",["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],a.orgdiagram.ItemTemplateParamsTask,
"#00ffff");c.addTask("LabelAnnotationTemplateParamsTask",["ItemsSizesOptionTask","LabelAnnotationTemplateOptionTask","ReadTemplatesTask"],a.famdiagram.LabelAnnotationTemplateParamsTask,"#00ffff");c.addTask("CombinedTemplateParamsTask",["ItemTemplateParamsTask","LabelAnnotationTemplateParamsTask"],a.famdiagram.CombinedTemplateParamsTask,"#00ffff");c.addTask("GroupTitleTemplateTask",["TemplatesOptionTask"],a.pdf.orgdiagram.GroupTitleTemplateTask,"#00ffff");c.addTask("CheckBoxTemplateTask",["ItemsSizesOptionTask"],
a.pdf.orgdiagram.CheckBoxTemplateTask,"#00ffff");c.addTask("ButtonsTemplateTask",["ItemsSizesOptionTask"],a.pdf.orgdiagram.ButtonsTemplateTask,"#00ffff");c.addTask("AnnotationLabelTemplateTask",["ItemsOptionTask"],a.pdf.orgdiagram.AnnotationLabelTemplateTask,"#00ffff");c.addTask("ConnectionsGraphTask","graphics CreateTransformTask ConnectorsOptionTask OrderFamilyNodesTask AlignDiagramTask RemoveLoopsTask".split(" "),a.orgdiagram.ConnectionsGraphTask,"#00ffff");c.addTask("HighlightItemTask",["HighlightItemOptionTask",
"null"],a.orgdiagram.HighlightItemTask,"#00ffff");c.addTask("CursorItemTask",["CursorItemOptionTask","null"],a.orgdiagram.CursorItemTask,"#00ffff");c.addTask("SelectedItemsTask",["SelectedItemsOptionTask"],a.orgdiagram.SelectedItemsTask,"#00ffff");c.addTask("CombinedNormalVisibilityItemsTask",["OptionsTask"],a.pdf.orgdiagram.DummyCombinedNormalVisibilityItemsTask,"#00ffff");c.addTask("CurrentControlSizeTask",["OptionsTask"],a.pdf.orgdiagram.DummyCurrentControlSizeTask,"#00ffff");c.addTask("ItemsPositionsTask",
"CurrentControlSizeTask ScaleOptionTask OrientationOptionTask ItemsSizesOptionTask ConnectorsOptionTask OrderFamilyNodesOptionTask OrderFamilyNodesTask CombinedTemplateParamsTask CursorItemTask CombinedNormalVisibilityItemsTask".split(" "),a.famdiagram.ItemsPositionsTask,"#ff0000");c.addTask("AlignDiagramTask","OrientationOptionTask ItemsSizesOptionTask VisualTreeOptionTask ScaleOptionTask CurrentControlSizeTask null ItemsPositionsTask isFamilyChartMode".split(" "),a.orgdiagram.AlignDiagramTask,"#ff0000");
c.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],a.orgdiagram.CreateTransformTask,"#00ffff");c.addTask("PaletteManagerTask",["ConnectorsOptionTask","LinePaletteOptionTask"],a.orgdiagram.PaletteManagerTask,"#00ffff");c.addTask("DrawBackgroundAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask BackgroundAnnotationOptionTask LogicalFamilyTask AlignDiagramTask".split(" "),a.orgdiagram.DrawBackgroundAnnotationTask,"#008000");c.addTask("DrawBackgroundShapeAnnotationTask",
"graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background DrawBackgroundAnnotationTask".split(" "),a.orgdiagram.DrawShapeAnnotationTask,"#008000");c.addTask("DrawBackgroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background DrawBackgroundShapeAnnotationTask".split(" "),
a.orgdiagram.DrawConnectorAnnotationTask,"#008000");c.addTask("DrawBackgroundHighlightPathAnnotationTask","graphics ConnectorsOptionTask ForegroundHighlightPathAnnotationOptionTask ConnectionsGraphTask foreground DrawBackgroundConnectorAnnotationTask".split(" "),a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");c.addTask("DrawConnectorsTask","graphics ConnectionsGraphTask ConnectorsOptionTask showElbowDots PaletteManagerTask DrawBackgroundHighlightPathAnnotationTask".split(" "),a.orgdiagram.DrawConnectorsTask,
"#008000");c.addTask("DrawForegroundHighlightPathAnnotationTask","graphics ConnectorsOptionTask BackgroundHighlightPathAnnotationOptionTask ConnectionsGraphTask background DrawConnectorsTask".split(" "),a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");c.addTask("DrawTreeItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask null ItemsSizesOptionTask CombinedContextsTask AlignDiagramTask null CombinedTemplateParamsTask CursorItemTask SelectedItemsTask GroupTitleTemplateTask CheckBoxTemplateTask ButtonsTemplateTask DrawForegroundHighlightPathAnnotationTask".split(" "),
a.orgdiagram.DrawTreeItemsTask,"#008000");c.addTask("DrawCursorTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask CombinedTemplateParamsTask CursorItemTask SelectedItemsTask DrawTreeItemsTask".split(" "),a.orgdiagram.DrawCursorTask,"#008000");c.addTask("DrawHighlightTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask CombinedTemplateParamsTask HighlightItemTask CursorItemTask SelectedItemsTask DrawCursorTask".split(" "),
a.orgdiagram.DrawHighlightTask,"#008000");c.addTask("DrawForegroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground DrawHighlightTask".split(" "),a.orgdiagram.DrawShapeAnnotationTask,"#008000");c.addTask("DrawForegroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground DrawForegroundShapeAnnotationTask".split(" "),
a.orgdiagram.DrawConnectorAnnotationTask,"#008000");return c}function g(){f.options.hasButtons=2;f.options.pageFitMode=5;f.options.autoSizeMaximum=new a.common.Size(1E5,1E5)}var f={name:"famdiagram",doc:null,options:c,tasks:null,graphics:null};return{draw:function(c,k,l){f.doc=c;f.tasks=d(b,e);f.graphics=new a.pdf.graphics(f.doc);f.graphics.debug=!1;g();f.doc.save();f.doc.translate(k,l);f.tasks.process("OptionsTask",null,!1);f.doc.restore();c=f.tasks.getTask("AlignDiagramTask");return new a.common.Size(c.getContentSize())},
getSize:function(){f.tasks=d(b,e);g();f.tasks.process("OptionsTask","AlignDiagramTask",!1);var c=f.tasks.getTask("AlignDiagramTask");return new a.common.Size(c.getContentSize())}}};a.pdf.Template=function(c,b){this.cursorTemplate=this.dotHighlightTemplate=this.highlightTemplate=this.itemTemplate=this.templateConfig=null;null!=b&&(this.templateConfig=b,this.itemTemplate=a.common.isNullOrEmpty(b.itemTemplate)?new a.pdf.ItemTemplate(c,b):new a.pdf.UserTemplate(c,b,c.onItemRender),this.highlightTemplate=
a.common.isNullOrEmpty(b.highlightTemplate)?new a.pdf.HighlightTemplate(c,b):new a.pdf.UserTemplate(c,b,c.onHighlightRender),this.dotHighlightTemplate=new a.pdf.DummyTemplate(c,b),this.cursorTemplate=a.common.isNullOrEmpty(b.cursorTemplate)?new a.pdf.CursorTemplate(c,b):new a.pdf.UserTemplate(c,b,c.onCursorRender))};a.pdf.orgdiagram.DummyCurrentControlSizeTask=function(c){return{process:function(){return!0},getScrollPanelSize:function(){return new a.common.Size(800,600)},getOptimalPanelSize:function(){return new a.common.Size(775,
575)}}};a.pdf.orgdiagram.AnnotationLabelTemplateTask=function(c){var b=null;return{process:function(){return!1},getTemplate:function(){null==b&&(b=new a.pdf.AnnotationLabelTemplate);return b}}};a.pdf.orgdiagram.ButtonsTemplateTask=function(c){var b=null;return{process:function(){return!1},getTemplate:function(){null==b&&(b=new a.pdf.DummyTemplate);return b}}};a.pdf.orgdiagram.CheckBoxTemplateTask=function(c){var b=null;return{process:function(){b=null;return!0},getTemplate:function(){if(null==b){var e=
c.getOptions();b=new a.pdf.CheckBoxTemplate(e.selectCheckBoxLabel)}return b}}};a.pdf.orgdiagram.GroupTitleTemplateTask=function(c){var b=null;return{process:function(){b=null;return!0},getTemplate:function(){if(null==b){var e=c.getOptions();b=new a.pdf.GroupTitleTemplate(e.itemTitleFirstFontColor,e.itemTitleSecondFontColor)}return b}}};a.pdf.orgdiagram.ReadTemplatesTask=function(c){var b={};return{process:function(){var e=c.getOptions(),d=e.templates;b={};b.DefaultWidgetTemplate=new a.pdf.Template(e,
new a.orgdiagram.TemplateConfig);var g=new a.orgdiagram.TemplateConfig;g.name="DefaultWidgetLabelAnnotationTemplate";g.isActive=!1;g.itemSize=new a.common.Size(100,20);g.minimizedItemSize=new a.common.Size(0,0);var f=new a.pdf.Template;f.templateConfig=g;f.minimizedItemCornerRadius=g.minimizedItemSize.width/2;f.itemTemplate=new a.pdf.LabelAnnotationTemplate;f.dotHighlightTemplate=new a.pdf.DummyTemplate;b.DefaultWidgetLabelAnnotationTemplate=f;g=0;for(f=d.length;g<f;g+=1){var h=d[g];b[h.name]=new a.pdf.Template(e,
h)}return!0},getTemplate:function(a,c,g){return b[a]||b[c]||b[g]},DefaultWidgetTemplateName:"DefaultWidgetTemplate",DefaultWidgetLabelAnnotationTemplateName:"DefaultWidgetLabelAnnotationTemplate"}};a.pdf.orgdiagram.DummyCombinedNormalVisibilityItemsTask=function(a){return{process:function(){return!0},isItemSelected:function(a){return!1}}};a.pdf.orgdiagram.Plugin=function(c){function b(){return f.options}function e(){return f.graphics}function d(){var c=new a.common.TaskManager;c.addDependency("options",
b);c.addDependency("graphics",e);c.addDependency("defaultConfig",new a.orgdiagram.Config);c.addDependency("defaultItemConfig",new a.orgdiagram.ItemConfig);c.addDependency("defaultTemplateConfig",new a.orgdiagram.TemplateConfig);c.addDependency("defaultButtonConfig",new a.orgdiagram.ButtonConfig);c.addDependency("defaultBackgroundAnnotationConfig",new a.orgdiagram.BackgroundAnnotationConfig);c.addDependency("defaultConnectorAnnotationConfig",new a.orgdiagram.ConnectorAnnotationConfig);c.addDependency("defaultHighlightPathAnnotationConfig",
new a.orgdiagram.HighlightPathAnnotationConfig);c.addDependency("defaultShapeAnnotationConfig",new a.orgdiagram.ShapeAnnotationConfig);c.addDependency("isFamilyChartMode",!1);c.addDependency("showElbowDots",!1);c.addDependency("null",null);c.addDependency("foreground",2);c.addDependency("background",1);c.addTask("OptionsTask",["options"],a.orgdiagram.OptionsTask,"#000000");c.addTask("CalloutOptionTask",["OptionsTask","defaultConfig","defaultItemConfig"],a.orgdiagram.CalloutOptionTask,"#000080");c.addTask("ConnectorsOptionTask",
["OptionsTask","defaultConfig"],a.orgdiagram.ConnectorsOptionTask,"#000080");c.addTask("ItemsOptionTask",["OptionsTask","defaultItemConfig"],a.orgdiagram.ItemsOptionTask,"#000080");c.addTask("ItemsSizesOptionTask",["OptionsTask","defaultConfig","defaultItemConfig","defaultButtonConfig"],a.orgdiagram.ItemsSizesOptionTask,"#000080");c.addTask("TemplatesOptionTask",["OptionsTask","defaultConfig","defaultButtonConfig","defaultTemplateConfig"],a.orgdiagram.TemplatesOptionTask,"#000080");c.addTask("OrientationOptionTask",
["OptionsTask","defaultConfig"],a.orgdiagram.OrientationOptionTask,"#000080");c.addTask("VisualTreeOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.VisualTreeOptionTask,"#000080");c.addTask("CursorItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.CursorItemOptionTask,"#000080");c.addTask("HighlightItemOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.HighlightItemOptionTask,"#000080");c.addTask("SelectedItemsOptionTask",["OptionsTask"],a.orgdiagram.SelectedItemsOptionTask,
"#000080");c.addTask("SplitAnnotationsOptionTask",["OptionsTask"],a.orgdiagram.SplitAnnotationsOptionTask,"#00ffff");c.addTask("ForegroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","foreground"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");c.addTask("BackgroundShapeAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultShapeAnnotationConfig","background"],a.orgdiagram.ShapeAnnotationOptionTask,"#000080");c.addTask("ForegroundHighlightPathAnnotationOptionTask",
["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","foreground"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");c.addTask("BackgroundHighlightPathAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultHighlightPathAnnotationConfig","background"],a.orgdiagram.HighlightPathAnnotationOptionTask,"#000080");c.addTask("ForegroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","foreground"],a.orgdiagram.ConnectorAnnotationOptionTask,
"#000080");c.addTask("BackgroundConnectorAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultConnectorAnnotationConfig","background"],a.orgdiagram.ConnectorAnnotationOptionTask,"#000080");c.addTask("BackgroundAnnotationOptionTask",["SplitAnnotationsOptionTask","defaultBackgroundAnnotationConfig"],a.orgdiagram.BackgroundAnnotationOptionTask,"#000080");c.addTask("ScaleOptionTask",["OptionsTask","defaultConfig"],a.orgdiagram.ScaleOptionTask,"#000080");c.addTask("CombinedContextsTask",["ItemsOptionTask"],
a.orgdiagram.CombinedContextsTask,"#00ffff");c.addTask("OrgTreeTask",["ItemsOptionTask"],a.orgdiagram.OrgTreeTask,"#ff0000");c.addTask("ReadTemplatesTask",["TemplatesOptionTask"],a.pdf.orgdiagram.ReadTemplatesTask,"#00ffff");c.addTask("ItemTemplateParamsTask",["ItemsSizesOptionTask","CursorItemOptionTask","ReadTemplatesTask"],a.orgdiagram.ItemTemplateParamsTask,"#00ffff");c.addTask("GroupTitleTemplateTask",["TemplatesOptionTask"],a.pdf.orgdiagram.GroupTitleTemplateTask,"#00ffff");c.addTask("CheckBoxTemplateTask",
["ItemsSizesOptionTask"],a.pdf.orgdiagram.CheckBoxTemplateTask,"#00ffff");c.addTask("ButtonsTemplateTask",["ItemsSizesOptionTask"],a.pdf.orgdiagram.ButtonsTemplateTask,"#00ffff");c.addTask("AnnotationLabelTemplateTask",["ItemsOptionTask"],a.pdf.orgdiagram.AnnotationLabelTemplateTask,"#00ffff");c.addTask("VisualTreeTask",["OrgTreeTask","null","VisualTreeOptionTask","isFamilyChartMode"],a.orgdiagram.VisualTreeTask,"#ff0000");c.addTask("VisualTreeLevelsTask",["VisualTreeTask","ItemTemplateParamsTask"],
a.orgdiagram.VisualTreeLevelsTask,"#ff0000");c.addTask("ConnectionsGraphTask",["graphics","CreateTransformTask","ConnectorsOptionTask","VisualTreeLevelsTask","AlignDiagramTask"],a.orgdiagram.ConnectionsGraphTask,"#00ffff");c.addTask("HighlightItemTask",["HighlightItemOptionTask","null"],a.orgdiagram.HighlightItemTask,"#00ffff");c.addTask("CursorItemTask",["CursorItemOptionTask","null"],a.orgdiagram.CursorItemTask,"#00ffff");c.addTask("SelectedItemsTask",["SelectedItemsOptionTask"],a.orgdiagram.SelectedItemsTask,
"#00ffff");c.addTask("CombinedNormalVisibilityItemsTask",["OptionsTask"],a.pdf.orgdiagram.DummyCombinedNormalVisibilityItemsTask,"#00ffff");c.addTask("CurrentControlSizeTask",["OptionsTask"],a.pdf.orgdiagram.DummyCurrentControlSizeTask,"#00ffff");c.addTask("ItemsPositionsTask","CurrentControlSizeTask ScaleOptionTask OrientationOptionTask ItemsSizesOptionTask ConnectorsOptionTask VisualTreeOptionTask VisualTreeTask VisualTreeLevelsTask ItemTemplateParamsTask CursorItemTask CombinedNormalVisibilityItemsTask".split(" "),
a.orgdiagram.ItemsPositionsTask,"#ff0000");c.addTask("AlignDiagramTask","OrientationOptionTask ItemsSizesOptionTask VisualTreeOptionTask ScaleOptionTask CurrentControlSizeTask null ItemsPositionsTask isFamilyChartMode".split(" "),a.orgdiagram.AlignDiagramTask,"#ff0000");c.addTask("CreateTransformTask",["OrientationOptionTask","AlignDiagramTask"],a.orgdiagram.CreateTransformTask,"#00ffff");c.addTask("PaletteManagerTask",["ConnectorsOptionTask","null"],a.orgdiagram.PaletteManagerTask,"#00ffff");c.addTask("DrawBackgroundAnnotationTask",
"graphics CreateTransformTask ApplyLayoutChangesTask BackgroundAnnotationOptionTask VisualTreeTask AlignDiagramTask".split(" "),a.orgdiagram.DrawBackgroundAnnotationTask,"#008000");c.addTask("DrawBackgroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background DrawBackgroundAnnotationTask".split(" "),a.orgdiagram.DrawShapeAnnotationTask,"#008000");c.addTask("DrawBackgroundConnectorAnnotationTask",
"graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask BackgroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask background DrawBackgroundShapeAnnotationTask".split(" "),a.orgdiagram.DrawConnectorAnnotationTask,"#008000");c.addTask("DrawTreeItemsTask","graphics CreateTransformTask ApplyLayoutChangesTask null ItemsSizesOptionTask CombinedContextsTask AlignDiagramTask null ItemTemplateParamsTask CursorItemTask SelectedItemsTask GroupTitleTemplateTask CheckBoxTemplateTask ButtonsTemplateTask DrawBackgroundConnectorAnnotationTask".split(" "),
a.orgdiagram.DrawTreeItemsTask,"#008000");c.addTask("DrawBackgroundHighlightPathAnnotationTask","graphics ConnectorsOptionTask ForegroundHighlightPathAnnotationOptionTask ConnectionsGraphTask foreground DrawTreeItemsTask".split(" "),a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");c.addTask("DrawConnectorsTask","graphics ConnectionsGraphTask ConnectorsOptionTask showElbowDots PaletteManagerTask DrawBackgroundHighlightPathAnnotationTask".split(" "),a.orgdiagram.DrawConnectorsTask,"#008000");
c.addTask("DrawForegroundHighlightPathAnnotationTask","graphics ConnectorsOptionTask BackgroundHighlightPathAnnotationOptionTask ConnectionsGraphTask background DrawConnectorsTask".split(" "),a.orgdiagram.DrawHighlightPathAnnotationTask,"#00ffff");c.addTask("DrawForegroundShapeAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundShapeAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground DrawForegroundHighlightPathAnnotationTask".split(" "),
a.orgdiagram.DrawShapeAnnotationTask,"#008000");c.addTask("DrawForegroundConnectorAnnotationTask","graphics CreateTransformTask ApplyLayoutChangesTask OrientationOptionTask ForegroundConnectorAnnotationOptionTask AlignDiagramTask AnnotationLabelTemplateTask foreground DrawForegroundShapeAnnotationTask".split(" "),a.orgdiagram.DrawConnectorAnnotationTask,"#008000");c.addTask("DrawCursorTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask ItemTemplateParamsTask CursorItemTask SelectedItemsTask DrawForegroundConnectorAnnotationTask".split(" "),
a.orgdiagram.DrawCursorTask,"#008000");c.addTask("DrawHighlightTask","graphics CreateTransformTask ApplyLayoutChangesTask CombinedContextsTask AlignDiagramTask ItemTemplateParamsTask HighlightItemTask CursorItemTask SelectedItemsTask DrawCursorTask".split(" "),a.orgdiagram.DrawHighlightTask,"#008000");return c}function g(){f.options.hasButtons=2;f.options.pageFitMode=5;f.options.autoSizeMaximum=new a.common.Size(1E5,1E5)}var f={name:"orgdiagram",doc:null,options:c,tasks:null,graphics:null};return{draw:function(c,
k,l){f.doc=c;f.tasks=d(b,e);f.graphics=new a.pdf.graphics(f.doc);f.graphics.debug=!1;g();f.doc.save();f.doc.translate(k,l);f.tasks.process("OptionsTask",null,!1);f.doc.restore();c=f.tasks.getTask("AlignDiagramTask");return new a.common.Size(c.getContentSize())},getSize:function(){f.tasks=d(b,e);g();f.tasks.process("OptionsTask","AlignDiagramTask",!1);var c=f.tasks.getTask("AlignDiagramTask");return new a.common.Size(c.getContentSize())}}};a.pdf.AnnotationLabelTemplate=function(){return{template:function(){return{}},
getHashCode:function(){return 0},render:function(a,b,e){e=e.context;a.save();a.font("Helvetica",12).text(e.label,b.x,b.y,{width:b.width,height:b.height,align:"center"});a.restore()}}};a.pdf.CheckBoxTemplate=function(a){return{template:function(){return{}},getHashCode:function(){return 0},render:function(b,c,d){d=d.isSelected?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAF/SURBVDhPpZM7rwFREMf/u4hEY5vVkigoSERiKwq1QqOh28R30QnFRqnSKHwFn0C37Sbi0SCE2KzE41wzd/feG48g91ftmdn5zznzkLLZrNhutzidTvgEv98PRVEgxeNx0e12EYvFcDweXfdjZFmGEIKDx+MxdF0HotGomEwmV/tnUAzFyqT8KrNHLpdDJpPBZrPh81UHLPAO7XYb6/Ua8/kcpmnC5/NBkqT3BJbLJRqNBgKBACqVCgqFAg6HA/veEiiVSlBVFZfLBZ1Ox7V+81KAMtPVV6sV+v2+a/2FBeg9RDqdhqZp/E1Mp1O0Wi32V6tVLuAtLEBvGw6HmM1m2O/3yOfz7CyXy4hEItz3ZrPJtr/8dIEKUiwWYRgGX3e32yGZTOJ8PnMBB4MBB9xy14VarcaZFosFQqEQHMdBvV5HIpFw/3gATZNlWTxdHr1eT4TDYZFKpVzLPRRDsU9HeTQaCdu23dM91wKzwNNlCgaDXINHW0pF95bpn+us4AsY2TIOZFyZ9AAAAABJRU5ErkJggg==":
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAACjSURBVDhPrZNNCsQgDEY/f2q33sCCN+iNPJlXE2/gTtDiVBln1TJo+zZBJS+YELLvewkhIOeMETjnkFKCaK2LtRbbtiGl9H2+hlKKUkpLds7BGAMopYr3/rwfo+bUXFrN/yrfcXrQBDMwxkAImRfEGFucFnTeEdT/zNIEy7K0wyi/KfSGjPJoCp13BDM9EEK0eLtM67riOI7LLa0F+zI9XGeJDyTldfBA9FNyAAAAAElFTkSuQmCC";b.save();b.image(d,c.x,c.y);b.font("Helvetica",11).text(a,c.x+20,c.y+4,{ellipsis:!0,width:c.width-4,height:c.height,
align:"left"});b.restore()}}};a.pdf.CursorTemplate=function(a,b){return{template:function(){return{}},getHashCode:function(){return 0},render:function(a,c,g){a.save();a.roundedRect(c.x,c.y,c.width,c.height,4).lineWidth(b.cursorBorderWidth).stroke("#fbd850");a.restore()}}};a.pdf.DummyTemplate=function(){return{template:function(){return{}},getHashCode:function(){return 0},render:function(){}}};a.pdf.GroupTitleTemplate=function(c,b){return{template:function(){return{}},getHashCode:function(){return 0},
render:function(e,d,g){g=g.context;var f=g.groupTitleColor||"#4169e1",h=a.common.highestContrast(f,b,c);e.save();e.translate(d.width,0).rotate(90,{origin:[d.x,d.y]});e.fillColor(f).roundedRect(d.x,d.y,d.height-2,d.width,4).fill();e.fillColor(h).font("Helvetica",12).text(g.groupTitle,d.x+4,d.y+6,{ellipsis:!0,width:d.height-4,height:d.width-4,align:"center"});e.restore()}}};a.pdf.HighlightTemplate=function(a,b){return{template:function(){return{}},getHashCode:function(){return 0},render:function(a,
c,g){a.save();a.roundedRect(c.x,c.y,c.width,c.height,4).lineWidth(b.highlightBorderWidth).stroke("#fbcb09");a.restore()}}};a.pdf.ItemTemplate=function(c,b){return{template:function(){return{}},getHashCode:function(){return 0},render:function(e,d,g){g=g.context;var f=null!=g.itemTitleColor?g.itemTitleColor:"#4169e1",h=a.common.highestContrast(f,c.itemTitleSecondFontColor,c.itemTitleFirstFontColor),k=new a.common.Size(b.itemSize);k.width-=2*b.itemBorderWidth;k.height-=2*b.itemBorderWidth;e.save();e.roundedRect(d.x,
d.y,d.width,d.height,4).lineWidth(b.itemBorderWidth).stroke("#dddddd");e.fillColor(f).roundedRect(d.x+2,d.y+2,k.width-4,18,2).fill();e.fillColor(h).font("Helvetica",12).text(g.title,d.x+4,d.y+7,{ellipsis:!0,width:k.width-4-8,height:16,align:"left"});null!=g.image&&e.image(g.image,d.x+3,d.y+24);e.rect(d.x+3,d.y+24,50,60).stroke("#cccccc");e.fillColor("black").font("Helvetica",10).text(g.description,d.x+56,d.y+24,{ellipsis:!0,width:k.width-4-56,height:74,align:"left"});e.restore()}}};a.pdf.LabelAnnotationTemplate=
function(){return{template:function(){return{}},getHashCode:function(){return 0},render:function(a,b,e){e=e.context;a.save();a.font("Helvetica",12).text(e.title,b.x,b.y,{width:b.width,height:b.height,align:"center"});a.restore()}}};a.pdf.UserTemplate=function(c,b,e){return{template:function(){return{}},getHashCode:function(){return 0},render:function(d,g,f){null!=e?e(d,g,f):a.pdf.ItemTemplate(c,b).render(d,g,f)}}};return a});
