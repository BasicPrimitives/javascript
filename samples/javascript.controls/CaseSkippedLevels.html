<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Nodes Levels Alignment in Organizational Diagram</title>

  
  <script type="text/javascript" src="../../primitives.js"></script>
  <link href="../../css/primitives.css" media="screen" rel="stylesheet" type="text/css" />

  <script type="text/javascript">
    var control;
    var timer = null;
    document.addEventListener('DOMContentLoaded', function () {
      var options = new primitives.OrgConfig();

			var items = [
        { id: 1, parent: null, level: 0, description: "Co-Presidents, Platform Products & Services Division", email: "jeanwhit@name.com", groupTitleColor: "#4169e1", image: "../images/photos/w.png", itemTitleColor: "#4b0082", phone: "505-791-1689", title: "Jeanna White", label: "Jeanna White", groupTitle: "Root" },
        { id: 2, parent: 1, level: 1, description: "Sr. VP, Server & Tools Division", email: "jameholt@name.com", groupTitleColor: "#4169e1", image: "../images/photos/e.png", itemTitleColor: "#4b0082", phone: "262-215-7998", title: "James Holt", label: "James Holt" },
        { id: 3, parent: 2, level: 3, description: "VP, Server & Tools Marketing and Solutions", email: "thomwill@name.com", groupTitleColor: "#4169e1", image: "../images/photos/r.png", itemTitleColor: "#4b0082", phone: "904-547-5342", title: "Thomas Williams", label: "Thomas Williams" },
        { id: 4, parent: 3, level: 4, description: "GM, Infrastructure Server and IT Pro Audience Marketing", email: "davikirb@name.com", groupTitleColor: "#4169e1", image: "../images/photos/t.png", itemTitleColor: "#4b0082", phone: "614-395-7238", title: "David Kirby", label: "David Kirby" },
        { id: 5, parent: 3, level: 5, description: "GM, Name.com Experience Platforms and Solutions", email: "lynemalo@name.com", groupTitleColor: "#4169e1", image: "../images/photos/y.png", itemTitleColor: "#4b0082", phone: "540-822-3862", title: "Lynette Maloney", label: "Lynette Maloney" },
        { id: 6, parent: 3, level: 7, description: "GM, Core Infrastructure Solutions", email: "glenzeig@name.com", groupTitleColor: "#4169e1", image: "../images/photos/u.png", itemTitleColor: "#4b0082", phone: "920-665-7222", title: "Glen Zeigler", label: "Glen Zeigler" },
        { id: 7, parent: 1, level: 2, description: "GM, Patterns & Practices", email: "ionegall@name.com", groupTitleColor: "#4169e1", image: "../images/photos/i.png", itemTitleColor: "#4b0082", phone: "478-322-5539", title: "Ione Gallegos", label: "Ione Gallegos" },
        { id: 8, parent: 7, level: 3, description: "GM, TechNet and MSDN", email: "joseclar@name.com", groupTitleColor: "#4169e1", image: "../images/photos/o.png", itemTitleColor: "#4b0082", phone: "401-218-3019", title: "Jose Clark", label: "Jose Clark" },
        { id: 9, parent: 1, level: 3, description: "GM, Name Learning", email: "heatsimm@name.com", groupTitleColor: "#4169e1", image: "../images/photos/p.png", itemTitleColor: "#4b0082", phone: "620-368-3620", title: "Heather Simmons", label: "Heather Simmons" },
        { id: 10, parent: 7, level: 5, description: "GM, Platform Strategy", email: "stevlaco@name.com", groupTitleColor: "#4169e1", image: "../images/photos/a.png", itemTitleColor: "#4b0082", phone: "805-800-7397", title: "Steven Lacombe", label: "Steven Lacombe" },
        { id: 11, parent: 9, level: 4, description: "GM, Strategic Marketing and Communications", email: "nancsmit@name.com", groupTitleColor: "#4169e1", image: "../images/photos/s.png", itemTitleColor: "#4b0082", phone: "631-787-3495", title: "Nancy Smith", label: "Nancy Smith" },
        { id: 12, parent: 8, level: 5, description: "GM, DML Server Marketing", email: "jeankend@name.com", groupTitleColor: "#4169e1", image: "../images/photos/d.png", itemTitleColor: "#4b0082", phone: "949-453-0415", title: "Jean Kendall", label: "Jean Kendall" },
        { id: 13, parent: 11, level: 5, description: "GM, Application Platform and Development Marketing", email: "bradwhit@name.com", groupTitleColor: "#4169e1", image: "../images/photos/f.png", itemTitleColor: "#4b0082", phone: "502-528-6379", title: "Brad Whitt", label: "Brad Whitt" },
        { id: 14, parent: 11, level: 6, description: "VP, Software & Enterprise Management Division", email: "sarakemp@name.com", groupTitleColor: "#4169e1", image: "../images/photos/g.png", itemTitleColor: "#4b0082", phone: "918-257-4218", title: "Sara Kemp", label: "Sara Kemp" },
        { id: 15, parent: 11, level: 6, description: "GM, Systems Management Server", email: "briacruz@name.com", groupTitleColor: "#4169e1", image: "../images/photos/h.png", itemTitleColor: "#4b0082", phone: "320-833-9024", title: "Brian Cruz", label: "Brian Cruz" },
        { id: 16, parent: 14, level: 7, description: "GM, Software Management", email: "johndrak@name.com", groupTitleColor: "#4169e1", image: "../images/photos/j.png", itemTitleColor: "#4b0082", phone: "469-644-8543", title: "John Drake", label: "John Drake" },
        { id: 17, parent: 14, level: 7, description: "GM, Storage Platforms & Solutions", email: "patrperr@name.com", groupTitleColor: "#4169e1", image: "../images/photos/k.png", itemTitleColor: "#4b0082", phone: "781-515-5949", title: "Patrick Perry", label: "Patrick Perry" },
        { id: 18, parent: 14, level: 7, description: "GM, Manageability and Deployment", email: "maryspen@name.com", groupTitleColor: "#4169e1", image: "../images/photos/l.png", itemTitleColor: "#4b0082", phone: "605-892-8662", title: "Mary Spencer", label: "Mary Spencer" },
        { id: 19, parent: null, level: 3, description: "GM, Operations Manager", email: "thomdixo@name.com", groupTitleColor: "#4169e1", image: "../images/photos/z.png", itemTitleColor: "#4b0082", phone: "651-249-4047", title: "Thomas Dixon", label: "Thomas Dixon", groupTitle: "Root" },
        { id: 20, parent: 19, level: 4, description: "Sr. VP, Software Server System", email: "georduon@name.com", groupTitleColor: "#4169e1", image: "../images/photos/x.png", itemTitleColor: "#4b0082", phone: "434-406-2189", title: "George Duong", label: "George Duong" },
        { id: 21, parent: 19, level: 5, description: "GM, DML Server Strategy", email: "ralpmerc@name.com", groupTitleColor: "#4169e1", image: "../images/photos/c.png", itemTitleColor: "#4b0082", phone: "814-327-5895", title: "Ralph Mercer", label: "Ralph Mercer" },
        { id: 22, parent: 21, level: 7, description: "GM, User Experience", email: "howawill@name.com", groupTitleColor: "#4169e1", image: "../images/photos/v.png", itemTitleColor: "#4b0082", phone: "703-740-8612", title: "Howard Williams", label: "Howard Williams" },
        { id: 23, parent: 21, level: 7, description: "GM, DML Server Business Intelligence", email: "nathesco@name.com", groupTitleColor: "#4169e1", image: "../images/photos/b.png", itemTitleColor: "#4b0082", phone: "504-555-8165", title: "Nathalie Escobedo", label: "Nathalie Escobedo" },
        { id: 24, parent: 7, level: 6, description: "VP, Developer Division", email: "ashlrue@name.com", groupTitleColor: "#4169e1", image: "../images/photos/n.png", itemTitleColor: "#4b0082", phone: "515-324-4969", title: "Ashley Rue", label: "Ashley Rue" }
			];

      options.items = fillInvisibleLevels(items);

      options.cursorItem = 0;
      options.normalLevelShift = 20;
      options.dotLevelShift = 10;
      options.lineLevelShift = 10;
      options.normalItemsInterval = 20;
      options.dotItemsInterval = 10;
      options.lineItemsInterval = 5;
      options.buttonsPanelSize = 48;

      options.horizontalAlignment = primitives.HorizontalAlignmentType.Center;
      options.itemTitleSecondFontColor = primitives.Colors.White;
      options.pageFitMode = primitives.PageFitMode.None;
      options.orientationType = primitives.OrientationType.Left;
      options.hasSelectorCheckbox = primitives.Enabled.True;
      options.hasButtons = primitives.Enabled.True;
      options.leavesPlacementType = primitives.ChildrenPlacementType.Horizontal;
      options.childrenPlacementType = primitives.ChildrenPlacementType.Horizontal;
      options.arrowsDirection = primitives.GroupByType.Children;
      options.placeAdvisersAboveChildren = true;

      options.annotations = (new Array(10).fill(0)).map((_, index) => {
        return (index%2 == 0) ? {
            annotationType: primitives.AnnotationType.Level,
            levels: [index],
            title: "Level " + index.toString(),
            titleColor: primitives.Colors.RoyalBlue,
            offset: new primitives.Thickness(0, 0, 0, -1),
            lineWidth: new primitives.Thickness(0, 0, 0, 0),
            opacity:  0,
            borderColor: primitives.Colors.Gray,
            fillColor: primitives.Colors.Gray,
            lineType: primitives.LineType.Dotted
          } : {
            annotationType: primitives.AnnotationType.Level,
            levels: [index],
            title: "Level " + index.toString(),
            titleColor: primitives.Colors.RoyalBlue,
            offset: new primitives.Thickness(0, 0, 0, -1),
            lineWidth: new primitives.Thickness(0, 0, 0, 0),
            opacity:  0.08,
            borderColor: primitives.Colors.Gray,
            fillColor: primitives.Colors.Gray,
            lineType: primitives.LineType.Dotted
          };
      });
      control = primitives.OrgDiagram(document.getElementById("basicdiagram"), options);

      window.addEventListener('resize', function (event) {
        onWindowResize();
      });
    });

    function fillInvisibleLevels(items) {
      var hash = {};
      var maximumId = 0;
      items.forEach(item => {
        hash[item.id] = item;
        maximumId = Math.max(maximumId, item.id)
      })
      var invisibleItems = [];
      items.forEach(item => {
        var {id, parent, level} = item;
        if(level > 0) {
          var parentItem = hash[parent];
          var gap = (parentItem != null) ? (level - parentItem.level - 1) : level;
          while(gap > 0) {
            maximumId +=1;
            invisibleItems.push({ id: maximumId, parent: item.parent, level: level - gap, isVisible: false });
            item.parent = maximumId;
            gap-=1;
          }
        }
      });
      return [...items, ...invisibleItems];
    }

    function onWindowResize() {
      if (timer == null) {
        timer = window.setTimeout(function () {
          control.update(primitives.UpdateMode.Refresh);
          window.clearTimeout(timer);
          timer = null;
        }, 300);
      }
    }
  </script>
</head>

<body style="overflow:hidden;">
  <div id="basicdiagram"
    style="position: absolute; border-style: dotted; border-width: 0px; top: 0; right: 0; bottom: 0; left: 0;">
  </div>
</body>

</html>